/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable.git
version: 0.17.2
*/
!function(){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function a(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function n(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),a=0;for(e=0;e<n;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r}function l(t){return void 0===t}var t=function(){var t=function(){function t(){this._eventHandler={},this.options={}}var e=t.prototype;return e.trigger=function(t,e){void 0===e&&(e={});var n=this._eventHandler[t]||[];if(!(0<n.length))return!0;n=n.concat(),e.eventType=t;var r=!1,a=[e],i=0;e.stop=function(){r=!0},e.currentTarget=this;for(var o=arguments.length,s=new Array(2<o?o-2:0),l=2;l<o;l++)s[l-2]=arguments[l];for(1<=s.length&&(a=a.concat(s)),i=0;n[i];i++)n[i].apply(this,a);return!r},e.once=function(a,i){if("object"==typeof a&&l(i)){var t,e=a;for(t in e)this.once(t,e[t]);return this}if("string"==typeof a&&"function"==typeof i){var o=this;this.on(a,function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];i.apply(o,n),o.off(a,t)})}return this},e.hasOn=function(t){return!!this._eventHandler[t]},e.on=function(t,e){if("object"==typeof t&&l(e)){var n,r=t;for(n in r)this.on(n,r[n]);return this}if("string"==typeof t&&"function"==typeof e){var a=this._eventHandler[t];l(a)&&(this._eventHandler[t]=[],a=this._eventHandler[t]),a.push(e)}return this},e.off=function(t,e){if(l(t))return this._eventHandler={},this;if(l(e)){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var n,r=t;for(n in r)this.off(n,r[n]);return this}var a,i,o=this._eventHandler[t];if(o)for(a=0;void 0!==(i=o[a]);a++)if(i===e){o=o.splice(a,1);break}return this},t}();return t.VERSION="2.1.2",t}();function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map(function(t){return t.split(" ").map(function(t){return t?""+e+t:""}).join(" ")}).join(" ")}function e(n,t){return t.replace(/([^}{]*){/gm,function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,"."+n+"$1")+"{"})}function m(e,n){return function(t){t&&(e[n]=t)}}function o(e,n,r){return function(t){t&&(e[n][r]=t)}}function u(n,r){return function(t){var e=t.prototype;n.forEach(function(t){r(e,t)})}}var b=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,a=n.indexOf(t),i=-1===a?n.length:a;n[i]=t,r[i]=e},t}(),y=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),x="function"==typeof Map,f=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var w=function(){function t(t,e,n,r,a,i,o,s){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=a,this.maintained=i,this.changedBeforeAdded=o,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t,n,s,l,e=(t=this.changedBeforeAdded,n=this.fixed,s=[],l=[],t.forEach(function(t){var e=t[0],n=t[1],r=new f;s[e]=r,l[n]=r}),s.forEach(function(t,e){t.connect(s[e-1])}),t.filter(function(t,e){return!n[e]}).map(function(t,e){var n=t[0],r=t[1];if(n===r)return[0,0];var a=s[n],i=l[r-1],o=a.getIndex();return a.disconnect(),i?a.connect(i,i.next):a.connect(void 0,s[0]),[o,a.getIndex()]})),u=this.changed,c=[];this.cacheOrdered=e.filter(function(t,e){var n=t[0],r=t[1],a=u[e],i=a[0],o=a[1];if(n!==r)return c.push([i,o]),!0}),this.cachePureChanged=c},t}();function c(t,e,n){var r=x?Map:n?y:b,a=n||function(t){return t},i=[],o=[],s=[],l=t.map(a),u=e.map(a),c=new r,f=new r,p=[],d=[],h={},g=[],v=0,m=0;return l.forEach(function(t,e){c.set(t,e)}),u.forEach(function(t,e){f.set(t,e)}),l.forEach(function(t,e){var n=f.get(t);void 0===n?(++m,o.push(e)):h[n]=m}),u.forEach(function(t,e){var n=c.get(t);void 0===n?(i.push(e),++v):(s.push([n,e]),m=h[e]||0,p.push([n-m,e-v]),d.push(e===n),n!==e&&g.push([n,e]))}),o.reverse(),new w(t,e,i,o,g,s,p,d)}function p(t){if(!_)return"";var e=(_.body||_.documentElement).style,n=G.length;if(typeof e[t]!==P)return t;for(var r=0;r<n;++r){var a="-"+G[r]+"-"+t;if(typeof e[a]!==P)return a}return""}var d=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),n=c(this.list,e,this.findKeyCallback);return this.list=e,n},t}(),h="rgb",g="rgba",v="hsl",E="hsla",M=[h,g,v,E],S="function",D="property",C="array",z="object",O="string",R="number",P="undefined",_=typeof document!==P&&document,G=["webkit","ms","moz","o"],B=p("transform"),k=p("filter"),A=p("animation"),j=['"',"'",'\\"',"\\'"];function T(t){return typeof t===P}function q(t){return t&&typeof t===z}function ht(t){return Array.isArray(t)}function N(t){return typeof t===O}function I(t,e,n,r){for(var a=n;a<r;++a){var i=e[a].trim();if(i===t)return a;var o=a;if("("===i?o=I(")",e,a+1,r):-1<j.indexOf(i)&&(o=I(i,e,a+1,r)),-1===o)break;a=o}return-1}function Y(t,e){for(var n=t.split(/(\s*,\s*|\(|\)|"|'|\\"|\\'|\s+)/g).filter(Boolean),r=n.length,a=[],i=[],o=0;o<r;++o){var s=n[o].trim(),l=o;if("("===s)l=I(")",n,o+1,r);else{if(")"===s)throw new Error("invalid format");if(-1<j.indexOf(s))l=I(s,n,o+1,r);else if(s===e){i.length&&(a.push(i.join("")),i=[]);continue}}-1===l&&(l=r-1),i.push(n.slice(o,l+1).join("")),o=l}return i.length&&a.push(i.join("")),a}function X(t){return Y(t,",")}function W(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function F(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}function L(t,e,n){void 0===n&&(n=-1);for(var r=t.length,a=0;a<r;++a)if(e(t[a],a,t))return a;return n}function H(t){var e=t.replace("#",""),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),i=parseInt(e.substring(6,8),16)/255;return isNaN(i)&&(i=1),[n,r,a,i]}function K(t){if("#"===t.charAt(0))return 4===t.length||5===t.length?H((u=(l=t).charAt(1),c=l.charAt(2),f=l.charAt(3),p=l.charAt(4),["#",u,u,c,c,f,f,p,p].join(""))):H(t);if(-1!==t.indexOf("(")){var e=W(t),n=e.prefix,r=e.value;if(!n||!r)return;var a=X(r),i=[],o=a.length;switch(n){case h:case g:for(var s=0;s<o;++s)i[s]=parseFloat(a[s]);return i;case v:case E:for(s=0;s<o;++s)-1!==a[s].indexOf("%")?i[s]=parseFloat(a[s])/100:i[s]=parseFloat(a[s]);return function(t){var e=t[0],n=t[1],r=t[2];e<0&&(e+=360*Math.floor((Math.abs(e)+360)/360)),e%=360;var a,i=(1-Math.abs(2*r-1))*n,o=i*(1-Math.abs(e/60%2-1)),s=r-i/2;return e<60?a=[i,o,0]:e<120?a=[o,i,0]:e<180?a=[0,i,o]:e<240?a=[0,o,i]:e<300?a=[o,0,i]:e<360&&(a=[i,0,o]),[Math.round(255*(a[0]+s)),Math.round(255*(a[1]+s)),Math.round(255*(a[2]+s)),3<t.length?t[3]:1]}(i)}}var l,u,c,f,p}function V(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function U(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function $(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function J(t,e,n,r){t.addEventListener(e,n,r)}function Z(t,e,n){t.removeEventListener(e,n)}var Q=function(t,e){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function tt(t,e){function n(){this.constructor=t}Q(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var et=function(){return(et=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function nt(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]])}return n}function rt(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function at(a,i){var o=Object.keys(a),n=Object.keys(i),t=c(o,n,function(t){return t}),r={},s={},l={};return t.added.forEach(function(t){var e=n[t];r[e]=i[e]}),t.removed.forEach(function(t){var e=o[t];s[e]=a[e]}),t.maintained.forEach(function(t){var e=t[0],n=o[e],r=[a[n],i[n]];a[n]!==i[n]&&(l[n]=r)}),{added:r,removed:s,changed:l}}function it(t){t.forEach(function(t){t()})}function ot(t){var e=0;return t.map(function(t){return null==t?"$compat"+ ++e:""+t})}function st(t,e,n,r){return N(t)?new dt("text_"+t,e,n,r,null,{}):new("string"==typeof t.type?gt:t.type.prototype.render?yt:mt)(t.type,e,n,r,t.ref,t.props)}function lt(t){var e=t.className,n=nt(t,["className"]);return null!=e&&(n.class=e),delete n.style,delete n.children,n}function ut(t,e){if(!e)return t;for(var n in e)T(t[n])&&(t[n]=e[n]);return t}function ct(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=e||{},i=a.key,o=a.ref,s=nt(a,["key","ref"]);return{type:t,key:i,ref:o,props:et(et({},s),{children:function e(t){var n=[];return t.forEach(function(t){n=n.concat(ht(t)?e(t):t)}),n}(n).filter(function(t){return null!=t})})}}var ft=function(){function t(t,e,n,r,a,i){void 0===i&&(i={}),this.type=t,this.key=e,this.index=n,this.container=r,this.ref=a,this.props=i,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,r){if(this.base&&!N(e)&&!r&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);var a=this.props;return N(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?a:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function pt(t){var e={},n={};for(var r in t)0===r.indexOf("on")?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}tt(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){n?e._mounted():e._updated()}),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(ft),gt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.events={},t}tt(t,e);var n=t.prototype;return n.addEventListener=function(t,e){var n=this.events;n[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,n[t])},n.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},n._should=function(t){return rt(this.props,t)},n._render=function(t,e){var n=this,r=!this.base;r&&(this.base=document.createElement(this.type)),St(this,this._providers,this.props.children,t,null);var a=this.base,i=pt(e),o=i.attributes,s=i.events,l=pt(this.props),u=l.attributes,c=l.events;return function(t,e,n){var r=at(t,e),a=r.added,i=r.removed,o=r.changed;for(var s in a)n.setAttribute(s,a[s]);for(var s in o)n.setAttribute(s,o[s][1]);for(var s in i)n.removeAttribute(s)}(lt(o),lt(u),a),function(t,e,n){var r=at(t,e),a=r.added,i=r.removed,o=r.changed;for(var s in i)n.removeEventListener(s);for(var s in a)n.addEventListener(s,a[s]);for(var s in o)n.removeEventListener(s),n.addEventListener(s,o[s][1]);for(var s in i)n.removeEventListener(s)}(s,c,this),function(t,e,n){var r=n.style,a=at(t,e),i=a.added,o=a.removed,s=a.changed;for(var l in i)r[l]=i[l];for(var l in s)r[l]=s[l][1];for(var l in o)r[l]=""}(e.style||{},this.props.style||{},a),t.push(function(){r?n._mounted():n._updated()}),!0},n._unmount=function(){var t=this.events,e=this.base;for(var n in t)e.removeEventListener(n,t[n]);this._providers.forEach(function(t){t._unmount()}),this.events={},e.parentNode.removeChild(e)},t}(ft);function vt(t){if(!t)return null;if(t instanceof Node)return t;var e=t._provider._providers;return e.length?vt(e[0].base):null}var mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}tt(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return St(this,this._providers,e?[e]:[],t),!0},n._unmount=function(){this._providers.forEach(function(t){t._unmount()})},e}(ft),bt=function(n){function t(t){var e=n.call(this,"container","container",0,null)||this;return e.base=t,e}tt(t,n);var e=t.prototype;return e._render=function(){return!0},e._unmount=function(){},t}(ft),yt=function(o){function t(t,e,n,r,a,i){return void 0===i&&(i={}),o.call(this,t,e,n,r,a,ut(i,t.defaultProps))||this}tt(t,o);var e=t.prototype;return e._should=function(t,e){return this.base.shouldComponentUpdate(ut(t,this.type.defaultProps),e||this.base.state)},e._render=function(t,e,n){var r=this;this.props=ut(this.props,this.type.defaultProps);var a=!this.base;a?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var i=this.base,o=i.state,s=i.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),St(this,this._providers,s?[s]:[],t,n,null),t.push(function(){a?(r._mounted(),i.componentDidMount()):(r._updated(),i.componentDidUpdate(e,o))})},e._setState=function(t){t&&(this.base.state=t)},e._unmount=function(){this._providers.forEach(function(t){t._unmount()}),this.base.componentWillUnmount()},t}(ft),xt=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var r=[],a=this._provider;St(a.container,[a],[a.original],r,et(et({},this.state),t),n)&&(e&&r.push(e),it(r))},e.forceUpdate=function(t){this.setState(this.state,t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},t}(),wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e.prototype.shouldComponentUpdate=function(t,e){return rt(this.props,t)||rt(this.state,e)},e}(xt),Et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}tt(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.element,n=t.container;this._portalProvider=new bt(n),Dt(e,n,this._portalProvider)},n.componentDidUpdate=function(){var t=this.props;Dt(t.element,t.container,this._portalProvider)},n.componentWillUnmount=function(){Dt(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(wt);function Mt(a,o,i){var s=i.map(function(t){return N(t)?null:t.key}),t=c(ot(o.map(function(t){return t.key})),ot(s),function(t){return t});t.removed.forEach(function(t){o.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var e=t[0],n=t[1],r=o.splice(e,1)[0];o.splice(n,0,r);var a=vt(r.base),i=vt(o[n+1]&&o[n+1].base);a&&a.parentNode.insertBefore(a,i)}),t.added.forEach(function(t){o.splice(t,0,st(i[t],s[t],t,a))});var e=t.maintained.filter(function(t){t[0];var e=t[1],n=i[e],r=o[e];return(N(n)?"text_"+n:n.type)!==r.type?(r._unmount(),o.splice(e,1,st(n,s[e],e,a)),!0):(r.index=e,!1)});return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),a=0;for(e=0;e<n;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r}(t.added,e.map(function(t){t[0];return t[1]}))}function St(a,i,n,r,o,s){var t=Mt(a,i,n),e=i.filter(function(t,e){return t._update(r,n[e],o,s)}),l=function t(e){if(!e)return null;var n=e.base;return n instanceof Node?n:t(e.container)}(a);return l&&t.reverse().forEach(function(t){var e=i[t],n=vt(e.base);if(n&&l!==n&&!n.parentNode){var r=function(t,e){for(var n=t._providers,r=n.length,a=e.index+1;a<r;++a){var i=vt(n[a].base);if(i)return i}return null}(a,e);l.insertBefore(n,r)}}),0<e.length}function Dt(t,e,n){void 0===n&&(n=e.__REACT_COMPAT__);var r,a,i,o,s=!!n;return n=n||new bt(e),a=t?[t]:[],o=[],St(r=n,r._providers,a,o,i),it(o),s||(e.__REACT_COMPAT__=n),n}function Ct(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),Dt(t,e,r),n&&n()}function zt(t,e){return ct(Et,{element:t,container:e})}var Ot=("undefined"!=typeof window&&window||{}).navigator,Rt={browser:[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Whale/,identity:"Whale",versionSearch:"Whale"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/MiuiBrowser/,identity:"MIUI Browser",versionSearch:"MiuiBrowser"},{criteria:/SamsungBrowser/,identity:"Samsung Internet",versionSearch:"SamsungBrowser"},{criteria:/SAMSUNG /,identity:"Samsung Internet",versionSearch:"Version"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"Android Browser",versionSearch:"Version"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],os:[{criteria:/Windows Phone/,identity:"Windows Phone",versionSearch:"Windows Phone"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/Windows NT/,identity:"Window",versionSearch:"Windows NT"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"},{criteria:/Tizen/,identity:"Tizen"},{criteria:/Web0S/,identity:"WebOS"}],webview:[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],defaultString:{browser:{version:"-1",name:"unknown"},os:{version:"-1",name:"unknown"}}};function Pt(t,e){for(var n=[],r=0;r<t.length;r++)e(t[r])&&n.push(t[r]);return n}var _t=void 0;function Gt(t,e){return e&&e.test?!!e.test(t):-1<t.indexOf(e)}function Bt(t,e){var n=Pt(t,function(t){return Gt(_t,t.criteria)})[0];return n&&n.identity||e.name}function kt(t,r){return Pt(t,function(t){var e=t.criteria,n=new RegExp(t.identity,"i").test(r);return!!(e?n&&Gt(_t,e):n)})[0]}function At(t,e){var n=Rt.defaultString.browser.version,r=new RegExp("("+t+")","i").exec(e);if(!r)return n;var a=r.index,i=r[0];if(-1<a){var o=a+i.length+1;n=e.substring(o).split(" ")[0].replace(/_/g,".").replace(/;|\)/g,"")}return n}function jt(t){var e;if(t)return At((e=t,kt(Rt.browser,e)||{criteria:e,versionSearch:e,identity:e}).versionSearch||t,_t)}function Tt(){var t=Rt.webview,e=void 0;return function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(Pt(t,function(t){return Gt(_t,t.criteria)}),function(t){return e=At(t.browserVersionSearch,_t),!(!Gt(_t,t.webviewToken)&&!Gt(e,t.webviewBrowserVersion))})}function qt(t){var e,n=(e=t,kt(Rt.os,e)||{}),r=Rt.defaultString.os.version,a=void 0;if(t){if(n.versionAlias)return n.versionAlias;var i=new RegExp("("+(n.versionSearch||t)+")\\s([\\d_\\.]+|\\d_0)","i");return i.exec(_t)&&(a=i.exec(_t)[2].replace(/_/g,".").replace(/;|\)/g,"")),a||r}}function Nt(){var t=Bt(Rt.os,Rt.defaultString.os);return{name:t,version:qt(t)}}function It(){var t=Bt(Rt.browser,Rt.defaultString.browser);return{name:t,version:jt(t),webview:Tt()}}function Yt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ot.userAgent;_t=t;var e={os:Nt(),browser:It(),isMobile:-1!==_t.indexOf("Mobi")};return e.browser.name=e.browser.name.toLowerCase(),e.os.name=e.os.name.toLowerCase(),e.os.version=e.os.version.toLowerCase(),"ios"===e.os.name&&e.browser.webview&&(e.browser.version="-1"),e}function Xt(t,e,n,r,a,i){for(var o=n;o<r;++o)t[o]+=t[a+o-n]*i,e[o]+=e[a+o-n]*i}function Wt(t,e,n,r,a){for(var i=n;i<r;++i){var o=t[i],s=e[i];t[i]=t[a+i-n],t[a+i-n]=o,e[i]=e[a+i-n],e[a+i-n]=s}}function Ft(t,e,n,r,a){for(var i=n;i<r;++i)t[i]/=a,e[i]/=a}function Lt(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),a=0;a<n;++a)r[a*n+e-1]=0,r[(e-1)*n+a]=0;return r[(e-1)*(n+1)]=1,r}function Ht(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=se(e),a=0;a<e;++a){var i=e*a,o=e*(a+1),s=i+a;if(0===n[s])for(var l=a+1;l<e;++l)if(n[e*l+a]){Wt(n,r,i,o,e*l);break}if(!n[s])return[];Ft(n,r,i,o,n[s]);for(l=0;l<e;++l){var u=e*l,c=u+e,f=n[u+a];0!==f&&a!==l&&Xt(n,r,u,c,i,-f)}}return r}function Kt(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var a=0;a<e;++a)n[a*e+r]=t[e*r+a];return n}function Vt(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=Math.atan2(r,n);return 0<=a?a:a+2*Math.PI}function Ut(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function $t(t,e,n){if(void 0===e&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=se(n),a=Math.min(e,n),i=0;i<a-1;++i){for(var o=0;o<a-1;++o)r[i*n+o]=t[i*e+o];r[(i+1)*n-1]=t[(i+1)*e-1],r[(n-1)*n+i]=t[(e-1)*e+i]}return r[n*n-1]=t[e*e-1],r}function Jt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=se(e);return t.forEach(function(t){r=Zt(r,t,e)}),r}function Zt(t,e,n){var r=[],a=t.length/n,i=e.length/a;if(!a)return e;if(!i)return t;for(var o=0;o<n;++o)for(var s=0;s<i;++s)for(var l=r[o*i+s]=0;l<a;++l)r[o*i+s]+=t[o*a+l]*e[l*i+s];return r}function Qt(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=[],a=t.length/n,i=e.length/a,o=0;o<n;++o)for(var s=0;s<i;++s)for(var l=r[o+s*i]=0;l<a;++l)r[o+s*i]+=t[o+l*a]*e[l+s*i];return r}function te(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length,r=0,a=n-1;0<=a;--a)r+=t[a];return n?r/n:0}function ee(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),a=0;a<n;++a)r[a]=r[a]+e[a];return r}function ne(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),a=0;a<n;++a)r[a]=r[a]-e[a];return r}function re(t,e,n){void 0===n&&(n=e.length);var r=Zt(t,e,n),a=r[n-1];return r.map(function(t){return t/a})}function ae(t,e){return re(oe(e,3),Ut(t,3))}function ie(t){return 9===t.length?[t[0],t[3],t[1],t[4],t[2],t[5]]:Kt(t)}function oe(t,e){var n=Math.cos(t),r=Math.sin(t),a=se(e);return a[0]=n,a[1]=-r,a[e]=r,a[e+1]=n,a}function se(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function le(t,e){for(var n=se(e),r=Math.min(t.length,e-1),a=0;a<r;++a)n[(e+1)*a]=t[a];return n}function ue(t,e){for(var n=se(e),r=Math.min(t.length,e-1),a=0;a<r;++a)n[e*(a+1)-1]=t[a];return n}function ce(t,e,n,r,a,i,o,s){var l=t[0],u=t[1],c=e[0],f=e[1],p=n[0],d=n[1],h=r[0],g=r[1],v=a[0],m=a[1],b=i[0],y=i[1],x=o[0],w=o[1],E=s[0],M=s[1],S=Ht([l,u,1,0,0,0,-v*l,-v*u,0,0,0,l,u,1,-m*l,-m*u,c,f,1,0,0,0,-b*c,-b*f,0,0,0,c,f,1,-y*c,-y*f,p,d,1,0,0,0,-x*p,-x*d,0,0,0,p,d,1,-w*p,-w*d,h,g,1,0,0,0,-E*h,-E*g,0,0,0,h,g,1,-M*h,-M*g],8);if(!S.length)return[];var D=Zt(S,[v,m,b,y,x,w,E,M],8);return D[8]=1,$t(D,3,4)}Yt.VERSION="2.1.5";var fe=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function pe(l){var u,c="rCS"+fe(l).toString(36),f=0;return{className:c,inject:function(t){var e,n,r,a,i,o=function(t){if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(t),s=0===f;return(o||s)&&(n=c,r=l,a=o,(i=document.createElement("style")).setAttribute("type","text/css"),i.innerHTML=r.replace(/([^}{]*){/gm,function(t,e){return X(e).map(function(t){return-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?""+t.replace(/\:host/g,"."+n):"."+n+" "+t}).join(", ")+"{"}),(a||document.head||document.body).appendChild(i),e=i),s&&(u=e),o||++f,{destroy:function(){o?(t.removeChild(e),e=null):(0<f&&--f,0===f&&u&&(u.parentNode.removeChild(u),u=null))}}}}}var de=function(t,e){return(de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var he=function(){return(he=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};var ge=function(){return(ge=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function ve(t,e,n,r){var a=Me(t),i=Me(e),o=Me(r);return be(Se(r[0],De(a,o)),Se(r[0],De(i,o)),n[0])}function me(t){return t.touches?we(t.touches):[Ee(t)]}function be(t,e,n){var r=t.clientX,a=t.clientY;return{clientX:r,clientY:a,deltaX:r-e.clientX,deltaY:a-e.clientY,distX:r-n.clientX,distY:a-n.clientY}}function ye(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function xe(t,n,r){return t.map(function(t,e){return be(t,n[e],r[e])})}function we(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(Ee(t[r]));return n}function Ee(t){return{clientX:t.clientX,clientY:t.clientY}}function Me(t){return 1===t.length?t[0]:{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function Se(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function De(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var Ce=function(){function t(t,e){var c=this;void 0===e&&(e={}),this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.targets=[],this.onDragStart=function(t){if(c.flag||!1!==t.cancelable){var e,n=c.options,r=n.container,a=n.pinchOutside,i=n.dragstart,o=n.preventRightClick,s=c.isTouch;if(!c.flag&&s&&a&&setTimeout(function(){J(r,"touchstart",c.onDragStart)}),c.flag&&s&&a&&Z(r,"touchstart",c.onDragStart),(e=t).touches&&2<=e.touches.length){if(!c.flag&&t.touches.length!==t.changedTouches.length)return;c.pinchFlag||c.onPinchStart(t)}if(!c.flag){var l=c.startClients[0]?c.startClients:me(t);c.customDist=[0,0],c.flag=!0,c.isDrag=!1,c.startClients=l,c.prevClients=l,c.datas={};var u=be(l[c.movement=0],c.prevClients[0],c.startClients[0]);(o&&3===t.which||!1===(i&&i(ge({type:"dragstart",datas:c.datas,inputEvent:t},u))))&&(c.startClients=[],c.prevClients=[],c.flag=!1),c.flag&&t.preventDefault()}}},this.onDrag=function(t,e){if(c.flag){var n=me(t);c.pinchFlag&&c.onPinch(t,n);var r=c.move([0,0],t,n);if(r&&(r.deltaX||r.deltaY)){var a=c.options.drag;a&&a(ge({},r,{isScroll:!!e,inputEvent:t}))}}},this.onDragEnd=function(t){if(c.flag){var e=c.options,n=e.dragend,r=e.pinchOutside,a=e.container;c.isTouch&&r&&Z(a,"touchstart",c.onDragStart),c.pinchFlag&&c.onPinchEnd(t),c.flag=!1;var i=c.prevClients,o=c.startClients,s=c.pinchFlag?ve(i,i,o,c.startPinchClients):be(i[0],i[0],o[0]);c.startClients=[],c.prevClients=[],n&&n(ge({type:"dragend",datas:c.datas,isDrag:c.isDrag,inputEvent:t},s))}};var n=[].concat(t);this.options=ge({container:1<n.length?window:n[0],preventRightClick:!0,preventDefault:!0,pinchThreshold:0,events:["touch","mouse"]},e);var r=this.options,a=r.container,i=r.events;if(this.isTouch=-1<i.indexOf("touch"),this.isMouse=-1<i.indexOf("mouse"),this.customDist=[0,0],this.targets=n,this.isMouse&&(n.forEach(function(t){J(t,"mousedown",c.onDragStart)}),J(a,"mousemove",this.onDrag),J(a,"mouseup",this.onDragEnd)),this.isTouch){var o={passive:!1};n.forEach(function(t){J(t,"touchstart",c.onDragStart,o)}),J(a,"touchmove",this.onDrag,o),J(a,"touchend",this.onDragEnd,o),J(a,"touchcancel",this.onDragEnd,o)}}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isFlag=function(){return this.flag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(e,n,t,r){void 0===r&&(r=!0),this.flag&&(this.startClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),this.prevClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),r&&this.onDrag(t,!0))},e.move=function(t,e,n){var r=t[0],a=t[1];void 0===n&&(n=this.prevClients);var i=this.customDist,o=this.prevClients,s=this.startClients,l=this.pinchFlag?ve(n,o,s,this.startPinchClients):be(n[0],o[0],s[0]);i[0]+=r,i[1]+=a,l.deltaX+=r,l.deltaY+=a;var u=l.deltaX,c=l.deltaY;return l.distX+=i[0],l.distY+=i[1],this.movement+=Math.sqrt(u*u+c*c),this.prevClients=n,this.isDrag=!0,ge({type:"drag",datas:this.datas},l,{isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},e.onPinchStart=function(t){var e,n,r=this.options,a=r.pinchstart,i=r.pinchThreshold;if(!(this.isDrag&&this.movement>i)){var o=we(t.changedTouches);if(this.pinchFlag=!0,(e=this.startClients).push.apply(e,o),(n=this.prevClients).push.apply(n,o),this.startDistance=ye(this.prevClients),this.startPinchClients=this.prevClients.slice(),a){var s=this.prevClients,l=Me(s),u=be(l,l,l);a(ge({type:"pinchstart",datas:this.datas,touches:xe(s,s,s)},u,{inputEvent:t}))}}},e.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){this.isPinch=!0;var n=this.options.pinch;if(n){var r=this.prevClients,a=this.startClients,i=be(Me(e),Me(r),Me(a)),o=ye(e);n(ge({type:"pinch",datas:this.datas,touches:xe(e,r,a),scale:o/this.startDistance,distance:o},i,{inputEvent:t}))}}},e.onPinchEnd=function(t){if(this.flag&&this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.options.pinchend;if(n){var r=this.prevClients,a=this.startClients,i=be(Me(r),Me(r),Me(a));n(ge({type:"pinchend",datas:this.datas,isPinch:e,touches:xe(r,r,a)},i,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}}},e.unset=function(){var e=this,t=this.targets,n=this.options.container;this.isMouse&&(t.forEach(function(t){Z(t,"mousedown",e.onDragStart)}),Z(n,"mousemove",this.onDrag),Z(n,"mouseup",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){Z(t,"touchstart",e.onDragStart)}),Z(n,"touchstart",this.onDragStart),Z(n,"touchmove",this.onDrag),Z(n,"touchend",this.onDragEnd),Z(n,"touchcancel",this.onDragEnd))},t}(),ze=function(t,e){return(ze=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Oe(t){var e=t.container;return[e.scrollLeft,e.scrollTop]}var Re=function(e){function t(){this.constructor=n}var n,r;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.startRect=null,t.startPos=[],t.prevTime=0,t.timer=0,t}ze(n=a,r=e),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var i=a.prototype;return i.dragStart=function(t,e){var n=e.container.getBoundingClientRect(),r=n.top,a=n.left,i=n.width,o=n.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:r,left:a,width:i,height:o}},i.drag=function(t,e){var n=this,r=t.clientX,a=t.clientY,i=e.container,o=e.threshold,s=void 0===o?0:o,l=e.throttleTime,u=void 0===l?0:l,c=e.getScrollPosition,f=void 0===c?Oe:c,p=this.startRect,d=this.startPos,h=Date.now?Date.now():(new Date).getTime(),g=Math.max(u+this.prevTime-h,0),v=[0,0];if(p.top>a-s?(d[1]>p.top||a<d[1])&&(v[1]=-1):p.top+p.height<a+s&&(d[1]<p.top+p.height||a>d[1])&&(v[1]=1),p.left>r-s?(d[0]>p.left||r<d[0])&&(v[0]=-1):p.left+p.width<r+s&&(d[0]<p.left+p.width||r>d[0])&&(v[0]=1),clearTimeout(this.timer),!v[0]&&!v[1])return!1;if(0<g)return this.timer=window.setTimeout(function(){n.drag(t,e)},g),!1;this.prevTime=h;var m=f({container:i,direction:v});this.trigger("scroll",{container:i,direction:v,inputEvent:t});var b=f({container:i,direction:v}),y=b[0]-m[0],x=b[1]-m[1];return!(!y&&!x)&&(this.trigger("move",{offsetX:v[0]?y:0,offsetY:v[1]?x:0,inputEvent:t}),u&&(this.timer=window.setTimeout(function(){n.drag(t,e)},u)),!0)},i.dragEnd=function(){clearTimeout(this.timer)},a}(t),Pe=function(t,e){return(Pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var _e,Ge="function"==typeof Map?void 0:(_e=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++_e)}),Be=function(e){function t(){this.constructor=n}var n,r;function a(t){return void 0===t&&(t=[]),e.call(this,t,Ge)||this}return Pe(n=a,r=e),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t),a}(d),ke=function(t,e){return(ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ae(t,e){function n(){this.constructor=t}ke(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var je=function(){return(je=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function Te(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+e+'deg);transform-origin: 16px 16px"></path></svg>'}var qe=Yt(),Ne=-1<qe.os.name.indexOf("ios")||-1<qe.browser.name.indexOf("safari"),Ie="moveable-",Ye=e(Ie,"\n{\n\tposition: fixed;\n\twidth: 0;\n\theight: 0;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --zoom: 1;\n    --zoompx: 1px;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    width: calc(14 * var(--zoompx));\n    height: calc(14 * var(--zoompx));\n    margin-top: calc(-7 * var(--zoompx));\n    margin-left: calc(-7 * var(--zoompx));\n    border: calc(2 * var(--zoompx)) solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n    height: 1px;\n    width: var(--zoompx);\n    height: var(--zoompx);\n\tbackground: #4af;\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top: var(--zoompx) dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left: var(--zoompx) dashed #4af;\n}\n.line.dashed:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #4af;\n    font-size: 12px;\n    font-weight: bold;\n}\n.line.dashed.horizontal:before, .line.gap.horizontal:before {\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 5px;\n}\n.line.dashed.vertical:before, .line.gap.vertical:before {\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.line.rotation-line {\n\theight: 40px;\n    width: 1px;\n    transform-origin: 50% calc(100% - 0.5px);\n    top: -40px;\n    width: var(--zoompx);\n    height: calc(40 * var(--zoompx));\n    top: calc(-40 * var(--zoompx));\n    transform-origin: 50% calc(100% - 0.5 * var(--zoompx));\n}\n.line.rotation-line .control {\n\tborder-color: #4af;\n\tbackground:#fff;\n    cursor: alias;\n    left: 50%;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n    width: calc(2 * var(--zoompx));\n}\n.line.horizontal.bold {\n    height: 2px;\n    height: calc(2 * var(--zoompx));\n}\n\n.line.gap {\n    background: #f55;\n}\n.line.gap:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n    width: calc(12 * var(--zoompx));\n    height: calc(12 * var(--zoompx));\n    margin-top: calc(-6 * var(--zoompx));\n    margin-left: calc(-6 * var(--zoompx));\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+(n=Te(1,e=t),r=Te(2,e),a=45*Math.round(e/45)%180,"cursor:"+(i=135==a?"nwse-resize":45==a?"nesw-resize":90==a?"ew-resize":"ns-resize")+";cursor: url('"+n+"') 16 16, "+i+";cursor: -webkit-image-set(url('"+n+"') 1x, url('"+r+"') 2x) 16 16, "+i+";")+"\n}\n";var e,n,r,a,i}).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n"+(Ne?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n"),Xe=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],We=1e-7,Fe=Math.pow(10,10),Le=-Fe,He={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},Ke={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135};function Ve(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.apply(void 0,[Ie].concat(t))}function Ue(){return se(3)}function $e(t,e,n){return Jt(e,ue(n,e),t,ue(n.map(function(t){return-t}),e))}function Je(s){return Ze(On(s,":before")).map(function(t,e){var n,r,a=F(t),i=a.value,o=a.unit;return i*(n=s,r=0===e,"%"!==o?1:rn(n.ownerSVGElement)[r?"width":"height"]/100)})}function Ze(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function Qe(t,e,n){for(var r=document.body,a=!t||n?t:t.parentElement,i=!1,o="relative";a&&a!==r;){e===a&&(i=!0);var s=On(a),l=s.transform;if("static"!==(o=s.position)||l&&"none"!==l)break;a=a.parentElement,o="relative"}return{isStatic:"static"===o,isEnd:i||!a||a===r,offsetParent:a||r}}function tn(t,e,n,r){var a,i=t.tagName.toLowerCase(),o=t.offsetLeft,s=t.offsetTop;if(r){var l=(e||document.documentElement).getBoundingClientRect();o-=l.left,s-=l.top}var u,c=T(o),f=!c;return f||"svg"===i?u=Ze(n).map(function(t){return parseFloat(t)}):(u=Ne?Je(t):Ze(n).map(function(t){return parseFloat(t)}),f=!0,"g"===i?s=o=0:(o=(a=function(t,e){if(!t.getBBox)return[0,0];var n=t.getBBox(),r=rn(t.ownerSVGElement),a=n.x-r.x,i=n.y-r.y;return[a,i,e[0]-a,e[1]-i]}(t,u))[0],s=a[1],u[0]=a[2],u[1]=a[3])),{isSVG:c,hasOffset:f,offset:[o,s],origin:u}}function en(t,e,n){var r,a,i,o,s=t,l=[],u=!1,c=!1,f=3,p=Qe(e,e,!0).offsetParent;for(n&&(u=t===e,10<n.length&&(c=!0,f=4),e=t.parentElement);s&&!u;){var d=On(s),h=s.tagName.toLowerCase(),g=d.position,v="fixed"===g,m=d.transform,b=6===(i=(o=m)&&"none"!==o?q(o)?o:W(o).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0]).length?[i[0],i[2],i[4],i[1],i[3],i[5],0,0,1]:Kt(i),y=b.length;if(!c&&16===y){c=!0,f=4;for(var x=l.length,w=0;w<x;++w)l[w]=$t(l[w],3,4)}c&&9===y&&(b=$t(b,3,4));var E=tn(s,e,d,v),M=E.hasOffset,S=E.isSVG,D=E.origin,C=E.offset,z=C[0],O=C[1];"svg"===h&&a&&l.push(an(s,f),se(f));var R=Qe(s,e),P=R.offsetParent,_=R.isEnd,G=R.isStatic;Ne&&M&&!S&&G&&"relative"===g&&(z-=P.offsetLeft,O-=P.offsetTop,u=u||_);var B=0,k=0;if(M&&p!==P&&(B=P.clientLeft,k=P.clientTop),l.push($e(b,f,D),ue(M?[z-s.scrollLeft+B,O-s.scrollTop+k]:[s,D],f)),a=a||b,r=r||D,u||v)break;s=P,u=_}return{offsetContainer:p,matrixes:l,targetMatrix:a=a||se(f),transformOrigin:r=r||[0,0],is3d:c}}function nn(t,e,n,r,a,i){var o=en(t,e,r),s=o.matrixes,l=o.is3d,u=o.targetMatrix,c=o.transformOrigin,f=en(o.offsetContainer,n,a),p=f.matrixes,d=f.is3d,h=d||l?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,v=e||document.body,m=r?$t(r,i,h):se(h),b=u,y=a?$t(a,i,h):se(h),x=r?$t(r,i,h):se(h),w=se(h),E=s.length,M=Qe(v,v,!0).offsetParent;p.reverse(),s.reverse(),!l&&d&&(b=$t(b,3,4),s.forEach(function(t,e){s[e]=$t(t,3,4)})),l&&!d&&p.forEach(function(t,e){p[e]=$t(t,3,4)}),a||p.forEach(function(t){y=Zt(y,t,h)}),s.forEach(function(t,e){var n;E-2===e&&(x=m.slice()),E-1===e&&(w=m.slice()),q(t[h-1])&&(n=function(t,e,n,r,a,i){var o,s=hn(t),l=s[0],u=s[1],c=e.getBoundingClientRect(),f=t.getBoundingClientRect(),p=f.left-c.left+e.scrollLeft,d=f.top-c.top+e.scrollTop,h=f.width,g=f.height,v=Jt(n,a,i),m=un(v,l,u,n),b=m.left,y=m.top,x=m.width,w=m.height,E=on(v,r,n),M=ne(E,[b,y]),S=[p+M[0]*h/x,d+M[1]*g/w],D=[0,0],C=0;for(;++C<10;){var z=Ht(a,n);o=ne(on(z,S,n),on(z,E,n)),D[0]=o[0],D[1]=o[1];var O=un(Jt(n,a,ue(D,n),i),l,u,n),R=O.left,P=O.top,_=R-p,G=P-d;if(Math.abs(_)<2&&Math.abs(G)<2)break;S[0]-=_,S[1]-=G}return D.map(function(t){return Math.round(t)})}(t[h-1],M,h,t[2*h-1],m,s[e+1]),t[h-1]=n[0],t[2*h-1]=n[1]),m=Zt(m,t,h)});var S=!g&&l;b=b||se(S?4:3);var D=(S?"matrix3d":"matrix")+"("+ie(g&&16===b.length?$t(b,4,3):b)+")";return[y=Lt(y,h,h),x,w,m,b,D,c,l||d]}function rn(t){var e=t.clientWidth,n=t.clientHeight,r=t.viewBox,a=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||e,height:a.height||n}}function an(t,e){var n=t.clientWidth,r=t.clientHeight,a=rn(t),i=a.width,o=a.height,s=n/i,l=r/o,u=t.preserveAspectRatio.baseVal,c=u.align,f=u.meetOrSlice,p=[0,0],d=[s,l],h=[0,0];if(1!==c){var g=(c-2)%3,v=Math.floor((c-2)/3);p[0]=i*g/2,p[1]=o*v/2;var m=2===f?Math.max(l,s):Math.min(s,l);d[0]=m,d[1]=m,h[0]=(n-i)/2*g,h[1]=(r-o)/2*v}var b=le(d,e);return b[e-1]=h[0],b[2*e-1]=h[1],$e(b,e,p)}function on(t,e,n){return re(t,Ut(e,n),n)}function sn(e,t,n,r){return[[0,0],[t,0],[0,n],[t,n]].map(function(t){return on(e,t,r)})}function ln(t){var e=t.map(function(t){return t[0]}),n=t.map(function(t){return t[1]}),r=Math.min.apply(Math,e),a=Math.min.apply(Math,n),i=Math.max.apply(Math,e),o=Math.max.apply(Math,n);return{left:r,top:a,right:i,bottom:o,width:i-r,height:o-a}}function un(t,e,n,r){return ln(sn(t,e,n,r))}function cn(t,e,n,r){var a=16===t.length?4:3,i=sn(t,n,r,a),o=i[0],s=o[0],l=o[1],u=i[1],c=u[0],f=u[1],p=i[2],d=p[0],h=p[1],g=i[3],v=g[0],m=g[1],b=on(t,e,a),y=b[0],x=b[1],w=Math.min(s,c,d,v),E=Math.min(l,f,h,m),M=Math.max(s,c,d,v),S=Math.max(l,f,h,m);y=y-w||0,x=x-E||0;var D=[((s=s-w||0)+(c=c-w||0)+(d=d-w||0)+(v=v-w||0))/4,((l=l-E||0)+(f=f-E||0)+(h=h-E||0)+(m=m-E||0))/4],C=Vt(D,[s,l]),z=Vt(D,[c,f]);return[[w,E,M,S],[y,x],[[s,l],[c,f],[d,h],[v,m]],C<z&&z-C<Math.PI||z<C&&z-C<-Math.PI?1:-1]}function fn(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function pn(t,e,n){void 0===n&&(n=Vt(t,e));var r,a,i=(r=t,fn([(a=e)[0]-r[0],a[1]-r[1]]));return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+n+"rad)",width:i+"px"}}function dn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e.length;return{transform:"translate("+e.reduce(function(t,e){return t+e[0]},0)/r+"px, "+e.reduce(function(t,e){return t+e[1]},0)/r+"px) rotate("+t+"rad)"}}function hn(t,e,n,r){void 0===e&&(e=window.getComputedStyle(t)),void 0===r&&(r=n||"border-box"===e.boxSizing);var a=t.offsetWidth,i=t.offsetHeight,o=!T(a);if((n||r)&&o)return[a,i];if(a=t.clientWidth,i=t.clientHeight,o||a||i)return n||r?[a+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0),i+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)]:[a-(parseFloat(e.paddingLeft)||0)-(parseFloat(e.paddingRight)||0),i-(parseFloat(e.paddingTop)||0)-(parseFloat(e.paddingBottom)||0)];var s=t.getBBox();return[s.width,s.height]}function gn(t,e){return Vt(0<e?t[0]:t[1],0<e?t[1]:t[0])}function vn(t,e,n,r,a){var i,o,s,l,u,c=0,f=0,p=0,d=0,h=[0,0],g=[[0,0],[0,0],[0,0],[0,0]],v=Ue(),m=Ue(),b=Ue(),y=Ue(),x=Ue(),w=0,E=0,M=[0,0],S=1,D=1,C=!1,z="",O=[0,0],R=mn(),P=mn(),_=0,G=a?a.beforeMatrix:void 0,B=a?a.rootMatrix:void 0,k=a?a.is3d?4:3:void 0;if(t){if(a)w=a.width,E=a.height;else{var A=On(t);w=t.offsetWidth,E=t.offsetHeight,T(w)&&(w=(i=hn(t,A,!0))[0],E=i[1])}v=(o=nn(t,e,r,G,B,k))[0],b=o[1],m=o[2],y=o[3],x=o[4],z=o[5],M=o[6],C=o[7],c=(l=(s=cn(y,M,w,E))[0])[0],f=l[1],p=l[2],d=l[3],h=s[1],g=s[2],S=s[3];var j;j=(u=cn(m,ee(M,function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e-1;++r)n[r]=t[(r+1)*e-1];return n[e-1]=0,n}(x,C?4:3)),w,E))[0],O=u[1],D=u[3],O=[O[0]+j[0]-c,O[1]+j[1]-f],R=bn(t),P=bn(Qe(n,n,!0).offsetParent||document.body,!0),_=gn([g[0],g[1]],S)}return{rotation:_,targetClientRect:R,containerClientRect:P,beforeDirection:D,direction:S,target:t,left:c,top:f,right:p,bottom:d,pos1:g[0],pos2:g[1],pos3:g[2],pos4:g[3],width:w,height:E,rootMatrix:v,beforeMatrix:b,offsetMatrix:m,targetMatrix:x,matrix:y,targetTransform:z,is3d:C,beforeOrigin:O,origin:h,transformOrigin:M}}function mn(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function bn(t,e){var n=t.getBoundingClientRect(),r=n.left,a=n.width,i=n.top,o=n.bottom,s={left:r,right:n.right,top:i,bottom:o,width:a,height:n.height};return e&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight),s}function yn(t){if(t){var e=t.getAttribute("data-direction");if(e){var n=[0,0];return-1<e.indexOf("w")&&(n[0]=-1),-1<e.indexOf("e")&&(n[0]=1),-1<e.indexOf("n")&&(n[1]=-1),-1<e.indexOf("s")&&(n[1]=1),n}}}function xn(t,e){return[ee(e,t[0]),ee(e,t[1]),ee(e,t[2]),ee(e,t[3])]}function wn(t){var e=t.left,n=t.top;return xn([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function En(t,e){return e?Math.round(t/e)*e:t}function Mn(n,r){return n.forEach(function(t,e){n[e]=En(n[e],r)}),n}function Sn(t,e){t[e]&&(t[e].unset(),t[e]=null)}function Dn(t,e,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Cn(t,e,n){var r=e.datas;return r.datas||(r.datas={}),je({},n,{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,datas:r.datas})}function zn(t,e,n,r){return r&&Hn.prototype.triggerEvent.call(t,e,n),t.triggerEvent(e,n)}function On(t,e){return window.getComputedStyle(t,e)}function Rn(t,n,r){var a={},i={};return t.filter(function(e){var t=e.name;if(a[t]||!n.some(function(t){return e[t]}))return!1;if(!r&&e.ableGroup){if(i[e.ableGroup])return!1;i[e.ableGroup]=!0}return a[t]=!0})}function Pn(t,e,n){return t*(e?n:1/n)}function _n(t,e,n){return t*(e?1/n:n)}function Gn(t,e){return t===e||null==t&&null==e}function Bn(i,o){var s=[],l=[];return i.forEach(function(t,e){var n=o(t,e,i),r=l.indexOf(n),a=s[r]||[];-1===r&&(l.push(n),s.push(a)),a.push(t)}),s}function kn(t){return t.reduce(function(t,e){return t.concat(e)},[])}function An(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return Math.abs(e)-Math.abs(t)}),t[0]}function jn(t,e,n){return re(Ht(t,n),Ut(e,n),n)}function Tn(t,e){var n,r=t.is3d?4:3;return n=jn(t.rootMatrix,[e.distX,e.distY],r),e.distX=n[0],e.distY=n[1],e}function qn(t,e,n,r,a){return ne(on(t,ee(n,e),a),r)}function Nn(a,t,e,n,r,i,o){var s="Start"===r;if(s&&-1<n.indexOf("Control")&&!i.isRequest&&a.areaElement===i.inputEvent.target)return!1;var l=""+e+n+r,u=""+e+n+"Condition",c="End"===r,f=-1<r.indexOf("After");s&&a.updateRect(r,!0,!1),""!==r||f||Tn(a.state,i);var p=-1<n.indexOf("Group"),d=a[t];if(!d.length)return!1;var h,g,v,m,b,y,x,w,E,M,S,D,C,z,O,R=d.filter(function(t){return t[l]}),P=i.datas,_=P.render||(P.render={}),G=je({},i,{datas:_,originalDatas:P}),B=R.filter(function(t){var e=s&&t[u],n=t.name,r=P[n]||(P[n]={});return!(e&&!e(i,a))&&t[l](a,je({},i,{datas:r,originalDatas:P}))}),k=B.length;if(s){if(R.length&&!k)return a.state.dragger=null,a.moveables&&a.moveables.forEach(function(t){t.state.dragger=null}),!1;D=p,z=Cn(S=a,C=G,{isPinch:!!C.isPinch}),O=D?"Group":"",D&&(z.targets=S.props.targets),zn(S,"onRender"+O+"Start",z)}else c?(x=p,E=Cn(y=a,w=G,{isPinch:!!w.sPinch,isDrag:w.isDrag}),M=x?"Group":"",x&&(E.targets=y.props.targets),zn(y,"onRender"+M+"End",E)):k&&(g=p,m=Cn(h=a,v=G,{isPinch:!!v.isPinch}),b=g?"Group":"",g&&(m.targets=h.props.targets),zn(h,"onRender"+b,m));if(c&&(a.state.dragger=null),a.isUnmounted)return!1;!s&&k&&(B.some(function(t){return t.updateRect})&&!p?a.updateRect(r,!1,!1):a.updateRect(r,!0,!1)),(!s&&k||c&&!k)&&!o&&a.forceUpdate(),s||c||f||!k||Nn(a,t,e,n,r+"After",i)}function In(n,t,e){var r=n.controlBox.getElement(),a=[];a.push(r),n.props.dragArea||a.push(t);function i(t){var e=t.inputEvent.target;return e===n.areaElement||!n.isMoveableElement(e)||-1<e.className.indexOf("moveable-area")||-1<e.className.indexOf("moveable-padding")}return Yn(n,a,"targetAbles",e,{dragstart:i,pinchstart:i})}function Yn(a,t,i,o,s){void 0===s&&(s={});var e=a.props,n=e.pinchOutside,r=e.pinchThreshold,l={container:window,pinchThreshold:r,pinchOutside:n};return["drag","pinch"].forEach(function(r){["Start","","End"].forEach(function(e){var n=""+r+e.toLowerCase();l[n]=function(t){return!(s[n]&&!s[n](t))&&Nn(a,i,r,o,e,t)}})}),new Ce(t,l)}var Xn,Wn,Fn=(Xn="div",Wn=pe(Ye),function(t){function e(){this.constructor=n}var n,r;function a(){return null!==t&&t.apply(this,arguments)||this}return de(n=a,r=t),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e),a.prototype.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]])}return n}(t,["className"]);return ct(Xn,he({ref:m(this,"element"),className:n+" "+Wn.className},r))},a.prototype.componentDidMount=function(){this.injectResult=Wn.inject(this.element)},a.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},a.prototype.getElement=function(){return this.element},a}(xt));function Ln(t,e,n,r){var a=Vt(e,n),i=t?En(a/Math.PI*180,15)%180:-1;return ct("div",{key:"line"+r,className:Ve("line","direction",t),"data-rotation":i,"data-direction":t,style:pn(e,n,a)})}var Hn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={container:null,target:null,beforeMatrix:Ue(),matrix:Ue(),targetMatrix:Ue(),offsetMatrix:Ue(),targetTransform:"",is3d:!1,left:0,top:0,width:0,height:0,transformOrigin:[0,0],direction:1,beforeDirection:1,beforeOrigin:[0,0],origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],renderPoses:[[0,0],[0,0],[0,0],[0,0]],targetClientRect:mn(),containerClientRect:mn(),rotation:0},t.targetAbles=[],t.controlAbles=[],t.isUnmounted=!1,t}Ae(t,e);var n=t.prototype;return n.render=function(){var t=this.props,e=this.state,n=t.edge,r=t.parentPosition,a=t.className,i=t.target,o=t.zoom;this.checkUpdate(),this.updateRenderPoses();var s=r||{left:0,top:0},l=s.left,u=s.top,c=e.left,f=e.top,p=e.target,d=e.direction,h=e.renderPoses,g=t.targets,v=(g&&g.length||i)&&p;return ct(Fn,{ref:m(this,"controlBox"),className:Ve("control-box",-1===d?"reverse":"")+" "+a,style:{position:"absolute",display:v?"block":"none",transform:"translate("+(c-l)+"px, "+(f-u)+"px) translateZ(50px)","--zoom":o,"--zoompx":o+"px"}},this.renderAbles(),Ln(n?"n":"",h[0],h[1],0),Ln(n?"e":"",h[1],h[3],1),Ln(n?"w":"",h[0],h[2],2),Ln(n?"s":"",h[2],h[3],3))},n.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container;this.updateEvent(t),n||e||this.updateRect("End",!1,!0)},n.componentDidUpdate=function(t){this.updateEvent(t)},n.componentWillUnmount=function(){this.isUnmounted=!0,Sn(this,"targetDragger"),Sn(this,"controlDragger")},n.getContainer=function(){var t=this.props,e=t.parentMoveable;return t.container||e&&e.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(Ie)},n.dragStart=function(t){return this.targetDragger&&this.targetDragger.onDragStart(t),this},n.hitTest=function(t){var e;if(t instanceof Element){var n=t.getBoundingClientRect();e={left:n.left,top:n.top,width:n.width,height:n.height}}else e=je({width:0,height:0},t);var r=this.state.targetClientRect,a=r.left,i=r.top,o=r.width,s=r.height,l=e.left,u=e.top,c=l+e.width,f=u+e.height,p=a+o,d=i+s,h=Math.max(a,l),g=Math.min(p,c),v=Math.max(i,u),m=Math.min(d,f);if(g<h||m<v)return 0;var b=(Math.min(p,c)-Math.max(l,a))*(Math.min(d,f)-Math.max(i,u));return Math.min(100,(g-h)*(m-v)/b*100)},n.isInside=function(t,e){var n=this.state,r=n.pos1,a=n.pos2,i=n.pos3,o=n.pos4,s=n.target,l=n.targetClientRect;if(!s)return!1;var u,c,f,p,d,h,g,v=l.left,m=l.top;return p=i,d=o,h=[Dn(u=[t-v,e-m],c=r,f=a),Dn(u,f,p),Dn(u,p,c)],g=[Dn(u,f,p),Dn(u,p,d),Dn(u,d,f)],!!(h.every(function(t){return 0<=t})||h.every(function(t){return t<=0})||g.every(function(t){return 0<=t})||g.every(function(t){return t<=0}))},n.updateRect=function(t,e,n){void 0===n&&(n=!0);var r=this.props,a=r.parentMoveable,i=this.state,o=i.target||this.props.target,s=this.getContainer(),l=a?a.props.rootContainer:r.rootContainer;this.updateState(vn(o,s,s,l||s,e?i:void 0),!a&&n)},n.updateEvent=function(t){var e=this.controlBox.getElement(),n=this.targetAbles.length,r=this.controlAbles.length,a=this.props,i=a.dragTarget||a.target,o=t.dragTarget||t.target,s=a.dragArea,l=t.dragArea,u=!s&&o!==i,c=!n&&this.targetDragger||u||l!==s;c&&(Sn(this,"targetDragger"),this.updateState({dragger:null})),r||Sn(this,"controlDragger"),i&&n&&!this.targetDragger&&(this.targetDragger=In(this,i,"")),!this.controlDragger&&r&&(this.controlDragger=Yn(this,e,"controlAbles","Control")),c&&this.unsetAbles()},n.isDragging=function(){return!!this.targetDragger&&this.targetDragger.isFlag()||!!this.controlDragger&&this.controlDragger.isFlag()},n.updateTarget=function(t){this.updateRect(t,!0)},n.getRect=function(){var t=this.state,e=wn(this.state),n=e[0],r=e[1],a=e[2],i=e[3],o=ln(e),s=t.width,l=t.height,u=o.width,c=o.height,f=o.left,p=o.top,d=[t.left,t.top],h=ee(d,t.origin);return{width:u,height:c,left:f,top:p,pos1:n,pos2:r,pos3:a,pos4:i,offsetWidth:s,offsetHeight:l,beforeOrigin:ee(d,t.beforeOrigin),origin:h}},n.request=function(e,t,n){void 0===t&&(t={});var r=this.props,a=r.ables,i=r.groupable,o=a.filter(function(t){return t.name===e})[0];if(this.isDragging()||!o||!o.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,l=o.request(this),u=l.isControl?"controlAbles":"targetAbles",c=(i?"Group":"")+(l.isControl?"Control":""),f={request:function(t){return Nn(s,u,"drag",c,"",je({},l.request(t),{isRequest:!0}),n),this},requestEnd:function(){return Nn(s,u,"drag",c,"End",je({},l.requestEnd(),{isRequest:!0})),this}};return Nn(s,u,"drag",c,"Start",je({},l.requestStart(t),{isRequest:!0}),n),t.isInstant?f.request(t).requestEnd():f},n.updateRenderPoses=function(){var t=this.state,e=this.props,n=t.beforeOrigin,r=t.transformOrigin,a=t.matrix,i=t.is3d,o=t.pos1,s=t.pos2,l=t.pos3,u=t.pos4,c=t.left,f=t.top,p=e.padding||{},d=p.left,h=void 0===d?0:d,g=p.top,v=void 0===g?0:g,m=p.bottom,b=void 0===m?0:m,y=p.right,x=void 0===y?0:y,w=i?4:3,E=e.groupable?n:ee(n,[c,f]);t.renderPoses=[ee(o,qn(a,[-h,-v],r,E,w)),ee(s,qn(a,[x,-v],r,E,w)),ee(l,qn(a,[-h,b],r,E,w)),ee(u,qn(a,[x,b],r,E,w))]},n.checkUpdate=function(){var t=this.props,e=t.target,n=t.container,r=t.parentMoveable,a=this.state,i=a.target,o=a.container;(i||e)&&(this.updateAbles(),Gn(i,e)&&Gn(o,n)||(this.updateState({target:e,container:n}),r||!n&&!this.controlBox||this.updateRect("End",!1,!1)))},n.triggerEvent=function(t,e){var n=this.props[t];return n&&n(e)},n.unsetAbles=function(){var e=this;this.targetAbles.filter(function(t){return!!t.unset&&(t.unset(e),!0)}).length&&this.forceUpdate()},n.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,r=n.triggerAblesSimultaneously,a=t.filter(function(t){return t&&n[t.name]}),i="drag"+e+"ControlStart",o=Rn(a,["drag"+e+"Start","pinch"+e+"Start"],r),s=Rn(a,[i],r);this.targetAbles=o,this.controlAbles=s},n.updateState=function(t,e){if(e)this.setState(t);else{var n=this.state;for(var r in t)n[r]=t[r]}},n.renderAbles=function(){var a,i,o,s,e=this,n=this.props,t=n.ables,r=n.triggerAblesSimultaneously,l=t.filter(function(t){return t&&n[t.name]}),u={createElement:ct};return a=kn(Rn(l,["render"],r).map(function(t){return(0,t.render)(e,u)||[]})).filter(function(t){return t}),i=function(t){return t.key},o=[],s={},a.forEach(function(t,e){var n=i(t,e,a),r=s[n];r||(r=[],s[n]=r,o.push(r)),r.push(t)}),o.map(function(t){return t[0]})},t.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0},t}(wt);function Kn(t){return Vt([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}var Vn={name:"pinchable",updateRect:!0,props:{pinchable:Boolean,pinchOutside:Boolean,pinchThreshold:Number},pinchStart:function(n,r){var a=r.datas,t=r.touches,e=r.targets,i=n.props,o=i.pinchable,s=i.ables;if(!o)return!1;var l="onPinch"+(e?"Group":"")+"Start",u="drag"+(e?"Group":"")+"ControlStart",c=(!0===o?n.controlAbles:s.filter(function(t){return-1<o.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[u]}),f=Cn(n,r,{});e&&(f.targets=e);var p=zn(n,l,f);a.isPinch=!1!==p,a.ables=c;var d=a.isPinch;if(!d)return!1;var h=Kn(t);return c.forEach(function(t){if(a[t.name+"Datas"]={},t[u]){var e=je({},r,{datas:a[t.name+"Datas"],parentRotate:h,isPinch:!0});t[u](n,e)}}),n.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},d},pinch:function(e,n){var r=n.datas,t=n.scale,a=n.distance,i=n.touches,o=n.inputEvent,s=n.targets;if(r.isPinch){var l=Kn(i),u=a*(1-1/t),c=Cn(e,n,{});s&&(c.targets=s),zn(e,"onPinch"+(s?"Group":""),c);var f=r.ables,p="drag"+(s?"Group":"")+"Control";return f.forEach(function(t){t[p]&&t[p](e,je({},n,{datas:r[t.name+"Datas"],inputEvent:o,parentDistance:u,parentRotate:l,isPinch:!0}))}),c}},pinchEnd:function(e,n){var r=n.datas,a=n.isPinch,i=n.inputEvent,t=n.targets;if(r.isPinch){var o="onPinch"+(t?"Group":"")+"End",s=Cn(e,n,{isDrag:a});t&&(s.targets=t),zn(e,o,s);var l=r.ables,u="drag"+(t?"Group":"")+"ControlEnd";return l.forEach(function(t){t[u]&&t[u](e,je({},n,{isDrag:a,datas:r[t.name+"Datas"],inputEvent:i,isPinch:!0}))}),a}},pinchGroupStart:function(t,e){return this.pinchStart(t,je({},e,{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,je({},e,{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,je({},e,{targets:t.props.targets}))}};function Un(t,e,n,r,a){var i=t.dragger.move(e,n),o=i.originalDatas||i.datas,s=o.draggable||(o.draggable={});return je({},a?Tn(t,i):i,{isDrag:!0,isPinch:!!r,parentEvent:!0,datas:s})}var $n=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var e=t.prototype;return e.dragStart=function(t,e){return this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},je({},this.move(t,e),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,r;return this.isFlag?(n=this.prevX+t[0],r=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],r=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=n,clientY:this.prevY=r,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentDragger:this}},t}();function Jn(t,a,i,o,e,s){var l=!!i.match(/Start$/g),u=!!i.match(/End$/g),c=e.inputEvent,f=e.isPinch,p=e.datas,n=t.moveables.map(function(t,e){var n={};n=l?(new $n).dragStart(o,c):(t.state.dragger||(t.state.dragger=p.childDraggers[e]),Un(t.state,o,c,f,s));var r=a[i](t,je({},n,{parentFlag:!0}));return u&&(t.state.dragger=null),r});return l&&(p.childDraggers=t.moveables.map(function(t){return t.state.dragger})),n}function Zn(t,i,o,e,s,l){var n=i.name,u=e[n]||(e[n]=[]),c=!!o.match(/End$/g);return t.moveables.map(function(t,e){var n=u[e]||(u[e]={}),r=typeof s===S?s(t,n):s,a=i[o](t,je({},r,{datas:n,parentFlag:!0}));return a&&l&&l(t,n,a,e),c&&(t.state.dragger=null),a})}function Qn(t,e){var n=e.datas,r=t.state,a=r.matrix,i=r.beforeMatrix,o=r.is3d,s=r.left,l=r.top,u=r.origin,c=r.offsetMatrix,f=r.targetMatrix,p=r.transformOrigin,d=o?4:3;n.is3d=o,n.matrix=a,n.targetMatrix=f,n.beforeMatrix=i,n.offsetMatrix=c,n.transformOrigin=p,n.inverseMatrix=Ht(a,d),n.inverseBeforeMatrix=Ht(i,d),n.absoluteOrigin=Ut(ee([s,l],u),d),n.startDragBeforeDist=re(n.inverseBeforeMatrix,n.absoluteOrigin,d),n.startDragDist=re(n.inverseMatrix,n.absoluteOrigin,d)}function tr(t,e){var n=t.datas,r=t.distX,a=t.distY,i=n.inverseBeforeMatrix,o=n.inverseMatrix,s=n.is3d,l=n.startDragBeforeDist,u=n.startDragDist,c=s?4:3;return ne(re(e?i:o,ee(n.absoluteOrigin,[r,a]),c),e?l:u)}function er(t){var e=[];return 0<=t[1]&&(0<=t[0]&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(0<=t[0]&&e.push(1),t[0]<=0&&e.push(0)),e}function nr(e,t){return er(t).map(function(t){return e[t]})}function rr(t,e){var n=nr(t,e);return[te.apply(void 0,n.map(function(t){return t[0]})),te.apply(void 0,n.map(function(t){return t[1]}))]}function ar(t,e){var n=t[0],r=t[1],a=t[2];return rr([t[3],a,r,n],e)}function ir(t,e,n,r,a,i){var o=ar(sn(e,n,r,a),i);return[t[0]-o[0],t[1]-o[1]]}function or(t,e,n,r){return Zt(t,$e(e,r,n),r)}function sr(t,e){var n=t.transformOrigin,r=t.offsetMatrix,a=t.is3d?4:3;return or(r,Zt(t.targetMatrix,le(e,a),a),n,a)}function lr(t,e,n,r,a,i){var o,s,l,u,c,f,p=t.props.groupable,d=t.state,h=d.transformOrigin,g=d.targetMatrix,v=d.offsetMatrix,m=d.is3d,b=d.width,y=d.height,x=d.left,w=d.top,E=m?4:3,M=p?x:0,S=p?w:0;return ne(ir(a,or(v,g,(s=e,l=n,void 0===(u=b)&&(u=s),void 0===(c=y)&&(c=l),void 0===(f=h)&&(f=[0,0]),(o=i)?o.map(function(t,e){var n=F(t),r=n.value,a=n.unit,i=e?c:u,o=e?l:s;return"%"===t||isNaN(r)?o*(i?f[e]/i:0):"%"!==a?r:o*r/100}):f),E),e,n,E,r),[M,S])}function ur(t,e){return n=wn(t.state),r=e,ar([n[0],n[1],n[2],n[3]],r);var n,r}function cr(t){return t.isRequest?t.parentDirection:V(t.inputEvent.target,Ve("direction"))}function fr(t,e,p,d,n,r){var h=n[0],g=n[1],a=r[0],i=r[1],v=[],o=d?0:1,m="vertical"===e?"horizontal":"vertical",b=Bn(t.filter(function(t){return t.type===e}),function(t){return t.element}).map(function(t){return t[0]}).filter(function(t){var e=t.pos,n=t.sizes;return e[o]<=i&&a<=e[o]+n[o]});return b.forEach(function(t){var c=t.pos[d],f=c+t.sizes[d];b.forEach(function(t){var e=t.pos,n=t.sizes,r=t.element,a=e[d],i=a+n[d],o=0,s=0,l=!0;if(f<=a)h<(o=i-(s=f-a))-p&&(l=!1);else{if(!(i<=c))return;(o=a-(s=c-i))+p<g&&(l=!1)}if(l&&v.push({pos:"vertical"==m?[o,e[1]]:[e[0],o],element:r,sizes:n,size:0,type:m,gap:s,gapGuidelines:b}),f<=h&&g<=a){var u=(a+f-(g-h))/2;0<=En(h-(u-p),.1)&&v.push({pos:"vertical"==m?[u,e[1]]:[e[0],u],element:r,sizes:n,size:0,type:m,gap:f-h,gapGuidelines:b})}})}),v}function pr(t,e,n,r,a){var i=function(t){var e=t.state,n=e.guidelines,r=e.containerClientRect,a=r.scrollHeight,i=r.scrollWidth,o=t.props,s=o.snapHorizontal,l=void 0===s||s,u=o.snapVertical,c=void 0===u||u,f=o.snapGap,p=void 0===f||f,d=o.verticalGuidelines,h=o.horizontalGuidelines,g=o.snapThreshold,v=void 0===g?5:g,m=n.slice();if(p){var b=ln(wn(t.state)),y=b.top,x=b.left,w=b.bottom,E=b.right,M=n.filter(function(t){return t.element});m.push.apply(m,fr(M,"horizontal",v,0,[x,E],[y,w]).concat(fr(M,"vertical",v,1,[y,w],[x,E])))}return l&&h&&h.forEach(function(t){m.push({type:"horizontal",pos:[0,En(t,.1)],size:i})}),c&&d&&d.forEach(function(t){m.push({type:"vertical",pos:[En(t,.1),0],size:a})}),m}(t),o=t.props,s=o.snapElement,l=void 0===s||s,u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var a=t[r];if(!T(a))return a}return t[n]}(a,o.snapThreshold,5);return{vertical:hr(i,"vertical",e,u,r,l),horizontal:hr(i,"horizontal",n,u,r,l)}}function dr(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],a=r.offset,i=r.dist,o=r.guideline;return{isSnap:e,offset:a,dist:i,pos:n.pos,guideline:o}}function hr(e,o,t,s,l,u){if(!e||!e.length)return{isSnap:!1,posInfos:[]};var a="vertical"===o?0:1,n=t.map(function(r){var t=e.map(function(t){var e=t.pos,n=r-e[a];return{offset:n,dist:Math.abs(n),guideline:t}}).filter(function(t){var e=t.guideline,n=t.dist,r=e.type,a=e.center,i=e.element;return!(!u&&i||!l&&a||r!==o||s<n)}).sort(function(t,e){return t.dist-e.dist});return{pos:r,guidelineInfos:t}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist});return{isSnap:0<n.length,posInfos:n}}function gr(t,l){return t.slice().sort(function(t,e){var n=t.sign[l],r=e.sign[l],a=t.offset[l],i=e.offset[l],o=Math.abs(a),s=Math.abs(i);return n?r?t.isBound&&e.isBound?s-o:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?o-s:t.isSnap?-1:e.isSnap||o<We?1:s<We?-1:o-s:-1:1})[0]}function vr(t,e){var n=te(e[0][0],e[1][0]),r=te(e[0][1],e[1][1]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function mr(t,e){var n,r,a=e[0],i=e[1],o=i[0]-a[0],s=i[1]-a[1];if(o)if(s){n=s/o*(t[0]-a[0])+a[1],r=t[1]}else n=a[1],r=t[1];else n=a[0],r=t[0];return n-r}function br(t,n,r){void 0===r&&(r=We);var a=mr(t[0],n)<=0;return t.slice(1).every(function(t){var e=mr(t,n);return e<=0==a||Math.abs(e)<=r})}function yr(t,e,n,r,a){return void 0===a&&(a=0),r&&e-a<=t||!r&&t<=n+a?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function xr(t,e,n,r){var a=t[0],i=t[1],o=e[0],s=e[1],l=i[1]-a[1],u=i[0]-a[0],c=s[1]-o[1];if(s[0]-o[0]){if(!c&&l){var f=l/u;return yr(u?(o[1]-a[1])/f+a[0]:a[0],o[0],s[0],n,r)}}else if(u)return yr(l?l/u*(o[0]-a[0])+a[1]:a[1],o[1],s[1],n,r);return{isBound:!1,offset:0}}function wr(c,t,f,p){return t.map(function(t){var n=t[0],e=t[1],r=t[2],a=function(t,e,n){var r=t.props.innerBounds;if(!r)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var a=r.left,i=r.top,o=r.width,s=r.height,l=[[a,i],[a,i+s]],u=[[a,i],[a+o,i]],c=[[a+o,i],[a+o,i+s]],f=[[a,i+s],[a+o,i+s]],p=vr(n,e),d=p.horizontal,h=p.vertical;if(br([n,[a,i],[a+o,i],[a,i+s],[a+o,i+s]],e))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=xr(e,u,h),v=xr(e,f,h),m=xr(e,l,d),b=xr(e,c,d),y=g.isBound&&v.isBound,x=g.isBound||v.isBound,w=m.isBound&&b.isBound,E=m.isBound||b.isBound,M=An(g.offset,v.offset),S=An(m.offset,b.offset),D=[0,0],C=!1;return{isAllBound:Math.abs(S)<Math.abs(M)?(D=[M,0],C=x,y):(D=[0,S],C=E,w),isVerticalBound:x,isHorizontalBound:E,isBound:C,offset:D}}(c,[e,r],f),i=a.isBound,o=a.offset,s=a.isVerticalBound,l=a.isHorizontalBound,u=tr({datas:p,distX:o[0],distY:o[1]}).map(function(t,e){return t*(n[e]?2/n[e]:0)});return{sign:n,isBound:i,isVerticalBound:s,isHorizontalBound:l,isSnap:!1,offset:u}})}function Er(t,e,n){var r,a,i,o,s,l,u,c,f,p,d,h,g,v=wr(t,Mr(e,[0,0],!1).map(function(t){var e=t[0],n=t[1],r=t[2];return[e.map(function(t){return 2*Math.abs(t)}),n,r]}),rr(e,[0,0]),n),m=gr(v,0),b=gr(v,1),y=0,x=0,w=m.isVerticalBound||b.isVerticalBound,E=m.isHorizontalBound||b.isHorizontalBound;return(w||E)&&(a={datas:n,distX:-m.offset[0],distY:-b.offset[1]},o=a.datas,s=a.distX,l=a.distY,u=o.beforeMatrix,c=o.matrix,f=o.is3d,p=o.startDragBeforeDist,d=o.startDragDist,h=o.absoluteOrigin,g=f?4:3,y=(r=ne(re(i?u:c,ee(i?p:d,[s,l]),g),h))[0],x=r[1]),{vertical:{isBound:w,offset:y},horizontal:{isBound:E,offset:x}}}function Mr(a,t,e){return r=e,i=[],o=(n=t)[0],s=n[1],o&&s?i.push([[0,2*s],n,[-o,s]],[[2*o,0],n,[o,-s]]):o?(i.push([[2*o,0],[o,1],[o,-1]]),r&&i.push([[0,-1],[o,-1],[-o,-1]],[[0,1],[o,1],[-o,1]])):s?(i.push([[0,2*s],[1,s],[-1,s]]),r&&i.push([[-1,0],[-1,s],[-1,-s]],[[1,0],[1,s],[1,-s]])):i.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),i.map(function(t){var e=t[0],n=t[1],r=t[2];return[e,rr(a,n),rr(a,r)]});var n,r,i,o,s}function Sr(t,e,n,r){var a=r?t.map(function(t){return ae(t,r)}):t,i=[n].concat(e);return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some(function(t,e){return!br(i,t)})}function Dr(t,e,n,r,a){var i=t.props.innerBounds,o=a*Math.PI/180;if(!i)return[];var s=i.left,l=i.top,u=i.width,c=i.height,f=s-r[0],p=s+u-r[0],d=l-r[1],h=l+c-r[1],g=[[f,d],[p,d],[f,h],[p,h]],v=rr(n,[0,0]);if(!Sr(n,g,v,0))return[];var m=[],b=g.map(function(t){return[fn(t),Vt([0,0],t)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(t){var a=Vt([0,0],function(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];if(!r)return[e[0],0];if(!a)return[0,e[1]];var i=a/r,o=-i*e[0]+e[1];return[-o/(i+1/i),o/(i*i+1)]}(t)),i=function(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!a)return Math.abs(e[1]);var i=a/r;return Math.abs((-i*e[0]+e[1])/Math.sqrt(Math.pow(i,2)+1))}(t);m.push.apply(m,b.filter(function(t){var e=t[0];return e&&i<=e}).map(function(t){var e=t[0],n=t[1],r=Math.acos(e?i/e:0);return[o+(n+r)-a,o+(n-r)-a]}).reduce(function(t,e){return t.push.apply(t,e),t},[]).filter(function(t){return!Sr(e,g,v,t)}).map(function(t){return En(180*t/Math.PI,We)}))}),m}function Cr(t,e,n){var r=t.props.bounds||{},a=r.left,i=r.top,o=r.right,s=r.bottom,l={left:void 0===a?-1/0:a,top:void 0===i?-1/0:i,right:void 0===o?1/0:o,bottom:void 0===s?1/0:s};return{vertical:zr(l,e,!0),horizontal:zr(l,n,!1)}}function zr(t,e,n){var r=t[n?"left":"top"],a=t[n?"right":"bottom"],i=Math.min.apply(Math,e),o=Math.max.apply(Math,e);return i<r+1?{isBound:!0,offset:i-r,pos:r}:a-1<o?{isBound:!0,offset:o-a,pos:a}:{isBound:!1,offset:0,pos:0}}function Or(t,e,n){return(n?t.map(function(t){return ae(t,n)}):t).some(function(t){return t[0]<e.left&&.1<Math.abs(t[0]-e.left)||t[0]>e.right&&.1<Math.abs(t[0]-e.right)||t[1]<e.top&&.1<Math.abs(t[1]-e.top)||t[1]>e.bottom&&.1<Math.abs(t[1]-e.bottom)})}function Rr(t,u,n,e,r){var a=t.props.bounds,c=r*Math.PI/180;if(!a)return[];var i=a.left,o=void 0===i?-1/0:i,s=a.top,l=void 0===s?-1/0:s,f=a.right,p=void 0===f?1/0:f,d=a.bottom,h=void 0===d?1/0:d,g=o-e[0],v=p-e[0],m=l-e[1],b=h-e[1],y={left:g,top:m,right:v,bottom:b};if(!Or(n,y,0))return[];var x=[];return[[g,0],[v,0],[m,1],[b,1]].forEach(function(t,e){var s=t[0],l=t[1];n.forEach(function(t){var n,e,r,a,i,o=Vt([0,0],t);x.push.apply(x,(e=s,r=l,a=fn(n=t),[i=Math.sqrt(a*a-e*e)||0,-i].sort(function(t,e){return Math.abs(t-n[r?0:1])-Math.abs(e-n[r?0:1])}).map(function(t){return Vt([0,0],r?[t,e]:[e,t])}).map(function(t){return c+t-o}).filter(function(t){return!Or(u,y,t)}).map(function(t){return En(180*t/Math.PI,We)})))})}),x}function Pr(t,e,n){var r=on(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function _r(t){var e=t.state;if(!e.guidelines||!e.guidelines.length){var n=t.props,r=n.horizontalGuidelines,a=void 0===r?[]:r,i=n.verticalGuidelines,o=void 0===i?[]:i,s=n.elementGuidelines,l=void 0===s?[]:s,u=n.bounds,g=n.snapCenter;if(u||a.length||o.length||l.length){var c=e.containerClientRect,f=e.targetClientRect,p=f.top,d=f.left,v=e.rootMatrix,m=e.is3d?4:3,h=Pr(v,c,m),b=h[0],y=h[1],x=wn(e),w=ne([Math.min.apply(Math,x.map(function(t){return t[0]})),Math.min.apply(Math,x.map(function(t){return t[1]}))],jn(v,[d-b,p-y],m)).map(function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e}),E=w[0],M=w[1],S=[];l.forEach(function(t){var e=t.getBoundingClientRect(),n=e.left-b,r=e.top-y,a=r+e.height,i=n+e.width,o=jn(v,[n,r],m),s=o[0],l=o[1],u=jn(v,[i,a],m),c=u[0],f=u[1],p=c-s,d=f-l,h=[p,d];S.push({type:"vertical",element:t,pos:[En(s+E,.1),l],size:d,sizes:h}),S.push({type:"vertical",element:t,pos:[En(c+E,.1),l],size:d,sizes:h}),S.push({type:"horizontal",element:t,pos:[s,En(l+M,.1)],size:p,sizes:h}),S.push({type:"horizontal",element:t,pos:[s,En(f+M,.1)],size:p,sizes:h}),g&&(S.push({type:"vertical",element:t,pos:[En((s+c)/2+E,.1),l],size:d,sizes:h,center:!0}),S.push({type:"horizontal",element:t,pos:[s,En((l+f)/2+M,.1)],size:p,sizes:h,center:!0}))}),e.guidelines=S,e.enableSnap=!0}}}function Gr(t,e){var n=t.props,r=n.snappable,a=n.bounds,i=n.verticalGuidelines,o=n.horizontalGuidelines,s=t.state,l=s.guidelines,u=s.enableSnap;return r&&u&&!(e&&!0!==r&&r.indexOf(e)<0)&&!!(a||l&&l.length||i&&i.length||o&&o.length)}function Br(t,e,n,r,a){var i=function(t,e,n,r){var a=e[0]-t[0],i=e[1]-t[1];Math.abs(a)<We&&(a=0);Math.abs(i)<We&&(i=0);if(!a)return r?[0,0]:[0,n];if(!i)return r?[n,0]:[0,0];var o=i/a,s=t[1]-o*t[0];{if(r){var l=o*(e[0]+n)+s;return[n,l-e[1]]}return[(e[1]+n-s)/o-e[0],n]}}(t,e,-n,r);if(!i)return[0,0];var o=tr({datas:a,distX:i[0],distY:i[1]});return[o[0],o[1]]}function kr(t,e,n,r,a,i){var o=sn(t,e,n,i?4:3);return xn(o,ne(r,ar(o,a)))}function Ar(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function jr(t,e){return t.isBound?t.offset:e.isSnap?dr(e).offset:0}function Tr(t,e,n,r){var a=function(t,e,n){var r=t.props.bounds||{},a=r.left,i=void 0===a?-1/0:a,o=r.top,s=void 0===o?-1/0:o,l=r.right,u=void 0===l?1/0:l,c=r.bottom,f=void 0===c?1/0:c,p=n[0],d=n[1],h=ne(n,e),g=h[0],v=h[1],m=0<v,b=0<g,y={isBound:!1,offset:0,pos:0},x={isBound:!1,offset:0,pos:0};if(0===g&&0===v)return{vertical:y,horizontal:x};if(0===g)m?f<d&&(x.pos=f,x.offset=d-f):d<s&&(x.pos=s,x.offset=d-s);else if(0===v)b?u<p&&(y.pos=u,y.offset=p-u):p<i&&(y.pos=i,y.offset=p-i);else{var w=v/g,E=n[1]-w*p,M=0,S=0,D=!1;b&&u<=p?(M=w*u+E,S=u,D=!0):!b&&p<=i?(M=w*i+E,S=i,D=!0):m&&f<=d?(S=((M=f)-E)/w,D=!0):!m&&d<=s&&(S=((M=s)-E)/w,D=!0),D&&(y.isBound=!0,y.pos=S,y.offset=p-S,x.isBound=!0,x.pos=M,x.offset=d-M)}return{vertical:y,horizontal:x}}(t,e,n),i=a.horizontal,o=a.vertical,s=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var r=n[0],a=n[1],i=e[0],o=e[1],s=ne(n,e),l=s[0],u=s[1],c=0<u,f=0<l,p={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===l&&0===u)return{vertical:p,horizontal:d};var h=pr(t,l?[r]:[],u?[a]:[]),g=h.vertical,v=h.horizontal;g.posInfos.filter(function(t){var e=t.pos;return f?i<=e:e<=i}),v.posInfos.filter(function(t){var e=t.pos;return c?o<=e:e<=o}),g.isSnap=0<g.posInfos.length,v.isSnap=0<v.posInfos.length;var m=dr(g),b=m.isSnap,y=m.guideline,x=dr(v),w=x.isSnap,E=x.guideline,M=w?E.pos[1]:0,S=b?y.pos[0]:0;if(0===l)w&&(d.isSnap=!0,d.pos=E.pos[1],d.offset=a-d.pos);else if(0===u)b&&(p.isSnap=!0,p.pos=S,p.offset=r-S);else{var D=u/l,C=n[1]-D*r,z=0,O=0,R=!1;b?(z=D*(O=S)+C,R=!0):w&&(O=((z=M)-C)/D,R=!0),R&&(p.isSnap=!0,p.pos=O,p.offset=r-O,d.isSnap=!0,d.pos=z,d.offset=a-z)}return{vertical:p,horizontal:d}}(t,e,n),l=s.horizontal,u=s.vertical,c=Ar(i,l),f=Ar(o,u),p=Math.abs(c),d=Math.abs(f);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:c,dist:p},vertical:{isBound:o.isBound,isSnap:u.isSnap,offset:f,dist:d}}}function qr(t,e,n,r){void 0===r&&(r=n);var a=Cr(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]})),i=a.horizontal,o=a.vertical,s=e?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:pr(t,n.map(function(t){return t[0]}),n.map(function(t){return t[1]})),l=s.horizontal,u=s.vertical,c=jr(i,l),f=jr(o,u),p=Math.abs(c),d=Math.abs(f);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:c,dist:p},vertical:{isBound:o.isBound,isSnap:u.isSnap,offset:f,dist:d}}}function Nr(t,e,n,r,a,i){var o,s,l,u,y,x,w,E,M,c=(s=r,l=[],u=[-(o=n)[0],-o[1]],o[0]&&o[1]?(l.push([u,[o[0],-o[1]]],[u,[-o[0],o[1]]]),s&&l.push([u,o])):o[0]?s?l.push([u,[u[0],-1]],[u,[u[0],1]],[u,[o[0],-1]],[u,o],[u,[o[0],1]]):l.push([[u[0],-1],[o[0],-1]],[[u[0],0],[o[0],0]],[[u[0],1],[o[0],1]]):o[1]?s?l.push([u,[-1,u[1]]],[u,[1,u[1]]],[u,[-1,o[1]]],[u,[1,o[1]]],[u,o]):l.push([[-1,u[1]],[-1,o[1]]],[[0,u[1]],[0,o[1]]],[[1,u[1]],[1,o[1]]]):l.push([u,[1,0]],[u,[-1,0]],[u,[0,-1]],[u,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),l),f=Mr(e,n,r),p=(y=t,x=e,w=r,E=a,M=i,c.map(function(t){var e=t[0],n=t[1],r=rr(x,e),a=rr(x,n),i=w?Tr(y,r,a,E):qr(y,E,[a]),o=i.horizontal,s=o.dist,l=o.offset,u=o.isBound,c=o.isSnap,f=i.vertical,p=f.dist,d=f.offset,h=f.isBound,g=f.isSnap,v=ne(n,e);if(!d&&!l)return{isBound:h||u,isSnap:g||c,sign:v,offset:[0,0]};var m=s<p,b=Br(r,a,m?d:l,m,M).map(function(t,e){return t*(v[e]?2/v[e]:0)});return{sign:v,isBound:m?h:u,isSnap:m?g:c,offset:b}}).concat(wr(t,f,rr(e,[0,0]),i))),d=gr(p,0),h=gr(p,1);return{width:{isBound:d.isBound,offset:d.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function Ir(t,e,n,r,a,i,o,s){for(var l=wn(t.state),u=t.props.keepRatio,c=0,f=0,p=0;p<2;++p){var d=Nr(t,e(c,f),a,u,o,s),h=d.width,g=d.height,v=h.isBound,m=g.isBound,b=h.offset,y=g.offset;if(1===p&&(v||(b=0),m||(y=0)),0===p&&o&&!v&&!m)return[0,0];if(u){var x=Math.abs(b)*(n?1/n:1),w=Math.abs(y)*(r?1/r:1);(v&&m?x<w:m||!v&&x<w)?b=n*y/r:y=r*b/n}c+=b,f+=y}if(a[0]&&a[1]){var E=function(t,o,s,l,e,u,c){var f=[-e[0],-e[1]],n=t.props.bounds,p=1/0,d=1/0;if(n){var r=[[e[0],-e[1]],[-e[0],e[1]]],a=n.left,h=void 0===a?-1/0:a,i=n.top,g=void 0===i?-1/0:i,v=n.right,m=void 0===v?1/0:v,b=n.bottom,y=void 0===b?1/0:b;r.forEach(function(t){var e=t[0]!==f[0],n=t[1]!==f[1],r=rr(l,t);if(n){var a=Br(u,r,(u[1]<r[1]?y:g)-r[1],!1,c)[1];isNaN(a)||(d=s+a)}if(e){var i=Br(u,r,(u[0]<r[0]?m:h)-r[0],!0,c)[0];isNaN(i)||(p=o+i)}})}return{maxWidth:p,maxHeight:d}}(t,n,r,l,a,i,s),M=E.maxWidth,S=E.maxHeight,D=function(t,e,n,r,a,i,o,s,l){var u=qr(t,s,[rr(e,o)]),c=u.horizontal.offset,f=u.vertical.offset;if(f||c){var p=tr({datas:l,distX:-f,distY:-c}),d=p[0],h=p[1];return[Math.min(a||1/0,n+o[0]*d)-n,Math.min(i||1/0,r+o[1]*h)-r]}return[0,0]}(t,e(c,f),n+c,r+f,M,S,a,o,s);c+=b=D[0],f+=y=D[1]}return[c,f]}function Yr(t,e,n,r){if(!Gr(t,"rotatable"))return r;var a=e.pos1,i=e.pos2,o=e.pos3,s=e.pos4,l=r*Math.PI/180,u=[a,i,o,s].map(function(t){return ne(t,n)}),c=u.map(function(t){return ae(t,l)}),f=Rr(t,u,c,n,r).concat(Dr(t,u,c,n,r));return f.sort(function(t,e){return Math.abs(t-r)-Math.abs(e-r)}),f.length?f[0]:r}function Xr(t,e,n,r,a,i){if(!Gr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=xn(i.absolutePoses,[e,n]),s=ln(o),l=s.left,u=s.right,c=s.top,f=s.bottom,p=[[l,c],[u,c],[l,f],[u,f]];t.props.snapCenter&&p.push([(l+u)/2,(c+f)/2]);var d=qr(t,a,p,o),h=d.vertical,g=d.horizontal,v=Er(t,o,i),m=v.vertical,b=v.horizontal,y=h.isSnap,x=g.isSnap,w=h.isBound||m.isBound,E=g.isBound||b.isBound,M=function(t,e,n,r,a){var i=e[0],o=e[1],s=n[0],l=n[1],u=r[0],c=r[1],f=a[0],p=a[1],d=-f,h=-p;if(t&&i&&o){h=d=0;var g=[];if(s&&l?g.push([0,p],[f,0]):s?g.push([f,0]):l?g.push([0,p]):u&&c?g.push([0,p],[f,0]):u?g.push([f,0]):c&&g.push([0,p]),g.length){g.sort(function(t,e){return fn(ne([i,o],t))-fn(ne([i,o],e))});var v=g[0];if(v[0]&&Math.abs(i)>We)d=-v[0],h=o*Math.abs(i+d)/Math.abs(i)-o;else if(v[1]&&Math.abs(o)>We){var m=o;h=-v[1],d=i*Math.abs(o+h)/Math.abs(m)-i}if(t&&l&&s)if(Math.abs(d)>We&&Math.abs(d)<Math.abs(f))d*=b=Math.abs(f)/Math.abs(d),h*=b;else if(Math.abs(h)>We&&Math.abs(h)<Math.abs(p)){var b;d*=b=Math.abs(p)/Math.abs(h),h*=b}else d=An(-f,d),h=An(-p,h)}}else d=i||s?-f:0,h=o||l?-p:0;return[d,h]}(r,[e,n],[w,E],[y,x],[An(h.offset,m.offset),An(g.offset,b.offset)]);return[{isBound:w,isSnap:y,offset:M[0]},{isBound:E,isSnap:x,offset:M[1]}]}function Wr(t){var n=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var e=t.guideline;-1<n.indexOf(e)||n.push(e)})}),n}function Fr(t,e,n,r){var a=t-n,i=a<0?a+e:r;return{size:(a<0?0:a)-i,pos:i}}function Lr(t,u,n,c){var f=[],e=Bn(t.filter(function(t){var e=t.element,n=t.gap;return e&&!n}),function(t){var e,n,r,a=t.element,i=t.pos,o=i[c],s=(Math.min(0,o-u)<0?-1:1)+"_"+i[c?0:1],l=-1<(r=L(e=f,function(t){var e=t[0],n=t[1];return a===e&&o===n}))?e[r]:n;return l?l[2]:(f.push([a,o,s]),s)});return e.forEach(function(t){t.sort(function(t,e){return Fr(t.pos[c],t.size,u,n).size-Fr(e.pos[c],t.size,u,n).size||t.pos[c?0:1]-e.pos[c?0:1]})}),e}function Hr(t,e,p,d,h,g,v,m,b,y,x,w){var E=e[0],M=e[1],S=e[2],D=e[3];return kn(t.map(function(t,c){var f=!0;return t.map(function(t,e){var n,r=t.pos,a=t.size,i=Fr(r[y],a,d,h),o=i.pos,s=i.size;if(s<v)return null;var l=f;f=!1;var u=m&&l?parseFloat(s.toFixed(b)):0;return w.createElement("div",{className:Ve("line",E,"guideline","dashed"),"data-size":0<u?x(u):"",key:E+"LinkGuidline"+c+"-"+e,style:((n={})[M]=p+o+"px",n[S]=-g+r[y?0:1]+"px",n[D]=s+"px",n)})})}))}function Kr(t,e,r,a,i,o){var s=e[0],l=e[1],u=e[2],c=e[3];return t.map(function(t,e){var n;return o.createElement("div",{className:Ve("line",s,"guideline","target","bold"),key:s+"TargetGuidline"+e,style:((n={})[l]=r+"px",n[u]=-a+t+"px",n[c]=i+"px",n)})})}function Vr(t,e,o,s,l,u){var c=e[0],f=e[1],p=e[2],d=e[3];return t.map(function(t,e){var n,r=t.pos,a=t.size,i=t.element;return u.createElement("div",{className:Ve("line",c,"guideline",i?"bold":""),key:c+"Guidline"+e,style:((n={})[f]=-o+r[l]+"px",n[p]=-s+r[l?0:1]+"px",n[d]=a+"px",n)})})}function Ur(t,a,z,O){var e=t.filter(function(t){var e=t.element,n=t.gap,r=t.type;return e&&n&&r===a}),n="vertical"===a?[0,1]:[1,0],R=n[0],P=n[1];return kn(e.map(function(t,e){var n=t.pos,r=t.gap,a=t.gapGuidelines,i=t.sizes,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return Math.abs(t)-Math.abs(e)}),t[0]}(n[P]+i[P]-z[P],n[P]-z[P]-O[P]),s=Math.min(i[P],O[P]);0<o&&s<o?o=2*(o-s/2):o<0&&o<-s&&(o=2*(o+s/2));var l,u,c,f,p,d,h,g,v,m,b,y,x,w,E,M,S,D,C=(0<o?0:O[P])+o/2;return m=a,b=R,y=z,x=O,w=n,E=r,M=C,S=Math.abs(E),D=w[b]+(0<E?x[0]:0),m.filter(function(t){return t.pos[b]<=y[b]}).sort(function(t,e){var n=t.pos;return e.pos[b]-n[b]}).filter(function(t){var e=t.pos,n=t.sizes,r=e[b];return En(r+n[b],1e-4)===En(D-S,1e-4)&&(D=r,!0)}).map(function(t){var e=-y[b]+t.pos[b]+t.sizes[b];return je({},t,{gap:E,renderPos:b?[M,e]:[e,M]})}).concat((l=a,u=R,c=z,f=O,p=n,d=r,h=C,g=Math.abs(d),v=p[u]+(d<0?f[u]:0),l.filter(function(t){return t.pos[u]>c[u]}).sort(function(t,e){var n=t.pos,r=e.pos;return n[u]-r[u]}).filter(function(t){var e=t.pos,n=t.sizes,r=e[u];return En(r,1e-4)===En(v+g,1e-4)&&(v=r+n[u],!0)}).map(function(t){var e=-c[u]+t.pos[u]-g;return je({},t,{gap:d,renderPos:u?[h,e]:[e,h]})})))}))}function $r(t,e,n,r,s,l){var u=r[0],c=r[1],f=r[2],p=r[3],a=t.props,i=a.snapDigit,d=void 0===i?0:i,o=a.isDisplaySnapDigit,h=void 0===o||o,g="vertical"===n?"horizontal":"vertical",v="vertical"===n?[0,1]:[1,0],m=v[0],b=v[1];return e.map(function(t,e){var n,r=t.renderPos,a=t.gap,i=Math.abs(a),o=h?parseFloat(i.toFixed(d)):0;return l.createElement("div",{className:Ve("line",u,"guideline","gap"),"data-size":0<o?s(o):"",key:g+"GapGuideline"+e,style:((n={})[c]=r[m]+"px",n[f]=r[b]+"px",n[p]=i+"px",n)})})}function Jr(t,e,n,r,a){var i=Cr(t,e,n),o=i.vertical,s=o.isBound,l=o.pos,u=i.horizontal,c=u.isBound,f=u.pos;s&&r.indexOf(l)<0&&r.push(l),c&&a.indexOf(f)<0&&a.push(f);var p=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=n.pos1,a=n.pos2,i=n.pos3,o=n.pos4,l=rr([r,a,i,o],[0,0]),u=e.left,c=e.top,f=e.width,p=e.height,d=[[u,c],[u,c+p]],h=[[u,c],[u+f,c]],g=[[u+f,c],[u+f,c+p]],v=[[u,c+p],[u+f,c+p]],m=[],b=[],y={top:!1,bottom:!1,left:!1,right:!1};return[[r,a],[a,o],[o,i],[i,r]].forEach(function(t){var e=vr(l,t),n=e.horizontal,r=e.vertical,a=xr(t,h,r,1),i=xr(t,v,r,1),o=xr(t,d,n,1),s=xr(t,g,n,1);a.isBound&&!y.top&&(m.push(c),y.top=!0),i.isBound&&!y.bottom&&(m.push(c+p),y.bottom=!0),o.isBound&&!y.left&&(b.push(u),y.left=!0),s.isBound&&!y.right&&(b.push(u+f),y.right=!0)}),{horizontal:m,vertical:b}}(t),d=p.vertical,h=p.horizontal;r.push.apply(r,d.filter(function(t){return r.indexOf(t)<0})),a.push.apply(a,h.filter(function(t){return a.indexOf(t)<0}))}var Zr={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object},render:function(t,e){var n=t.state,r=n.top,a=n.left,i=n.pos1,o=n.pos2,s=n.pos3,l=n.pos4,u=n.snapRenderInfo,c=n.targetClientRect,f=n.containerClientRect,p=n.is3d,d=n.rootMatrix;if(!u||!Gr(t,""))return[];var h,g,v,m,b,y,x,w=p?4:3,E=Math.min(i[0],o[0],s[0],l[0]),M=Math.min(i[1],o[1],s[1],l[1]),S=Pr(d,f,w),D=jn(d,[c.left-S[0],c.top-S[1]],w),C=D[0],z=D[1],O=t.props,R=O.snapThreshold,P=void 0===R?5:R,_=O.snapDigit,G=void 0===_?0:_,B=O.isDisplaySnapDigit,k=void 0===B||B,A=O.snapDistFormat,j=void 0===A?function(t){return t}:A,T=wn(t.state),q=ln(T),N=q.width,I=q.height,Y=q.top,X=q.left,W=q.bottom,F=q.right,L=[],H=[],K=[],V=[],U=[];if(!u.request){if(u.direction&&U.push(function(t,e,n){var r=[];if(n[0]&&n[1])r=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(t){return rr(e,t)});else if(n[0]||n[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(t){return rr(e,t)}):1<(r=nr(e,n)).length&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var a=[e[0],e[1],e[3],e[2],e[0]],i=0;i<4;++i)r.push(a[i]),r.push([(a[i][0]+a[i+1][0])/2,(a[i][1]+a[i+1][1])/2]);return pr(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]}),!0,1)}(t,T,u.direction)),u.snap){var $=ln(T);u.center&&($.middle=($.top+$.bottom)/2,$.center=($.left+$.right)/2),U.push((g=$,v=!0,m=1,b=(h=t).props.snapCenter&&v,y=["left","right"],x=["top","bottom"],b&&(y.push("center"),x.push("middle")),y=y.filter(function(t){return t in g}),x=x.filter(function(t){return t in g}),pr(h,y.map(function(t){return g[t]}),x.map(function(t){return g[t]}),b,m)))}U.forEach(function(t){var e=t.vertical.posInfos,n=t.horizontal.posInfos;L.push.apply(L,e.map(function(t){return t.pos})),H.push.apply(H,n.map(function(t){return t.pos})),K.push.apply(K,Wr(e)),V.push.apply(V,Wr(n))})}Jr(t,[X,F],[Y,W],L,H);var J=Lr(V,C,N,0),Z=Lr(K,z,I,1),Q=["horizontal","left","top","width"],tt=["vertical","top","left","height"],et=Ur(K,"vertical",[a,r],[N,I]),nt=Ur(V,"horizontal",[a,r],[N,I]),rt=K.concat(V);return zn(t,"onSnap",{guidelines:rt.filter(function(t){return!t.element}),elements:Bn(rt.filter(function(t){return t.element}),function(t){return t.element}),gaps:et.concat(nt)},!0),$r(t,et,"vertical",Q,j,e).concat($r(t,nt,"horizontal",tt,j,e),Hr(J,Q,E,C,N,r,P,k,G,0,j,e),Hr(Z,tt,M,z,I,a,P,k,G,1,j,e),Kr(H,Q,E,r,N,e),Kr(L,tt,M,a,I,e),Vr(V,Q,a,r,0,e),Vr(K,tt,r,a,1,e))},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},_r(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t){return cr(t)||aa(t)},dragControlStart:function(t,e){t.state.snapRenderInfo=null,_r(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t,e){t.state.snapRenderInfo=null,_r(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null}},Qr={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number},render:function(t,e){var n=t.props.throttleDragRotate,r=t.state,a=r.dragInfo,i=r.beforeOrigin;if(n&&a){var o=a.dist;if(o[0]||o[1]){var s=fn(o),l=Vt(o,[0,0]);return e.createElement("div",{className:Ve("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:s+"px",transform:"translate("+i[0]+"px, "+i[1]+"px) rotate("+l+"rad)"}})}}},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,a=e.parentDragger,i=t.state,o=i.targetTransform,s=i.target;if(i.dragger)return!1;i.dragger=a||t.targetDragger;var l,u=window.getComputedStyle(s);n.datas={},n.left=parseFloat(u.left||"")||0,n.top=parseFloat(u.top||"")||0,n.bottom=parseFloat(u.bottom||"")||0,n.right=parseFloat(u.right||"")||0,n.transform=o,n.startTranslate=[0,0],Qn(t,{datas:n}),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,l=t,n.absolutePoses=wn(l.state);var c=Cn(t,e,{set:function(t){n.startTranslate=t}});return!1!==(r||zn(t,"onDragStart",c))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(i.dragger=null,n.isPinch=!1),!!n.isDrag&&c},drag:function(t,e){var n=e.datas,r=e.parentEvent,a=e.parentFlag,i=e.isPinch,o=e.isRequest,s=e.distX,l=e.distY,u=n.isDrag,c=n.prevDist,f=n.prevBeforeDist,p=n.transform,d=n.startTranslate;if(u){var h=t.props,g=h.parentMoveable,v=!r&&h.throttleDrag||0,m=!r&&h.throttleDragRotate||0,b=!1,y=0;if(0<m&&(s||l)){var x=En(180*Vt([0,0],[s,l])/Math.PI,m),w=fn([s,l]);y=x*Math.PI/180,s=w*Math.cos(y),l=w*Math.sin(y)}if(!i&&!r&&!a&&(s||l)){var E=Xr(t,s,l,m,o,n),M=E[0],S=E[1],D=M.isSnap,C=M.isBound,z=M.offset,O=S.isSnap,R=S.isBound;b=D||O||C||R,s+=z,l+=S.offset}n.passDeltaX=s-(n.passDistX||0),n.passDeltaY=l-(n.passDistY||0),n.passDistX=s,n.passDistY=l;var P=ee(tr({datas:n,distX:s,distY:l},!0),d),_=ee(tr({datas:n,distX:s,distY:l},!1),d);m||b||(Mn(_,v),Mn(P,v));var G=ne(P,d),B=ne(_,d),k=ne(B,c),A=ne(G,f);n.prevDist=B,n.prevBeforeDist=G;var j=n.left+G[0],T=n.top+G[1],q=n.right-G[0],N=n.bottom-G[1],I=p+" translate("+B[0]+"px, "+B[1]+"px)";if(t.state.dragInfo.dist=r?[0,0]:B,r||g||!k.every(function(t){return!t})||!A.some(function(t){return!t})){var Y=Cn(t,e,{transform:I,dist:B,delta:k,translate:_,beforeDist:G,beforeDelta:A,beforeTranslate:P,left:j,top:T,right:q,bottom:N,isPinch:i});return r||zn(t,"onDrag",Y),Y}}},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas,a=e.isDrag;if(t.state.dragger=null,t.state.dragInfo=null,r.isDrag)return r.isDrag=!1,n||zn(t,"onDragEnd",Cn(t,e,{isDrag:a})),a},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,a=e.clientY,i=this.dragStart(t,e);if(!i)return!1;var o=Jn(t,this,"dragStart",[r,a],e,!1),s=zn(t,"onDragGroupStart",je({},i,{targets:t.props.targets,events:o}));return n.isDrag=!1!==s,!!n.isDrag&&i},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,e),r=e.datas,a=Jn(t,this,"drag",[r.passDeltaX,r.passDeltaY],e,!1);if(n){var i=je({targets:t.props.targets,events:a},n);return zn(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,e){var n=e.isDrag;if(e.datas.isDrag)return this.dragEnd(t,e),Jn(t,this,"dragEnd",[0,0],e,!1),zn(t,"onDragGroupEnd",Cn(t,e,{targets:t.props.targets,isDrag:n})),n},request:function(t){var e={},n=t.getRect(),r=0,a=0;return{isControl:!1,requestStart:function(t){return{datas:e}},request:function(t){return"x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?a=t.y-n.top:"deltaY"in t&&(a+=t.deltaY),{datas:e,distX:r,distY:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function ta(t,e,n,r,a,i){var o=t.state.is3d?4:3,s=on(t.state.rootMatrix,a,o),l=ee([i.left,i.top],s);e.startAbsoluteOrigin=l,e.prevDeg=Vt(l,[n,r])/Math.PI*180,e.prevSnapDeg=e.prevDeg,e.startDeg=e.prevDeg,e.loop=0}function ea(t,e,n,r,a,i){var o=n.prevDeg,s=i+r,l=Yr(t,e,n.origin,r);return[a*((n.prevDeg=l)-o),l,s]}function na(t,e,n,r,a,i,o,s){var l=n.prevDeg,u=n.prevSnapDeg,c=n.startDeg,f=n.loop;r<l&&270<l&&r<90?++n.loop:l<r&&l<90&&270<r&&--n.loop;var p=n.loop,d=360*f+u-c+i,h=360*p+r-c+i;n.prevDeg=h-360*p+c-i;var g=a*((h=En(h,o))-i);return s&&(h=(g=Yr(t,e,n.origin,g))/a+i),n.prevSnapDeg=h-360*p+c-i,[a*(h-d),g,h]}function ra(t,e,n,r,a,i,o,s){return na(t,e,n,Vt(n.startAbsoluteOrigin,[a,i])/Math.PI*180,r,o,s,!0)}function aa(t){return!!t.isRequest||V(t.inputEvent.target,Ve("rotation"))}var ia={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},render:function(t,e){var n=t.props,r=n.rotatable,a=n.rotationPosition;if(!r)return null;var i,o,s,l,u,c,f=t.state,p=f.renderPoses,d=f.direction,h=(i=a,s=(o=p)[0],l=o[1],u=o[2],c=o[3],"left"===i?[u,s]:"right"===i?[l,c]:"bottom"===i?[c,u]:[s,l]),g=gn(h,d);return e.createElement("div",{key:"rotation",className:Ve("line rotation-line"),style:{transform:"translate(-50%) translate("+(h[0][0]+h[1][0])/2+"px, "+(h[0][1]+h[1][1])/2+"px) rotate("+g+"rad)"}},e.createElement("div",{className:Ve("control","rotation")}))},dragControlCondition:aa,dragControlStart:function(t,e){var n=e.datas,r=e.clientX,a=e.clientY,i=e.parentRotate,o=e.parentFlag,s=e.isPinch,l=e.isRequest,u=t.state,c=u.target,f=u.left,p=u.top,d=u.origin,h=u.beforeOrigin,g=u.direction,v=u.beforeDirection,m=u.targetTransform;if(!l&&!c)return!1;var b=t.getRect();if(n.rect=b,n.transform=m,n.left=f,n.top=p,l||s||o){var y=i||0;n.beforeInfo={origin:b.beforeOrigin,prevDeg:y,startDeg:y,prevSnapDeg:y,loop:0},n.afterInfo={origin:b.origin,prevDeg:y,startDeg:y,prevSnapDeg:y,loop:0}}else{n.beforeInfo={origin:b.beforeOrigin},n.afterInfo={origin:b.origin};var x=bn(t.controlBox.getElement());ta(t,n.beforeInfo,r,a,h,x),ta(t,n.afterInfo,r,a,d,x)}n.direction=g,n.beforeDirection=v,n.startRotate=0,n.datas={};var w=Cn(t,e,{set:function(t){n.startRotate=t}}),E=zn(t,"onRotateStart",w);return n.isRotate=!1!==E,t.state.snapRenderInfo={request:e.isRequest},!!n.isRotate&&w},dragControl:function(t,e){var n,r,a,i,o,s,l=e.datas,u=e.clientX,c=e.clientY,f=e.parentRotate,p=e.parentFlag,d=e.isPinch,h=l.direction,g=l.beforeDirection,v=l.beforeInfo,m=l.afterInfo,b=l.isRotate,y=l.startRotate,x=l.rect;if(b){var w,E,M,S,D,C,z=t.props,O=z.throttleRotate,R=void 0===O?0:O,P=z.parentMoveable;if("parentDist"in e){var _=e.parentDist;w=(n=ea(t,x,m,_,h,y))[0],E=n[1],M=n[2],S=(r=ea(t,x,v,_,h,y))[0],D=r[1],C=r[2]}else C=d||p?(w=(a=na(t,x,m,f,h,y,R))[0],E=a[1],M=a[2],S=(i=na(t,x,v,f,h,y,R))[0],D=i[1],i[2]):(w=(o=ra(t,x,m,h,u,c,y,R))[0],E=o[1],M=o[2],S=(s=ra(t,x,v,g,u,c,y,R))[0],D=s[1],s[2]);if(w||S||P){var G=Cn(t,e,{delta:w,dist:E,rotate:M,beforeDist:D,beforeDelta:S,beforeRotate:C,transform:l.transform+" rotate("+E+"deg)",isPinch:!!d});return zn(t,"onRotate",G),G}}},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isRotate&&(n.isRotate=!1,zn(t,"onRotateEnd",Cn(t,e,{isDrag:r})),r)},dragGroupControlCondition:aa,dragGroupControlStart:function(t,e){var n=e.datas,l=e.inputEvent,r=t.state,u=r.left,c=r.top,f=r.beforeOrigin,a=this.dragControlStart(t,e);if(!a)return!1;a.set(t.rotation);var i=Zn(t,this,"dragControlStart",n,je({},e,{parentRotate:0}),function(t,e,n){var r=t.state,a=r.left,i=r.top,o=r.beforeOrigin,s=ee(ne([a,i],[u,c]),ne(o,f));e.prevClient=s,n.dragStart=Qr.dragStart(t,(new $n).dragStart(s,l))}),o=zn(t,"onRotateGroupStart",je({},a,{targets:t.props.targets,events:i}));return n.isRotate=!1!==o,!!n.isRotate&&a},dragGroupControl:function(e,p){var d=p.inputEvent,t=p.datas;if(t.isRotate){var n=this.dragControl(e,p);if(n){var r=n.beforeDist,h=n.beforeDelta/180*Math.PI,a=Zn(e,this,"dragControl",t,je({},p,{parentRotate:r}),function(t,e,n,r){var a=e.prevClient,i=a[0],o=a[1],s=ae([i,o],h),l=s[0],u=s[1],c=[l-i,u-o];e.prevClient=[l,u];var f=Qr.drag(t,Un(t.state,c,d,!!p.isPinch,!1));n.drag=f});e.rotation=n.beforeRotate;var i=je({targets:e.props.targets,events:a,set:function(t){e.rotation=t}},n);return zn(e,"onRotateGroup",i),i}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate)return this.dragControlEnd(t,e),Zn(t,this,"dragControlEnd",r,e),zn(t,"onRotateGroupEnd",Cn(t,e,{targets:t.props.targets,isDrag:n})),n},request:function(){var e={},n=0;return{isControl:!0,requestStart:function(t){return{datas:e}},request:function(t){return n+=t.deltaRotate,{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function oa(t,e,r){var n=t.state,a=n.renderPoses,i=n.rotation,o=t.props.renderDirections,s=void 0===o?e:o,l={};return s.forEach(function(t){l[t]=!0}),s.map(function(t){var e=He[t];if(!e||!l[t])return null;var n=(En(i/Math.PI*180,15)+Ke[t])%180;return r.createElement("div",{className:Ve("control","direction",t),"data-rotation":n,"data-direction":t,key:"direction-"+t,style:dn.apply(void 0,[i].concat(e.map(function(t){return a[t]})))})})}function sa(t,e){return oa(t,["nw","ne","sw","se","n","w","s","e"],e)}function la(t,e){return oa(t,["nw","ne","sw","se"],e)}var ua={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,baseDirection:Array,keepRatio:Boolean},render:function(t,e){var n=t.props,r=n.resizable,a=n.edge;if(r)return(a?la:sa)(t,e)},dragControlCondition:cr,dragControlStart:function(t,e){var n,r,a,i=e.inputEvent,o=e.isPinch,s=e.parentDirection,l=e.datas,u=s||(o?[0,0]:yn(i.target)),c=t.state,f=c.target,p=c.width,d=c.height;if(!u||!f)return!1;o||Qn(t,{datas:l}),l.datas={},l.direction=u,l.startOffsetWidth=p,l.startOffsetHeight=d,l.prevWidth=0,l.prevHeight=0,r=f,a=window.getComputedStyle(r),n=[parseFloat(a.width),parseFloat(a.height)],l.startWidth=n[0],l.startHeight=n[1],l.transformOrigin=t.props.transformOrigin,l.startDirection=function(t,e){if(!e[0]&&!e[1])return[0,0];var n=t.props.baseDirection,r=void 0===n?[-1,-1]:n;return[e[0]?e[0]:-1*r[0],e[1]?e[1]:-1*r[1]]}(t,u),l.fixedPosition=ur(t,l.startDirection),l.fixedOriginalPosition=ur(t,u);var h=Cn(t,e,{direction:u,set:function(t){var e=t[0],n=t[1];l.startWidth=e,l.startHeight=n},setOrigin:function(t){l.transformOrigin=t},dragStart:Qr.dragStart(t,(new $n).dragStart([0,0],i))});return!1!==zn(t,"onResizeStart",h)&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:u}),!!l.isResize&&h},dragControl:function(t,e){var n=e.datas,r=e.distX,a=e.distY,i=e.parentFlag,o=e.isPinch,s=e.parentDistance,l=e.parentScale,u=e.inputEvent,c=e.parentKeepRatio,f=e.dragClient,p=e.parentDist,d=e.isRequest,h=n.direction,g=n.isResize,v=n.transformOrigin;if(g){var m=n.startWidth,b=n.startHeight,y=n.startOffsetWidth,x=n.startOffsetHeight,w=n.prevWidth,E=n.prevHeight,M=t.props,S=M.throttleResize,D=void 0===S?0:S,C=M.parentMoveable,z=h;h[0]||h[1]||(z=[1,1]);var O=t.props.keepRatio||c,R=z[0]||!z[1],P=R?x/y:y/x,_=O||i?h:n.startDirection,G=f,B=0,k=0;if(f||(G=!i&&o?ur(t,[0,0]):O?n.fixedOriginalPosition:n.fixedPosition),p)B=p[0],k=p[1];else if(l)B=(l[0]-1)*y,k=(l[1]-1)*x;else if(o)s&&(k=(B=s)*x/y);else{var A=tr({datas:n,distX:r,distY:a});if(B=z[0]*A[0],k=z[1]*A[1],O&&y&&x){var j=Vt([0,0],A),T=Vt([0,0],z),q=Vt([0,0],[y,x]),N=fn([B,k]),I=Math.cos(j-T)*N;z[0]?k=z[1]?(B=Math.cos(q)*I,Math.sin(q)*I):Pn(B=I,R,P):B=_n(k=I,R,P)}}var Y=z[0]||O?Math.max(y+B,We):y,X=z[1]||O?Math.max(x+k,We):x;O&&y&&x&&(X=Y*x/y);var W=[0,0];if(o||(W=function(t,n,r,a,i,e,o){if(!Gr(t,"resizable"))return[0,0];var s=t.state,l=s.matrix,u=s.is3d;return Ir(t,function(t,e){return kr(l,n+t,r+e,i,a,u)},n,r,a,i,e,o)}(t,Y,X,h,n.fixedOriginalPosition,d,n)),p&&(p[0]||(W[0]=0),p[1]||(W[1]=0)),O){z[0]&&z[1]&&W[0]&&W[1]&&(Math.abs(W[0])>Math.abs(W[1])?W[1]=0:W[0]=0);var F=!W[0]&&!W[1];F&&(R?Y=En(Y,D):X=En(X,D)),z[0]&&!z[1]||W[0]&&!W[1]||F&&R?X=Pn(Y+=W[0],R,P):(!z[0]&&z[1]||!W[0]&&W[1]||F&&!R)&&(Y=_n(X+=W[1],R,P))}else Y+=W[0],X+=W[1],W[0]||(Y=En(Y,D)),W[1]||(X=En(X,D));var L=[(B=(Y=Math.round(Y))-y)-w,(k=(X=Math.round(X))-x)-E];if(n.prevWidth=B,n.prevHeight=k,C||!L.every(function(t){return!t})){var H=lr(t,Y,X,_,G,v),K=Cn(t,e,{width:m+B,height:b+k,offsetWidth:Y,offsetHeight:X,direction:h,dist:[B,k],delta:L,isPinch:!!o,drag:Qr.drag(t,Un(t.state,H,u,!!o,!1))});return zn(t,"onResize",K),K}}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,a=n.startOffsetWidth,i=n.startOffsetHeight,o=n.prevWidth,s=n.prevHeight;if(r){var l=t.state,u=l.width-(a+o),c=l.height-(i+s),f=3<Math.abs(u),p=3<Math.abs(c);return f&&(n.startWidth+=u,n.startOffsetWidth+=u,n.prevWidth+=u),p&&(n.startHeight+=c,n.startOffsetHeight+=c,n.prevHeight+=c),f||p?(this.dragControl(t,e),!0):void 0}},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isResize&&(n.isResize=!1,zn(t,"onResizeEnd",Cn(t,e,{isDrag:r})),r)},dragGroupControlCondition:cr,dragGroupControlStart:function(o,s){var t=s.datas,e=this.dragControlStart(o,s);if(!e)return!1;var l=e.direction,u=ur(o,l),n=Zn(o,this,"dragControlStart",t,function(t,e){var n=ur(t,l),r=re(oe(-o.rotation/180*Math.PI,3),[n[0]-u[0],n[1]-u[1],1],3),a=r[0],i=r[1];return e.originalX=a,e.originalY=i,s}),r=je({},e,{targets:o.props.targets,events:n}),a=zn(o,"onResizeGroupStart",r);return t.isResize=!1!==a,!!t.isResize&&e},dragGroupControl:function(i,o){var t=o.datas;if(t.isResize){var e=this.dragControl(i,o);if(e){var n=e.offsetWidth,r=e.offsetHeight,a=e.dist,s=i.props.keepRatio,l=[n/(n-a[0]),r/(r-a[1])],u=ur(i,t.direction),c=Zn(i,this,"dragControl",t,function(t,e){var n=re(oe(i.rotation/180*Math.PI,3),[e.originalX*l[0],e.originalY*l[1],1],3),r=n[0],a=n[1];return je({},o,{parentDist:null,parentScale:l,dragClient:ee(u,[r,a]),parentKeepRatio:s})}),f=je({targets:i.props.targets,events:c},e);return zn(i,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize)return this.dragControlEnd(t,e),Zn(t,this,"dragControlEnd",r,e),zn(t,"onResizeGroupEnd",Cn(t,e,{targets:t.props.targets,isDrag:n})),n},request:function(t){var e={},n=0,r=0,a=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-a.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-a.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:e,parentDist:[n,r]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},ca={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},render:function(t,e){var n=t.props,r=n.resizable,a=n.scalable,i=n.edge;if(!r&&a)return(i?la:sa)(t,e)},dragControlCondition:cr,dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,a=e.inputEvent,i=e.parentDirection||(r?[0,0]:yn(a.target)),o=t.state,s=o.width,l=o.height,u=o.targetTransform,c=o.target;if(!i||!c)return!1;r||Qn(t,{datas:n}),n.datas={},n.transform=u,n.prevDist=[1,1],n.direction=i,n.width=s,n.height=l,n.startScale=[1,1],n.fixedPosition=ur(t,i);var f=Cn(t,e,{direction:i,set:function(t){n.startScale=t},dragStart:Qr.dragStart(t,(new $n).dragStart([0,0],a))});return!1!==zn(t,"onScaleStart",f)&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:i}),!!n.isScale&&f},dragControl:function(t,e){var n=e.datas,r=e.distX,a=e.distY,i=e.parentScale,o=e.parentDistance,s=e.parentKeepRatio,l=e.parentFlag,u=e.isPinch,c=e.inputEvent,f=e.dragClient,p=e.parentDist,d=e.isRequest,h=n.prevDist,g=n.direction,v=n.width,m=n.height,b=n.transform,y=n.isScale,x=n.startScale;if(!y)return!1;var w=t.props,E=w.throttleScale,M=w.parentMoveable,S=g;g[0]||g[1]||(S=[1,1]);var D=t.props.keepRatio||s,C=t.state,z=S[0]||!S[1],O=v*x[0],R=m*x[1],P=z?R/O:O/R,_=1,G=1,B=f;if(f||(B=!l&&u?ur(t,[0,0]):n.fixedPosition),p)_=(v+p[0])/v,G=(m+p[1])/m;else if(i)_=i[0],G=i[1];else if(u)o&&(_=(v+o)/v,G=(m+o*m/v)/m);else{var k=tr({datas:n,distX:r,distY:a}),A=S[0]*k[0],j=S[1]*k[1];if(D&&v&&m){var T=Vt([0,0],k),q=Vt([0,0],S),N=Vt([0,0],[O,R]),I=fn([A,j]),Y=Math.cos(T-q)*I;S[0]?j=S[1]?(A=Math.cos(N)*Y,Math.sin(N)*Y):Pn(A=Y,z,P):A=_n(j=Y,z,P)}_=(v+A)/v,G=(m+j)/m}_=S[0]||D?_*x[0]:x[0],G=S[1]||D?G*x[1]:x[1],0===_&&(_=1e-9*(0<h[0]?1:-1)),0===G&&(G=1e-9*(0<h[1]?1:-1));var X=[_/x[0],G/x[1]],W=[_,G];if(!u&&t.props.groupable){var F=(C.snapRenderInfo||{}).direction;ht(F)&&(F[0]||F[1])&&(C.snapRenderInfo={direction:g,request:e.isRequest})}var L=[0,0];if(u||(L=function(t,n,r,a,e,i){var o=i.width,s=i.height;if(!Gr(t,"scalable"))return[0,0];var l=i.is3d,u=Ir(t,function(t,e){return kr(sr(i,ee(n,[t/o,e/s])),o,s,a,r,l)},o,s,r,a,e,i);return[u[0]/o,u[1]/s]}(t,X,g,n.fixedPosition,d,n)),D){S[0]&&S[1]&&L[0]&&L[1]&&(Math.abs(L[0])>Math.abs(L[1])?L[1]=0:L[0]=0);var H=!L[0]&&!L[1];if(H&&(z?X[0]=En(X[0]*x[0],E)/x[0]:X[1]=En(X[1]*x[1],E)/x[1]),S[0]&&!S[1]||L[0]&&!L[1]||H&&z){X[0]+=L[0];var K=Pn(v*X[0]*x[0],z,P);X[1]=K/m/x[1]}else if(!S[0]&&S[1]||!L[0]&&L[1]||H&&!z){X[1]+=L[1];var V=_n(m*X[1]*x[1],z,P);X[0]=V/v/x[0]}}else X[0]+=L[0],X[1]+=L[1],L[0]||(X[0]=En(X[0]*x[0],E)/x[0]),L[1]||(X[1]=En(X[1]*x[1],E)/x[1]);0===X[0]&&(X[0]=1e-9*(0<h[0]?1:-1)),0===X[1]&&(X[1]=1e-9*(0<h[1]?1:-1));var U,$,J=[X[0]/h[0],X[1]/h[1]];if($=x,W=[(U=X)[0]*$[0],U[1]*$[1]],n.prevDist=X,_===h[0]&&G===h[1]&&!M)return!1;var Z,Q,tt,et,nt,rt,at,it,ot,st,lt,ut,ct,ft,pt=(Q=J,tt=g,et=B,nt=(Z=t).state,rt=nt.is3d,at=nt.left,it=nt.top,ot=nt.width,st=nt.height,lt=rt?4:3,ut=Z.props.groupable,ct=ut?at:0,ft=ut?it:0,ne(ir(et,sr(Z.state,Q),ot,st,lt,tt),[ct,ft])),dt=Cn(t,e,{scale:W,direction:g,dist:X,delta:J,transform:b+" scale("+_+", "+G+")",isPinch:!!u,drag:Qr.drag(t,Un(t.state,pt,c,u,!1))});return zn(t,"onScale",dt),dt},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isScale&&(n.isScale=!1,zn(t,"onScaleEnd",Cn(t,e,{isDrag:r})),r)},dragGroupControlCondition:cr,dragGroupControlStart:function(o,s){var t=s.datas,e=this.dragControlStart(o,s);if(!e)return!1;var l=e.direction,u=ur(o,l),n=Zn(o,this,"dragControlStart",t,function(t,e){var n=ur(t,l),r=re(oe(-o.rotation/180*Math.PI,3),[n[0]-u[0],n[1]-u[1],1],3),a=r[0],i=r[1];return e.originalX=a,e.originalY=i,s}),r=je({},e,{targets:o.props.targets,events:n}),a=zn(o,"onScaleGroupStart",r);return t.isScale=!1!==a,!!t.isScale&&r},dragGroupControl:function(i,o){var t=o.datas;if(t.isScale){var e=this.dragControl(i,o);if(e){var s=i.props.keepRatio,l=e.scale,u=ur(i,t.direction),n=Zn(i,this,"dragControl",t,function(t,e){var n=re(oe(i.rotation/180*Math.PI,3),[e.originalX*l[0],e.originalY*l[1],1],3),r=n[0],a=n[1];return je({},o,{parentDist:null,parentScale:l,parentKeepRatio:s,dragClient:ee(u,[r,a])})}),r=je({targets:i.props.targets,events:n},e);return zn(i,"onScaleGroup",r),r}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale)return this.dragControlEnd(t,e),Zn(t,this,"dragControlEnd",r,e),zn(t,"onScaleGroupEnd",Cn(t,e,{targets:t.props.targets,isDrag:n})),n},request:function(){var e={},n=0,r=0;return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return n+=t.deltaWidth,r+=t.deltaHeight,{datas:e,parentDist:[n,r]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function fa(t,o){return t.map(function(t,e){return n=t,r=o[e],(n*(i=2)+r*(a=1))/(a+i);var n,r,a,i})}function pa(t,e,n){var r=Vt(t,e),a=Vt(t,n)-r;return 0<=a?a:a+2*Math.PI}var da={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},render:function(t,e){var n=t.props,r=n.resizable,a=n.scalable,i=n.warpable;if(!r&&!a&&i){var o=t.state,s=o.pos1,l=o.pos2,u=o.pos3,c=o.pos4,f=fa(s,l),p=fa(l,s),d=fa(s,u),h=fa(u,s),g=fa(u,c),v=fa(c,u),m=fa(l,c),b=fa(c,l);return[e.createElement("div",{className:Ve("line"),key:"middeLine1",style:pn(f,g)}),e.createElement("div",{className:Ve("line"),key:"middeLine2",style:pn(p,v)}),e.createElement("div",{className:Ve("line"),key:"middeLine3",style:pn(d,m)}),e.createElement("div",{className:Ve("line"),key:"middeLine4",style:pn(h,b)})].concat(sa(t,e))}},dragControlCondition:function(t){return!t.isRequest&&V(t.inputEvent.target,Ve("direction"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,a=t.props.target,i=yn(n.target);if(!i||!a)return!1;var o=t.state,s=o.transformOrigin,l=o.is3d,u=o.targetTransform,c=o.targetMatrix,f=o.width,p=o.height,d=o.left,h=o.top;return r.datas={},r.targetTransform=u,r.warpTargetMatrix=l?c:$t(c,3,4),r.targetInverseMatrix=Lt(Ht(r.warpTargetMatrix,4),3,4),r.direction=i,r.left=d,r.top=h,Qn(t,{datas:r}),r.poses=[[0,0],[f,0],[0,p],[f,p]].map(function(t){return ne(t,s)}),r.nextPoses=r.poses.map(function(t){var e=t[0],n=t[1];return re(r.warpTargetMatrix,[e,n,0,1],4)}),r.startMatrix=se(4),r.prevMatrix=se(4),r.absolutePoses=wn(o),r.posIndexes=er(i),!(o.snapRenderInfo={request:e.isRequest,direction:i})!==zn(t,"onWarpStart",Cn(t,e,{set:function(t){r.startMatrix=t}}))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,a=e.distX,i=e.distY,o=n.targetInverseMatrix,s=n.prevMatrix,l=n.isWarp,u=n.startMatrix,c=n.poses,f=n.posIndexes,p=n.absolutePoses;if(!l)return!1;if(Gr(t,"warpable")){var d=f.map(function(t){return p[t]});1<d.length&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var h=qr(t,r,d.map(function(t){return[t[0]+a,t[1]+i]})),g=h.horizontal,v=h.vertical;i-=g.offset,a-=v.offset}var m=tr({datas:n,distX:a,distY:i},!0),b=n.nextPoses.slice();if(f.forEach(function(t){b[t]=ee(b[t],m)}),!Xe.every(function(t){return e=t.map(function(t){return c[t]}),n=t.map(function(t){return b[t]}),r=pa(e[0],e[1],e[2]),a=pa(n[0],n[1],n[2]),!((i=Math.PI)<=r&&a<=i||r<=i&&i<=a);var e,n,r,a,i}))return!1;var y=ce(c[0],c[1],c[2],c[3],b[0],b[1],b[2],b[3]);if(!y.length)return!1;var x=ie(Zt(o,y,4)),w=n.targetTransform+" matrix3d("+x.join(",")+")";return zn(t,"onWarp",Cn(t,e,{delta:Qt(Ht(s,4),x,4),matrix:Qt(u,n.prevMatrix=x,4),multiply:Qt,dist:x,transform:w})),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,zn(t,"onWarpEnd",Cn(t,e,{isDrag:r})),r)}},ha=Ve("area"),ga=Ve("area-pieces"),va=Ve("area-piece"),ma=Ve("avoid");function ba(t){var e=t.areaElement,n=t.state,r=n.width,a=n.height;$(e,ma),e.style.cssText+="left: 0px; top: 0px; width: "+r+"px; height: "+a+"px"}function ya(t){return t.createElement("div",{key:"area_pieces",className:ga},t.createElement("div",{className:va}),t.createElement("div",{className:va}),t.createElement("div",{className:va}),t.createElement("div",{className:va}))}var xa={name:"dragArea",props:{dragArea:Boolean},render:function(t,e){var n=t.props,r=n.target,a=n.dragArea,i=n.groupable,o=t.state,s=o.width,l=o.height,u=o.pos1,c=o.pos2,f=o.pos3,p=o.pos4;if(i)return[e.createElement("div",{key:"area",ref:m(t,"areaElement"),className:ha}),ya(e)];if(!r||!a)return[];var d=ce([0,0],[s,0],[0,l],[s,l],u,c,f,p),h=d.length?"matrix3d("+ie(d).join(",")+")":"none";return[e.createElement("div",{key:"area",ref:m(t,"areaElement"),className:ha,style:{top:"0px",left:"0px",width:s+"px",height:l+"px",transformOrigin:"0 0",transform:h}}),ya(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,a=e.clientY,i=e.inputEvent;if(!i)return!1;n.isDragArea=!1,n.inputTarget=i.target;var o=t.areaElement,s=t.state,l=s.targetClientRect,u=s.pos1,c=s.pos2,f=s.pos3,p=s.pos4,d=s.width,h=s.height,g=s.rootMatrix,v=s.is3d,m=l.left,b=l.top,y=ln([u,c,f,p]),x=y.left,w=y.top,E=v?4:3,M=sn(g,d,h,E),S=ln(M),D=ne([r,a],ee([m-S.left,b-S.top],M[0])),C=re(Ht(g,E),Ut(D,E),E),z=C[0],O=C[1],R=[{left:x,top:w,width:d,height:O-10},{left:x,top:w,width:z-10,height:h},{left:x,top:w+O+10,width:d,height:h-O-10},{left:x+z+10,top:w,width:d-z-10,height:h}],P=[].slice.call(o.nextElementSibling.children);R.forEach(function(t,e){P[e].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),U(o,ma)},drag:function(t,e){var n=e.datas;if(!e.inputEvent)return!1;n.isDragArea||(n.isDragArea=!0,ba(t))},dragEnd:function(t,e){if(!e.inputEvent)return!1;var n=e.inputEvent,r=e.isDragArea;e.datas.isDragArea||ba(t);var a=t.state.target,i=n.target;if(!r&&!t.isMoveableElement(i)){var o=a.contains(i);zn(t,"onClick",Cn(t,e,{inputTarget:i,isTarget:a===i,containsTarget:o}))}},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.isDragArea,a=e.datas;if(!n)return!1;r||ba(t);var i=a.inputTarget,o=n.target;if(!r&&!t.isMoveableElement(o)&&i!==o){var s=t.props.targets,l=s.indexOf(o),u=-1<l,c=!1;-1===l&&(c=-1<(l=L(s,function(t){return t.contains(o)}))),zn(t,"onClickGroup",Cn(t,e,{targets:s,inputTarget:o,targetIndex:l,isTarget:u,containsTarget:c}))}}},wa={name:"origin",props:{origin:Boolean},render:function(t,e){if(!t.props.origin)return null;var n=t.state,r=n.beforeOrigin,a=n.rotation;return[e.createElement("div",{className:Ve("control","origin"),style:dn(a,r),key:"beforeOrigin"})]}};function Ea(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Ma={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number},dragStart:function(i,o){var t=i.props.scrollContainer,e=void 0===t?i.getContainer():t,n=new Re;o.datas.dragScroll=n;var r=o.isControl?"controlDragger":"targetDragger",s=o.targets;n.on("scroll",function(t){var e=t.container,n=t.direction,r=Cn(i,o,{scrollContainer:e,direction:n}),a=s?"onScrollGroup":"onScroll";s&&(r.targets=s),zn(i,a,r)}).on("move",function(t){var e=t.offsetX,n=t.offsetY;i[r].scrollBy(e,n,o.inputEvent,!1)}),n.dragStart(o,{container:e})},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,a=r.scrollContainer,i=void 0===a?t.getContainer():a,o=r.scrollThreshold,s=void 0===o?0:o,l=r.getScrollPosition,u=void 0===l?Ea:l;return n.drag(e,{container:i,threshold:s,getScrollPosition:function(t){return u({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,je({},e,{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,je({},e,{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,je({},e,{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,je({},e,{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,je({},e,{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,je({},e,{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,je({},e,{targets:t.props.targets}))}},Sa={name:"",props:{target:Object,container:Object,dragArea:Boolean,origin:Boolean,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number}},Da={name:"padding",props:{padding:Object},render:function(t,i){var e=t.props.padding||{},n=e.left,r=void 0===n?0:n,a=e.top,o=void 0===a?0:a,s=e.right,l=void 0===s?0:s,u=e.bottom,c=void 0===u?0:u,f=t.state,p=f.renderPoses,d=[f.pos1,f.pos2,f.pos3,f.pos4],h=[];return 0<r&&h.push([0,2]),0<o&&h.push([0,1]),0<l&&h.push([1,3]),0<c&&h.push([2,3]),h.map(function(t,e){var n=t[0],r=t[1],a=ce([0,0],[100,0],[0,100],[100,100],d[n],d[r],p[n],p[r]);if(a.length)return i.createElement("div",{key:"padding"+e,className:Ve("padding"),style:{transform:"matrix3d("+ie(a).join(",")+")"}})})}},Ca=[Sa,Zr,Vn,Qr,ia,ua,ca,da,Ma,xa,Da,wa],za={name:"groupable",props:{defaultGroupRotate:Number,groupable:Boolean},render:function(n,r){var t=n.props.targets||[];n.moveables=[];var e=n.state,a={left:e.left,top:e.top};return t.map(function(t,e){return r.createElement(Hn,{key:"moveable"+e,ref:o(n,"moveables",e),target:t,origin:!1,parentMoveable:n,parentPosition:a})})}};function Oa(t,i){return Math.max.apply(Math,t.map(function(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.max(e[i],n[i],r[i],a[i])}))}function Ra(t,i){return Math.min.apply(Math,t.map(function(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.min(e[i],n[i],r[i],a[i])}))}var Pa=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.differ=new Be,t.moveables=[],t.rotation=0,t}Ae(t,n);var e=t.prototype;return e.updateEvent=function(t){var e=this.state,n=this.props;e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetDragger=In(this,e.target,"Group"),this.controlDragger=Yn(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var r=!Gn(t.container,n.container);r&&(e.container=n.container);var a=this.differ.update(n.targets),i=a.added,o=a.changed,s=a.removed;(r||i.length||o.length||s.length)&&this.updateRect()},e.checkUpdate=function(){this.updateAbles()},e.updateRect=function(e,t,n){var r;if(void 0===n&&(n=!0),this.controlBox){this.moveables.forEach(function(t){t.updateRect(e,!1,!1)});var a=this.state,i=this.props,o=a.target||i.target;(!t||""!==e&&i.updateGroup)&&(this.rotation=i.defaultGroupRotate);var s=this.rotation,l=function(t,e){if(!t.length)return[0,0,0,0];var n=t.map(function(t){return wn(t.state)}),a=Fe,i=Fe,r=0,o=0,s=En(e,We);if(s%90){var l=e/180*Math.PI,u=Math.tan(l),c=-1/u,f=[Le,Fe],p=[Le,Fe];n.forEach(function(t){t.forEach(function(t){var e=t[1]-u*t[0],n=t[1]-c*t[0];f[0]=Math.max(f[0],e),f[1]=Math.min(f[1],e),p[0]=Math.max(p[0],n),p[1]=Math.min(p[1],n)})}),f.forEach(function(r){p.forEach(function(t){var e=(t-r)/(u-c),n=u*e+r;a=Math.min(a,e),i=Math.min(i,n)})});var d=n.map(function(t){var e=t[0],n=t[1],r=t[2],a=t[3];return[ae(e,-l),ae(n,-l),ae(r,-l),ae(a,-l)]});r=Oa(d,0)-Ra(d,0),o=Oa(d,1)-Ra(d,1)}else if(a=Ra(n,0),i=Ra(n,1),r=Oa(n,0)-a,o=Oa(n,1)-i,s%180){var h=r;r=o,o=h}return[a,i,r,o]}(this.moveables,s),u=l[0],c=l[1],f=l[2],p=l[3];o.style.cssText+="left:0px;top:0px;width:"+f+"px; height:"+p+"px;transform:rotate("+s+"deg)",a.width=f,a.height=p;var d=this.getContainer(),h=vn(o,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||d,a),g=[h.left,h.top];r=wn(h),h.pos1=r[0],h.pos2=r[1],h.pos3=r[2],h.pos4=r[3],h.origin=ee(g,h.origin),h.beforeOrigin=ee(g,h.beforeOrigin);var v=h.targetClientRect;v.top+=c-h.top-a.top,v.left+=u-h.left-a.left,this.updateState(je({},h,{left:u-h.left,top:c-h.top}),n)}},e.triggerEvent=function(t,e){if(-1<t.indexOf("Group"))return n.prototype.triggerEvent.call(this,t,e)},e.updateAbles=function(){n.prototype.updateAbles.call(this,this.props.ables.concat([za]),"Group")},t.defaultProps=je({},Hn.defaultProps,{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0}),t}(Hn),_a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Ae(e,t);var n=e.prototype;return n.render=function(){var t=this.props.ables||[],e=this.props.target||this.props.targets,n=ht(e);if(n&&1<e.length){var r=je({},this.props,{target:null,targets:e,ables:Ca.concat([za],t)});return ct(Pa,je({key:"group",ref:m(this,"moveable")},r))}var a=n?e[0]:e;return ct(Hn,je({key:"single",ref:m(this,"moveable")},je({},this.props,{target:a,ables:Ca.concat(t)})))},n.isMoveableElement=function(t){return this.moveable.isMoveableElement(t)},n.dragStart=function(t){this.moveable.dragStart(t)},n.isInside=function(t,e){return this.moveable.isInside(t,e)},n.hitTest=function(t){return this.moveable.hitTest(t)},n.updateRect=function(){this.moveable.updateRect()},n.updateTarget=function(){this.moveable.updateTarget()},n.isDragging=function(){return this.moveable.isDragging()},n.getRect=function(){return this.moveable.getRect()},n.request=function(t,e){return this.moveable.request(t,e)},n.destroy=function(){this.moveable.componentWillUnmount()},e}(wt),Ga=function(n){function t(t){var e=n.call(this,t)||this;return e.state={},e.state=e.props,e}return a(t,n),t.prototype.render=function(){return zt(ct(_a,s({ref:m(this,"moveable")},this.state)),this.state.parentElement)},t}(xt),Ba=["draggable","resizable","scalable","rotatable","warpable","pinchable","snappable","origin","target","edge","throttleDrag","throttleDragRotate","throttleResize","throttleScale","throttleRotate","keepRatio","dragArea","pinchThreshold","snapCenter","snapThreshold","horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","className","renderDirections","scrollable","getScrollPosition","scrollContainer","scrollThreshold","baseDirection","snapElement","snapVertical","snapHorizontal","snapGap","isDisplaySnapDigit","snapDigit","zoom","triggerAblesSimultaneously","padding","snapDistFormat","dragTarget"],ka=["dragStart","drag","dragEnd","resizeStart","resize","resizeEnd","scaleStart","scale","scaleEnd","rotateStart","rotate","rotateEnd","warpStart","warp","warpEnd","pinchStart","pinch","pinchEnd","dragGroupStart","dragGroup","dragGroupEnd","resizeGroupStart","resizeGroup","resizeGroupEnd","scaleGroupStart","scaleGroup","scaleGroupEnd","rotateGroupStart","rotateGroup","rotateGroupEnd","pinchGroupStart","pinchGroup","pinchGroupEnd","click","clickGroup","scroll","scrollGroup","renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd","snap"],Aa=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging"],ja=function(o){function t(t,e){void 0===e&&(e={});var n=o.call(this)||this;n.tempElement=document.createElement("div");var r=s({container:t},e),a={};ka.forEach(function(e){a[("on "+e).replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})]=function(t){return n.trigger(e,t)}}),Ct(ct(Ga,s({ref:m(n,"innerMoveable"),parentElement:t},r,a)),n.tempElement);var i=r.target;return ht(i)&&1<i.length&&n.updateRect(),n}a(t,o);var e=t.prototype;return e.setState=function(t,e){this.innerMoveable.setState(t,e)},e.destroy=function(){Ct(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.moveable},t=function(t,e,n,r){var a,i=arguments.length,o=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(a=t[s])&&(o=(i<3?a(o):3<i?a(e,n,o):a(e,n))||o);return 3<i&&o&&Object.defineProperty(e,n,o),o}([u(Aa,function(t,r){t[r]||(t[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.getMoveable();if(n&&n[r])return n[r].apply(n,t)})}),u(Ba,function(t,n){Object.defineProperty(t,n,{get:function(){return this.getMoveable().props[n]},set:function(t){var e;this.setState(((e={})[n]=t,e))},enumerable:!0,configurable:!0})})],t)}(t),Ta={draggable:{vanilla:'\nimport Moveable from "moveable";\n\n/* const translate = [0, 0]; */\nconst draggable = new Moveable(document.body, {\n    target: document.querySelector(".draggable"),\n    draggable: true,\n    throttleDrag: 0,\n}).on("drag", ({ target, left, top, beforeDelta }) => {\n    target.style.left = left + "px";\n    target.style.top = top + "px";\n\n    /* translate[0] += beforeDelta[0]; */\n    /* translate[1] += beforeDelta[1]; */\n    /* target.style.transform\n        = "translateX(" + translate[0] + "px) "\n        + "translateY(" + translate[1] + "px)"; */\n});\n        ',react:'\nimport Moveable from "react-moveable";\nthis.translate = [0, 0];\nreturn (\n    <Moveable\n        target={document.querySelector(".draggable")}\n        draggable={true}\n        throttleDrag={0}\n        onDrag={({ target, left, top, beforeDelta }) => {\n            target.style.left = left + "px";\n            target.style.top = top + "px";\n\n            /* const translate = this.translate */\n            /* translate[0] += beforeDelta[0]; */\n            /* translate[1] += beforeDelta[1]; */\n            /* target.style.transform\n                = "translateX(" + translate[0] + "px) "\n                + "translateY(" + translate[1] + "px)"; */\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [draggable]="true"\n    [throttleDrag]="0"\n    (drag)="onDrag($event)\n    />\n`,\n})\nexport class AppComponent {\n    translate = [0, 0];\n    onDrag({ target, left, top, beforeDelta }) {\n        target.style.left = left + "px";\n        target.style.top = top + "px";\n\n        /* const translate = this.translate */\n        /* translate[0] += beforeDelta[0]; */\n        /* translate[1] += beforeDelta[1]; */\n        /* target.style.transform\n            = "translateX(" + translate[0] + "px) "\n            + "translateY(" + translate[1] + "px)"; */\n    }\n}\n',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let translate = [0, 0];\n    let target;\n<\/script>\n<div class="target draggable" bind:this={target}>Draggable</div>\n<Moveable\n    target={target}\n    draggable={true}\n    throttleDrag={0}\n    on:drag={({ detail }) => {\n        target.style.left = detail.left + "px";\n        target.style.top = detail.top + "px";\n    }}\n/>'},resizable:{vanilla:'\nimport Moveable from "moveable";\n\nconst resizable = new Moveable(document.body, {\n    target: document.querySelector(".resizable"),\n    resizable: true,\n    throttleResize: 0,\n    keepRatio: true,\n}).on("resize", ({ target, width, height, dist }) => {\n    console.log(width, height, dist);\n    target.style.width = width + "px";\n    target.style.height = height + "px";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nreturn (\n    <Moveable\n        target={document.querySelector(".resizable")}\n        resizable={true}\n        throttleResize={0}\n        keepRatio={true}\n        onResize={({ target, width, height, dist }) => {\n            console.log(width, height, dist);\n            target.style.width = width + "px";\n            target.style.height = height + "px";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [resizable]="true"\n    [throttleResize]="0"\n    [keepRatio]="true"\n    (resize)="onResize($event)\n    />\n`,\n})\nexport class AppComponent {\n    onResize({ target, width, height, dist }) {\n        console.log(width, height, dist);\n        target.style.width = width + "px";\n        target.style.height = height + "px";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let translate = [0, 0];\n    let target;\n<\/script>\n<div class="target resizable" bind:this={target}>Resizable</div>\n<Moveable\n    target={target}\n    resizable={true}\n    throttleResize={0}\n    keepRatio={true}\n    on:resize={({ detail }) => {\n        const { target, width, height, dist } = detail;\n        target.style.width = width + "px";\n        target.style.height = height + "px";\n    }}\n/>'},scalable:{vanilla:'\nimport Moveable from "moveable";\n\nconst scale = [1, 1];\nconst scalable = new Moveable(document.body, {\n    target: document.querySelector(".scalable"),\n    scalable: true,\n    throttleScale: 0,\n    keepRatio: true,\n}).on("scale", ({ target, delta }) => {\n    scale[0] *= delta[0];\n    scale[1] *= delta[1];\n    target.style.transform = "scale(" + scale[0] +  "," + scale[1] + ")";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.scale = [1, 1];\nreturn (\n    <Moveable\n        target={document.querySelector(".scalable")}\n        scalable={true}\n        throttleScale={0}\n        keepRatio={true}\n        onScale={({ target, delta }) => {\n            const scale = this.scale;\n            scale[0] *= delta[0];\n            scale[1] *= delta[1];\n            target.style.transform\n                = "scale(" + scale[0] +  "," + scale[1] + ")";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [scalable]="true"\n    [throttleScale]="0"\n    [keepRatio]="true"\n    (scale)="onScale($event)\n    />\n`,\n})\nexport class AppComponent {\n    scale = [1, 1];\n    onScale({ target, delta }) {\n        const scale = this.scale;\n        scale[0] *= delta[0];\n        scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + scale[0] +  "," + scale[1] + ")";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let scale = [1, 1];\n    let target;\n<\/script>\n<div class="target scalable" bind:this={target}>Scalable</div>\n<Moveable\n    target={target}\n    scalable={true}\n    throttleScale={0}\n    keepRatio={true}\n    on:scale={({ detail: { target, delta }}) => {\n        scale[0] *= delta[0];\n        scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + scale[0] +  "," + scale[1] + ")";\n    }}\n/>'},rotatable:{vanilla:'\nimport Moveable from "moveable";\n\nlet rotate = 0;\n\nconst rotatable = new Moveable(document.body, {\n    target: document.querySelector(".rotatable"),\n    rotatable: true,\n    throttleRotate: 0,\n}).on("rotate", ({ target, beforeDelta, delta }) => {\n    rotate += delta;\n    target.style.transform\n        = "rotate(" + rotate +  "deg)";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.rotate = 0;\n\nreturn (\n    <Moveable\n        target={document.querySelector(".rotatable")}\n        rotatable={true}\n        throttleRotate={0}\n        onRotate={({ target, beforeDelta, delta }) => {\n            this.rotate += delta;\n            target.style.transform\n                = "rotate(" + this.rotate +  "deg)";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [rotatable]="true"\n    [throttleRotate]="0"\n    [keepRatio]="true"\n    (rotate)="onRotate($event)\n    />\n`,\n})\nexport class AppComponent {\n    rotate = 0;\n    onRotate({ target, delta }) {\n        this.rotate += delta;\n        target.style.transform\n            = "rotate(" + this.rotate +  "deg)";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let rotate = 0;\n    let target;\n<\/script>\n<div class="target rotatable" bind:this={target}>Rotatable</div>\n<Moveable\n    target={target}\n    rotatable={true}\n    throttleRotate={0}\n    on:rotate={({ detail }) => {\n        const { target, beforeDelta, delta } = detail;\n        rotate += delta;\n        target.style.transform\n            = "rotate(" + rotate +  "deg)";\n    }}\n/>'},warpable:{vanilla:'\nimport Moveable from "moveable";\n\nlet matrix = [\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1,\n];\n\nconst warpable = new Moveable(document.body, {\n    target: document.querySelector(".warpable"),\n    warpable: true,\n    throttleRotate: 0,\n}).on("warp", ({ target, multiply, delta }) => {\n    matrix = multiply(matrix, delta);\n    target.style.transform\n        = "matrix3d(" + matrix.join(",") +  ")";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.matrix = [\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1,\n];\n\nreturn (\n    <Moveable\n        target={document.querySelector(".warpable")}\n        warpable={true}\n        onWarp={({ target, multiply, delta }) => {\n            this.matrix = multiply(this.matrix, delta);\n            target.style.transform\n                = "matrix3d(" + matrix.join(",") +  ")";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [warpable]="true"\n    (warp)="onWarp($event)\n    />\n`,\n})\nexport class AppComponent {\n    matrix = [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n    onWarp({ target, dist }) {\n        this.matrix = multiply(this.matrix, delta);\n        target.style.transform\n            = "matrix3d(" + matrix.join(",") +  ")";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let matrix = [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n    let target;\n<\/script>\n<div class="target scalable" bind:this={target}>Scalable</div>\n<Moveable\n    target={target}\n    warpable={true}\n    on:warp={({ detail }) => {\n        const { target, multiply, delta } = detail;\n        matrix = multiply(matrix, delta);\n        target.style.transform\n            = "matrix3d(" + matrix.join(",") +  ")";\n    }}\n/>'},pinchable:{vanilla:'\nimport Moveable from "moveable";\nconst scale = [1, 1];\nlet rotate = 0;\n\nconst pinchable = new Moveable(document.body, {\n    target: document.querySelector(".pinchable"),\n    pinchable: ["rotatable", "scalable"],\n}).on("rotate", ({ target, beforeDelta }) => {\n    rotate += beforeDelta;\n    target.style.transform = "scale(" + scale.join(", ") + ") rotate(" + rotate + "deg)";\n}).on("scale", ({ target, delta }) => {\n    scale[0] *= delta[0];\n    scale[1] *= delta[1];\n    target.style.transform = "scale(" + scale.join(", ") + ") rotate(" + rotate + "deg)";\n});',react:'\nimport Moveable from "react-moveable";\nthis.scale = [1, 1];\nthis.rotate = 0;\n\nreturn (\n    <Moveable\n        target={document.querySelector(".pinchable")}\n        pinchable={["rotatable", "scalable"]},\n        onRotate={({ target, beforeDelta }) => {\n            this.rotate += beforeDelta;\n            target.style.transform\n                = "scale(" + this.scale.join(", ") + ") "\n                + "rotate(" + this.rotate + "deg)";\n        }}\n        onScale={({ target, beforeDelta }) => {\n            this.scale[0] *= delta[0];\n            this.scale[1] *= delta[1];\n            target.style.transform\n                = "scale(" + this.scale.join(", ") + ") "\n                + "rotate(" + this.rotate + "deg)";\n        }}\n    />\n);',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n    <div #target class="target">target</div>\n    <ngx-moveable\n        [target]="target"\n        [pinchable]="[\'rotatable\', \'scalable\']"\n        [rotate]="onRotate($event)"\n        [scale]="onScale($event)"\n/>\n`,\n})\nexport class AppComponent {\n    scale = [1, 1];\n    rotate = 0;\n    onRotate({ target, beforeDelta }) {\n        this.rotate += beforeDelta;\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }\n    onScale({ target, beforeDelta }) {\n        this.scale[0] *= delta[0];\n        this.scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }\n}\n',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let matrix = [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n    let target;\n<\/script>\n<div class="target pinchable" bind:this={target}>Pinchable</div>\n<Moveable\n    target={target}\n    pinchable={["rotatable", "scalable"]},\n    on:rotate={({ detail: { target, beforeDelta }}) => {\n        this.rotate += beforeDelta;\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }}\n    on:scale={({ detail: { target, beforeDelta }}) => {\n        this.scale[0] *= delta[0];\n        this.scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }}\n/>'},snappable:{vanilla:'\nimport Moveable from "moveable";\n\nconst snappable = new Moveable(document.body, {\n    target: document.querySelector(".snappable"),\n    snappable: true,\n    verticalGuidelines: [0, 150, 200],\n    horizontalGuidelines: [0, 150, 200],\n}).on("drag", ({ target, left, top }) => {\n    target.style.left = left + "px";\n    target.style.top = top + "px";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nreturn (\n    <Moveable\n        target={document.querySelector(".origin")}\n        origin={true}\n        snappable={true}\n        verticalGuidelines={[0, 150, 200]}\n        horizontalGuidelines={[0, 150, 200]}\n        onDrag={({ target, left, top }) => {\n            target.style.left = left + "px";\n            target.style.top = top + "px";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [snappable]="true"\n    [verticalGuidelines]="[0, 150, 200]"\n    [horizontalGuidelines]="[0, 150, 200]"\n    />\n`,\n})\nexport class AppComponent {\n    onDrag({ target, left, top }) {\n        target.style.left = left + "px";\n        target.style.top = top + "px";\n    }\n}\n',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let target;\n<\/script>\n<div class="target pinchable" bind:this={target}>Pinchable</div>\n<Moveable\n    target={target}\n    origin={true}\n    snappable={true}\n    verticalGuidelines={[0, 150, 200]}\n    horizontalGuidelines={[0, 150, 200]}\n    on:drag={({ detail: { target, left, top }}) => {\n        target.style.left = left + "px";\n        target.style.top = top + "px";\n    }}\n/>'},groupable:{vanilla:'\nimport Moveable from "moveable";\nconst poses = [\n    [0, 0],\n    [0, 0],\n    [0, 0],\n];\nconst target = [].slice.call(\n    document.querySelectorAll(".target"),\n);\nconst groupable = new Moveable(document.body, {\n    target,\n    draggable: true,\n}).on("dragGroup", ({ events }) => {\n    events.forEach(({ target, beforeDelta }, i) => {\n        poses[i][0] += beforeDelta[0];\n        poses[i][1] += beforeDelta[1];\n\n        target.style.transform\n            = "translate("\n            + poses[i][0] + "px, "\n            + poses[i][1] + "px)";\n    });\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.poses = [\n    [0, 0],\n    [0, 0],\n    [0, 0],\n];\n\nconst target = [].slice.call(\n    document.querySelectorAll(".target"),\n);\nreturn (\n    <Moveable\n        target={target}\n        draggable={true}\n        onDragGroup={({ events }) => {\n            events.forEach(({ target, beforeDelta }, i) => {\n                this.poses[i][0] += beforeDelta[0];\n                this.poses[i][1] += beforeDelta[1];\n\n                target.style.transform\n                    = "translate("\n                    + this.poses[i][0] + "px, "\n                    + this.poses[i][1] + "px)";\n            });\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target1 class="target">target1</div>\n<div #target2 class="target">target2</div>\n<div #target3 class="target">target3</div>\n<ngx-moveable\n    [target]="[target1, target2, target3]"\n    [draggable]="true"\n    (dragGroup)="onDragGroup($event)\n    />\n`,\n})\nexport class AppComponent {\n    poses = [\n        [0, 0],\n        [0, 0],\n        [0, 0],\n    ];\n    onDragGroup({ events }) {\n        events.forEach(({ target, beforeDelta }, i) => {\n            this.poses[i][0] += beforeDelta[0];\n            this.poses[i][1] += beforeDelta[1];\n\n            target.style.transform\n                = "translate("\n                + this.poses[i][0] + "px, "\n                + this.poses[i][1] + "px)";\n        });\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n    import { onMount } from "svelte";\n    let targets = [];\n    let translates = [];\n\n    onMount(() => {\n        targets = [].slice.call(document.querySelectorAll(".target"));\n        translates = targets.map(() => {\n            return [0, 0];\n        });\n    });\n<\/script>\n<div class="target">Target1</div>\n<div class="target">Target2</div>\n<div class="target">Target3</div>\n<Moveable\n    target={targets}\n    draggable={true}\n    on:dragGroup={({ detail: { events }}) => {\n        events.forEach(({ target, beforeDelta }, i) => {\n            translates[i][0] += beforeDelta[0];\n            translates[i][1] += beforeDelta[1];\n\n            target.style.transform\n                = "translate("\n                + translates[i][0] + "px, "\n                + translates[i][1] + "px)";\n        });\n    }}\n/>'}};function qa(t,e,n){var r=1-n;return n*n*n+3*n*n*r*e+3*n*r*r*t}function Na(n,r,a,i){function t(t){var e=function(t,e,n){for(var r=n,a=1;.001<Math.abs(a);){if(a=qa(t,e,r)-n,Math.abs(a)<.001)return r;r-=a/2}return r}(n,a,Math.max(Math.min(1,t),0));return qa(r,i,e)}return t.easingName="cubic-bezier("+n+","+r+","+a+","+i+")",t}function Ia(n,r){function t(t){var e=1/n;return 1<=t?1:("start"===r?e:0)+Math.floor(t/e)*e}return t.easingName="steps("+n+", "+r+")",t}var Ya,Xa=Ia(1,"start"),Wa=Ia(1,"end"),Fa=Na(0,0,1,1),La=Na(.25,.1,.25,1),Ha=Na(.42,0,1,1),Ka=Na(0,0,.58,1),Va=Na(.42,0,.58,1),Ua="animation-timing-function",$a={transform:{},filter:{},attribute:{},html:!0},Ja={easing:[Ua]},Za=((Ya={})[Ua]=!0,Ya.contents=!0,Ya.html=!0,Ya),Qa={linear:Fa,ease:La,"ease-in":Ha,"ease-out":Ka,"ease-in-out":Va,"step-start":Xa,"step-end":Wa},ti=function(){function i(t,e){this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",e&&this.setOptions(e),this.value=N(t)?t.split(this.separator):t}var t=i.prototype;return t.setOptions=function(t){for(var e in t)this[e]=t[e];return this},t.size=function(){return this.value.length},t.get=function(t){return this.value[t]},t.set=function(t,e){return this.value[t]=e,this},t.clone=function(){var t=this.separator,e=this.prefix,n=this.suffix,r=this.model,a=this.type;return new i(this.value.map(function(t){return t instanceof i?t.clone():t}),{separator:t,prefix:e,suffix:n,model:r,type:a})},t.toValue=function(){return this.prefix+this.join()+this.suffix},t.join=function(){return this.value.map(function(t){return t instanceof i?t.toValue():t}).join(this.separator)},t.forEach=function(t){return this.value.forEach(t),this},i}();function ei(t){var e=g;return 3===t.length&&(t[3]=1),new ti(t,{model:e,separator:",",type:"color",prefix:e+"(",suffix:")"})}function ni(t,e){return new ti(t,{type:"array",separator:e})}function ri(t,e){if(!N(t))return ht(t)?ni(t,","):t;var n,r,a=X(t);return 1<a.length?ni(a.map(function(t){return ri(t)}),","):1<(a=Y(t,"")).length?ni(a.map(function(t){return ri(t)})," "):(a=/^(['"])([^'"]*)(['"])$/g.exec(t))&&a[1]===a[3]?new ti([ri(a[2])],{prefix:a[1],suffix:a[1]}):-1!==t.indexOf("(")?function(t){var e=W(t),n=e.prefix,r=e.value,a=e.suffix;if(void 0===r)return t;if(-1<M.indexOf(n))return ei(K(t));var i=ri(r,n),o=[r],s=",",l=n+"(",u=")"+a;return i instanceof ti&&(s=i.separator,o=i.value,l+=i.prefix,u=i.suffix+u),new ti(o,{separator:s,model:n,prefix:l,suffix:u})}(t):"#"===t.charAt(0)&&"url"!==e?(r=K(n=t))?ei(r):n:t}function ai(t){return t instanceof ti}function ii(t){var e=typeof t;if(e===z){if(ht(t))return C;if(ai(t))return D}else if(e===O||e===R)return"value";return e}function oi(t,e){var n,r=[];if(q(n=t)&&n.constructor===Object)for(var a in t)e.push(a),r=r.concat(oi(t[a],e)),e.pop();else r.push(e.slice());return r}function si(t,e,n){void 0===n&&(n=t.length);for(var r=e,a=0;a<n;++a){if(!q(r))return;r=r[t[a]]}return r}function li(t,e,n){var r=e.length,a=t;if(0===r)return!1;for(var i=0;i<r;++i){if(!0===a)return!1;if(!(a=a[e[i]])||!n&&!0===a)return!1}return!0}function ui(t,e){return li($a,t,e)}function ci(t){return li(Za,t,!0)}function fi(t){if(!t)return"";var e=[];for(var n in t)e.push(n.replace(/\d$/g,"")+"("+t[n]+")");return e.join(" ")}function pi(t,e){return void 0===e&&(e=!1),di({},t,e)}function di(t,e,n){for(var r in void 0===n&&(n=!1),e){var a=e[r],i=ii(a);i===D?t[r]=n?a.toValue():a.clone():i===S?t[r]=n?gi([r],a):a:i===C?t[r]=a.slice():i===z?q(t[r])&&!ai(t[r])?di(t[r],a,n):t[r]=pi(a,n):t[r]=e[r]}return t}function hi(t){return t[0]in Ja?Ja[t[0]]:t}function gi(t,e){var n=ii(e);if(n===D)return e.toValue();if(n===S){if(t[0]!==Ua)return gi(t,e())}else if(n===z)return pi(e,!0);return e}var vi=function(){function p(t){void 0===t&&(t={}),this.properties={},this.set(t)}var t=p.prototype;return t.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.raw.apply(this,t);return gi(hi(t),n)},t.raw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return si(hi(t),this.properties)},t.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=hi(t),r=n.length;if(!r)return this;var a=si(n,this.properties,r-1);return q(a)&&delete a[n[r-1]],this},t.set=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this,r=t.length,a=t.slice(0,-1),i=t[r-1],o=a[0];if(1===r&&i instanceof p)n.merge(i);else if(o in Ja)n._set(Ja[o],i);else if(2===r&&ht(o))n._set(o,i);else if(ai(i))ui(a)?n.set.apply(n,a.concat([function e(t,n){void 0===n&&(n={});var r=t.model;if(r){t.setOptions({model:"",suffix:"",prefix:""});var a=1<t.size()?t:t.get(0);n[r]=a}else t.forEach(function(t){e(t,n)});return n}(i)])):n._set(a,i);else if(ht(i))n._set(a,i);else if(q(i))for(var s in!n.has.apply(n,a)&&ui(a)&&n._set(a,{}),i)n.set.apply(n,a.concat([s,i[s]]));else if(N(i)){if(ui(a,!0)){if(ci(a)||!ui(a))this._set(a,i);else{var l=ri(i);q(l)&&n.set.apply(n,a.concat([l]))}return this}var u=function(t){for(var e=t.split(";"),n={},r=e.length,a=0;a<r;++a){var i=/([^:]*):([\S\s]*)/g.exec(e[a]);!i||i.length<3||!i[1]?--r:n[i[1].trim()]=ri(i[2].trim())}return{styles:n,length:r}}(i),c=u.styles,f=u.length;for(var s in c)n.set.apply(n,a.concat([s,c[s]]));if(f)return this;n._set(a,i)}else n._set(a,i);return n},t.getNames=function(){return oi(this.properties,[])},t.has=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=hi(t),r=n.length;return!!r&&!T(si(n,this.properties,r))},t.clone=function(){return(new p).merge(this)},t.merge=function(t){var e=this.properties,n=t.properties;return n&&di(e,n),this},t.toCSSObject=function(){var t=this.get(),e={};for(var n in t)if(!ui([n],!0)){var r=t[n];n===Ua?e[Ua.replace("animation",A)]=(N(r)?r:r.easingName)||"initial":e[n]=r}var a=fi(t.transform),i=fi(t.filter);return B&&a&&(e[B]=a),k&&i&&(e[k]=i),e},t.toCSS=function(){var t=this.toCSSObject(),e=[];for(var n in t)e.push(n+":"+t[n]+";");return e.join("")},t._set=function(t,e){for(var n=this.properties,r=t.length,a=0;a<r-1;++a){var i=t[a];i in n||(n[i]={}),n=n[i]}if(r)if(1===r&&t[0]===Ua)n[Ua]=function(t){var e;if(N(t))if(t in Qa)e=Qa[t];else{var n=ri(t);if(N(n))return 0;if("cubic-bezier"===n.model)e=Na((t=n.value.map(function(t){return parseFloat(t)}))[0],t[1],t[2],t[3]);else{if("steps"!==n.model)return 0;e=Ia(parseFloat(n.value[0]),n.value[1])}}else e=ht(t)?Na(t[0],t[1],t[2],t[3]):t;return e}(e);else{var o=t[r-1];n[o]=N(e)&&!ci(t)?ri(e,o):e}},p}(),mi=function(t,e){return(mi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var bi=function(e){function t(){this.constructor=n}var n,r;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={scrollPos:0},t.width=0,t.height=0,t}mi(n=a,r=e),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var i=a.prototype;return i.render=function(){return ct("canvas",{ref:m(this,"canvasElement"),style:this.props.style})},i.componentDidMount=function(){var t=this.canvasElement.getContext("2d");this.canvasContext=t,this.resize()},i.componentDidUpdate=function(){this.resize()},i.scroll=function(t){this.draw(t)},i.resize=function(){var t=this.canvasElement,e=this.props,n=e.width,r=e.height;this.width=n||t.offsetWidth,this.height=r||t.offsetHeight,t.width=2*this.width,t.height=2*this.height,this.draw()},i.draw=function(t){void 0===t&&(t=this.state.scrollPos);var e=this.props,n=e.unit,r=e.zoom,a=e.type,i=e.backgroundColor,o=e.lineColor,s=e.textColor,l=this.width,u=this.height;this.state.scrollPos=t;var c=this.canvasContext,f="horizontal"===a;c.rect(0,0,2*l,2*u),c.fillStyle=i,c.fill(),c.save(),c.scale(2,2),c.strokeStyle=o,c.lineWidth=1,c.font="10px sans-serif",c.fillStyle=s,c.translate(.5,0),c.beginPath();for(var p=f?l:u,d=r*n,h=Math.floor(t*r/d),g=Math.ceil((t*r+p)/d)-h,v=0;v<g;++v){var m=((v+h)*n-t)*r;if(-d<=m&&m<p){var b=f?3+m:l-18,y=f?u-18:m-4;f?c.fillText(""+(v+h)*n,b,y):(c.save(),c.translate(b,y),c.rotate(-Math.PI/2),c.fillText(""+(v+h)*n,0,0),c.restore())}for(var x=0;x<10;++x){var w=m+x/10*d;if(!(w<0||p<=w)){var E=0===x?f?u:l:x%2==0?10:7,M=f?w:l-E,S=f?w:l,D=f?u-E:w,C=f?u:w;c.moveTo(M,D),c.lineTo(S,C)}}}c.stroke(),c.restore()},a.defaultProps={type:"horizontal",zoom:1,width:0,height:0,unit:50,style:{width:"100%",height:"100%"},backgroundColor:"#333333",textColor:"#ffffff",lineColor:"#777777"},a}(wt),yi=function(t,e){return(yi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var xi=function(){return(xi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};var wi=function(t,e){return(wi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ei(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.apply(void 0,["scena-"].concat(t))}Ei("ruler");var Mi,Si,Di,Ci=Ei("guide","adder"),zi=Ei("guides"),Oi=Ei("guide"),Ri=Ei("dragging"),Pi=(Mi="div",Si=e("scena-",'\n{\n    position: relative;\n}\ncanvas {\n    position: relative;\n}\n.guides {\n    position: absolute;\n    top: 0;\n    left: 0;\n    will-change: transform;\n    z-index: 2000;\n}\n:host.horizontal .guides {\n    width: 100%;\n    height: 0;\n    top: 30px;\n}\n:host.vertical .guides {\n    height: 100%;\n    width: 0;\n    left: 30px;\n}\n.guide {\n    position: absolute;\n    background: #f33;\n    z-index: 2;\n}\n.guide.dragging:before {\n    position: absolute;\n    content: "";\n    width: 100%;\n    height: 100%;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n:host.horizontal .guide {\n    width: 100%;\n    height: 1px;\n    cursor: row-resize;\n}\n:host.vertical .guide {\n    width: 1px;\n    height: 100%;\n    cursor: col-resize;\n}\n.mobile :host.horizontal .guide {\n    transform: scale(1, 2);\n}\n.mobile :host.vertical .guide {\n    transform: scale(2, 1);\n}\n:host.horizontal .guide:before {\n    height: 20px;\n}\n:host.vertical .guide:before {\n    width: 20px;\n}\n.adder {\n    display: none;\n}\n.adder.dragging {\n    display: block;\n}\n'),Di=pe(Si),function(t){function e(){this.constructor=n}var n,r;function a(){return null!==t&&t.apply(this,arguments)||this}return yi(n=a,r=t),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e),a.prototype.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]])}return n}(t,["className"]);return ct(Mi,xi({ref:m(this,"element"),className:n+" "+Di.className},r))},a.prototype.componentDidMount=function(){this.injectResult=Di.inject(this.element)},a.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},a.prototype.getElement=function(){return this.element},a}(xt)),_i=function(t){function e(){this.constructor=n}var n,r;function a(){var u=null!==t&&t.apply(this,arguments)||this;return u.state={guides:[]},u.scrollPos=0,u.guideElements=[],u.onDragStart=function(t){var e=t.datas,n=t.clientX,r=t.clientY,a=t.inputEvent,i="horizontal"===u.props.type,o=u.guidesElement.getBoundingClientRect();e.offset=i?o.top:o.left,U(e.target,Ri),u.onDrag({datas:e,clientX:n,clientY:r}),a.stopPropagation(),a.preventDefault()},u.onDrag=function(t){var e=t.datas,n=t.clientX,r=t.clientY,a="horizontal"===u.props.type,i=Math.round((a?r:n)-e.offset);return e.target.style.transform=u.getTranslateName()+"("+i+"px)",i},u.onDragEnd=function(t){var e=t.datas,n=t.clientX,r=t.clientY,a=u.onDrag({datas:e,clientX:n,clientY:r}),i=u.state.guides,o=u.props.setGuides,s=Math.round(a/u.props.zoom);if($(e.target,Ri),e.fromRuler)a>=u.scrollPos&&i.indexOf(s)<0&&u.setState({guides:i.concat([s])},function(){o(u.state.guides)});else{var l=e.target.getAttribute("data-index");a<u.scrollPos||-1<i.indexOf(s)?i.splice(l,1):i[l]=s,u.setState({guides:i.slice()},function(){o(u.state.guides)})}},u}wi(n=a,r=t),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e);var i=a.prototype;return i.render=function(){var t=this.props,e=t.className,n=t.type,r=t.width,a=t.height,i=t.unit,o=t.zoom,s=t.style,l=t.rulerStyle,u=t.backgroundColor,c=t.lineColor,f=t.textColor;return ct(Pi,{ref:m(this,"manager"),className:Ei("manager",n)+" "+e,style:s},ct(bi,{ref:m(this,"ruler"),type:n,width:r,height:a,unit:i,zoom:o,backgroundColor:u,lineColor:c,style:l,textColor:f}),ct("div",{className:zi,ref:m(this,"guidesElement")},ct("div",{className:Ci,ref:m(this,"adderElement")}),this.renderGuides()))},i.renderGuides=function(){var n=this,t=this.props,r=t.type,a=t.zoom,i="horizontal"===r?"translateY":"translateX",e=this.state.guides;return this.guideElements=[],e.map(function(t,e){return ct("div",{className:Ei("guide",r),ref:o(n,"guideElements",e),key:e,"data-index":e,style:{transform:i+"("+t*a+"px)"}})})},i.componentDidMount=function(){var r=this;this.dragger=new Ce(this.manager.getElement(),{container:document.body,dragstart:function(t){var e=t.inputEvent.target,n=t.datas;if(e===r.ruler.canvasElement)t.datas.fromRuler=!0,n.target=r.adderElement;else{if(!V(e,Oi))return!1;n.target=e}r.onDragStart(t)},drag:this.onDrag,dragend:this.onDragEnd})},i.componentWillUnmount=function(){this.dragger.unset()},i.getGuides=function(){return this.state.guides},i.scrollGuides=function(n){var t=this.props.zoom,e=this.guidesElement;this.scrollPos=n,e.style.transform=this.getTranslateName()+"("+-n*t+"px)";var r=this.state.guides;this.guideElements.forEach(function(t,e){t&&(t.style.display=-n+r[e]<0?"none":"block")})},i.resize=function(){this.ruler.resize()},i.scroll=function(t){this.ruler.scroll(t)},i.getTranslateName=function(){return"horizontal"===this.props.type?"translateY":"translateX"},a.defaultProps={className:"",type:"horizontal",setGuides:function(){},zoom:1,style:{width:"100%",height:"100%"}},a}(wt),Gi=function(t,e){return(Gi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Bi=function(){return(Bi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};var ki=["setGuides","type","width","height","rulerStyle","unit","zoom","style","backgroundColor","lineColor","container","className","textColor"],Ai=function(n){function t(){this.constructor=e}var e,r;function a(t){var e=n.call(this,t)||this;return e.state={},e.state=e.props,e}return Gi(e=a,r=n),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t),a.prototype.render=function(){var t=this.state,e=t.container,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]])}return n}(t,["container"]);return zt(ct(_i,Bi({ref:m(this,"guides")},n)),e)},a}(xt),ji=function(){function t(t,e){void 0===e&&(e={}),this.tempElement=document.createElement("div"),Ct(ct(Ai,Bi({ref:m(this,"innerGuides")},e,{container:t})),this.tempElement)}var e=t.prototype;return e.scroll=function(t){this.getPreactGuides().scroll(t)},e.scrollGuides=function(t){this.getPreactGuides().scrollGuides(t)},e.resize=function(){this.getPreactGuides().resize()},e.getGuides=function(){return this.getPreactGuides().getGuides()},e.setState=function(t,e){this.innerGuides.setState(t,e)},e.destroy=function(){Ct(null,this.tempElement),this.tempElement=null,this.innerGuides=null},e.getPreactGuides=function(){return this.innerGuides.guides},t=function(t,e,n,r){var a,i=arguments.length,o=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(a=t[s])&&(o=(i<3?a(o):3<i?a(e,n,o):a(e,n))||o);return 3<i&&o&&Object.defineProperty(e,n,o),o}([u(ki,function(t,n){Object.defineProperty(t,n,{get:function(){return this.getPreactGuides().props[n]},set:function(t){var e;this.innerGuides.setState(((e={})[n]=t,e))},enumerable:!0,configurable:!0})})],t)}(),Ti=function(t,e){return(Ti=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var qi,Ni=(function(t,e){function n(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return o[t];var n,r=String(t);return(n=a[r.toLowerCase()])||(n=i[r.toLowerCase()])?n:1===r.length?r.charCodeAt(0):void 0}n.isEventKey=function(t,e){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;if(null==n)return!1;if("string"==typeof e){var r;if(r=a[e.toLowerCase()])return r===n;if(r=i[e.toLowerCase()])return r===n}else if("number"==typeof e)return e===n;return!1}};var a=(e=t.exports=n).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(r=97;r<123;r++)a[String.fromCharCode(r)]=r-32;for(var r=48;r<58;r++)a[r-48]=r;for(r=1;r<13;r++)a["f"+r]=r+111;for(r=0;r<10;r++)a["numpad "+r]=r+96;var o=e.names=e.title={};for(r in a)o[a[r]]=r;for(var s in i)a[s]=i[s]}(qi={exports:{}},qi.exports),qi.exports),Ii=(Ni.code,Ni.codes,Ni.aliases,Ni.names);Ni.title;function Yi(t){return Array.isArray(t)}function Xi(t){return"string"==typeof t}function Wi(t,e,n,r){t.addEventListener(e,n,r)}var Fi,Li={"+":"plus","left command":"meta","right command":"meta"},Hi={shift:1,ctrl:2,alt:3,meta:4};function Ki(t){var e=Ii[t]||"";for(var n in Li)e=e.replace(n,Li[n]);return e.replace(/\s/g,"")}function Vi(t){var e=t.slice();return e.sort(function(t,e){return(Hi[t]||5)-(Hi[e]||5)}),e}var Ui=function(n){function t(){this.constructor=e}var e,r;function a(t){void 0===t&&(t=window);var e=n.call(this)||this;return e.ctrlKey=!1,e.altKey=!1,e.shiftKey=!1,e.metaKey=!1,e.clear=function(){return e.ctrlKey=!1,e.altKey=!1,e.shiftKey=!1,e.metaKey=!1,e},e.keydownEvent=function(t){e.triggerEvent("keydown",t)},e.keyupEvent=function(t){e.triggerEvent("keyup",t)},Wi(t,"blur",e.clear),Wi(t,"keydown",e.keydownEvent),Wi(t,"keyup",e.keyupEvent),e}Ti(e=a,r=n),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var i=a.prototype;return Object.defineProperty(a,"global",{get:function(){return Fi=Fi||new a},enumerable:!0,configurable:!0}),i.keydown=function(t,e){return this.addEvent("keydown",t,e)},i.offKeydown=function(t,e){return this.removeEvent("keydown",t,e)},i.offKeyup=function(t,e){return this.removeEvent("keyup",t,e)},i.keyup=function(t,e){return this.addEvent("keyup",t,e)},i.addEvent=function(t,e,n){return Yi(e)?this.on(t+"."+Vi(e).join("."),n):Xi(e)?this.on(t+"."+e,n):this.on(t,e),this},i.removeEvent=function(t,e,n){return Yi(e)?this.off(t+"."+Vi(e).join("."),n):Xi(e)?this.off(t+"."+e,n):this.off(t,e),this},i.triggerEvent=function(t,e){this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var n=Ki(e.keyCode),r={key:n,isToggle:"ctrl"===n||"shift"===n||"meta"===n||"alt"===n,inputEvent:e,keyCode:e.keyCode,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};this.trigger(t,r),this.trigger(t+"."+n,r);var a=function(t,e){void 0===e&&(e=Ki(t.keyCode));var n=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return-1===n.indexOf(e)&&n.push(e),n.filter(Boolean)}(e,n);1<a.length&&this.trigger(t+"."+a.join("."),r)},a}(t),$i=Yt();($i.isMobile||-1<$i.os.name.indexOf("ios")||-1<$i.browser.name.indexOf("safari"))&&U(document.body,"mobile");var Ji=document.querySelector(".editor .view"),Zi=document.querySelector(".label"),Qi=document.querySelector(".rulers"),to=Qi.querySelector(".ruler.horizontal"),eo=Qi.querySelector(".ruler.vertical"),no=document.querySelector('.control input[name="x"]'),ro=document.querySelector('.control input[name="y"]'),ao=document.querySelector('.control input[name="w"]'),io=document.querySelector('.control input[name="h"]'),oo=document.querySelector('.control input[name="r"]'),so=document.querySelector(".moveable.target"),lo=new vi({left:"0px",top:"0px",width:"250px",height:"200px",transform:{translateX:window.innerWidth/2-125+"px",translateY:Math.max(700,window.innerHeight)/2-250+"px",rotate:"0deg",scaleX:1,scaleY:1}});function uo(t,e){function n(){e(t.value)}new Ui(t).keyup("enter",n),t.addEventListener("blur",n)}function co(t){lo.set("transform","translateX",t[0]+"px"),lo.set("transform","translateY",t[1]+"px"),setTimeout(function(){var t=ho.getRect();no.value=""+Math.round(10*t.left)/10,ro.value=""+Math.round(10*t.top)/10})}function fo(){so.style.cssText+=lo.toCSS()}uo(no,function(t){ho.request("draggable",{x:parseFloat(t),isInstant:!0})}),uo(ro,function(t){ho.request("draggable",{y:parseFloat(t),isInstant:!0})}),uo(ao,function(t){ho.request("resizable",{offsetWidth:parseFloat(t),isInstant:!0})}),uo(io,function(t){ho.request("resizable",{offsetHeight:parseFloat(t),isInstant:!0})}),uo(oo,function(t){ho.request("rotatable",{deltaRotate:parseFloat(t)-parseFloat(lo.get("transform","rotate")),isInstant:!0})}),no.value=""+parseFloat(lo.get("transform","translateX")),ro.value=""+parseFloat(lo.get("transform","translateY")),fo();var po=!1,ho=new ja(Ji,{target:so,draggable:!0,resizable:!0,rotatable:!0,snappable:!0,pinchable:!0,snapCenter:!0,snapThreshold:10,throttleResize:0,throttleRotate:1,keepRatio:!1,origin:!1,bounds:{left:0,top:0}}).on("dragStart",function(t){(0,t.set)([parseFloat(lo.get("transform","translateX")),parseFloat(lo.get("transform","translateY"))])}).on("drag",function(t){co(t.beforeTranslate)}).on("rotateStart",function(t){(0,t.set)(parseFloat(lo.get("transform","rotate")))}).on("rotate",function(t){var e=t.beforeRotate,n=t.clientX,r=t.clientY,a=t.isPinch;lo.set("transform","rotate",e+"deg"),oo.value=e+"",a||yo(n,r,e+"")}).on("resizeStart",function(t){var e=t.setOrigin,n=t.dragStart;e(["%","%"]),n&&n.set([parseFloat(lo.get("transform","translateX")),parseFloat(lo.get("transform","translateY"))])}).on("resize",function(t){var e=t.width,n=t.height,r=t.drag,a=t.clientX,i=t.clientY,o=t.isPinch;lo.set("width",e+"px"),lo.set("height",n+"px"),co(r.beforeTranslate),ao.value=""+e,io.value=""+n,o||yo(a,i,e+" X "+n)}).on("pinchStart",function(){po=!0}).on("pinch",function(t){bo(t.clientX,t.clientY)}).on("render",function(){po&&(Zi.innerHTML="W: "+parseFloat(lo.get("width"))+"<br/>H: "+parseFloat(lo.get("height"))+"<br/>R: "+parseFloat(lo.get("transform","rotate"))+""),fo()}).on("renderEnd",function(){po=!1,Zi.style.display="none"});function go(){return ho.innerMoveable.moveable.moveable.isDragging()}Ui.global.keydown("left",function(t){var e=t.inputEvent;go()||(ho.request("draggable",{deltaX:-10,isInstant:!0}),e.preventDefault())}).keydown("up",function(t){var e=t.inputEvent;go()||(ho.request("draggable",{deltaY:-10,isInstant:!0}),e.preventDefault())}).keydown("right",function(t){var e=t.inputEvent;go()||(ho.request("draggable",{deltaX:10,isInstant:!0}),e.preventDefault())}).keydown("down",function(t){var e=t.inputEvent;go()||(ho.request("draggable",{deltaY:10,isInstant:!0}),e.preventDefault())});var vo=new ji(to,{type:"horizontal",setGuides:xo,backgroundColor:"#444444"}),mo=new ji(eo,{type:"vertical",setGuides:xo,backgroundColor:"#444444"});function bo(t,e){Zi.style.cssText="display: block; transform: translate("+t+"px, "+(e-10)+"px) translate(-100%, -100%);"}function yo(t,e,n){bo(t,e),Zi.innerHTML=n}function xo(){var t=window.innerWidth/2+15,e=window.innerHeight/2;ho.verticalGuidelines=n(mo.getGuides(),[t]),ho.horizontalGuidelines=n(vo.getGuides(),[e])}function wo(t){t?(ho.throttleRotate=30,ho.throttleDragRotate=45,ho.keepRatio=!0):(ho.throttleRotate=1,ho.throttleDragRotate=0,ho.keepRatio=!1)}Ui.global.on("keydown",function(t){wo(t.shiftKey)}).on("keyup",function(t){wo(t.shiftKey)}),window.addEventListener("resize",function(){xo(),ho.updateRect(),vo.resize(),mo.resize()}),document.body.addEventListener("gesturestart",function(t){t.preventDefault()}),xo();var Eo=document.querySelector(".draggable"),Mo=new ja(Eo.parentElement,{target:Eo,origin:!1,draggable:!0}).on("drag",function(t){var e=t.target,n=t.transform;e.style.transform=n}),So=document.querySelector(".resizable"),Do=new ja(So.parentElement,{target:So,origin:!1,resizable:!0}).on("resize",function(t){var e=t.target,n=t.width,r=t.height;e.style.width=n+"px",e.style.height=r+"px"}),Co=document.querySelector(".scalable"),zo=new ja(Co.parentElement,{target:Co,origin:!1,scalable:!0}).on("scale",function(t){var e=t.target,n=t.transform;e.style.transform=n}),Oo=document.querySelector(".rotatable"),Ro=new ja(Oo.parentElement,{target:Oo,origin:!1,rotatable:!0}).on("rotate",function(t){var e=t.target,n=t.transform;e.style.transform=n}),Po=document.querySelector(".warpable"),_o=new ja(Po.parentElement,{target:Po,warpable:!0,origin:!1}).on("warp",function(t){var e=t.target,n=t.transform;e.style.transform=n}),Go=document.querySelector(".snappable"),Bo=(new ja(Go.parentElement,{target:Go,draggable:!0,snappable:!0,snapCenter:!0,origin:!1,verticalGuidelines:[0,150,200],horizontalGuidelines:[0,150,200]}).on("drag",function(t){var e=t.target,n=t.left,r=t.top;e.style.left=n+"px",e.style.top=r+"px"}),document.querySelector(".pinchable")),ko=[1,1],Ao=0,jo=new ja(Bo.parentElement,{target:Bo,pinchable:["rotatable","scalable"],origin:!1}).on("rotate",function(t){var e=t.beforeDelta;Ao+=e,Bo.style.transform="scale("+ko.join(", ")+") rotate("+Ao+"deg)"}).on("scale",function(t){var e=t.delta;ko[0]*=e[0],ko[1]*=e[1],Bo.style.transform="scale("+ko.join(", ")+") rotate("+Ao+"deg)"}),To=document.querySelector(".groupable"),qo=[[0,0],[0,0],[0,0]],No=new ja(To.parentElement,{target:[].slice.call(To.querySelectorAll("span")),origin:!1,draggable:!0}).on("dragGroup",function(t){t.events.forEach(function(t,e){var n=t.target,r=t.beforeDelta;qo[e][0]+=r[0],qo[e][1]+=r[1],n.style.transform="translate("+qo[e][0]+"px, "+qo[e][1]+"px)"})});window.addEventListener("resize",function(){Mo.updateRect(),Do.updateRect(),zo.updateRect(),Ro.updateRect(),_o.updateRect(),jo.updateRect(),No.updateRect()}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("pre").forEach(function(t){var e=t.getAttribute("data-group"),n=t.getAttribute("data-panel"),r=t.querySelector("code"),a=Ta[e]["preact"===n?"react":n].trim();"preact"===n&&(a=a.replace(/react/g,"preact")),r.innerText=a,hljs.highlightBlock(r)})});var Io={};[].slice.call(document.querySelectorAll("[data-tab]")).forEach(function(r){var t=r.getAttribute("data-group"),e=r.getAttribute("data-tab"),n=document.querySelector('[data-group="'+t+'"][data-panel="'+e+'"]');Io[t]||(Io[t]=[]),Io[t].push([r,n]),r.addEventListener("click",function(){Io[t].forEach(function(t){var e=t[0],n=t[1];r!==e&&(e.classList.remove("selected"),n.classList.remove("selected"))}),r.classList.add("selected"),n.classList.add("selected")})})}();
