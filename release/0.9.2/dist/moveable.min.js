/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable.git
version: 0.9.2
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Moveable=e()}(this,function(){"use strict";var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var c=function(){return(c=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t){return void 0===t}var t=function(){var t=function(){function t(){this._eventHandler={},this.options={}}var e=t.prototype;return e.trigger=function(t,e){void 0===e&&(e={});var r=this._eventHandler[t]||[];if(!(0<r.length))return!0;r=r.concat(),e.eventType=t;var n=!1,i=[e],o=0;e.stop=function(){n=!0},e.currentTarget=this;for(var a=arguments.length,s=new Array(2<a?a-2:0),c=2;c<a;c++)s[c-2]=arguments[c];for(1<=s.length&&(i=i.concat(s)),o=0;r[o];o++)r[o].apply(this,i);return!n},e.once=function(i,o){if("object"==typeof i&&s(o)){var t,e=i;for(t in e)this.once(t,e[t]);return this}if("string"==typeof i&&"function"==typeof o){var a=this;this.on(i,function t(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];o.apply(a,r),a.off(i,t)})}return this},e.hasOn=function(t){return!!this._eventHandler[t]},e.on=function(t,e){if("object"==typeof t&&s(e)){var r,n=t;for(r in n)this.on(r,n[r]);return this}if("string"==typeof t&&"function"==typeof e){var i=this._eventHandler[t];s(i)&&(this._eventHandler[t]=[],i=this._eventHandler[t]),i.push(e)}return this},e.off=function(t,e){if(s(t))return this._eventHandler={},this;if(s(e)){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var r,n=t;for(r in n)this.off(r,n[r]);return this}var i,o,a=this._eventHandler[t];if(a)for(i=0;void 0!==(o=a[i]);i++)if(o===e){a=a.splice(i,1);break}return this},t}();return t.VERSION="2.1.2",t}();function u(e,r){return function(t){t&&(e[r]=t)}}var l=function(){},p={},f=[],d=[];function h(t,e){var r,n,i,o,a=d;for(o=arguments.length;2<o--;)f.push(arguments[o]);for(e&&null!=e.children&&(f.length||f.push(e.children),delete e.children);f.length;)if((n=f.pop())&&void 0!==n.pop)for(o=n.length;o--;)f.push(n[o]);else"boolean"==typeof n&&(n=null),(i="function"!=typeof t)&&(null==n?n="":"number"==typeof n?n=String(n):"string"!=typeof n&&(i=!1)),i&&r?a[a.length-1]+=n:a===d?a=[n]:a.push(n),r=i;var s=new l;return s.nodeName=t,s.children=a,s.attributes=null==e?void 0:e,s.key=null==e?void 0:e.key,void 0!==p.vnode&&p.vnode(s),s}function _(t,e){for(var r in e)t[r]=e[r];return t}function v(t,e){t&&("function"==typeof t?t(e):t.current=e)}var e="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;var g=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,r=[];function o(t){!t._dirty&&(t._dirty=!0)&&1==r.push(t)&&e(a)}function a(){for(var t;t=r.pop();)t._dirty&&T(t)}function M(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function D(t){var e=_({},t.attributes);e.children=t.children;var r=t.nodeName.defaultProps;if(void 0!==r)for(var n in r)void 0===e[n]&&(e[n]=r[n]);return e}function P(t){var e=t.parentNode;e&&e.removeChild(t)}function m(t,e,r,n,i){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)v(r,null),v(n,t);else if("class"!==e||i)if("style"===e){if(n&&"string"!=typeof n&&"string"!=typeof r||(t.style.cssText=n||""),n&&"object"==typeof n){if("string"!=typeof r)for(var o in r)o in n||(t.style[o]="");for(var o in n)t.style[o]="number"==typeof n[o]&&!1===g.test(o)?n[o]+"px":n[o]}}else if("dangerouslySetInnerHTML"===e)n&&(t.innerHTML=n.__html||"");else if("o"==e[0]&&"n"==e[1]){var a=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),n?r||t.addEventListener(e,b,a):t.removeEventListener(e,b,a),(t._listeners||(t._listeners={}))[e]=n}else if("list"!==e&&"type"!==e&&!i&&e in t){try{t[e]=null==n?"":n}catch(t){}null!=n&&!1!==n||"spellcheck"==e||t.removeAttribute(e)}else{var s=i&&e!==(e=e.replace(/^xlink:?/,""));null==n||!1===n?s?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof n&&(s?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):t.setAttribute(e,n))}else t.className=n||""}function b(t){return this._listeners[t.type](p.event&&p.event(t)||t)}var O=[],N=0,y=!1,x=!1;function Y(){for(var t;t=O.shift();)t.componentDidMount&&t.componentDidMount()}function R(t,e,r,n,i,o){N++||(y=null!=i&&void 0!==i.ownerSVGElement,x=null!=t&&!("__preactattr_"in t));var a=X(t,e,r,n,o);return i&&a.parentNode!==i&&i.appendChild(a),--N||(x=!1,o||Y()),a}function X(t,e,r,n,i){var o=t,a=y;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||i)?t.nodeValue!=e&&(t.nodeValue=e):(o=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(o,t),k(t,!0))),o.__preactattr_=!0,o;var s=e.nodeName;if("function"==typeof s)return function(t,e,r,n){var i=t&&t._component,o=i,a=t,s=i&&t._componentConstructor===e.nodeName,c=s,u=D(e);for(;i&&!c&&(i=i._parentComponent);)c=i.constructor===e.nodeName;i&&c&&(!n||i._component)?(G(i,u,3,r,n),t=i.base):(o&&!s&&(A(o),t=a=null),i=z(e.nodeName,u,r),t&&!i.nextBase&&(i.nextBase=t,a=null),G(i,u,1,r,n),t=i.base,a&&t!==a&&(a._component=null,k(a,!1)));return t}(t,e,r,n);if(y="svg"===s||"foreignObject"!==s&&y,s=String(s),(!t||!M(t,s))&&(o=function(t,e){var r=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return r.normalizedNodeName=t,r}(s,y),t)){for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),k(t,!0)}var c=o.firstChild,u=o.__preactattr_,l=e.children;if(null==u){u=o.__preactattr_={};for(var p=o.attributes,f=p.length;f--;)u[p[f].name]=p[f].value}return!x&&l&&1===l.length&&"string"==typeof l[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=l[0]&&(c.nodeValue=l[0]):(l&&l.length||null!=c)&&function(t,e,r,n,i){var o,a,s,c,u,l=t.childNodes,p=[],f={},d=0,h=0,v=l.length,g=0,m=e?e.length:0;if(0!==v)for(var b=0;b<v;b++){var y=l[b],x=y.__preactattr_;null!=(C=m&&x?y._component?y._component.__key:x.key:null)?(d++,f[C]=y):(x||(void 0!==y.splitText?!i||y.nodeValue.trim():i))&&(p[g++]=y)}if(0!==m)for(b=0;b<m;b++){var C;if(c=e[b],(u=null)!=(C=c.key))d&&void 0!==f[C]&&(u=f[C],f[C]=void 0,d--);else if(h<g)for(o=h;o<g;o++)if(void 0!==p[o]&&(w=a=p[o],S=i,"string"==typeof(E=c)||"number"==typeof E?void 0!==w.splitText:"string"==typeof E.nodeName?!w._componentConstructor&&M(w,E.nodeName):S||w._componentConstructor===E.nodeName)){u=a,p[o]=void 0,o===g-1&&g--,o===h&&h++;break}u=X(u,c,r,n),s=l[b],u&&u!==t&&u!==s&&(null==s?t.appendChild(u):u===s.nextSibling?P(s):t.insertBefore(u,s))}var w,E,S;if(d)for(var b in f)void 0!==f[b]&&k(f[b],!1);for(;h<=g;)void 0!==(u=p[g--])&&k(u,!1)}(o,l,r,n,x||null!=u.dangerouslySetInnerHTML),function(t,e,r){var n;for(n in r)e&&null!=e[n]||null==r[n]||m(t,n,r[n],r[n]=void 0,y);for(n in e)"children"===n||"innerHTML"===n||n in r&&e[n]===("value"===n||"checked"===n?t[n]:r[n])||m(t,n,r[n],r[n]=e[n],y)}(o,e.attributes,u),y=a,o}function k(t,e){var r=t._component;r?A(r):(null!=t.__preactattr_&&v(t.__preactattr_.ref,null),!1!==e&&null!=t.__preactattr_||P(t),C(t))}function C(t){for(t=t.lastChild;t;){var e=t.previousSibling;k(t,!0),t=e}}var w=[];function z(t,e,r){var n,i=w.length;for(t.prototype&&t.prototype.render?(n=new t(e,r),S.call(n,e,r)):((n=new S(e,r)).constructor=t,n.render=E);i--;)if(w[i].constructor===t)return n.nextBase=w[i].nextBase,w.splice(i,1),n;return n}function E(t,e,r){return this.constructor(t,r)}function G(t,e,r,n,i){t._disable||(t._disable=!0,t.__ref=e.ref,t.__key=e.key,delete e.ref,delete e.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,n)),n&&n!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=n),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==r&&(1!==r&&!1===p.syncComponentUpdates&&t.base?o(t):T(t,1,i)),v(t.__ref,t))}function T(t,e,r,n){if(!t._disable){var i,o,a,s=t.props,c=t.state,u=t.context,l=t.prevProps||s,p=t.prevState||c,f=t.prevContext||u,d=t.base,h=t.nextBase,v=d||h,g=t._component,m=!1,b=f;if(t.constructor.getDerivedStateFromProps&&(c=_(_({},c),t.constructor.getDerivedStateFromProps(s,c)),t.state=c),d&&(t.props=l,t.state=p,t.context=f,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(s,c,u)?m=!0:t.componentWillUpdate&&t.componentWillUpdate(s,c,u),t.props=s,t.state=c,t.context=u),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!m){i=t.render(s,c,u),t.getChildContext&&(u=_(_({},u),t.getChildContext())),d&&t.getSnapshotBeforeUpdate&&(b=t.getSnapshotBeforeUpdate(l,p));var y,x,C=i&&i.nodeName;if("function"==typeof C){var w=D(i);(o=g)&&o.constructor===C&&w.key==o.__key?G(o,w,1,u,!1):(y=o,t._component=o=z(C,w,u),o.nextBase=o.nextBase||h,o._parentComponent=t,G(o,w,0,u,!1),T(o,1,r,!0)),x=o.base}else a=v,(y=g)&&(a=t._component=null),!v&&1!==e||(a&&(a._component=null),x=R(a,i,u,r||!d,v&&v.parentNode,!0));if(v&&x!==v&&o!==g){var E=v.parentNode;E&&x!==E&&(E.replaceChild(x,v),y||(v._component=null,k(v,!1)))}if(y&&A(y),(t.base=x)&&!n){for(var S=t,M=t;M=M._parentComponent;)(S=M).base=x;x._component=S,x._componentConstructor=S.constructor}}for(!d||r?O.push(t):m||t.componentDidUpdate&&t.componentDidUpdate(l,p,b);t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);N||n||Y()}}function A(t){var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var r=t._component;r?A(r):e&&(null!=e.__preactattr_&&v(e.__preactattr_.ref,null),P(t.nextBase=e),w.push(t),C(e)),v(t.__ref,null)}function S(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function B(t,e,r){return R(r,t,{},!1,e,!1)}function F(){return{}}_(S.prototype,{setState:function(t,e){this.prevState||(this.prevState=this.state),this.state=_(_({},this.state),"function"==typeof t?t(this.state,this.props):t),e&&this._renderCallbacks.push(e),o(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),T(this,2)},render:function(){}});var W={checkPropTypes:function(){}};var I={register:function(t){console.warn("Consumer used without a Provider")},unregister:function(t){},val:function(t){}};function j(t){var e=t.children;return{child:1===e.length?e[0]:null,children:e}}var U,L=(U=function(t,e){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}U(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function V(t){return j(t).child||"render"in t&&t.render}function H(){return q}var q=1073741823,$=0;function K(n,i){var o="_preactContextProvider-"+$++;return{Provider:function(r){function t(t){var e=r.call(this,t)||this;return e._emitter=function(t,e){function n(t){return 0|e(o,t)}var i=[],o=t;return{register:function(t){i.push(t),t(o,n(o))},unregister:function(e){i=i.filter(function(t){return t!==e})},val:function(e){if(void 0===e||e==o)return o;var r=n(e);return o=e,i.forEach(function(t){return t(e,r)}),o}}}(t.value,i||H),e}return L(t,r),t.prototype.getChildContext=function(){var t;return(t={})[o]=this._emitter,t},t.prototype.componentDidUpdate=function(){this._emitter.val(this.props.value)},t.prototype.render=function(){var t=j(this.props),e=t.child,r=t.children;return e||h("span",null,r)},t}(S),Consumer:function(r){function t(t,e){var i=r.call(this,t,e)||this;return i._updateContext=function(t,e){var r=i.props.unstable_observedBits,n=null==r?q:r;0!=((n|=0)&e)&&i.setState({value:t})},i.state={value:i._getEmitter().val()||n},i}return L(t,r),t.prototype.componentDidMount=function(){this._getEmitter().register(this._updateContext)},t.prototype.shouldComponentUpdate=function(t,e){return this.state.value!==e.value||V(this.props)!==V(t)},t.prototype.componentWillUnmount=function(){this._getEmitter().unregister(this._updateContext)},t.prototype.componentDidUpdate=function(t,e,r){var n=r[o];n!==this.context[o]&&((n||I).unregister(this._updateContext),this.componentDidMount())},t.prototype.render=function(){var t="render"in this.props&&this.props.render,e=V(this.props);if(t&&t!==e&&console.warn("Both children and a render function are defined. Children will be used"),"function"==typeof e)return e(this.state.value);console.warn("Consumer is expecting a function as one and only child but didn't find any")},t.prototype._getEmitter=function(){return this.context[o]||I},t}(S)}}var Z="a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan".split(" "),J="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Q="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("__preactCompatWrapper"):"__preactCompatWrapper",tt={constructor:1,render:1,shouldComponentUpdate:1,componentWillReceiveProps:1,componentWillUpdate:1,componentDidUpdate:1,componentWillMount:1,componentDidMount:1,componentWillUnmount:1,componentDidUnmount:1},et=/^(?:accent|alignment|arabic|baseline|cap|clip|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vector|vert|word|writing|x)[A-Z]/,rt={},nt=!1;try{nt="production"!==process.env.NODE_ENV}catch(t){}function it(){return null}var ot=h("a",null).constructor;ot.prototype.$$typeof=J,ot.prototype.preactCompatUpgraded=!1,ot.prototype.preactCompatNormalized=!1,Object.defineProperty(ot.prototype,"type",{get:function(){return this.nodeName},set:function(t){this.nodeName=t},configurable:!0}),Object.defineProperty(ot.prototype,"props",{get:function(){return this.attributes},set:function(t){this.attributes=t},configurable:!0});var at=p.event;p.event=function(t){return at&&(t=at(t)),t.persist=Object,t.nativeEvent=t};var st=p.vnode;function ct(t,e,r){var n=e&&e._preactCompatRendered&&e._preactCompatRendered.base;n&&n.parentNode!==e&&(n=null),!n&&e&&(n=e.firstElementChild);for(var i=e.childNodes.length;i--;)e.childNodes[i]!==n&&e.removeChild(e.childNodes[i]);var o=B(t,e,n);return e&&(e._preactCompatRendered=o&&(o._component||{base:o})),"function"==typeof r&&r(),o&&o._component||o}p.vnode=function(t){if(!t.preactCompatUpgraded){t.preactCompatUpgraded=!0;var e=t.nodeName,r=t.attributes=null==t.attributes?{}:_t({},t.attributes);"function"==typeof e?(!0===e[Q]||e.prototype&&"isReactComponent"in e.prototype)&&(t.children&&""===String(t.children)&&(t.children=void 0),t.children&&(r.children=t.children),t.preactCompatNormalized||wt(t),function(t){var e=t.nodeName,r=t.attributes;t.attributes={},e.defaultProps&&_t(t.attributes,e.defaultProps);r&&_t(t.attributes,r)}(t)):(t.children&&""===String(t.children)&&(t.children=void 0),t.children&&(r.children=t.children),r.defaultValue&&(r.value||0===r.value||(r.value=r.defaultValue),delete r.defaultValue),function(t,e){var r,n,i;if(e){for(i in e)if(r=et.test(i))break;if(r)for(i in n=t.attributes={},e)e.hasOwnProperty(i)&&(n[et.test(i)?i.replace(/([A-Z0-9])/,"-$1").toLowerCase():i]=e[i])}}(t,r))}st&&st(t)};var ut=function(){};function lt(t,e,r,n){var i=ct(h(ut,{context:t.context},e),r),o=i._component||i.base;return n&&n.call(o,i),o}function pt(t){lt(this,t.vnode,t.container)}function ft(t,e){return h(pt,{vnode:t,container:e})}function dt(t){var e=t._preactCompatRendered&&t._preactCompatRendered.base;return!(!e||e.parentNode!==t)&&(B(h(it),t,e),!0)}ut.prototype.getChildContext=function(){return this.props.context},ut.prototype.render=function(t){return t.children[0]};var ht,vt=[],gt={map:function(t,e,r){return null==t?null:(t=gt.toArray(t),r&&r!==t&&(e=e.bind(r)),t.map(e))},forEach:function(t,e,r){if(null==t)return null;t=gt.toArray(t),r&&r!==t&&(e=e.bind(r)),t.forEach(e)},count:function(t){return t&&t.length||0},only:function(t){if(1!==(t=gt.toArray(t)).length)throw new Error("Children.only() expects only one child.");return t[0]},toArray:function(t){return null==t?[]:vt.concat(t)}};function mt(t){return Ct.bind(null,t)}for(var bt={},yt=Z.length;yt--;)bt[Z[yt]]=mt(Z[yt]);function xt(t){var e=t[Q];return e?!0===e?t:e:(e=function(t){return Nt({displayName:t.displayName||t.name,render:function(){return t(this.props,this.context)}})}(t),Object.defineProperty(e,Q,{configurable:!0,value:!0}),e.displayName=t.displayName,e.propTypes=t.propTypes,e.defaultProps=t.defaultProps,Object.defineProperty(t,Q,{configurable:!0,value:e}),e)}function Ct(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function t(e,r){for(var n=r||0;n<e.length;n++){var i=e[n];Array.isArray(i)?t(i):i&&"object"==typeof i&&!St(i)&&(i.props&&i.type||i.attributes&&i.nodeName||i.children)&&(e[n]=Ct(i.type||i.nodeName,i.props||i.attributes,i.children))}}(t,2),wt(h.apply(void 0,t))}function wt(t){t.preactCompatNormalized=!0,function(t){var e=t.attributes||(t.attributes={});Mt.enumerable="className"in e,e.className&&(e.class=e.className);Object.defineProperty(e,"className",Mt)}(t),function(t){return"function"==typeof t&&!(t.prototype&&t.prototype.render)}(t.nodeName)&&(t.nodeName=xt(t.nodeName));var e=t.attributes.ref,r=e&&typeof e;return!ht||"string"!==r&&"number"!==r||(t.attributes.ref=function(e,r){return r._refProxies[e]||(r._refProxies[e]=function(t){r&&r.refs&&null===(r.refs[e]=t)&&(delete r._refProxies[e],r=null)})}(e,ht)),function(t){var e=t.nodeName,r=t.attributes;if(!r||"string"!=typeof e)return;var n={};for(var i in r)n[i.toLowerCase()]=i;n.ondoubleclick&&(r.ondblclick=r[n.ondoubleclick],delete r[n.ondoubleclick]);if(n.onchange&&("textarea"===e||"input"===e.toLowerCase()&&!/^fil|che|rad/i.test(r.type))){var o=n.oninput||"oninput";r[o]||(r[o]=Rt([r[o],r[n.onchange]]),delete r[n.onchange])}}(t),t}function Et(t,e){for(var r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];if(!St(t))return t;var i=t.attributes||t.props,o=[h(t.nodeName||t.type,_t({},i),t.children||i&&i.children),e];return r&&r.length?o.push(r):e&&e.children&&o.push(e.children),wt(function(t,e){return h(t.nodeName,_(_({},t.attributes),e),2<arguments.length?[].slice.call(arguments,2):t.children)}.apply(void 0,o))}function St(t){return t&&(t instanceof ot||t.$$typeof===J)}var Mt={configurable:!0,get:function(){return this.class},set:function(t){this.class=t}};function _t(t,e){for(var r=arguments,n=1,i=void 0;n<arguments.length;n++)if(i=r[n])for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);return t}function Dt(t,e){for(var r in t)if(!(r in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function Pt(t){return t&&(t.base||1===t.nodeType&&t)||null}function Ot(){}function Nt(t){function e(t,e){!function(t){for(var e in t){var r=t[e];"function"!=typeof r||r.__bound||tt.hasOwnProperty(e)||((t[e]=r.bind(t)).__bound=!0)}}(this),Tt.call(this,t,e,rt),Xt.call(this,t,e)}return(t=_t({constructor:e},t)).mixins&&function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=Rt(e[r].concat(t[r]||vt),"getDefaultProps"===r||"getInitialState"===r||"getChildContext"===r))}(t,function(t){for(var e={},r=0;r<t.length;r++){var n=t[r];for(var i in n)n.hasOwnProperty(i)&&"function"==typeof n[i]&&(e[i]||(e[i]=[])).push(n[i])}return e}(t.mixins)),t.statics&&_t(e,t.statics),t.propTypes&&(e.propTypes=t.propTypes),t.defaultProps&&(e.defaultProps=t.defaultProps),t.getDefaultProps&&(e.defaultProps=t.getDefaultProps.call(e)),Ot.prototype=Tt.prototype,e.prototype=_t(new Ot,t),e.displayName=t.displayName||"Component",e}function Yt(t,e,r){if("string"==typeof e&&(e=t.constructor.prototype[e]),"function"==typeof e)return e.apply(t,r)}function Rt(o,a){return function(){for(var t,e=arguments,r=0;r<o.length;r++){var n=Yt(this,o[r],e);if(a&&null!=n)for(var i in t=t||{},n)n.hasOwnProperty(i)&&(t[i]=n[i]);else void 0!==n&&(t=n)}return t}}function Xt(t,e){kt.call(this,t,e),this.componentWillReceiveProps=Rt([kt,this.componentWillReceiveProps||"componentWillReceiveProps"]),this.render=Rt([kt,zt,this.render||"render",Gt])}function kt(t,e){if(t){var r=t.children;if(r&&Array.isArray(r)&&1===r.length&&("string"==typeof r[0]||"function"==typeof r[0]||r[0]instanceof ot)&&(t.children=r[0],t.children&&"object"==typeof t.children&&(t.children.length=1,t.children[0]=t.children)),nt){var n="function"==typeof this?this:this.constructor,i=this.propTypes||n.propTypes,o=this.displayName||n.name;i&&W.checkPropTypes(i,t,"prop",o)}}}function zt(t){ht=this}function Gt(){ht===this&&(ht=null)}function Tt(t,e,r){S.call(this,t,e),this.state=this.getInitialState?this.getInitialState():{},this.refs={},this._refProxies={},r!==rt&&Xt.call(this,t,e)}function At(t,e){Tt.call(this,t,e)}function Bt(t){t()}_t(Tt.prototype=new S,{constructor:Tt,isReactComponent:{},replaceState:function(t,e){for(var r in this.setState(t,e),this.state)r in t||delete this.state[r]},getDOMNode:function(){return this.base},isMounted:function(){return!!this.base}}),Ot.prototype=Tt.prototype,(At.prototype=new Ot).isPureReactComponent=!0,At.prototype.shouldComponentUpdate=function(t,e){return Dt(this.props,t)||Dt(this.state,e)};var Ft={default:{version:"15.1.0",DOM:bt,PropTypes:W,Children:gt,render:ct,hydrate:ct,createClass:Nt,createContext:K,createPortal:ft,createFactory:mt,createElement:Ct,cloneElement:Et,createRef:F,isValidElement:St,findDOMNode:Pt,unmountComponentAtNode:dt,Component:Tt,PureComponent:At,unstable_renderSubtreeIntoContainer:lt,unstable_batchedUpdates:Bt,__spread:_t},version:"15.1.0",DOM:bt,Children:gt,render:ct,hydrate:ct,createClass:Nt,createPortal:ft,createFactory:mt,createElement:Ct,cloneElement:Et,isValidElement:St,findDOMNode:Pt,unmountComponentAtNode:dt,Component:Tt,PureComponent:At,unstable_renderSubtreeIntoContainer:lt,unstable_batchedUpdates:Bt,__spread:_t,PropTypes:W,createRef:F,createContext:K};function Wt(e,r){return function(t){t&&(e[r]=t)}}var It="undefined"!=typeof window&&window||{},jt=(It.RegExp,It.navigator),Ut={browser:[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Whale/,identity:"Whale",versionSearch:"Whale"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/MiuiBrowser/,identity:"MIUI Browser",versionSearch:"MiuiBrowser"},{criteria:/SamsungBrowser/,identity:"Samsung Internet",versionSearch:"SamsungBrowser"},{criteria:/SAMSUNG /,identity:"Samsung Internet",versionSearch:"Version"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"Android Browser",versionSearch:"Version"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],os:[{criteria:/Windows Phone/,identity:"Windows Phone",versionSearch:"Windows Phone"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/Windows NT/,identity:"Window",versionSearch:"Windows NT"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"},{criteria:/Tizen/,identity:"Tizen"},{criteria:/Web0S/,identity:"WebOS"}],webview:[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],defaultString:{browser:{version:"-1",name:"unknown"},os:{version:"-1",name:"unknown"}}};function Lt(t,e){for(var r=[],n=0;n<t.length;n++)e(t[n])&&r.push(t[n]);return r}var Vt=void 0;function Ht(t,e){return e&&e.test?!!e.test(t):-1<t.indexOf(e)}function qt(t,e){var r=Lt(t,function(t){return Ht(Vt,t.criteria)})[0];return r&&r.identity||e.name}function $t(t,n){return Lt(t,function(t){var e=t.criteria,r=new RegExp(t.identity,"i").test(n);return!!(e?r&&Ht(Vt,e):r)})[0]}function Kt(t,e){var r=Ut.defaultString.browser.version,n=new RegExp("("+t+")","i").exec(e);if(!n)return r;var i=n.index,o=n[0];if(-1<i){var a=i+o.length+1;r=e.substring(a).split(" ")[0].replace(/_/g,".").replace(/;|\)/g,"")}return r}function Zt(t){if(t)return Kt(function(t){var e=$t(Ut.browser,t);return e=e||{criteria:t,versionSearch:t,identity:t}}(t).versionSearch||t,Vt)}function Jt(t){var e=function(t){return $t(Ut.os,t)}(t)||{},r=Ut.defaultString.os.version,n=void 0;if(t){if(e.versionAlias)return e.versionAlias;var i=e.versionSearch||t,o=new RegExp("("+i+")\\s([\\d_\\.]+|\\d_0)","i");return o.exec(Vt)&&(n=o.exec(Vt)[2].replace(/_/g,".").replace(/;|\)/g,"")),n||r}}function Qt(){var t=qt(Ut.os,Ut.defaultString.os);return{name:t,version:Jt(t)}}function te(){var t=qt(Ut.browser,Ut.defaultString.browser);return{name:t,version:Zt(t),webview:function(){var t=Ut.webview,e=void 0;return function(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return!0;return!1}(Lt(t,function(t){return Ht(Vt,t.criteria)}),function(t){return e=Kt(t.browserVersionSearch,Vt),!(!Ht(Vt,t.webviewToken)&&!Ht(e,t.webviewBrowserVersion))})}()}}function ee(){!function(t){Vt=t}(0<arguments.length&&void 0!==arguments[0]?arguments[0]:jt.userAgent);var t={os:Qt(),browser:te(),isMobile:-1!==Vt.indexOf("Mobi")};return t.browser.name=t.browser.name.toLowerCase(),t.os.name=t.os.name.toLowerCase(),t.os.version=t.os.version.toLowerCase(),"ios"===t.os.name&&t.browser.webview&&(t.browser.version="-1"),t}ee.VERSION="2.1.5";var re="function",ne="object",ie="undefined";function oe(t){return typeof t===ie}function ae(t){return t&&typeof t===ne}function se(t){return Array.isArray(t)}function ce(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var r=e[1],n=e[2];return{prefix:r,unit:e[3],value:parseFloat(n)}}function ue(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function le(t,e,r,n){t.addEventListener(e,r,n)}function pe(t,e,r){t.removeEventListener(e,r)}var fe=function(t,e){return(fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var de=function(){return(de=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var he=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return e>>>0};var ve=function(){return(ve=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ge(t,e,r,n){var i=Ee(t),o=Ee(e),a=Ee(n);return be(Se(n[0],Me(i,a)),Se(n[0],Me(o,a)),r[0])}function me(t){return t.touches?Ce(t.touches):[we(t)]}function be(t,e,r){var n=t.clientX,i=t.clientY;return{clientX:n,clientY:i,deltaX:n-e.clientX,deltaY:i-e.clientY,distX:n-r.clientX,distY:i-r.clientY}}function ye(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function xe(t,r,n){return t.map(function(t,e){return be(t,r[e],n[e])})}function Ce(t){for(var e=Math.min(t.length,2),r=[],n=0;n<e;++n)r.push(we(t[n]));return r}function we(t){return{clientX:t.clientX,clientY:t.clientY}}function Ee(t){return{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function Se(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function Me(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var _e=function(){function t(t,e){var o=this;void 0===e&&(e={}),this.el=t,this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.onDragStart=function(t){if(o.flag||!1!==t.cancelable){if(function(t){return t.touches&&2<=t.touches.length}(t)){if(!o.flag&&t.touches.length!==t.changedTouches.length)return;o.pinchFlag||o.onPinchStart(t)}if(!o.flag){var e=o.startClients[0]?o.startClients:me(t);o.customDist=[0,0],o.flag=!0,o.isDrag=!1,o.startClients=e,o.prevClients=e,o.datas={};var r=be(e[o.movement=0],o.prevClients[0],o.startClients[0]),n=o.options,i=n.dragstart;(n.preventRightClick&&3===t.which||!1===(i&&i(ve({datas:o.datas,inputEvent:t},r))))&&(o.startClients=[],o.prevClients=[],o.flag=!1),o.flag&&t.preventDefault()}}},this.onDrag=function(t){if(o.flag){var e=me(t);o.pinchFlag&&o.onPinch(t,e);var r=o.move([0,0],t,e);if(r&&(r.deltaX||r.deltaY)){var n=o.options.drag;n&&n(ve({},r,{inputEvent:t}))}}},this.onDragEnd=function(t){if(o.flag){o.pinchFlag&&o.onPinchEnd(t),o.flag=!1;var e=o.options.dragend,r=o.prevClients,n=o.startClients,i=o.pinchFlag?ge(r,r,n,o.startPinchClients):be(r[0],r[0],n[0]);o.startClients=[],o.prevClients=[],e&&e(ve({datas:o.datas,isDrag:o.isDrag,inputEvent:t},i))}},this.options=ve({container:t,preventRightClick:!0,pinchThreshold:0,events:["touch","mouse"]},e);var r=this.options,n=r.container,i=r.events;this.isTouch=-1<i.indexOf("touch"),this.isMouse=-1<i.indexOf("mouse"),this.customDist=[0,0],this.isMouse&&(le(t,"mousedown",this.onDragStart),le(n,"mousemove",this.onDrag),le(n,"mouseup",this.onDragEnd)),this.isTouch&&(le(t,"touchstart",this.onDragStart),le(n,"touchmove",this.onDrag),le(n,"touchend",this.onDragEnd))}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isPinching=function(){return this.isPinch},e.move=function(t,e,r){var n=t[0],i=t[1];void 0===r&&(r=this.prevClients);var o=this.customDist,a=this.prevClients,s=this.startClients,c=this.pinchFlag?ge(r,a,s,this.startPinchClients):be(r[0],a[0],s[0]);o[0]+=n,o[1]+=i,c.deltaX+=n,c.deltaY+=i;var u=c.deltaX,l=c.deltaY;return c.distX+=o[0],c.distY+=o[1],this.movement+=Math.sqrt(u*u+l*l),this.prevClients=r,this.isDrag=!0,ve({datas:this.datas},c,{inputEvent:e})},e.onPinchStart=function(t){var e,r,n=this.options,i=n.pinchstart,o=n.pinchThreshold;if(!(this.isDrag&&this.movement>o)){var a=Ce(t.changedTouches);if(this.pinchFlag=!0,(e=this.startClients).push.apply(e,a),(r=this.prevClients).push.apply(r,a),this.startDistance=ye(this.prevClients),this.startPinchClients=this.prevClients.slice(),i){var s=this.prevClients,c=Ee(s),u=be(c,c,c);i(ve({datas:this.datas,touches:xe(s,s,s)},u,{inputEvent:t}))}}},e.onPinch=function(t,e){if(this.flag&&this.pinchFlag){this.isPinch=!0;var r=this.options.pinch;if(r){var n=this.prevClients,i=this.startClients,o=be(Ee(e),Ee(n),Ee(i)),a=ye(e);r(ve({datas:this.datas,touches:xe(e,n,i),scale:a/this.startDistance,distance:a},o,{inputEvent:t}))}}},e.onPinchEnd=function(t){if(this.flag&&this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var r=this.options.pinchend;if(r){var n=this.prevClients,i=this.startClients,o=be(Ee(n),Ee(n),Ee(i));r(ve({datas:this.datas,isPinch:e,touches:xe(n,n,i)},o,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}}},e.unset=function(){var t=this.el,e=this.options.container;this.isMouse&&(pe(t,"mousedown",this.onDragStart),pe(e,"mousemove",this.onDrag),pe(e,"mouseup",this.onDragEnd)),this.isTouch&&(pe(t,"touchstart",this.onDragStart),pe(e,"touchmove",this.onDrag),pe(e,"touchend",this.onDragEnd))},t}(),De=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var r=this.keys,n=this.values,i=r.indexOf(t),o=-1===i?r.length:i;r[o]=t,n[o]=e},t}(),Pe=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),Oe="function"==typeof Map,Ne=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var Ye=function(){function t(t,e,r,n,i,o,a,s){this.prevList=t,this.list=e,this.added=r,this.removed=n,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,r){var s=[],c=[];return t.forEach(function(t){var e=t[0],r=t[1],n=new Ne;s[e]=n,c[r]=n}),s.forEach(function(t,e){t.connect(s[e-1])}),t.filter(function(t,e){return!r[e]}).map(function(t,e){var r=t[0],n=t[1];if(r===n)return[0,0];var i=s[r],o=c[n-1],a=i.getIndex();return i.disconnect(),o?i.connect(o,o.next):i.connect(void 0,s[0]),[a,i.getIndex()]})}(this.changedBeforeAdded,this.fixed),s=this.changed,c=[];this.cacheOrdered=t.filter(function(t,e){var r=t[0],n=t[1],i=s[e],o=i[0],a=i[1];if(r!==n)return c.push([o,a]),!0}),this.cachePureChanged=c},t}();var Re=function(t,e){return(Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Xe,ke="function"==typeof Map?void 0:(Xe=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++Xe)}),ze=function(e){function t(t){return void 0===t&&(t=[]),e.call(this,t,ke)||this}return function(t,e){function r(){this.constructor=t}Re(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(t,e),t}(function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),r=function(t,e,r){var n=Oe?Map:r?Pe:De,i=r||function(t){return t},o=[],a=[],s=[],c=t.map(i),u=e.map(i),l=new n,p=new n,f=[],d=[],h={},v=[],g=0,m=0;return c.forEach(function(t,e){l.set(t,e)}),u.forEach(function(t,e){p.set(t,e)}),c.forEach(function(t,e){var r=p.get(t);void 0===r?(++m,a.push(e)):h[r]=m}),u.forEach(function(t,e){var r=l.get(t);void 0===r?(o.push(e),++g):(s.push([r,e]),m=h[e]||0,f.push([r-m,e-g]),d.push(e===r),r!==e&&v.push([r,e]))}),a.reverse(),new Ye(t,e,o,a,v,s,f,d)}(this.list,e,this.findKeyCallback);return this.list=e,r},t}());function Ge(t,e,r,n,i,o){for(var a=r;a<n;++a)t[a]+=t[i+a-r]*o,e[a]+=e[i+a-r]*o}function Te(t,e,r,n,i){for(var o=r;o<n;++o){var a=t[o],s=e[o];t[o]=t[i+o-r],t[i+o-r]=a,e[o]=e[i+o-r],e[i+o-r]=s}}function Ae(t,e,r,n,i){for(var o=r;o<n;++o)t[o]/=i,e[o]/=i}function Be(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=t.slice(),n=tr(e),i=0;i<e;++i){var o=e*i,a=e*(i+1),s=o+i;if(0===r[s])for(var c=i+1;c<e;++c)if(r[e*c+i]){Te(r,n,o,a,e*c);break}if(!r[s])return[];Ae(r,n,o,a,r[s]);for(c=0;c<e;++c){var u=e*c,l=u+e,p=r[u+i];0!==p&&i!==c&&Ge(r,n,u,l,o,-p)}}return n}function Fe(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],n=0;n<e;++n)for(var i=0;i<e;++i)r[i*e+n]=t[e*n+i];return r}function We(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=Math.atan2(n,r);return 0<i?i:i+2*Math.PI}function Ie(t,e){for(var r=t.slice(),n=t.length;n<e-1;++n)r[n]=0;return r[e-1]=1,r}function je(t,e,r){if(void 0===e&&(e=Math.sqrt(t.length)),e===r)return t;for(var n=tr(r),i=Math.min(e,r),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)n[o*r+a]=t[o*e+a];n[(o+1)*r-1]=t[(o+1)*e-1],n[(r-1)*r+o]=t[(e-1)*e+o]}return n[r*r-1]=t[e*e-1],n}function Ue(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=tr(e);return t.forEach(function(t){n=Le(n,t,e)}),n}function Le(t,e,r){var n=[],i=t.length/r,o=e.length/i;if(!i)return e;if(!o)return t;for(var a=0;a<r;++a)for(var s=0;s<o;++s)for(var c=n[a*o+s]=0;c<i;++c)n[a*o+s]+=t[a*i+c]*e[c*o+s];return n}function Ve(t,e,r){void 0===r&&(r=Math.sqrt(t.length));for(var n=[],i=t.length/r,o=e.length/i,a=0;a<r;++a)for(var s=0;s<o;++s)for(var c=n[a+s*o]=0;c<i;++c)n[a+s*o]+=t[a+c*i]*e[c+s*o];return n}function He(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length,n=0,i=r-1;0<=i;--i)n+=t[i];return r?n/r:0}function qe(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]+e[i];return n}function $e(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]-e[i];return n}function Ke(t,e,r){void 0===r&&(r=e.length);var n=Le(t,e,r),i=n[r-1];return n.map(function(t){return t/i})}function Ze(t,e){return Ke(Qe(e,3),Ie(t,3))}function Je(t){return 9===t.length?[t[0],t[3],t[1],t[4],t[2],t[5]]:Fe(t)}function Qe(t,e){var r=Math.cos(t),n=Math.sin(t),i=tr(e);return i[0]=r,i[1]=-n,i[e]=n,i[e+1]=r,i}function tr(t){for(var e=t*t,r=[],n=0;n<e;++n)r[n]=n%(t+1)?0:1;return r}function er(t,e){for(var r=tr(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[(e+1)*i]=t[i];return r}function rr(t,e){for(var r=tr(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[e*(i+1)-1]=t[i];return r}function nr(t,e,r,n,i,o,a,s){var c=t[0],u=t[1],l=e[0],p=e[1],f=r[0],d=r[1],h=n[0],v=n[1],g=i[0],m=i[1],b=o[0],y=o[1],x=a[0],C=a[1],w=s[0],E=s[1],S=Be([c,u,1,0,0,0,-g*c,-g*u,0,0,0,c,u,1,-m*c,-m*u,l,p,1,0,0,0,-b*l,-b*p,0,0,0,l,p,1,-y*l,-y*p,f,d,1,0,0,0,-x*f,-x*d,0,0,0,f,d,1,-C*f,-C*d,h,v,1,0,0,0,-w*h,-w*v,0,0,0,h,v,1,-E*h,-E*v],8);if(!S.length)return[];var M=Le(S,[g,m,b,y,x,C,w,E],8);return M[8]=1,je(M,3,4)}var ir=function(t,e){return(ir=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function or(t,e){function r(){this.constructor=t}ir(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var ar=function(){return(ar=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},sr=ee(),cr=-1<sr.os.name.indexOf("ios")||-1<sr.browser.name.indexOf("safari"),ur="moveable-",lr=('\n{\n\tposition: fixed;\n\twidth: 0;\n\theight: 0;\n\tleft: 0;\n\ttop: 0;\n\tz-index: 3000;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n\ttop: 0;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    z-index: 10;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tbackground: #4af;\n\ttransform-origin: 0px 0.5px;\n}\n.line.rotation-line {\n\theight: 40px;\n\twidth: 1px;\n\ttransform-origin: 0.5px 39.5px;\n}\n.line.rotation-line .control {\n\tborder-color: #4af;\n\tbackground:#fff;\n\tcursor: alias;\n}\n.line.vertical.bold {\n    width: 2px;\n    margin-left: -1px;\n}\n.line.horizontal.bold {\n    height: 2px;\n    margin-top: -1px;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n\tmargin-left: -6px;\n\tpointer-events: none;\n}\n.direction.e, .direction.w {\n\tcursor: ew-resize;\n}\n.direction.s, .direction.n {\n\tcursor: ns-resize;\n}\n.direction.nw, .direction.se, :host.reverse .direction.ne, :host.reverse .direction.sw {\n\tcursor: nwse-resize;\n}\n.direction.ne, .direction.sw, :host.reverse .direction.nw, :host.reverse .direction.se {\n\tcursor: nesw-resize;\n}\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area.avoid, .area.avoid:before, .area.avoid:after {\n    transform-origin: 50% calc(100% + 20px);\n}\n.area.avoid:before, .area.avoid:after {\n    content: "";\n    top: 0px;\n    left: 0px;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n}\n\n.area.avoid:before {\n    transform: rotate(120deg);\n}\n.area.avoid:after {\n    transform: rotate(-120deg);\n}\n'+(cr?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n").replace(/\.([^{,\s\d.]+)/g,"."+ur+"$1"),pr=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],fr=Math.pow(10,10),dr=-fr;function hr(t,e){return[t[0]*e[0],t[1]*e[1]]}function vr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(t){return t.split(" ").map(function(t){return t?""+e+t:""}).join(" ")}).join(" ")}.apply(void 0,[ur].concat(t))}function gr(){return tr(3)}function mr(t,e,r){return Ue(e,rr(r,e),t,rr(r.map(function(t){return-t}),e))}function br(o){return yr(Fr(o,":before")).map(function(t,e){var r=ce(t),n=r.value,i=r.unit;return n*function(t,e,r){return"%"!==e?1:t.ownerSVGElement.viewBox.baseVal[r?"width":"height"]/100}(o,i,0===e)})}function yr(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function xr(t,n,e,r){for(var i,o,a,s,c,u=t,l=[],p=!!e||t===n,f=("svg"!==u.tagName.toLowerCase()&&"ownerSVGElement"in u),d=!1,h=3,v=Fr(u);u&&(p||u!==n);){var g=u.tagName.toLowerCase(),m="fixed"===v.position,b=(c=v.transform,6===(s=c&&"none"!==c?ae(c)?c:function(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}(c).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0]).length?[s[0],s[2],s[4],s[1],s[3],s[5],0,0,1]:Fe(s));if(!d&&16===b.length){d=!0,h=4;for(var y=l.length,x=0;x<y;++x)l[x]=je(l[x],3,4)}d&&9===b.length&&(b=je(b,3,4));var C=u.offsetLeft,w=u.offsetTop;if(m){var E=(n||document.documentElement).getBoundingClientRect();C-=E.left,w-=E.top}var S=oe(C),M=S,_=void 0;M&&"svg"!==g?(_=cr?br(u):yr(v).map(function(t){return parseFloat(t)}),M=!1,"g"===g?w=C=0:(C=(i=wr(u,_))[0],w=i[1],_[0]=i[2],_[1]=i[3])):_=yr(v).map(function(t){return parseFloat(t)}),"svg"===g&&a&&l.push(Cr(u,h),tr(h));var D=u.parentElement;if(cr&&!M&&!S){var P=u.offsetParent;P&&P!==D&&(C-=D.offsetLeft,w-=D.offsetTop)}if(l.push(mr(b,h,_),rr([M?u:C,M?_:w],h)),a=a||b,o=o||_,p||m)break;if(u=D,!S){for(;u;){var O=(v=Fr(u)).position,N=v.transform;if("static"!==O||N&&"none"!==N)break;u=u.parentElement}u&&(v=Fr(u))}}var Y=e?je(e,r,h):tr(h),R=e?je(e,r,h):tr(h),X=tr(h),k=l.length;l.reverse(),l.forEach(function(t,e){var r;k-2===e&&(R=Y.slice()),k-1===e&&(X=Y.slice()),ae(t[h-1])&&(r=function(t,e,r,n,i,o){var a,s=Nr(t),c=s[0],u=s[1],l=(e||document.documentElement).getBoundingClientRect(),p=t.getBoundingClientRect(),f=p.left-l.left,d=p.top-l.top,h=p.width,v=p.height,g=Ue(r,i,o),m=_r(g,c,u,r),b=m.left,y=m.top,x=m.width,C=m.height,w=Er(g,n,r),E=$e(w,[b,y]),S=[f+E[0]*h/x,d+E[1]*v/C],M=[0,0],_=0;for(;++_<10;){var D=Be(i,r);a=$e(Er(D,S,r),Er(D,w,r)),M[0]=a[0],M[1]=a[1];var P=_r(Ue(r,i,rr(M,r),o),c,u,r),O=P.left,N=P.top,Y=O-f,R=N-d;if(Math.abs(Y)<2&&Math.abs(R)<2)break;S[0]-=Y,S[1]-=R}return M.map(function(t){return Math.round(t)})}(t[h-1],n,h,t[2*h-1],Y,l[e+1]),t[h-1]=r[0],t[2*h-1]=r[1]),Y=Le(Y,t,h)});var z=(!f&&d?"matrix3d":"matrix")+"("+Je(f&&16===a.length?je(a,4,3):a)+")";return[R,X,Y,a,z,o,d]}function Cr(t,e){var r=t.clientWidth,n=t.clientHeight,i=t.viewBox.baseVal,o=i.width||r,a=i.height||n,s=r/o,c=n/a,u=t.preserveAspectRatio.baseVal,l=u.align,p=u.meetOrSlice,f=[0,0],d=[s,c],h=[0,0];if(1!==l){var v=(l-2)%3,g=Math.floor((l-2)/3);f[0]=o*v/2,f[1]=a*g/2;var m=2===p?Math.max(c,s):Math.min(s,c);d[0]=m,d[1]=m,h[0]=(r-o)/2*v,h[1]=(n-a)/2*g}var b=er(d,e);return b[e-1]=h[0],b[2*e-1]=h[1],mr(b,e,f)}function wr(t,e){if(!t.getBBox)return[0,0];var r=t.getBBox(),n=t.ownerSVGElement.viewBox.baseVal,i=r.x-n.x,o=r.y-n.y;return[i,o,e[0]-i,e[1]-o]}function Er(t,e,r){return Ke(t,Ie(e,r),r)}function Sr(t,e,r,n){return[Er(t,[0,0],n),Er(t,[e,0],n),Er(t,[0,r],n),Er(t,[e,r],n)]}function Mr(t){var e=t.map(function(t){return t[0]}),r=t.map(function(t){return t[1]}),n=Math.min.apply(Math,e),i=Math.min.apply(Math,r),o=Math.max.apply(Math,e),a=Math.max.apply(Math,r);return{left:n,top:i,right:o,bottom:a,width:o-n,height:a-i}}function _r(t,e,r,n){return Mr(Sr(t,e,r,n))}function Dr(t,e,r,n){var i=16===t.length?4:3,o=Sr(t,r,n,i),a=o[0],s=a[0],c=a[1],u=o[1],l=u[0],p=u[1],f=o[2],d=f[0],h=f[1],v=o[3],g=v[0],m=v[1],b=Er(t,e,i),y=b[0],x=b[1],C=Math.min(s,l,d,g),w=Math.min(c,p,h,m),E=Math.max(s,l,d,g),S=Math.max(c,p,h,m);y=y-C||0,x=x-w||0;var M=[((s=s-C||0)+(l=l-C||0)+(d=d-C||0)+(g=g-C||0))/4,((c=c-w||0)+(p=p-w||0)+(h=h-w||0)+(m=m-w||0))/4],_=We(M,[s,c]),D=We(M,[l,p]);return[[C,w,E,S],[y,x],[s,c],[l,p],[d,h],[g,m],_<D&&D-_<Math.PI||D<_&&D-_<-Math.PI?1:-1]}function Pr(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=Math.sqrt(r*r+n*n),o=We(t,e);return{transform:"translate("+t[0]+"px, "+t[1]+"px) rotate("+o+"rad)",width:i+"px"}}function Or(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;return{transform:"translate("+t.reduce(function(t,e){return t+e[0]},0)/r+"px, "+t.reduce(function(t,e){return t+e[1]},0)/r+"px)"}}function Nr(t,e,r,n){void 0===e&&(e=Fr(t)),void 0===n&&(n=r||"border-box"===e.boxSizing);var i=t.offsetWidth,o=t.offsetHeight,a=!oe(i);if((r||n)&&a)return[i,o];if(i=t.clientWidth,o=t.clientHeight,a||i||o)return r||n?[i+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0),o+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)]:[i-(parseFloat(e.paddingLeft)||0)-(parseFloat(e.paddingRight)||0),o-(parseFloat(e.paddingTop)||0)-(parseFloat(e.paddingBottom)||0)];var s=t.getBBox();return[s.width,s.height]}function Yr(t,e,r){var n,i,o,a,s,c=0,u=0,l=0,p=0,f=[0,0],d=[0,0],h=[0,0],v=[0,0],g=[0,0],m=gr(),b=gr(),y=gr(),x=gr(),C=0,w=0,E=[0,0],S=1,M=1,_=!1,D="",P=[0,0],O=r?r.beforeMatrix:void 0,N=r?r.is3d?4:3:void 0;if(t){if(r)C=r.width,w=r.height;else{var Y=Fr(t);C=t.offsetWidth,w=t.offsetHeight,oe(C)&&(C=(n=Nr(t,Y,!0))[0],w=n[1])}b=(i=xr(t,e,O,N))[0],m=i[1],y=i[2],x=i[3],D=i[4],E=i[5],_=i[6],c=(a=(o=Dr(y,E,C,w))[0])[0],u=a[1],l=a[2],p=a[3],f=o[1],d=o[2],h=o[3],v=o[4],g=o[5],S=o[6];var R;R=(s=Dr(m,qe(E,function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],n=0;n<e-1;++n)r[n]=t[(n+1)*e-1];return r[e-1]=0,r}(x,_?4:3)),C,w))[0],P=s[1],M=s[6],P=[P[0]+R[0]-c,P[1]+R[1]-u]}return{beforeDirection:M,direction:S,target:t,left:c,top:u,right:l,bottom:p,pos1:d,pos2:h,pos3:v,pos4:g,width:C,height:w,beforeMatrix:b,matrix:y,targetTransform:D,offsetMatrix:m,targetMatrix:x,is3d:_,beforeOrigin:P,origin:f,transformOrigin:E}}function Rr(t){if(t){var e=t.getAttribute("data-direction");if(e){var r=[0,0];return-1<e.indexOf("w")&&(r[0]=-1),-1<e.indexOf("e")&&(r[0]=1),-1<e.indexOf("n")&&(r[1]=-1),-1<e.indexOf("s")&&(r[1]=1),r}}}function Xr(t,e){return[qe(e,t[0]),qe(e,t[1]),qe(e,t[2]),qe(e,t[3])]}function kr(t){var e=t.left,r=t.top;return Xr([t.pos1,t.pos2,t.pos3,t.pos4],[e,r])}function zr(t,e){return e?Math.round(t/e)*e:t}function Gr(r,n){return r.forEach(function(t,e){r[e]=zr(r[e],n)}),r}function Tr(t,e){t[e]&&(t[e].unset(),t[e]=null)}function Ar(t,e,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}function Br(t,e,r){return t.triggerEvent(e,r)}function Fr(t,e){return window.getComputedStyle(t,e)}var Wr={name:"origin",render:function(t,e){if(!t.props.origin)return null;var r=t.state.beforeOrigin;return[e.createElement("div",{className:vr("control","origin"),style:Or(r),key:"beforeOrigin"})]}};function Ir(n,t,i,o){var a={container:window,pinchThreshold:n.props.pinchThreshold};return["drag","pinch"].forEach(function(r){["Start","","End"].forEach(function(e){a[""+r+e.toLowerCase()]=function(t){return function(r,t,e,n,i,o){var a=""+e+n+i,s=""+e+n+"Condition",c="Start"===i,u="End"===i,l=-1<n.indexOf("Group"),p=r[t].filter(function(t){var e=c&&t[s];return!(!t[a]||e&&!e(o.inputEvent.target,r))&&t[a](r,o)}),f=p.length;u&&(r.state.dragger=null),!c&&f?p.some(function(t){return t.updateRect})&&!l?r.updateRect(i):r.updateTarget(i):u&&!f&&r.forceUpdate()}(n,i,r,o,e,t)}})}),new _e(t,a)}var jr,Ur,Lr,Vr,Hr,qr={name:"dragArea",render:function(t,e){var r=t.props,n=r.target,i=r.dragArea,o=r.groupable,a=t.state,s=a.width,c=a.height,u=a.pos1,l=a.pos2,p=a.pos3,f=a.pos4;if(o)return[e.createElement("div",{key:"area",ref:Wt(t,"areaElement"),className:vr("area")})];if(!n||!i)return[];var d=nr([0,0],[s,0],[0,c],[s,c],u,l,p,f);return d.length?[e.createElement("div",{key:"area",ref:Wt(t,"areaElement"),className:vr("area"),style:{top:"0px",left:"0px",width:s+"px",height:c+"px",transform:"matrix3d("+Je(d).join(",")+")"}})]:[]}},$r=(jr="div",Vr="rCS"+function(t){return he(t).toString(36)}(Ur=lr),Hr=0,function(e){function t(t){return e.call(this,t)||this}return function(t,e){function r(){this.constructor=t}fe(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(t,e),t.prototype.render=function(){var t=this.props,e=t.className,r=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}(t,["className"]);return Ct(jr,de({className:e+" "+Vr},r))},t.prototype.componentDidMount=function(){0===Hr&&(Lr=function(r,t){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t.replace(/([^}{]*){/gm,function(t,e){return function(t){var e=t.match(/("[^"]*"|'[^']*'|[^,\s()]*\((?:[^()]*|\([^()]*\))*\)[^,\s()]*|[^,])+/g);return e?e.map(function(t){return t.trim()}):[]}(e).map(function(t){return-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?""+t.replace(/\:host/g,"."+r):"."+r+" "+t}).join(", ")+"{"}),(document.head||document.body).appendChild(e),e}(Vr,Ur)),++Hr},t.prototype.componentWillUnmount=function(){0==--Hr&&Lr&&Lr.parentNode.removeChild(Lr)},t.prototype.getElement=function(){return this.element||(this.element=Pt(this))},t}(Tt));function Kr(t,e,r){return Ct("div",{className:vr("line","direction",t),"data-direction":t,style:Pr(e,r)})}var Zr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={target:null,beforeMatrix:gr(),matrix:gr(),targetMatrix:gr(),targetTransform:"",is3d:!1,left:0,top:0,width:0,height:0,transformOrigin:[0,0],direction:1,beforeDirection:1,beforeOrigin:[0,0],origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0]},t.targetAbles=[],t.controlAbles=[],t}or(t,e);var r=t.prototype;return r.render=function(){this.checkUpdate();var t=this.props,e=t.edge,r=t.parentPosition||{left:0,top:0},n=r.left,i=r.top,o=this.state,a=o.left,s=o.top,c=o.pos1,u=o.pos2,l=o.pos3,p=o.pos4,f=o.target,d=o.direction;return Ct($r,{ref:Wt(this,"controlBox"),className:vr("control-box",-1===d?"reverse":""),style:{position:"absolute",display:f?"block":"none",transform:"translate("+(a-n)+"px, "+(s-i)+"px) translateZ(50px)"}},this.renderAbles(),Kr(e?"n":"",c,u),Kr(e?"e":"",u,p),Kr(e?"w":"",c,l),Kr(e?"s":"",l,p))},r.componentDidMount=function(){this.controlBox.getElement(),this.updateEvent(this.props)},r.componentDidUpdate=function(t,e){this.updateEvent(t)},r.componentWillUnmount=function(){Tr(this,"targetDragger"),Tr(this,"controlDragger")},r.getContainer=function(){var t=this.props,e=t.parentMoveable;return t.container||e&&e.getContainer()||this.controlBox.getElement().offsetParent},r.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(ur)},r.dragStart=function(t){this.targetDragger.onDragStart(t)},r.isInside=function(t,e){var r=this.state,n=r.pos1,i=r.pos2,o=r.pos3,a=r.pos4,s=r.target;if(!s)return!1;var c=s.getBoundingClientRect();return function(t,e,r,n,i){var o=[Ar(t,e,r),Ar(t,r,i),Ar(t,i,e)],a=[Ar(t,r,i),Ar(t,i,n),Ar(t,n,r)];return!!(o.every(function(t){return 0<=t})||o.every(function(t){return t<=0})||a.every(function(t){return 0<=t})||a.every(function(t){return t<=0}))}([t-c.left,e-c.top],n,i,a,o)},r.updateRect=function(t,e,r){void 0===r&&(r=!0);var n=this.props.parentMoveable,i=this.state,o=i.target||this.props.target;this.updateState(Yr(o,this.getContainer(),e?i:void 0),!n&&r)},r.updateEvent=function(t){var e=this.controlBox.getElement(),r=this.targetAbles.length,n=this.controlAbles.length,i=this.props.target,o=t.target,a=this.props.dragArea,s=t.dragArea,c=!a&&o!==i,u=!r&&this.targetDragger||c||s!==a;u&&(Tr(this,"targetDragger"),this.updateState({dragger:null})),n||Tr(this,"controlDragger"),i&&r&&!this.targetDragger&&(this.targetDragger=Ir(this,a?this.areaElement:i,"targetAbles","")),!this.controlDragger&&n&&(this.controlDragger=Ir(this,e,"controlAbles","Control")),u&&this.unsetAbles()},r.updateTarget=function(t){this.updateRect(t,!0)},r.checkUpdate=function(){var t=this.props,e=t.target,r=t.parentMoveable,n=this.state.target;(n||e)&&(this.updateAbles(),n!==e&&(this.updateState({target:e}),r||this.updateRect("End",!1,!1)))},r.triggerEvent=function(t,e){var r=this.props[t];return r&&r(e)},r.unsetAbles=function(){var e=this;this.targetAbles.filter(function(t){return!!t.unset&&(t.unset(e),!0)}).length&&this.forceUpdate()},r.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var r=this.props,n=t.filter(function(t){return t&&r[t.name]}),i=!1,o="drag"+e+"Start",a="pinch"+e+"Start",s="drag"+e+"ControlStart",c=n.filter(function(t){return t[o]||t[a]}),u=n.filter(function(t){var e=t.dragControlOnly;return!(!t[s]||e&&i)&&(e&&(i=!0),!0)});this.targetAbles=c,this.controlAbles=u},r.updateState=function(t,e){if(e)this.setState(t);else{var r=this.state;for(var n in t)r[n]=t[n]}},r.renderAbles=function(){var e=this,t=this.targetAbles.concat(this.controlAbles,[Wr,qr]),r={};return t.map(function(t){if(!r[t.name]&&t.render)return r[t.name]=!0,t.render(e,Ft)})},t.defaultProps={target:null,container:null,origin:!0,keepRatio:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,transformOrigin:""},t}(At);function Jr(t){return We([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}var Qr={name:"pinchable",updateRect:!0,pinchStart:function(r,t){var e,n=t.datas,i=t.clientX,o=t.clientY,a=t.touches,s=t.inputEvent,c=t.targets,u=r.props,l=u.pinchable,p=u.ables;if(!l)return!1;var f=r.state,d="onPinch"+(c?"Group":"")+"Start",h="drag"+(c?"Group":"")+"ControlStart",v=(!0===l?r.controlAbles:p.filter(function(t){return-1<l.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[h]});n.pinchableDatas={};var g=Br(r,d,((e={})[c?"targets":"target"]=c||f.target,e.clientX=i,e.clientY=o,e.datas=n.pinchableDatas,e));n.isPinch=!1!==g,n.ables=v;var m=n.isPinch;if(!m)return!1;var b=Jr(a);return v.forEach(function(t){n[t.name+"Datas"]={};var e={datas:n[t.name+"Datas"],clientX:i,clientY:o,inputEvent:s,parentRotate:b,pinchFlag:!0};t[h](r,e)}),r.state.snapDirection=[0,0],m},pinch:function(e,t){var r,n=t.datas,i=t.clientX,o=t.clientY,a=t.scale,s=t.distance,c=t.touches,u=t.inputEvent,l=t.targets;if(n.isPinch){var p=Jr(c),f=s*(1-1/a),d=e.state.target,h=((r={})[l?"targets":"target"]=l||d,r.clientX=i,r.clientY=o,r.datas=n.pinchableDatas,r);Br(e,"onPinch"+(l?"Group":""),h);var v=n.ables,g="drag"+(l?"Group":"")+"Control";return v.forEach(function(t){t[g](e,{clientX:i,clientY:o,datas:n[t.name+"Datas"],inputEvent:u,parentDistance:f,parentRotate:p,pinchFlag:!0})}),h}},pinchEnd:function(e,t){var r,n=t.datas,i=t.clientX,o=t.clientY,a=t.isPinch,s=t.inputEvent,c=t.targets;if(n.isPinch){var u=e.state.target;Br(e,"onPinch"+(c?"Group":"")+"End",((r={})[c?"targets":"target"]=c||u,r.isDrag=a,r.clientX=i,r.clientY=o,r.datas=n.pinchableDatas,r));var l=n.ables,p="drag"+(c?"Group":"")+"ControlEnd";return l.forEach(function(t){t[p](e,{clientX:i,clientY:o,isDrag:a,datas:n[t.name+"Datas"],inputEvent:s,pinchFlag:!0})}),a}},pinchGroupStart:function(t,e){return this.pinchStart(t,ar({},e,{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,ar({},e,{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,ar({},e,{targets:t.props.targets}))}};function tn(t,o,a,e,s,c){var r=o.name,u=e[r]||(e[r]=[]),l=!!a.match(/End$/g);return t.moveables.map(function(t,e){var r=u[e]||(u[e]={}),n=function(t){return typeof t===re}(s)?s(t,r):s,i=o[a](t,ar({},n,{datas:r,parentFlag:!0}));return i&&c&&c(t,r,i,e),l&&(t.state.dragger=null),i})}function en(t){return ue(t,vr("direction"))}function rn(t,e){var r=e.datas,n=t.state,i=n.matrix,o=n.beforeMatrix,a=n.is3d,s=n.left,c=n.top,u=n.origin,l=n.offsetMatrix,p=n.targetMatrix,f=n.transformOrigin,d=a?4:3;r.is3d=a,r.matrix=i,r.targetMatrix=p,r.beforeMatrix=o,r.offsetMatrix=l,r.transformOrigin=f,r.inverseMatrix=Be(i,d),r.inverseBeforeMatrix=Be(o,d),r.absoluteOrigin=Ie(qe([s,c],u),d),r.startDragBeforeDist=Ke(r.inverseBeforeMatrix,r.absoluteOrigin,d),r.startDragDist=Ke(r.inverseMatrix,r.absoluteOrigin,d)}function nn(t,e){var r=t.datas,n=t.distX,i=t.distY,o=r.inverseBeforeMatrix,a=r.inverseMatrix,s=r.is3d,c=r.startDragBeforeDist,u=r.startDragDist,l=s?4:3;return $e(Ke(e?o:a,qe(r.absoluteOrigin,[n,i]),l),e?c:u)}function on(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=[];return 0<=e[1]&&(0<=e[0]&&a.push(o),e[0]<=0&&a.push(i)),e[1]<=0&&(0<=e[0]&&a.push(n),e[0]<=0&&a.push(r)),a}function an(t,e){var r=on(t,e);return[He.apply(void 0,r.map(function(t){return t[0]})),He.apply(void 0,r.map(function(t){return t[1]}))]}function sn(t,e){var r=t[0],n=t[1],i=t[2];return an([t[3],i,n,r],e)}function cn(t,e){return sn([t[0],t[1],t[2],t[3]],e)}function un(t,e,r,n,i,o){var a=sn(Sr(e,r,n,i),o);return[t[0]-a[0],t[1]-a[1]]}function ln(t,e,r,n){return Le(t,mr(e,n,r),n)}function pn(t,e){var r=t.transformOrigin,n=t.offsetMatrix,i=t.is3d?4:3;return ln(n,Le(t.targetMatrix,er(e,i),i),r,i)}function fn(t,e,r,n,i,o){var a=t.props.groupable,s=t.state,c=s.transformOrigin,u=s.targetMatrix,l=s.offsetMatrix,p=s.is3d,f=s.width,d=s.height,h=s.left,v=s.top,g=p?4:3,m=a?h:0,b=a?v:0,y=ln(l,u,function(t,s,c,u,l,p){return void 0===u&&(u=s),void 0===l&&(l=c),void 0===p&&(p=[0,0]),t?t.map(function(t,e){var r=ce(t),n=r.value,i=r.unit,o=e?l:u,a=e?c:s;return"%"===t||isNaN(n)?a*(o?p[e]/o:0):"%"!==i?n:a*n/100}):p}(i,e,r,f,d,c),g);return $e(un(o||cn(kr(t.state),n),y,e,r,g,n),[m,b])}var dn={name:"draggable",dragStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=e.parentEvent,a=e.parentDragger,s=t.state,c=s.targetTransform,u=s.target;if(s.dragger)return!1;s.dragger=a||t.targetDragger;var l=window.getComputedStyle(u);r.datas={},r.left=parseFloat(l.left||"")||0,r.top=parseFloat(l.top||"")||0,r.bottom=parseFloat(l.bottom||"")||0,r.right=parseFloat(l.right||"")||0,r.transform=c,r.startTranslate=[0,0],rn(t,{datas:r}),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1;var p={datas:r.datas,target:u,clientX:n,clientY:i,set:function(t){r.startTranslate=t}};return!1!==(o||Br(t,"onDragStart",p))?r.isDrag=!0:(s.dragger=null,r.isPinch=!1),!!r.isDrag&&p},drag:function(t,e){var r=e.datas,n=e.distX,i=e.distY,o=e.clientX,a=e.clientY,s=e.parentEvent,c=r.isPinch,u=r.isDrag,l=r.prevDist,p=r.prevBeforeDist,f=r.transform,d=r.startTranslate;if(u){var h=t.props,v=h.parentMoveable,g=s?0:h.throttleDrag||0,m=t.state.target,b=qe(nn({datas:r,distX:n,distY:i},!0),d),y=qe(nn({datas:r,distX:n,distY:i},!1),d);Gr(y,g),Gr(b,g);var x=$e(b,d),C=$e(y,d),w=$e(C,l),E=$e(x,p);r.prevDist=C,r.prevBeforeDist=x;var S=r.left+x[0],M=r.top+x[1],_=r.right-x[0],D=r.bottom-x[1],P=f+" translate("+C[0]+"px, "+C[1]+"px)";if(s||v||!w.every(function(t){return!t})||!E.some(function(t){return!t})){var O={datas:r.datas,target:m,transform:P,dist:C,delta:w,translate:y,beforeDist:x,beforeDelta:E,beforeTranslate:b,left:S,top:M,right:_,bottom:D,clientX:o,clientY:a,isPinch:c};return s||Br(t,"onDrag",O),O}}},dragEnd:function(t,e){var r=e.parentEvent,n=e.datas,i=e.isDrag,o=e.clientX,a=e.clientY;if(n.isDrag)return t.state.dragger=null,n.isDrag=!1,r||Br(t,"onDragEnd",{target:t.state.target,isDrag:i,clientX:o,clientY:a,datas:n.datas}),i},dragGroupCondition:function(t){return ue(t,vr("area"))},dragGroupStart:function(t,e){var r=e.datas,n=this.dragStart(t,e);if(!n)return!1;var i=tn(t,this,"dragStart",r,e),o=Br(t,"onDragGroupStart",ar({},n,{targets:t.props.targets,events:i}));return r.isDrag=!1!==o,!!r.isDrag&&n},dragGroup:function(t,e){var r=e.datas;if(r.isDrag){var n=tn(t,this,"drag",r,e),i=this.drag(t,e);if(i){var o=ar({targets:t.props.targets,events:n},i);return Br(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var r=e.clientX,n=e.clientY,i=e.isDrag,o=e.datas;if(o.isDrag)return this.dragEnd(t,e),tn(t,this,"dragEnd",o,e),Br(t,"onDragGroupEnd",{targets:t.props.targets,isDrag:i,clientX:r,clientY:n,datas:o.datas}),i}};function hn(t,e,r){return ar({},t.dragger.move(e,r),{parentEvent:!0})}var vn=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={}}var e=t.prototype;return e.dragStart=function(t,e){return this.isDrag=!1,this.isFlag=!1,this.datas={},this.move(t,e)},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var r,n;return this.isFlag?(r=this.prevX+t[0],n=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],n=t[1],this.isFlag=!0),{clientX:this.prevX=r,clientY:this.prevY=n,inputEvent:e,isDrag:this.isDrag,distX:r-this.startX,distY:n-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas,parentEvent:!0,parentDragger:this}},t}();function gn(t,e,r,n,i){t.startAbsoluteOrigin=[e-i[0]+n[0],r-i[1]+n[1]],t.prevDeg=We(t.startAbsoluteOrigin,[e,r])/Math.PI*180,t.startDeg=t.prevDeg,t.loop=0}function mn(t,e,r,n,i){var o=t.prevDeg,a=t.startDeg,s=t.loop;e<o&&270<o&&e<90?++t.loop:o<e&&o<90&&270<e&&--t.loop;var c=t.loop,u=360*s+o-a+n,l=360*c+e-a+n,p=r*((l=zr(l,i))-u),f=r*(l-n);return t.prevDeg=l-360*c+a-n,[p,f,l]}function bn(t,e,r,n,i,o){return mn(t,We(t.startAbsoluteOrigin,[r,n])/Math.PI*180,e,i,o)}function yn(t,e,r,n,i){return"left"===t?[n,e]:"right"===t?[r,i]:"bottom"===t?[i,n]:[e,r]}function xn(t,e){return We(0<e?t[0]:t[1],0<e?t[1]:t[0])}function Cn(t){return ue(t,vr("rotation"))}function wn(t,e){return En(t,e).concat(function(t,e){var r=t.props,n=r.resizable,i=r.scalable;if(!n&&!i)return[];var o=t.state,a=o.pos1,s=o.pos2,c=o.pos3,u=o.pos4;return[e.createElement("div",{className:vr("control","direction","n"),"data-direction":"n",key:"n",style:Or(a,s)}),e.createElement("div",{className:vr("control","direction","w"),"data-direction":"w",key:"w",style:Or(a,c)}),e.createElement("div",{className:vr("control","direction","e"),"data-direction":"e",key:"e",style:Or(s,u)}),e.createElement("div",{className:vr("control","direction","s"),"data-direction":"s",key:"s",style:Or(c,u)})]}(t,e))}function En(t,e){var r=t.props,n=r.resizable,i=r.scalable,o=r.warpable;if(!n&&!i&&!o)return[];var a=t.state,s=a.pos1,c=a.pos2,u=a.pos3,l=a.pos4;return[e.createElement("div",{className:vr("control","direction","nw"),"data-direction":"nw",key:"nw",style:Or(s)}),e.createElement("div",{className:vr("control","direction","ne"),"data-direction":"ne",key:"ne",style:Or(c)}),e.createElement("div",{className:vr("control","direction","sw"),"data-direction":"sw",key:"sw",style:Or(u)}),e.createElement("div",{className:vr("control","direction","se"),"data-direction":"se",key:"se",style:Or(l)})]}function Sn(t,e){e.datas;var r=t.state;if(!r.guidelines||!r.guidelines.length){var n=t.props,i=n.horizontalGuidelines,o=void 0===i?[]:i,a=n.verticalGuidelines,s=void 0===a?[]:a,c=n.elementGuildelines,u=void 0===c?[]:c,l=n.bounds,p=n.container,f=n.snapCenter;if(l||o.length||s.length||u.length){var d=(p||document.documentElement).getBoundingClientRect(),h=d.top,v=d.left,g=d.width,m=d.height,b=[];o.forEach(function(t){b.push({type:"horizontal",pos:[0,t],size:g})}),s.forEach(function(t){b.push({type:"vertical",pos:[t,0],size:m})}),u.forEach(function(t){var e=t.getBoundingClientRect(),r=e.top,n=e.left,i=e.width,o=e.height,a=r-h,s=a+o,c=n-v,u=c+i;b.push({type:"vertical",element:t,pos:[c,a],size:o}),b.push({type:"vertical",element:t,pos:[u,a],size:o}),b.push({type:"horizontal",element:t,pos:[c,a],size:i}),b.push({type:"horizontal",element:t,pos:[c,s],size:i}),f&&(b.push({type:"vertical",element:t,pos:[(c+u)/2,a],size:o,center:!0}),b.push({type:"horizontal",element:t,pos:[c,(a+s)/2],size:i,center:!0}))});var y=r.pos1,x=r.pos2,C=r.pos3,w=r.pos4,E=r.left,S=r.top,M=E+Math.min(y[0],x[0],C[0],w[0]),_=E+Math.max(y[0],x[0],C[0],w[0]),D=S+Math.min(y[1],x[1],C[1],w[1]),P=S+Math.max(y[1],x[1],C[1],w[1]);r.guidelines=b,r.startLeft=M,r.startRight=_,r.startTop=D,r.startBottom=P}}}function Mn(t,e,r,n){return{vertical:_n(t,e,!0,n),horizontal:_n(t,r,!1,n)}}function _n(t,e,r,n){void 0===n&&(n=0);var i=t.props.bounds;if(i){var o=i[r?"left":"top"],a=i[r?"right":"bottom"],s=Math.min.apply(Math,e),c=Math.max.apply(Math,e);if(!oe(o)&&s<o+n)return{isBound:!0,offset:s-o,pos:o};if(!oe(a)&&a-n<c)return{isBound:!0,offset:c-a,pos:a}}return{isBound:!1,offset:0,pos:0}}function Dn(t,s,e,c,u){if(!t)return{isSnap:!1,dist:-1,offset:0,guidelines:[],snapPoses:[]};var l=[],p=1/0,f=0,d="vertical"===s?0:1,r=e.filter(function(a){return t.filter(function(t){var e=t.type,r=t.pos,n=t.center;if(!c&&n||e!==s)return!1;var i=a-r[d],o=Math.abs(i);return!(u<o)&&(o<p&&(p=o,l=[]),p===o&&(f=i,l.push(t)),!0)}).length});return{isSnap:!!l.length,dist:isFinite(p)?p:-1,offset:f,guidelines:l,snapPoses:r}}function Pn(t,e){var r=t.props,n=r.snappable,i=r.bounds,o=t.state.guidelines;return!(!n||e&&!0!==n&&n.indexOf(e)||!(i||o&&o.length))}function On(t,e,r,n,i){var o=t.state.guidelines,a=oe(i)?oe(t.props.snapThreshold)?5:t.props.snapThreshold:i;return{vertical:Dn(o,"vertical",e,n,a),horizontal:Dn(o,"horizontal",r,n,a)}}function Nn(t,e,r,n){var i=t.props.snapCenter&&r,o=["left","right"],a=["top","bottom"];return i&&(o.push("center"),a.push("middle")),o=o.filter(function(t){return t in e}),a=a.filter(function(t){return t in e}),On(t,o.map(function(t){return e[t]}),a.map(function(t){return e[t]}),i,n)}function Yn(t,e){var r=Mn(t,[e[0]],[e[1]]),n=r.horizontal,i=n.isBound,o=n.offset,a=r.vertical,s=a.isBound,c=a.offset;if(i||s){var u=void 0,l=(u=i&&s?Math.abs(o)<Math.abs(c):s)?c:o;return{isVertical:u,offset:l,dist:Math.abs(l)}}}function Rn(t,e,r,n,i,o){var a=function(t,e,r,n){var i=e[0]-t[0],o=e[1]-t[1];if(!i)return n?void 0:[0,r];if(!o)return n?[r,0]:void 0;var a=o/i,s=t[1]-a*t[0];{if(n){var c=a*(e[0]+r)+s;return[r,c-e[1]]}return[(e[1]+r-s)/a-e[0],r]}}(t,e,-r,n);if(!a)return NaN;var s=nn({datas:o,distX:a[0],distY:a[1]}),c=s[0],u=s[1];return i?u:c}function Xn(t,e,r,n,i,o){var a=Sr(t,e,r,o?4:3);return Xr(a,$e(n,sn(a,i)))}function kn(n,t,i,o,a){var r,s=0,c=-1;if(t.map(function(t){return Yn(n,t)}).forEach(function(t,e){t&&(!r||r.dist<t.dist)&&(r=t,c=e)}),r){var e=Rn(i[c],t[c],r.offset,r.isVertical,o,a);isNaN(e)||(s=e)}else t.some(function(t,e){var r=function(t,e,r,n,i){var o,a=On(t,[e[0]],[e[1]]),s=a.horizontal,c=s.isSnap,u=s.offset,l=s.dist,p=a.vertical,f=p.isSnap,d=p.offset,h=p.dist,v=r[1]===e[1],g=r[0]===e[0];return c||f?Rn(r,e,(o=c&&f?0===l&&v||(0!==d||!g)&&h<l:f)?d:u,o,n,i):NaN}(n,t,i[e],o,a);return!isNaN(r)&&(s=r,!0)});return s}function zn(t,e,r,n,i,o,a,s){var c=sn(kr(t.state),o),u=Xn(e,r,n,c,i,s);return i[0]&&i[1]?function(t,e,r,n,i,o,a,s,c){var u,l=on(e,r),p=[r[0],-1*r[1]],f=[-1*r[0],r[1]],d=an(e,p),h=an(e,f),v=Mn(t,[l[0][0]],[l[0][1]]),g=v.horizontal,m=g.isBound,b=g.offset,y=v.vertical,x=y.isBound,C=y.offset,w=0,E=0,S=Yn(t,d),M=Yn(t,h),_=S&&S.dist>Math.abs(C),D=M&&M.dist>Math.abs(b);if(_||D)if(_){var P=Rn(an(e,[-1*p[0],p[1]]),d,S.offset,S.isVertical,!1,n);isNaN(P)||(w=P),E=kn(t,[an(O=Xn(i,o+r[0]*w,a+r[1]*E,s,r,c),r)],[an(O,p)],!0,n)}else{var O;P=Rn(an(e,[-1*f[0],f[1]]),d,M.offset,M.isVertical,!0,n);isNaN(P)||(E=P),w=kn(t,[an(O=Xn(i,o+r[0]*w,a+r[1]*E,s,r,c),r)],[an(O,f)],!1,n)}else{var N=On(t,[l[0][0]],[l[0][1]]),Y=N.horizontal.offset,R=N.vertical.offset;w=(u=nn({datas:n,distX:-(x?C:R),distY:-(m?b:Y)}))[0],E=u[1]}return[r[0]*w,r[1]*E]}(t,u,i,a,e,r,n,c,s):function(t,e,r,n){var i=on(e,r),o=e.slice().reverse(),a=0!==r[0]?0:1,s=0<a,c=on(o,r);i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]),c.reverse(),c.push([(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]);var u=kn(t,i,c,s,n),l=[0,0];return l[a]=r[a]*u,l}(t,u,i,a)}function Gn(t,r){return t.map(function(t,e){return function(t,e,r,n){return(t*n+e*r)/(r+n)}(t,r[e],1,2)})}function Tn(t,e,r){var n=We(t,e),i=We(t,r)-n;return 0<=i?i:i+2*Math.PI}var An=[{name:"snappable",render:function(t,o){var e=t.state,a=e.left,s=e.top,r=e.snapDirection;if(!r||!Pn(t,""))return[];var n=kr(t.state),i=Mr(n),c=i.width,u=i.height,l=i.top,p=i.left,f=i.bottom,d=i.right,h=function(t,e,r){if(!0===r){var n=Mr(e);return n.middle=(n.top+n.bottom)/2,n.center=(n.left+n.right)/2,Nn(t,n,!0,1)}if(r[0]||r[1])return 1<(o=on(e,r)).length&&o.push([(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]),On(t,o.map(function(t){return t[0]}),o.map(function(t){return t[1]}),!0,1);for(var i=[e[0],e[1],e[3],e[2],e[0]],o=[],a=0;a<4;++a)o.push(i[a]),e.push([(i[a][0]+i[a+1][0])/2,(i[a][1]+i[a+1][1])/2]);return On(t,o.map(function(t){return t[0]}),o.map(function(t){return t[1]}),!0,1)}(t,n,r),v=h.vertical,g=v.guidelines,m=v.snapPoses,b=h.horizontal,y=b.guidelines,x=b.snapPoses,C=Mn(t,[p,d],[l,f],1),w=C.vertical,E=w.isBound,S=w.pos,M=C.horizontal,_=M.isBound,D=M.pos;return E&&m.indexOf(S)<0&&(g.push({type:"vertical",pos:[S,l],size:u}),m.push(S)),_&&x.indexOf(D)<0&&(y.push({type:"horizontal",pos:[p,D],size:c}),x.push(D)),m.map(function(t,e){return o.createElement("div",{className:vr("line","vertical","guideline","target","bold"),key:"verticalTargetGuidline"+e,style:{top:"0px",left:-a+t+"px",height:u+"px"}})}).concat(x.map(function(t,e){return o.createElement("div",{className:vr("line","horizontal","guideline","target","bold"),key:"horizontalTargetGuidline"+e,style:{top:-s+t+"px",left:"0px",width:c+"px"}})}),g.map(function(t,e){var r=t.pos,n=t.size,i=t.element;return o.createElement("div",{className:vr("line","vertical","guideline",i?"bold":""),key:"verticalGuidline"+e,style:{top:-s+r[1]+"px",left:-a+r[0]+"px",height:n+"px"}})}),y.map(function(t,e){var r=t.pos,n=t.size,i=t.element;return o.createElement("div",{className:vr("line","horizontal","guideline",i?"bold":""),key:"horizontalGuidline"+e,style:{top:-s+r[1]+"px",left:-a+r[0]+"px",width:n+"px"}})}))},dragStart:function(t,e){t.state.snapDirection=!0,Sn(t,e)},drag:function(t,e){var r=e.clientX,n=e.clientY,i=e.distX,o=e.distY,a=t.state,s=a.startLeft,c=a.startTop,u=a.startBottom,l=a.startRight;if(!Pn(t,"draggable"))return!1;var p=s+i,f=l+i,d=c+o,h=u+o,v=Nn(t,{left:p,right:f,top:d,bottom:h,center:(p+f)/2,middle:(d+h)/2},!0),g=Mn(t,[p,f],[d,h]),m=0,b=0;g.vertical.isBound?m=g.vertical.offset:v.vertical.isSnap&&(m=v.vertical.offset),g.horizontal.isBound?b=g.horizontal.offset:v.horizontal.isSnap&&(b=v.horizontal.offset),e.clientX=r-m,e.clientY=n-b,e.distX=i-m,e.distY=o-b},dragEnd:function(t){t.state.guidelines=[],t.state.snapDirection=null},dragControlCondition:en,dragControlStart:function(t,e){t.state.snapDirection=null,Sn(t,e)},dragControlEnd:function(t){this.dragEnd(t)},dragGroupStart:function(t,e){t.state.snapDirection=!0,Sn(t,e)},dragGroup:function(t,e){this.drag(t,e)},dragGroupEnd:function(t){this.dragEnd(t)},dragGroupControlStart:function(t,e){t.state.snapDirection=null,Sn(t,e)},dragGroupControlEnd:function(t){this.dragEnd(t)},unset:function(t){this.dragEnd(t)}},Qr,dn,{name:"rotatable",canPinch:!0,render:function(t,e){var r=t.props,n=r.rotatable,i=r.rotationPosition;if(!n)return null;var o=t.state,a=o.pos1,s=o.pos2,c=o.pos3,u=o.pos4,l=o.direction,p=yn(i,a,s,c,u),f=xn(p,l);return e.createElement("div",{key:"rotation",className:vr("line rotation-line"),style:{transform:"translate("+(p[0][0]+p[1][0])/2+"px, "+(p[0][1]+p[1][1])/2+"px) translateY(-40px) rotate("+f+"rad)"}},e.createElement("div",{className:vr("control","rotation")}))},dragControlCondition:Cn,dragControlStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=e.parentRotate,a=e.parentFlag,s=e.pinchFlag,c=t.state,u=c.target,l=c.left,p=c.top,f=c.origin,d=c.beforeOrigin,h=c.direction,v=c.beforeDirection,g=c.targetTransform,m=c.pos1,b=c.pos2,y=c.pos3,x=c.pos4;if(!u)return!1;r.transform=g,r.left=l,r.top=p;var C=yn(t.props.rotationPosition,m,b,y,x),w=function(t,e){var r=t[0],n=t[1],i=Ze([0,-40,1],e);return[(r[0]+n[0])/2+i[0],(r[1]+n[1])/2+i[1]]}(C,xn(C,h));s||a?(r.beforeInfo={prevDeg:o,startDeg:o,loop:0},r.afterInfo={prevDeg:o,startDeg:o,loop:0}):(r.afterInfo={},r.beforeInfo={},gn(r.afterInfo,n,i,f,w),gn(r.beforeInfo,n,i,d,w)),r.direction=h,r.beforeDirection=v,r.startRotate=0,r.datas={};var E={datas:r.datas,target:u,clientX:n,clientY:i,set:function(t){r.startRotate=t}},S=Br(t,"onRotateStart",E);return r.isRotate=!1!==S,!!r.isRotate&&E},dragControl:function(t,e){var r,n,i,o,a=e.datas,s=e.clientX,c=e.clientY,u=e.parentRotate,l=e.parentFlag,p=e.pinchFlag,f=a.direction,d=a.beforeDirection,h=a.beforeInfo,v=a.afterInfo,g=a.isRotate,m=a.startRotate;if(g){var b,y,x,C,w,E,S=t.props,M=S.throttleRotate,_=void 0===M?0:M,D=S.parentMoveable;if(E=p||l?(b=(r=mn(v,u,f,m,_))[0],y=r[1],x=r[2],C=(n=mn(h,u,f,m,_))[0],w=n[1],n[2]):(b=(i=bn(v,f,s,c,m,_))[0],y=i[1],x=i[2],C=(o=bn(h,d,s,c,m,_))[0],w=o[1],o[2]),b||C||D){var P={target:t.props.target,datas:a.datas,clientX:s,clientY:c,delta:b,dist:y,rotate:x,beforeDist:w,beforeDelta:C,beforeRotate:E,transform:a.transform+" rotate("+y+"deg)",isPinch:!!p};return Br(t,"onRotate",P),P}}},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag,i=e.clientX,o=e.clientY;return!!r.isRotate&&(r.isRotate=!1,Br(t,"onRotateEnd",{datas:r.datas,clientX:i,clientY:o,target:t.state.target,isDrag:n}),n)},dragGroupControlCondition:Cn,dragGroupControlStart:function(t,e){var r=e.datas,c=e.inputEvent,n=t.state,u=n.left,l=n.top,p=n.beforeOrigin,i=this.dragControlStart(t,e);if(!i)return!1;var o=tn(t,this,"dragControlStart",r,ar({},e,{parentRotate:0}),function(t,e,r){var n=t.state,i=n.left,o=n.top,a=n.beforeOrigin,s=qe($e([i,o],[u,l]),$e(a,p));e.prevClient=s,r.dragStart=dn.dragStart(t,(new vn).dragStart(s,c))}),a=Br(t,"onRotateGroupStart",ar({},i,{targets:t.props.targets,events:o}));return r.isRotate=!1!==a,!!r.isDrag&&i},dragGroupControl:function(t,e){var f=e.inputEvent,r=e.datas;if(r.isRotate){var n=this.dragControl(t,e);if(n){var i=n.beforeDist,d=n.beforeDelta/180*Math.PI,o=tn(t,this,"dragControl",r,ar({},e,{parentRotate:i}),function(t,e,r,n){var i=e.prevClient,o=i[0],a=i[1],s=Ze([o,a],d),c=s[0],u=s[1],l=[c-o,u-a];e.prevClient=[c,u];var p=dn.drag(t,hn(t.state,l,f));r.drag=p}),a=ar({targets:t.props.targets,events:o},n);return t.rotation+=n.beforeDelta,Br(t,"onRotateGroup",a),a}}},dragGroupControlEnd:function(t,e){var r=e.clientX,n=e.clientY,i=e.isDrag,o=e.datas;if(o.isRotate)return this.dragControlEnd(t,e),tn(t,this,"dragControlEnd",o,e),Br(t,"onRotateGroupEnd",{targets:t.props.targets,clientX:r,clientY:n,isDrag:i,datas:o.datas}),i}},{name:"resizable",dragControlOnly:!0,updateRect:!0,canPinch:!0,render:function(t,e){var r=t.props,n=r.resizable,i=r.edge;if(n)return i?En(t,e):wn(t,e)},dragControlCondition:en,dragControlStart:function(t,e){var r=e.inputEvent,n=e.pinchFlag,i=e.clientX,o=e.clientY,a=e.datas,s=r.target,c=n?[1,1]:Rr(s),u=t.state,l=u.target,p=u.width,f=u.height;if(!c||!l)return!1;n||rn(t,{datas:a}),a.datas={},a.direction=c,a.offsetWidth=p,a.offsetHeight=f,a.prevWidth=0,a.prevHeight=0,a.width=p,a.height=f,a.transformOrigin=t.props.transformOrigin;var d={datas:a.datas,target:l,clientX:i,clientY:o,direction:c,set:function(t){var e=t[0],r=t[1];a.width=e,a.height=r},setOrigin:function(t){a.transformOrigin=t},dragStart:dn.dragStart(t,(new vn).dragStart([0,0],r))};return!1!==Br(t,"onResizeStart",d)&&(a.isResize=!0,t.state.snapDirection=c),!!a.isResize&&d},dragControl:function(t,e){var r,n=e.datas,i=e.clientX,o=e.clientY,a=e.distX,s=e.distY,c=e.parentFlag,u=e.pinchFlag,l=e.parentDistance,p=e.parentScale,f=e.inputEvent,d=e.dragClient,h=n.direction,v=n.width,g=n.height,m=n.offsetWidth,b=n.offsetHeight,y=n.prevWidth,x=n.prevHeight,C=n.isResize,w=n.transformOrigin;if(C){var E=t.props,S=E.keepRatio,M=E.throttleResize,_=void 0===M?0:M,D=E.parentMoveable,P=t.state.target,O=0,N=0;if(p)O=(p[0]-1)*m,N=(p[1]-1)*b;else if(u)l&&(N=(O=l)*b/m);else{var Y=nn({datas:n,distX:a,distY:s});if(O=h[0]*Y[0],N=h[1]*Y[1],S&&h[0]&&h[1]&&m&&b){var R=Math.sqrt(O*O+N*N),X=We([0,0],Y),k=We([0,0],h),z=Math.cos(X-k)*R;N=(O=z)*b/m}}var G=h[0]?Math.round(zr(Math.max(m+O,0),_)):m,T=h[1]?Math.round(zr(Math.max(b+N,0),_)):b,A=[(O=(G=(r=function(t,e,r,n,i){var o=[e,r];if(!Pn(t,"resizable"))return o;var a=t.state;return qe(o,zn(t,a.matrix,e,r,n,n,i,a.is3d))}(t,G,T,h,n))[0])-m)-y,(N=(T=r[1])-b)-x];if(n.prevWidth=O,n.prevHeight=N,D||!A.every(function(t){return!t})){var B=!c&&u?[0,0]:fn(t,G,T,h,w,d),F={target:P,width:v+O,height:g+N,offsetWidth:G,offsetHeight:T,direction:h,dist:[O,N],datas:n.datas,delta:A,clientX:i,clientY:o,isPinch:!!u,drag:dn.drag(t,hn(t.state,B,f))};return Br(t,"onResize",F),F}}},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag,i=e.clientX,o=e.clientY;return!!r.isResize&&(r.isResize=!1,Br(t,"onResizeEnd",{target:t.state.target,datas:r.datas,clientX:i,clientY:o,isDrag:n}),n)},dragGroupControlCondition:en,dragGroupControlStart:function(a,s){var t=s.datas,e=this.dragControlStart(a,s);if(!e)return!1;var c=e.direction,u=sn(kr(a.state),c),r=tn(a,this,"dragControlStart",t,function(t,e){var r=sn(kr(t.state),c),n=Ke(Qe(-a.rotation/180*Math.PI,3),[r[0]-u[0],r[1]-u[1],1],3),i=n[0],o=n[1];return e.originalX=i,e.originalY=o,s}),n=ar({},e,{targets:a.props.targets,events:r}),i=Br(a,"onResizeGroupStart",n);return t.isResize=!1!==i,!!t.isResize&&e},dragGroupControl:function(o,a){var t=a.datas;if(t.isResize){var e=this.dragControl(o,a);if(e){var r=e.offsetWidth,n=e.offsetHeight,i=e.dist,s=e.direction,c=[r/(r-i[0]),n/(n-i[1])],u=sn(kr(o.state),s),l=tn(o,this,"dragControl",t,function(t,e){var r=Ke(Qe(o.rotation/180*Math.PI,3),[e.originalX*c[0],e.originalY*c[1],1],3),n=r[0],i=r[1];return ar({},a,{parentScale:c,dragClient:qe(u,[n,i])})}),p=ar({targets:o.props.targets,events:l},e);return Br(o,"onResizeGroup",p),p}}},dragGroupControlEnd:function(t,e){var r=e.clientX,n=e.clientY,i=e.isDrag,o=e.datas;if(o.isResize)return this.dragControlEnd(t,e),tn(t,this,"dragControlEnd",o,e),Br(t,"onResizeGroupEnd",{targets:t.props.targets,clientX:r,clientY:n,isDrag:i,datas:o.datas}),i}},{name:"scalable",dragControlOnly:!0,canPinch:!0,render:function(t,e){var r=t.props,n=r.resizable,i=r.scalable,o=r.edge;if(!n&&i)return o?En(t,e):wn(t,e)},dragControlCondition:en,dragControlStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=e.pinchFlag,a=e.inputEvent,s=a.target,c=o?[1,1]:Rr(s),u=t.state,l=u.width,p=u.height,f=u.targetTransform,d=u.target;if(!c||!d)return!1;o||rn(t,{datas:r}),r.datas={},r.transform=f,r.prevDist=[1,1],r.direction=c,r.width=l,r.height=p,r.startScale=[1,1];var h={target:d,clientX:n,clientY:i,datas:r.datas,direction:c,set:function(t){r.startScale=t},dragStart:dn.dragStart(t,(new vn).dragStart([0,0],a))};return!1!==Br(t,"onScaleStart",h)&&(r.isScale=!0,t.state.snapDirection=c),!!r.isScale&&h},dragControl:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=e.distX,a=e.distY,s=e.parentScale,c=e.parentDistance,u=e.parentFlag,l=e.pinchFlag,p=e.inputEvent,f=e.dragClient,d=r.prevDist,h=r.direction,v=r.width,g=r.height,m=r.transform,b=r.isScale,y=r.startScale;if(!b)return!1;var x=t.props,C=x.keepRatio,w=x.throttleScale,E=x.parentMoveable,S=t.state,M=S.target,_=1,D=1;if(s)_=s[0],D=s[1];else if(l)c&&(_=(v+c)/v,D=(g+c*g/v)/g);else{var P=nn({datas:r,distX:o,distY:a}),O=h[0]*P[0],N=h[1]*P[1];if(C&&h[0]&&h[1]&&v&&g){var Y=Math.sqrt(O*O+N*N),R=We([0,0],P),X=We([0,0],h),k=Math.cos(R-X)*Y;N=(O=k)*g/v}_=(v+O)/v,D=(g+N)/g}_=h[0]?zr(_*y[0],w):y[0],D=h[1]?zr(D*y[1],w):y[1],0===_&&(_=1e-9*(0<d[0]?1:-1)),0===D&&(D=1e-9*(0<d[1]?1:-1));var z,G=[_/y[0],D/y[1]],T=h;if(t.props.groupable){T=[(0<=G[0]?1:-1)*h[0],(0<=G[1]?1:-1)*h[1]];var A=S.snapDirection;se(A)&&(A[0]||A[1])&&(S.snapDirection=T)}var B=[(G=function(t,e,r,n,i){var o=i.width,a=i.height,s=e.slice();if(!Pn(t,"scalable"))return s;var c=zn(t,pn(i,e),o,a,r,n,i,i.is3d);return[e[0]+c[0]/o,e[1]+c[1]/a]}(t,G,h,T,r))[0]/d[0],G[1]/d[1]];if(z=hr(G,y),r.prevDist=G,_===d[0]&&D===d[1]&&!E)return!1;var F=!u&&l?[0,0]:function(t,e,r,n){var i=t.state,o=i.is3d,a=i.left,s=i.top,c=i.width,u=i.height,l=o?4:3,p=t.props.groupable,f=pn(t.state,e),d=p?a:0,h=p?s:0;return $e(un(n||cn(kr(t.state),r),f,c,u,l,r),[d,h])}(t,B,h,f),W={target:M,scale:z,direction:h,dist:G,delta:B,transform:m+" scale("+_+", "+D+")",clientX:n,clientY:i,datas:r.datas,isPinch:!!l,drag:dn.drag(t,hn(t.state,F,p))};return Br(t,"onScale",W),W},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag,i=e.clientX,o=e.clientY;return!!r.isScale&&(r.isScale=!1,Br(t,"onScaleEnd",{target:t.state.target,isDrag:n,clientX:i,clientY:o,datas:r.datas}),n)},dragGroupControlCondition:en,dragGroupControlStart:function(a,s){var t=s.datas,e=this.dragControlStart(a,s);if(!e)return!1;var c=e.direction,u=sn(kr(a.state),c),r=tn(a,this,"dragControlStart",t,function(t,e){var r=sn(kr(t.state),c),n=Ke(Qe(-a.rotation/180*Math.PI,3),[r[0]-u[0],r[1]-u[1],1],3),i=n[0],o=n[1];return e.originalX=i,e.originalY=o,s}),n=ar({},e,{targets:a.props.targets,events:r}),i=Br(a,"onScaleGroupStart",n);return t.isScale=!1!==i,!!t.isScale&&n},dragGroupControl:function(o,a){var t=a.datas;if(t.isScale){var e=this.dragControl(o,a);if(e){var s=e.scale,r=e.direction,n=e.dist,c=sn(kr(o.state),hr(r,n)),i=tn(o,this,"dragControl",t,function(t,e){var r=Ke(Qe(o.rotation/180*Math.PI,3),[e.originalX*s[0],e.originalY*s[1],1],3),n=r[0],i=r[1];return ar({},a,{parentScale:s,dragClient:qe(c,[n,i])})}),u=ar({targets:o.props.targets,events:i},e);return Br(o,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var r=e.clientX,n=e.clientY,i=e.isDrag,o=e.datas;if(o.isScale)return this.dragControlEnd(t,e),tn(t,this,"dragControlEnd",o,e),Br(t,"onScaleGroupEnd",{targets:t.props.targets,clientX:r,clientY:n,isDrag:i,datas:o.datas}),i}},{name:"warpable",dragControlOnly:!0,render:function(t,e){var r=t.props,n=r.resizable,i=r.scalable,o=r.warpable;if(!n&&!i&&o){var a=t.state,s=a.pos1,c=a.pos2,u=a.pos3,l=a.pos4,p=Gn(s,c),f=Gn(c,s),d=Gn(s,u),h=Gn(u,s),v=Gn(u,l),g=Gn(l,u),m=Gn(c,l),b=Gn(l,c);return[e.createElement("div",{className:vr("line"),key:"middeLine1",style:Pr(p,v)}),e.createElement("div",{className:vr("line"),key:"middeLine2",style:Pr(f,g)}),e.createElement("div",{className:vr("line"),key:"middeLine3",style:Pr(d,m)}),e.createElement("div",{className:vr("line"),key:"middeLine4",style:Pr(h,b)})].concat(En(t,e))}},dragControlCondition:function(t){return ue(t,vr("direction"))},dragControlStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=e.inputEvent.target,a=t.props.target,s=Rr(o);if(!s||!a)return!1;var c=t.state,u=c.transformOrigin,l=c.is3d,p=c.targetTransform,f=c.targetMatrix,d=c.width,h=c.height,v=c.left,g=c.top;n.datas={},n.targetTransform=p,n.warpTargetMatrix=l?f:je(f,3,4),n.targetInverseMatrix=function(t,e,r){void 0===r&&(r=Math.sqrt(t.length));for(var n=t.slice(),i=0;i<r;++i)n[i*r+e-1]=0,n[(e-1)*r+i]=0;return n[(e-1)*(r+1)]=1,n}(Be(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=v,n.top=g,rn(t,{datas:n}),n.poses=[[0,0],[d,0],[0,h],[d,h]].map(function(t,e){return $e(t,u)}),n.nextPoses=n.poses.map(function(t){var e=t[0],r=t[1];return Ke(n.warpTargetMatrix,[e,r,0,1],4)}),n.posNum=(-1===s[0]?0:1)+(-1===s[1]?0:2),n.startMatrix=tr(4),n.prevMatrix=tr(4),n.absolutePos=kr(c)[n.posNum],c.snapDirection=s;var m=Br(t,"onWarpStart",{target:a,clientX:r,clientY:i,datas:n.datas,set:function(t){n.startMatrix=t}});return!1!==m&&(n.isWarp=!0),m},dragControl:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=e.distX,a=e.distY,s=r.posNum,c=r.poses,u=r.targetInverseMatrix,l=r.prevMatrix,p=r.isWarp,f=r.absolutePos,d=r.startMatrix;if(!p)return!1;var h=t.props.target;if(Pn(t,"warpable")){var v=On(t,[f[0]+o],[f[1]+a]);a-=v.horizontal.offset,o-=v.vertical.offset}var g=nn({datas:r,distX:o,distY:a},!0),m=r.nextPoses.slice();if(m[s]=[m[s][0]+g[0],m[s][1]+g[1]],!pr.every(function(t){return function(t,e){var r=Tn(t[0],t[1],t[2]),n=Tn(e[0],e[1],e[2]),i=Math.PI;return!(i<=r&&n<=i||r<=i&&i<=n)}(t.map(function(t){return c[t]}),t.map(function(t){return m[t]}))}))return!1;var b=nr(c[0],c[1],c[2],c[3],m[0],m[1],m[2],m[3]);if(!b.length)return!1;var y=Je(Le(u,b,4)),x=r.targetTransform+" matrix3d("+y.join(",")+")";return Br(t,"onWarp",{target:h,clientX:n,clientY:i,delta:Le(Be(l,4),y,4),matrix:Ve(d,r.prevMatrix=y,4),multiply:Ve,dist:y,transform:x,datas:r.datas}),!0},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag,i=e.clientX,o=e.clientY;return!!r.isWarp&&(r.isWarp=!1,Br(t,"onWarpEnd",{target:t.props.target,clientX:i,clientY:o,isDrag:n,datas:r.datas}),n)}}];function Bn(t){var e=t.areaElement,r=t.state,n=r.width,i=r.height;!function(t,e){if(t.classList)t.classList.remove(e);else{var r=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(r," ")}}(e,vr("avoid")),e.style.cssText+="left: 0px; top: 0px; width: "+n+"px; height: "+i+"px"}var Fn={name:"groupable",render:function(r,n){var t=r.props.targets||[];r.moveables=[];var e=r.state,i={left:e.left,top:e.top};return t.map(function(t,e){return n.createElement(Zr,{key:e,ref:function(e,r,n){return function(t){t&&(e[r][n]=t)}}(r,"moveables",e),target:t,origin:!1,parentMoveable:r,parentPosition:i})}).slice()},dragGroupStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY;r.isDrag=!1;var o=t.areaElement,a=t.controlBox.getElement().getBoundingClientRect(),s=a.left,c=a.top,u=t.state,l=u.width,p=u.height,f=2*Math.max(l,p),d=n-s-f/2,h=i-c-f-10;o.style.cssText+="width: "+f+"px; height: "+f+"px;left: "+d+"px;top: "+h+"px;",function(t,e){t.classList?t.classList.add(e):t.className+=" "+e}(o,vr("avoid"))},dragGroup:function(t,e){var r=e.datas;r.isDrag||(r.isDrag=!0,Bn(t))},dragGroupEnd:function(t,e){var r=e.inputEvent,n=e.isDrag;e.datas.isDrag||Bn(t);var i=r.target;if(!n&&!t.isMoveableElement(i)){var o=t.props.targets,a=o.indexOf(i),s=-1<a,c=!1;-1===a&&(c=-1<(a=function(t,e,r){void 0===r&&(r=-1);for(var n=t.length,i=0;i<n;++i)if(e(t[i],i,t))return i;return r}(o,function(t){return t.contains(i)}))),Br(t,"onClickGroup",{targets:o,target:i,targetIndex:a,hasTarget:s,containsTarget:c})}}};function Wn(t,o){return Math.max.apply(Math,t.map(function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.max(e[o],r[o],n[o],i[o])}))}function In(t,o){return Math.min.apply(Math,t.map(function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.min(e[o],r[o],n[o],i[o])}))}var jn=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.differ=new ze,t.moveables=[],t.rotation=0,t}or(t,r);var e=t.prototype;return e.updateEvent=function(t){var e=this.state;e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetDragger=Ir(this,e.target,"targetAbles","Group"),this.controlDragger=Ir(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var r=this.differ.update(this.props.targets),n=r.added,i=r.changed,o=r.removed;(n.length||i.length||o.length)&&this.updateRect()},e.checkUpdate=function(){this.updateAbles()},e.updateRect=function(e,t){var r;if(this.controlBox){this.moveables.forEach(function(t){t.updateRect(e,!1,!1)});var n=this.state,i=n.target||this.props.target;(!t||""!==e&&this.props.updateGroup)&&(this.rotation=0);var o=this.rotation,a=function(t,e){if(!t.length)return[0,0,0,0];var r=t.map(function(t){return kr(t.state)}),i=fr,o=fr,n=0,a=0,s=zr(e,1e-7);if(s%90){var c=e/180*Math.PI,u=Math.tan(c),l=-1/u,p=[dr,fr],f=[dr,fr];r.forEach(function(t){t.forEach(function(t){var e=t[1]-u*t[0],r=t[1]-l*t[0];p[0]=Math.max(p[0],e),p[1]=Math.min(p[1],e),f[0]=Math.max(f[0],r),f[1]=Math.min(f[1],r)})}),p.forEach(function(n){f.forEach(function(t){var e=(t-n)/(u-l),r=u*e+n;i=Math.min(i,e),o=Math.min(o,r)})});var d=r.map(function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return[Ze(e,-c),Ze(r,-c),Ze(n,-c),Ze(i,-c)]});n=Wn(d,0)-In(d,0),a=Wn(d,1)-In(d,1)}else if(i=In(r,0),o=In(r,1),n=Wn(r,0)-i,a=Wn(r,1)-o,s%180){var h=n;n=a,a=h}return[i,o,n,a]}(this.moveables,o),s=a[0],c=a[1],u=a[2],l=a[3];i.style.cssText+="left:0px;top:0px;width:"+u+"px; height:"+l+"px;transform:rotate("+o+"deg)",n.width=u,n.height=l;var p=Yr(i,this.controlBox.getElement(),n),f=[p.left,p.top];r=kr(p),p.pos1=r[0],p.pos2=r[1],p.pos3=r[2],p.pos4=r[3],p.origin=qe(f,p.origin),p.beforeOrigin=qe(f,p.beforeOrigin),this.updateState(ar({},p,{left:s-p.left,top:c-p.top}),!0)}},e.triggerEvent=function(t,e){if(-1<t.indexOf("Group"))return r.prototype.triggerEvent.call(this,t,e)},e.updateAbles=function(){r.prototype.updateAbles.call(this,this.props.ables.concat([Fn]),"Group")},t.defaultProps=ar({},Zr.defaultProps,{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,ables:An,targets:[]}),t}(Zr),Un=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}or(e,t);var r=e.prototype;return r.render=function(){var t=this.props.ables||[],e=this.props.target||this.props.targets,r=se(e);if(r&&1<e.length)return Ct(jn,ar({key:"group",ref:Wt(this,"moveable")},ar({},this.props,{target:null,targets:e,ables:An.concat(t)})));var n=r?e[0]:e;return Ct(Zr,ar({key:"single",ref:Wt(this,"moveable")},ar({},this.props,{target:n,ables:An.concat(t)})))},r.isMoveableElement=function(t){return this.moveable.isMoveableElement(t)},r.dragStart=function(t){this.moveable.dragStart(t)},r.isInside=function(t,e){return this.moveable.isInside(t,e)},r.updateRect=function(){this.moveable.updateRect()},r.updateTarget=function(){this.moveable.updateTarget()},r.destroy=function(){this.moveable.componentWillUnmount()},e}(At),Ln=function(r){function t(t){var e=r.call(this,t)||this;return e.state={},e.state=e.props,e}return i(t,r),t.prototype.render=function(){return h(Un,c({ref:u(this,"preactMoveable")},this.state))},t}(S),Vn=["draggable","resizable","scalable","rotatable","warpable","pinchable","snappable","origin","target","edge","throttleDrag","throttleResize","throttleScale","throttleRotate","keepRatio","dragArea","pinchThreshold","snapCenter","snapThreshold","horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds"],Hn=["dragStart","drag","dragEnd","resizeStart","resize","resizeEnd","scaleStart","scale","scaleEnd","rotateStart","rotate","rotateEnd","warpStart","warp","warpEnd","pinchStart","pinch","pinchEnd","dragGroupStart","dragGroup","dragGroupEnd","resizeGroupStart","resizeGroup","resizeGroupEnd","scaleGroupStart","scaleGroup","scaleGroupEnd","rotateGroupStart","rotateGroup","rotateGroupEnd","pinchGroupStart","pinchGroup","pinchGroupEnd","clickGroup"],qn=function(s){function t(t,e){void 0===e&&(e={});var r=s.call(this)||this,n=document.createElement("div"),i=c({container:t},e),o={};Hn.forEach(function(e){o[function(t){return t.replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})}("on "+e)]=function(t){return r.trigger(e,t)}}),B(h(Ln,c({ref:u(r,"innerMoveable")},i,o)),n),t.appendChild(n.children[0]);var a=i.target;return se(a)&&1<a.length&&r.updateRect(),r}i(t,s);var e=t.prototype;return e.isMoveableElement=function(t){return this.getMoveable().isMoveableElement(t)},e.updateRect=function(){this.getMoveable().updateRect()},e.dragStart=function(t){this.getMoveable().dragStart(t)},e.isInside=function(t,e){return this.getMoveable().isInside(t,e)},e.updateTarget=function(){this.getMoveable().updateTarget()},e.destroy=function(){var t=this.getMoveable().base;t.remove?t.remove():t.parentElement.removeChild(t),this.off(),this.getMoveable().destroy(),this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.preactMoveable},t=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,r,a):i(e,r))||a);return 3<o&&a&&Object.defineProperty(e,r,a),a}([function(r,n){return function(t){var e=t.prototype;r.forEach(function(t){n(e,t)})}}(Vn,function(t,r){Object.defineProperty(t,r,{get:function(){return this.getMoveable().props[r]},set:function(t){var e;this.innerMoveable.setState(((e={})[r]=t,e))},enumerable:!0,configurable:!0})})],t)}(t);return qn.PROPERTIES=Vn,qn.EVENTS=Hn,qn});
//# sourceMappingURL=moveable.min.js.map
