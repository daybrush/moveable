/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable.git
version: 0.17.10
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Moveable=e()}(this,function(){"use strict";var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var s=function(){return(s=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function u(t){return void 0===t}var t=function(){var t=function(){function t(){this._eventHandler={},this.options={}}var e=t.prototype;return e.trigger=function(t,e){void 0===e&&(e={});var r=this._eventHandler[t]||[];if(!(0<r.length))return!0;r=r.concat(),e.eventType=t;var n=!1,i=[e],o=0;e.stop=function(){n=!0},e.currentTarget=this;for(var a=arguments.length,s=new Array(2<a?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u];for(1<=s.length&&(i=i.concat(s)),o=0;r[o];o++)r[o].apply(this,i);return!n},e.once=function(i,o){if("object"==typeof i&&u(o)){var t,e=i;for(t in e)this.once(t,e[t]);return this}var a;return"string"==typeof i&&"function"==typeof o&&(a=this).on(i,function t(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];o.apply(a,r),a.off(i,t)}),this},e.hasOn=function(t){return!!this._eventHandler[t]},e.on=function(t,e){if("object"==typeof t&&u(e)){var r,n=t;for(r in n)this.on(r,n[r]);return this}var i;return"string"==typeof t&&"function"==typeof e&&(u(i=this._eventHandler[t])&&(this._eventHandler[t]=[],i=this._eventHandler[t]),i.push(e)),this},e.off=function(t,e){if(u(t))return this._eventHandler={},this;if(u(e)){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var r,n=t;for(r in n)this.off(r,n[r]);return this}var i=this._eventHandler[t];if(i)for(var o,a=0;void 0!==(o=i[a]);a++)if(o===e){i=i.splice(a,1);break}return this},t}();return t.VERSION="2.1.2",t}();function m(e,r){return function(t){t&&(e[r]=t)}}function r(r,n){return function(t){var e=t.prototype;r.forEach(function(t){n(e,t)})}}var b=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var r=this.keys,n=this.values,i=r.indexOf(t),o=-1===i?r.length:i;r[o]=t,n[o]=e},t}(),y=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),x="function"==typeof Map,o=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var E=function(){function t(t,e,r,n,i,o,a,s){this.prevList=t,this.list=e,this.added=r,this.removed=n,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t,r,s,u,e=(t=this.changedBeforeAdded,r=this.fixed,s=[],u=[],t.forEach(function(t){var e=t[0],r=t[1],n=new o;s[e]=n,u[r]=n}),s.forEach(function(t,e){t.connect(s[e-1])}),t.filter(function(t,e){return!r[e]}).map(function(t,e){var r=t[0],n=t[1];if(r===n)return[0,0];var i=s[r],o=u[n-1],a=i.getIndex();return i.disconnect(),o?i.connect(o,o.next):i.connect(void 0,s[0]),[a,i.getIndex()]})),c=this.changed,l=[];this.cacheOrdered=e.filter(function(t,e){var r=t[0],n=t[1],i=c[e],o=i[0],a=i[1];if(r!==n)return l.push([o,a]),!0}),this.cachePureChanged=l},t}();function c(t,e,r){var n=x?Map:r?y:b,i=r||function(t){return t},o=[],a=[],s=[],u=t.map(i),c=e.map(i),l=new n,f=new n,p=[],h=[],d={},g=[],v=0,m=0;return u.forEach(function(t,e){l.set(t,e)}),c.forEach(function(t,e){f.set(t,e)}),u.forEach(function(t,e){var r=f.get(t);void 0===r?(++m,a.push(e)):d[r]=m}),c.forEach(function(t,e){var r=l.get(t);void 0===r?(o.push(e),++v):(s.push([r,e]),m=d[e]||0,p.push([r-m,e-v]),h.push(e===r),r!==e&&g.push([r,e]))}),a.reverse(),new E(t,e,o,a,g,s,p,h)}var e=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),r=c(this.list,e,this.findKeyCallback);return this.list=e,r},t}(),a="string",l="undefined",f=['"',"'",'\\"',"\\'"];function p(t){return Array.isArray(t)}function h(t){return typeof t===a}function d(t,e,r,n){for(var i=r;i<n;++i){var o=e[i].trim();if(o===t)return i;var a=i;if("("===o?a=d(")",e,i+1,n):-1<f.indexOf(o)&&(a=d(o,e,i+1,n)),-1===a)break;i=a}return-1}function g(t){return function(t,e){for(var r=new RegExp("(\\s*"+(e||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),n=t.split(r).filter(Boolean),i=n.length,o=[],a=[],s=0;s<i;++s){var u=n[s].trim(),c=s;if("("===u)c=d(")",n,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<f.indexOf(u))c=d(u,n,s+1,i);else if(u===e){a.length&&(o.push(a.join("")),a=[]);continue}}-1===c&&(c=i-1),a.push(n.slice(s,c+1).join("")),s=c}return a.length&&o.push(a.join("")),o}(t,",")}function v(t,n){return void 0===n&&(n="-"),t.replace(/([a-z])([A-Z])/g,function(t,e,r){return""+e+n+r.toLowerCase()})}function S(){return Date.now?Date.now():(new Date).getTime()}function M(t,e,r,n){t.addEventListener(e,r,n)}function D(t,e,r){t.removeEventListener(e,r)}var w=function(t,e){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function C(t,e){function r(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var P=function(){return(P=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function O(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function R(t,e){if(t===e)return!1;for(var r in t)if(!(r in e))return!0;for(var r in e)if(t[r]!==e[r])return!0;return!1}function z(i,o){var a=Object.keys(i),r=Object.keys(o),t=c(a,r,function(t){return t}),n={},s={},u={};return t.added.forEach(function(t){var e=r[t];n[e]=o[e]}),t.removed.forEach(function(t){var e=a[t];s[e]=i[e]}),t.maintained.forEach(function(t){var e=t[0],r=a[e],n=[i[r],o[r]];i[r]!==o[r]&&(u[r]=n)}),{added:n,removed:s,changed:u}}function B(t){t.forEach(function(t){t()})}function _(t){var e=0;return t.map(function(t){return null==t?"$compat"+ ++e:""+t})}function G(t,e,r,n){return h(t)?new N("text_"+t,e,r,n,null,{}):new("string"==typeof t.type?X:t.type.prototype.render?F:q)(t.type,e,r,n,t.ref,t.props)}function T(t){var e=t.className,r=O(t,["className"]);return null!=e&&(r.class=e),delete r.style,delete r.children,r}function A(t,e){if(!e)return t;for(var r in e)typeof t[r]===l&&(t[r]=e[r]);return t}function I(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=e||{},o=i.key,a=i.ref,s=O(i,["key","ref"]);return{type:t,key:o,ref:a,props:P(P({},s),{children:function e(t){var r=[];return t.forEach(function(t){r=r.concat(p(t)?e(t):t)}),r}(r).filter(function(t){return null!=t&&!1!==t})})}}var k=function(){function t(t,e,r,n,i,o){void 0===o&&(o={}),this.type=t,this.key=e,this.index=r,this.container=n,this.ref=i,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,r,n){if(this.base&&!h(e)&&!n&&!this._should(e.props,r))return!1;this.original=e,this._setState(r);var i=this.props;return h(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?i:{},r),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function Y(t){var e={},r={};for(var n in t)0===n.indexOf("on")?r[n.replace("on","").toLowerCase()]=t[n]:e[n]=t[n];return{attributes:e,events:r}}var N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}C(e,t);var r=e.prototype;return r._render=function(t){var e=this,r=!this.base;return r&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){r?e._mounted():e._updated()}),!0},r._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(k),X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.events={},t}C(t,e);var r=t.prototype;return r.addEventListener=function(t,e){var r=this.events;r[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,r[t])},r.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},r._should=function(t){return R(this.props,t)},r._render=function(t,e){var r=this,n=!this.base;n&&(this.base=document.createElement(this.type)),K(this,this._providers,this.props.children,t,null);var i=this.base,o=Y(e),a=o.attributes,s=o.events,u=Y(this.props),c=u.attributes,l=u.events;return function(t,e,r){var n=z(t,e),i=n.added,o=n.removed,a=n.changed;for(var s in i)r.setAttribute(s,i[s]);for(var s in a)r.setAttribute(s,a[s][1]);for(var s in o)r.removeAttribute(s)}(T(a),T(c),i),function(t,e,r){var n=z(t,e),i=n.added,o=n.removed,a=n.changed;for(var s in o)r.removeEventListener(s);for(var s in i)r.addEventListener(s,i[s]);for(var s in a)r.removeEventListener(s),r.addEventListener(s,a[s][1]);for(var s in o)r.removeEventListener(s)}(s,l,this),function(t,e,r){var n=r.style,i=z(t,e),o=i.added,a=i.removed,s=i.changed;for(var u in o){var c=v(u,"-");n.setProperty?n.setProperty(c,o[u]):n[c]=o[u]}for(var u in s){c=v(u,"-");n.setProperty?n.setProperty(c,s[u][1]):n[c]=s[u][1]}for(var u in a){c=v(u,"-");n.removeProperty?n.removeProperty(c):n[c]=""}}(e.style||{},this.props.style||{},i),t.push(function(){n?r._mounted():r._updated()}),!0},r._unmount=function(){var t=this.events,e=this.base;for(var r in t)e.removeEventListener(r,t[r]);this._providers.forEach(function(t){t._unmount()}),this.events={},e.parentNode.removeChild(e)},t}(k);function W(t){if(!t)return null;if(t instanceof Node)return t;var e=t._provider._providers;return e.length?W(e[0].base):null}var q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}C(e,t);var r=e.prototype;return r._render=function(t){var e=this.type(this.props);return K(this,this._providers,e?[e]:[],t),!0},r._unmount=function(){this._providers.forEach(function(t){t._unmount()})},e}(k),j=function(r){function t(t){var e=r.call(this,"container","container",0,null)||this;return e.base=t,e}C(t,r);var e=t.prototype;return e._render=function(){return!0},e._unmount=function(){},t}(k),F=function(a){function t(t,e,r,n,i,o){return void 0===o&&(o={}),a.call(this,t,e,r,n,i,A(o,t.defaultProps))||this}C(t,a);var e=t.prototype;return e._should=function(t,e){return this.base.shouldComponentUpdate(A(t,this.type.defaultProps),e||this.base.state)},e._render=function(t,e,r){var n=this;this.props=A(this.props,this.type.defaultProps);var i=!this.base;i?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var o=this.base,a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),K(this,this._providers,s?[s]:[],t,r,null),t.push(function(){i?(n._mounted(),o.componentDidMount()):(n._updated(),o.componentDidUpdate(e,a))})},e._setState=function(t){t&&(this.base.state=t)},e._unmount=function(){this._providers.forEach(function(t){t._unmount()}),this.base.componentWillUnmount()},t}(k),H=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,r){var n=[],i=this._provider;K(i.container,[i],[i.original],n,P(P({},this.state),t),r)&&(e&&n.push(e),B(n))},e.forceUpdate=function(t){this.setState(this.state,t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},t}(),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return C(e,t),e.prototype.shouldComponentUpdate=function(t,e){return R(this.props,t)||R(this.state,e)},e}(H),V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}C(e,t);var r=e.prototype;return r.componentDidMount=function(){var t=this.props,e=t.element,r=t.container;this._portalProvider=new j(r),$(e,r,this._portalProvider)},r.componentDidUpdate=function(){var t=this.props;$(t.element,t.container,this._portalProvider)},r.componentWillUnmount=function(){$(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(L);function U(i,a,o){var s=o.map(function(t){return h(t)?null:t.key}),t=c(_(a.map(function(t){return t.key})),_(s),function(t){return t});t.removed.forEach(function(t){a.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var e=t[0],r=t[1],n=a.splice(e,1)[0];a.splice(r,0,n);var i=W(n.base),o=W(a[r+1]&&a[r+1].base);i&&i.parentNode.insertBefore(i,o)}),t.added.forEach(function(t){a.splice(t,0,G(o[t],s[t],t,i))});var e=t.maintained.filter(function(t){t[0];var e=t[1],r=o[e],n=a[e];return(h(r)?"text_"+r:r.type)!==n.type?(n._unmount(),a.splice(e,1,G(r,s[e],e,i)),!0):(n.index=e,!1)});return function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}(t.added,e.map(function(t){t[0];return t[1]}))}function K(i,o,r,n,a,s){var t=U(i,o,r),e=o.filter(function(t,e){return t._update(n,r[e],a,s)}),u=function t(e){if(!e)return null;var r=e.base;return r instanceof Node?r:t(e.container)}(i);return u&&t.reverse().forEach(function(t){var e,r=o[t],n=W(r.base);n&&(u===n||n.parentNode||(e=function(t,e){for(var r=t._providers,n=r.length,i=e.index+1;i<n;++i){var o=W(r[i].base);if(o)return o}return null}(i,r),u.insertBefore(n,e)))}),0<e.length}function $(t,e,r){void 0===r&&(r=e.__REACT_COMPAT__);var n,i,o,a,s=!!r;return r=r||new j(e),i=t?[t]:[],a=[],K(n=r,n._providers,i,a,o),B(a),s||(e.__REACT_COMPAT__=r),r}function Z(t,e,r){var n=e.__REACT_COMPAT__;t&&!n&&(e.innerHTML=""),$(t,e,n),r&&r()}var J=("undefined"!=typeof window&&window||{}).navigator,Q={browser:[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Whale/,identity:"Whale",versionSearch:"Whale"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/MiuiBrowser/,identity:"MIUI Browser",versionSearch:"MiuiBrowser"},{criteria:/SamsungBrowser/,identity:"Samsung Internet",versionSearch:"SamsungBrowser"},{criteria:/SAMSUNG /,identity:"Samsung Internet",versionSearch:"Version"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"Android Browser",versionSearch:"Version"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],os:[{criteria:/Windows Phone/,identity:"Windows Phone",versionSearch:"Windows Phone"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/Windows NT/,identity:"Window",versionSearch:"Windows NT"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"},{criteria:/Tizen/,identity:"Tizen"},{criteria:/Web0S/,identity:"WebOS"}],webview:[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],defaultString:{browser:{version:"-1",name:"unknown"},os:{version:"-1",name:"unknown"}}};function tt(t,e){for(var r=[],n=0;n<t.length;n++)e(t[n])&&r.push(t[n]);return r}var et=void 0;function rt(t,e){return e&&e.test?!!e.test(t):-1<t.indexOf(e)}function nt(t,e){var r=tt(t,function(t){return rt(et,t.criteria)})[0];return r&&r.identity||e.name}function it(t,n){return tt(t,function(t){var e=t.criteria,r=new RegExp(t.identity,"i").test(n);return!!(e?r&&rt(et,e):r)})[0]}function ot(t,e){var r=Q.defaultString.browser.version,n=new RegExp("("+t+")","i").exec(e);if(!n)return r;var i,o=n.index,a=n[0];return-1<o&&(i=o+a.length+1,r=e.substring(i).split(" ")[0].replace(/_/g,".").replace(/;|\)/g,"")),r}function at(t){var e;if(t)return ot((e=t,it(Q.browser,e)||{criteria:e,versionSearch:e,identity:e}).versionSearch||t,et)}function st(){var t=Q.webview,e=void 0;return function(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return!0;return!1}(tt(t,function(t){return rt(et,t.criteria)}),function(t){return e=ot(t.browserVersionSearch,et),!(!rt(et,t.webviewToken)&&!rt(e,t.webviewBrowserVersion))})}function ut(t){var e,r=(e=t,it(Q.os,e)||{}),n=Q.defaultString.os.version,i=void 0;if(t){if(r.versionAlias)return r.versionAlias;var o=new RegExp("("+(r.versionSearch||t)+")\\s([\\d_\\.]+|\\d_0)","i");return o.exec(et)&&(i=o.exec(et)[2].replace(/_/g,".").replace(/;|\)/g,"")),i||n}}function ct(){var t=nt(Q.os,Q.defaultString.os);return{name:t,version:ut(t)}}function lt(){var t=nt(Q.browser,Q.defaultString.browser);return{name:t,version:at(t),webview:st()}}function ft(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:J.userAgent;et=t;var e={os:ct(),browser:lt(),isMobile:-1!==et.indexOf("Mobi")};return e.browser.name=e.browser.name.toLowerCase(),e.os.name=e.os.name.toLowerCase(),e.os.version=e.os.version.toLowerCase(),"ios"===e.os.name&&e.browser.webview&&(e.browser.version="-1"),e}ft.VERSION="2.1.5";var pt="function",ht="object",dt="undefined";function gt(t){return typeof t===dt}function vt(t){return t&&typeof t===ht}function mt(t){return Array.isArray(t)}function bt(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var r=e[1],n=e[2];return{prefix:r,unit:e[3],value:parseFloat(n)}}function yt(t,e,r){void 0===r&&(r=-1);for(var n=t.length,i=0;i<n;++i)if(e(t[i],i,t))return i;return r}function xt(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Et(t,e,r){void 0===r&&(r=Math.sqrt(t.length));for(var n=t.slice(),i=0;i<r;++i)n[i*r+e-1]=0,n[(e-1)*r+i]=0;return n[(e-1)*(r+1)]=1,n}function St(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=t.slice(),n=kt(e),i=0;i<e;++i){var o=e*i,a=e*(i+1),s=o+i;if(0===r[s])for(var u=i+1;u<e;++u)if(r[e*u+i]){!function(t,e,r,n,i){for(var o=r;o<n;++o){var a=t[o],s=e[o];t[o]=t[i+o-r],t[i+o-r]=a,e[o]=e[i+o-r],e[i+o-r]=s}}(r,n,o,a,e*u);break}if(!r[s])return[];!function(t,e,r,n,i){for(var o=r;o<n;++o)t[o]/=i,e[o]/=i}(r,n,o,a,r[s]);for(u=0;u<e;++u){var c=e*u,l=c+e,f=r[c+i];0!==f&&i!==u&&function(t,e,r,n,i,o){for(var a=r;a<n;++a)t[a]+=t[i+a-r]*o,e[a]+=e[i+a-r]*o}(r,n,c,l,o,-f)}}return n}function Mt(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],n=0;n<e;++n)for(var i=0;i<e;++i)r[i*e+n]=t[e*n+i];return r}function Dt(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=Math.atan2(n,r);return 0<=i?i:i+2*Math.PI}function wt(t,e){for(var r=t.slice(),n=t.length;n<e-1;++n)r[n]=0;return r[e-1]=1,r}function Ct(t,e,r){if(void 0===e&&(e=Math.sqrt(t.length)),e===r)return t;for(var n=kt(r),i=Math.min(e,r),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)n[o*r+a]=t[o*e+a];n[(o+1)*r-1]=t[(o+1)*e-1],n[(r-1)*r+o]=t[(e-1)*e+o]}return n[r*r-1]=t[e*e-1],n}function Pt(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=kt(e);return t.forEach(function(t){n=Ot(n,t,e)}),n}function Ot(t,e,r){var n=[],i=t.length/r,o=e.length/i;if(!i)return e;if(!o)return t;for(var a=0;a<r;++a)for(var s=0;s<o;++s)for(var u=n[a*o+s]=0;u<i;++u)n[a*o+s]+=t[a*i+u]*e[u*o+s];return n}function Rt(t,e,r){void 0===r&&(r=Math.sqrt(t.length));for(var n=[],i=t.length/r,o=e.length/i,a=0;a<r;++a)for(var s=0;s<o;++s)for(var u=n[a+s*o]=0;u<i;++u)n[a+s*o]+=t[a+u*i]*e[u+s*o];return n}function zt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length,n=0,i=r-1;0<=i;--i)n+=t[i];return r?n/r:0}function Bt(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]+e[i];return n}function _t(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]-e[i];return n}function Gt(t,e,r){void 0===r&&(r=e.length);var n=Ot(t,e,r),i=n[r-1];return n.map(function(t){return t/i})}function Tt(t,e){return Gt(It(e,3),wt(t,3))}function At(t){return 9===t.length?[t[0],t[3],t[1],t[4],t[2],t[5]]:Mt(t)}function It(t,e){var r=Math.cos(t),n=Math.sin(t),i=kt(e);return i[0]=r,i[1]=-n,i[e]=n,i[e+1]=r,i}function kt(t){for(var e=t*t,r=[],n=0;n<e;++n)r[n]=n%(t+1)?0:1;return r}function Yt(t,e){for(var r=kt(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[(e+1)*i]=t[i];return r}function Nt(t,e){for(var r=kt(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[e*(i+1)-1]=t[i];return r}function Xt(t,e,r,n,i,o,a,s){var u=t[0],c=t[1],l=e[0],f=e[1],p=r[0],h=r[1],d=n[0],g=n[1],v=i[0],m=i[1],b=o[0],y=o[1],x=a[0],E=a[1],S=s[0],M=s[1],D=St([u,c,1,0,0,0,-v*u,-v*c,0,0,0,u,c,1,-m*u,-m*c,l,f,1,0,0,0,-b*l,-b*f,0,0,0,l,f,1,-y*l,-y*f,p,h,1,0,0,0,-x*p,-x*h,0,0,0,p,h,1,-E*p,-E*h,d,g,1,0,0,0,-S*d,-S*g,0,0,0,d,g,1,-M*d,-M*g],8);if(!D.length)return[];var w=Ot(D,[v,m,b,y,x,E,S,M],8);return w[8]=1,Ct(w,3,4)}var Wt=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return e>>>0};function qt(u){var c,l="rCS"+Wt(u).toString(36),f=0;return{className:l,inject:function(t){var e,r,n,i,o,a=function(t){if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(t),s=0===f;return(a||s)&&(r=l,n=u,i=a,(o=document.createElement("style")).setAttribute("type","text/css"),o.innerHTML=n.replace(/([^}{]*){/gm,function(t,e){return g(e).map(function(t){return-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?""+t.replace(/\:host/g,"."+r):"."+r+" "+t}).join(", ")+"{"}),(i||document.head||document.body).appendChild(o),e=o),s&&(c=e),a||++f,{destroy:function(){a?(t.removeChild(e),e=null):(0<f&&--f,0===f&&c&&(c.parentNode.removeChild(c),c=null))}}}}}var jt=function(t,e){return(jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Ft=function(){return(Ft=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var Ht=function(){return(Ht=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Lt(t,e,r,n){var i=Qt(t),o=Qt(e),a=Qt(n);return Ut(te(n[0],ee(i,a)),te(n[0],ee(o,a)),r[0])}function Vt(t){return t.touches?Zt(t.touches):[Jt(t)]}function Ut(t,e,r){var n=t.clientX,i=t.clientY;return{clientX:n,clientY:i,deltaX:n-e.clientX,deltaY:i-e.clientY,distX:n-r.clientX,distY:i-r.clientY}}function Kt(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function $t(t,r,n){return t.map(function(t,e){return Ut(t,r[e],n[e])})}function Zt(t){for(var e=Math.min(t.length,2),r=[],n=0;n<e;++n)r.push(Jt(t[n]));return r}function Jt(t){return{clientX:t.clientX,clientY:t.clientY}}function Qt(t){return 1===t.length?t[0]:{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function te(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function ee(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var re=function(){function t(t,e){var f=this;void 0===e&&(e={}),this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.targets=[],this.prevTime=0,this.isDouble=!1,this.onDragStart=function(t){if(f.flag||!1!==t.cancelable){var e,r,n,i=f.options,o=i.container,a=i.pinchOutside,s=i.dragstart,u=i.preventRightClick,c=i.preventDefault,l=f.isTouch;if(!f.flag&&l&&a&&setTimeout(function(){M(o,"touchstart",f.onDragStart)}),f.flag&&l&&a&&D(o,"touchstart",f.onDragStart),(e=t).touches&&2<=e.touches.length){if(!f.flag&&t.touches.length!==t.changedTouches.length)return;f.pinchFlag||f.onPinchStart(t)}f.flag||(r=f.startClients[0]?f.startClients:Vt(t),f.customDist=[0,0],f.flag=!0,f.isDrag=!1,f.startClients=r,f.prevClients=r,f.datas={},n=Ut(r[f.movement=0],f.prevClients[0],f.startClients[0]),(!u||3!==t.which&&2!==t.button)&&!1!==(s&&s(Ht({type:"dragstart",datas:f.datas,inputEvent:t},n)))||(f.startClients=[],f.prevClients=[],f.flag=!1),f.isDouble=S()-f.prevTime<200,f.flag&&c&&t.preventDefault())}},this.onDrag=function(t,e){var r,n,i;f.flag&&(r=Vt(t),f.pinchFlag&&f.onPinch(t,r),!(n=f.move([0,0],t,r))||!n.deltaX&&!n.deltaY||(i=f.options.drag)&&i(Ht({},n,{isScroll:!!e,inputEvent:t})))},this.onDragEnd=function(t){var e,r,n,i,o,a,s,u,c;f.flag&&(r=(e=f.options).dragend,n=e.pinchOutside,i=e.container,f.isTouch&&n&&D(i,"touchstart",f.onDragStart),f.pinchFlag&&f.onPinchEnd(t),f.flag=!1,o=f.prevClients,a=f.startClients,s=f.pinchFlag?Lt(o,o,a,f.startPinchClients):Ut(o[0],o[0],a[0]),u=S(),c=!f.isDrag&&f.isDouble,f.prevTime=f.isDrag||c?0:u,f.startClients=[],f.prevClients=[],r&&r(Ht({type:"dragend",datas:f.datas,isDouble:c,isDrag:f.isDrag,inputEvent:t},s)))};var r=[].concat(t);this.options=Ht({container:1<r.length?window:r[0],preventRightClick:!0,preventDefault:!0,pinchThreshold:0,events:["touch","mouse"]},e);var n,i=this.options,o=i.container,a=i.events;this.isTouch=-1<a.indexOf("touch"),this.isMouse=-1<a.indexOf("mouse"),this.customDist=[0,0],this.targets=r,this.isMouse&&(r.forEach(function(t){M(t,"mousedown",f.onDragStart)}),M(o,"mousemove",this.onDrag),M(o,"mouseup",this.onDragEnd),M(o,"contextmenu",this.onDragEnd)),this.isTouch&&(n={passive:!1},r.forEach(function(t){M(t,"touchstart",f.onDragStart,n)}),M(o,"touchmove",this.onDrag,n),M(o,"touchend",this.onDragEnd,n),M(o,"touchcancel",this.onDragEnd,n))}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isFlag=function(){return this.flag},e.isPinchFlag=function(){return this.pinchFlag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(e,r,t,n){void 0===n&&(n=!0),this.flag&&(this.startClients.forEach(function(t){t.clientX-=e,t.clientY-=r}),this.prevClients.forEach(function(t){t.clientX-=e,t.clientY-=r}),n&&this.onDrag(t,!0))},e.move=function(t,e,r){var n=t[0],i=t[1];void 0===r&&(r=this.prevClients);var o=this.customDist,a=this.prevClients,s=this.startClients,u=this.pinchFlag?Lt(r,a,s,this.startPinchClients):Ut(r[0],a[0],s[0]);o[0]+=n,o[1]+=i,u.deltaX+=n,u.deltaY+=i;var c=u.deltaX,l=u.deltaY;return u.distX+=o[0],u.distY+=o[1],this.movement+=Math.sqrt(c*c+l*l),this.prevClients=r,this.isDrag=!0,Ht({type:"drag",datas:this.datas},u,{movement:this.movement,isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},e.onPinchStart=function(t){var e,r,n,i,o,a,s=this.options,u=s.pinchstart,c=s.pinchThreshold;this.isDrag&&this.movement>c||(n=Zt(t.changedTouches),this.pinchFlag=!0,(e=this.startClients).push.apply(e,n),(r=this.prevClients).push.apply(r,n),this.startDistance=Kt(this.prevClients),this.startPinchClients=this.prevClients.slice(),u&&(a=Ut(o=Qt(i=this.prevClients),o,o),u(Ht({type:"pinchstart",datas:this.datas,touches:$t(i,i,i)},a,{inputEvent:t}))))},e.onPinch=function(t,e){var r,n,i,o,a;!this.flag||!this.pinchFlag||e.length<2||(this.isPinch=!0,(r=this.options.pinch)&&(n=this.prevClients,i=this.startClients,o=Ut(Qt(e),Qt(n),Qt(i)),a=Kt(e),r(Ht({type:"pinch",datas:this.datas,movement:this.movement,touches:$t(e,n,i),scale:a/this.startDistance,distance:a},o,{inputEvent:t}))))},e.onPinchEnd=function(t){var e,r,n,i,o;this.flag&&this.pinchFlag&&(e=this.isPinch,this.isPinch=!1,this.pinchFlag=!1,(r=this.options.pinchend)&&(n=this.prevClients,i=this.startClients,o=Ut(Qt(n),Qt(n),Qt(i)),r(Ht({type:"pinchend",datas:this.datas,isPinch:e,touches:$t(n,n,i)},o,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1))},e.unset=function(){var e=this,t=this.targets,r=this.options.container;this.isMouse&&(t.forEach(function(t){D(t,"mousedown",e.onDragStart)}),D(r,"mousemove",this.onDrag),D(r,"mouseup",this.onDragEnd),D(r,"contextmenu",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){D(t,"touchstart",e.onDragStart)}),D(r,"touchstart",this.onDragStart),D(r,"touchmove",this.onDrag),D(r,"touchend",this.onDragEnd),D(r,"touchcancel",this.onDragEnd))},t}(),ne=function(t,e){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function ie(t){var e=t.container;return[e.scrollLeft,e.scrollTop]}var oe=function(e){function t(){this.constructor=r}var r,n;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.startRect=null,t.startPos=[],t.prevTime=0,t.timer=0,t}ne(r=i,n=e),r.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t);var o=i.prototype;return o.dragStart=function(t,e){var r=e.container.getBoundingClientRect(),n=r.top,i=r.left,o=r.width,a=r.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:n,left:i,width:o,height:a}},o.drag=function(t,e){var r=this,n=t.clientX,i=t.clientY,o=e.container,a=e.threshold,s=void 0===a?0:a,u=e.throttleTime,c=void 0===u?0:u,l=e.getScrollPosition,f=void 0===l?ie:l,p=this.startRect,h=this.startPos,d=S(),g=Math.max(c+this.prevTime-d,0),v=[0,0];if(p.top>i-s?(h[1]>p.top||i<h[1])&&(v[1]=-1):p.top+p.height<i+s&&(h[1]<p.top+p.height||i>h[1])&&(v[1]=1),p.left>n-s?(h[0]>p.left||n<h[0])&&(v[0]=-1):p.left+p.width<n+s&&(h[0]<p.left+p.width||n>h[0])&&(v[0]=1),clearTimeout(this.timer),!v[0]&&!v[1])return!1;if(0<g)return this.timer=window.setTimeout(function(){r.drag(t,e)},g),!1;this.prevTime=d;var m=f({container:o,direction:v});this.trigger("scroll",{container:o,direction:v,inputEvent:t});var b=f({container:o,direction:v}),y=b[0]-m[0],x=b[1]-m[1];return!(!y&&!x)&&(this.trigger("move",{offsetX:v[0]?y:0,offsetY:v[1]?x:0,inputEvent:t}),c&&(this.timer=window.setTimeout(function(){r.drag(t,e)},c)),!0)},o.dragEnd=function(){clearTimeout(this.timer)},i}(t),ae=function(t,e){return(ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var se,ue="function"==typeof Map?void 0:(se=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++se)}),ce=function(e){function t(){this.constructor=r}var r,n;function i(t){return void 0===t&&(t=[]),e.call(this,t,ue)||this}return ae(r=i,n=e),r.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t),i}(e),le=function(t,e){return(le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function fe(t,e){function r(){this.constructor=t}le(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var pe=function(){return(pe=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function he(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+e+'deg);transform-origin: 16px 16px"></path></svg>'}var de,ge=ft(),ve=-1<ge.os.name.indexOf("ios")||-1<ge.browser.name.indexOf("safari"),me="moveable-",be=(de=me,("\n{\n\tposition: fixed;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --zoom: 1;\n    --zoompx: 1px;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    width: calc(14 * var(--zoompx));\n    height: calc(14 * var(--zoompx));\n    margin-top: calc(-7 * var(--zoompx));\n    margin-left: calc(-7 * var(--zoompx));\n    border: calc(2 * var(--zoompx)) solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n    height: 1px;\n    width: var(--zoompx);\n    height: var(--zoompx);\n\tbackground: #4af;\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top: var(--zoompx) dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left: var(--zoompx) dashed #4af;\n}\n.line.dashed:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #4af;\n    font-size: 12px;\n    font-weight: bold;\n}\n.line.dashed.horizontal:before, .line.gap.horizontal:before {\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 5px;\n}\n.line.dashed.vertical:before, .line.gap.vertical:before {\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.line.rotation-line {\n\theight: 40px;\n    width: 1px;\n    transform-origin: 50% calc(100% - 0.5px);\n    top: -40px;\n    width: var(--zoompx);\n    height: calc(40 * var(--zoompx));\n    top: calc(-40 * var(--zoompx));\n    transform-origin: 50% calc(100% - 0.5 * var(--zoompx));\n}\n.line.rotation-line .control {\n\tborder-color: #4af;\n\tbackground:#fff;\n    cursor: alias;\n    left: 50%;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n    width: calc(2 * var(--zoompx));\n}\n.line.horizontal.bold {\n    height: 2px;\n    height: calc(2 * var(--zoompx));\n}\n\n.line.gap {\n    background: #f55;\n}\n.line.gap:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n    width: calc(12 * var(--zoompx));\n    height: calc(12 * var(--zoompx));\n    margin-top: calc(-6 * var(--zoompx));\n    margin-left: calc(-6 * var(--zoompx));\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+(r=he(1,e=t),n=he(2,e),i=45*Math.round(e/45)%180,"cursor:"+(o=135==i?"nwse-resize":45==i?"nesw-resize":90==i?"ew-resize":"ns-resize")+";cursor: url('"+r+"') 16 16, "+o+";cursor: -webkit-image-set(url('"+r+"') 1x, url('"+n+"') 2x) 16 16, "+o+";")+"\n}\n";var e,r,n,i,o}).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n.control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: pointer;\n}\n"+(ve?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n").replace(/([^}{]*){/gm,function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,"."+de+"$1")+"{"})),ye=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],xe=1e-7,Ee=Math.pow(10,10),Se=-Ee,Me=["nw","ne","sw","se","n","w","s","e"],De={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},we={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135};function Ce(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(t){return t.split(" ").map(function(t){return t?""+e+t:""}).join(" ")}).join(" ")}.apply(void 0,[me].concat(t))}function Pe(){return kt(3)}function Oe(t,e,r){return Pt(e,Nt(r,e),t,Nt(r.map(function(t){return-t}),e))}function Re(s){return ze(ir(s,":before")).map(function(t,e){var r,n,i=bt(t),o=i.value,a=i.unit;return o*(r=s,n=0===e,"%"!==a?1:Ae(r.ownerSVGElement)[n?"width":"height"]/100)})}function ze(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function Be(t,e,r){for(var n=document.body,i=!t||r?t:t.parentElement,o=!1,a="relative";i&&i!==n;){e===i&&(o=!0);var s=ir(i),u=s.transform;if("static"!==(a=s.position)||u&&"none"!==u)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===n,offsetParent:i||n}}function _e(t,e,r,n){var i,o,a=t.tagName.toLowerCase(),s=t.offsetLeft,u=t.offsetTop;n&&(s-=(o=(e||document.documentElement).getBoundingClientRect()).left,u-=o.top);var c,l=gt(s),f=!l;return f||"svg"===a?c=ze(r).map(function(t){return parseFloat(t)}):(c=ve?Re(t):ze(r).map(function(t){return parseFloat(t)}),f=!0,"g"===a?u=s=0:(s=(i=function(t,e){if(!t.getBBox)return[0,0];var r=t.getBBox(),n=Ae(t.ownerSVGElement),i=r.x-n.x,o=r.y-n.y;return[i,o,e[0]-i,e[1]-o]}(t,c))[0],u=i[1],c[0]=i[2],c[1]=i[3])),{isSVG:l,hasOffset:f,offset:[s,u],origin:c}}function Ge(t,e,r){var n,i,o,a,s,u=t,c=[],l=!1,f=!1,p=3,h=Be(e,e,!0).offsetParent;for(r&&(l=t===e,10<r.length&&(f=!0,p=4),e=t.parentElement);u&&!l;){var d=ir(u),g=u.tagName.toLowerCase(),v=d.position,m="fixed"===v,b=d.transform,y=(s=void 0,6===(o=(a=b)&&"none"!==a?vt(a)?a:(!(s=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(a))||s.length<4?{}:{prefix:s[1],value:s[2],suffix:s[3]}).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0]).length?[o[0],o[2],o[4],o[1],o[3],o[5],0,0,1]:Mt(o)),x=y.length;if(!f&&16===x){f=!0,p=4;for(var E=c.length,S=0;S<E;++S)c[S]=Ct(c[S],3,4)}f&&9===x&&(y=Ct(y,3,4));var M=_e(u,e,d,m),D=M.hasOffset,w=M.isSVG,C=M.origin,P=M.offset,O=P[0],R=P[1];"svg"===g&&i&&c.push(function(t,e){var r=t.clientWidth,n=t.clientHeight,i=Ae(t),o=i.width,a=i.height,s=r/o,u=n/a,c=t.preserveAspectRatio.baseVal,l=c.align,f=c.meetOrSlice,p=[0,0],h=[s,u],d=[0,0];{var g,v,m;1!==l&&(g=(l-2)%3,v=Math.floor((l-2)/3),p[0]=o*g/2,p[1]=a*v/2,m=2===f?Math.max(u,s):Math.min(s,u),h[0]=m,h[1]=m,d[0]=(r-o)/2*g,d[1]=(n-a)/2*v)}var b=Yt(h,e);return b[e-1]=d[0],b[2*e-1]=d[1],Oe(b,e,p)}(u,p),kt(p));var z=Be(u,e),B=z.offsetParent,_=z.isEnd,G=z.isStatic;ve&&D&&!w&&G&&"relative"===v&&(O-=B.offsetLeft,R-=B.offsetTop,l=l||_);var T=0,A=0;if(D&&h!==B&&(T=B.clientLeft,A=B.clientTop),c.push(Oe(y,p,C),Nt(D?[O-u.scrollLeft+T,R-u.scrollTop+A]:[u,C],p)),i=i||y,n=n||C,l||m)break;u=B,l=_}return{offsetContainer:h,matrixes:c,targetMatrix:i=i||kt(p),transformOrigin:n=n||[0,0],is3d:f}}function Te(t,e,r,n,i,o){var a=Ge(t,e,n),s=a.matrixes,u=a.is3d,c=a.targetMatrix,l=a.transformOrigin,f=Ge(a.offsetContainer,r,i),p=f.matrixes,h=f.is3d,d=h||u?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,v=e||document.body,m=n?Ct(n,o,d):kt(d),b=c,y=i?Ct(i,o,d):kt(d),x=n?Ct(n,o,d):kt(d),E=kt(d),S=s.length,M=Be(v,v,!0).offsetParent;p.reverse(),s.reverse(),!u&&h&&(b=Ct(b,3,4),s.forEach(function(t,e){s[e]=Ct(t,3,4)})),u&&!h&&p.forEach(function(t,e){p[e]=Ct(t,3,4)}),i||p.forEach(function(t){y=Ot(y,t,d)}),s.forEach(function(t,e){var r;S-2===e&&(x=m.slice()),S-1===e&&(E=m.slice()),vt(t[d-1])&&(r=function(t,e,r,n,i,o){var a,s=Fe(t),u=s[0],c=s[1],l=e.getBoundingClientRect(),f=t.getBoundingClientRect(),p=f.left-l.left+e.scrollLeft,h=f.top-l.top+e.scrollTop,d=f.width,g=f.height,v=Pt(r,i,o),m=Ne(v,u,c,r),b=m.left,y=m.top,x=m.width,E=m.height,S=Ie(v,n,r),M=_t(S,[b,y]),D=[p+M[0]*d/x,h+M[1]*g/E],w=[0,0],C=0;for(;++C<10;){var P=St(i,r);a=_t(Ie(P,D,r),Ie(P,S,r)),w[0]=a[0],w[1]=a[1];var O=Ne(Pt(r,i,Nt(w,r),o),u,c,r),R=O.left,z=O.top,B=R-p,_=z-h;if(Math.abs(B)<2&&Math.abs(_)<2)break;D[0]-=B,D[1]-=_}return w.map(function(t){return Math.round(t)})}(t[d-1],M,d,t[2*d-1],m,s[e+1]),t[d-1]=r[0],t[2*d-1]=r[1]),m=Ot(m,t,d)});var D=!g&&u,b=b||kt(D?4:3),w=(D?"matrix3d":"matrix")+"("+At(g&&16===b.length?Ct(b,4,3):b)+")";return[y=Et(y,d,d),x,E,m,b,w,l,u||h]}function Ae(t){var e=t.clientWidth,r=t.clientHeight,n=t.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||r}}function Ie(t,e,r){return Gt(t,wt(e,r),r)}function ke(e,t,r,n){return[[0,0],[t,0],[0,r],[t,r]].map(function(t){return Ie(e,t,n)})}function Ye(t){var e=t.map(function(t){return t[0]}),r=t.map(function(t){return t[1]}),n=Math.min.apply(Math,e),i=Math.min.apply(Math,r),o=Math.max.apply(Math,e),a=Math.max.apply(Math,r);return{left:n,top:i,right:o,bottom:a,width:o-n,height:a-i}}function Ne(t,e,r,n){return Ye(ke(t,e,r,n))}function Xe(t,e,r,n){var i=16===t.length?4:3,o=ke(t,r,n,i),a=o[0],s=a[0],u=a[1],c=o[1],l=c[0],f=c[1],p=o[2],h=p[0],d=p[1],g=o[3],v=g[0],m=g[1],b=Ie(t,e,i),y=b[0],x=b[1],E=Math.min(s,l,h,v),S=Math.min(u,f,d,m),M=Math.max(s,l,h,v),D=Math.max(u,f,d,m),y=y-E||0,x=x-S||0,w=[((s=s-E||0)+(l=l-E||0)+(h=h-E||0)+(v=v-E||0))/4,((u=u-S||0)+(f=f-S||0)+(d=d-S||0)+(m=m-S||0))/4],C=Dt(w,[s,u]),P=Dt(w,[l,f]);return[[E,S,M,D],[y,x],[[s,u],[l,f],[h,d],[v,m]],C<P&&P-C<Math.PI||P<C&&P-C<-Math.PI?1:-1]}function We(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function qe(t,e,r){void 0===r&&(r=Dt(t,e));var n,i,o=(n=t,We([(i=e)[0]-n[0],i[1]-n[1]]));return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+r+"rad)",width:o+"px"}}function je(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=e.length;return{transform:"translate("+e.reduce(function(t,e){return t+e[0]},0)/n+"px, "+e.reduce(function(t,e){return t+e[1]},0)/n+"px) rotate("+t+"rad)"}}function Fe(t,e,r,n){void 0===e&&(e=window.getComputedStyle(t)),void 0===n&&(n=r||"border-box"===e.boxSizing);var i=t.offsetWidth,o=t.offsetHeight,a=!gt(i);if((r||n)&&a)return[i,o];if(i=t.clientWidth,o=t.clientHeight,a||i||o)return r||n?[i+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0),o+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)]:[i-(parseFloat(e.paddingLeft)||0)-(parseFloat(e.paddingRight)||0),o-(parseFloat(e.paddingTop)||0)-(parseFloat(e.paddingBottom)||0)];var s=t.getBBox();return[s.width,s.height]}function He(t,e){return Dt(0<e?t[0]:t[1],0<e?t[1]:t[0])}function Le(t,e,r,n,i,o){var a,s,u,c,l,f,p,h=0,d=0,g=0,v=0,m=[0,0],b=[[0,0],[0,0],[0,0],[0,0]],y=Pe(),x=Pe(),E=Pe(),S=Pe(),M=Pe(),D=0,w=0,C=[0,0],P=1,O=1,R=!1,z="",B=[0,0],_=Ve(),G=Ve(),T=Ve(),A=0,I=o?o.beforeMatrix:void 0,k=o?o.rootMatrix:void 0,Y=o?o.is3d?4:3:void 0;return e&&(o?(D=o.width,w=o.height):(l=ir(e),D=e.offsetWidth,w=e.offsetHeight,gt(D)&&(D=(a=Fe(e,l,!0))[0],w=a[1])),y=(s=Te(e,r,i,I,k,Y))[0],E=s[1],x=s[2],S=s[3],M=s[4],z=s[5],C=s[6],R=s[7],h=(c=(u=Xe(S,C,D,w))[0])[0],d=c[1],g=c[2],v=c[3],m=u[1],b=u[2],P=u[3],p=(f=Xe(x,Bt(C,function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],n=0;n<e-1;++n)r[n]=t[(n+1)*e-1];return r[e-1]=0,r}(M,R?4:3)),D,w))[0],B=f[1],O=f[3],B=[B[0]+p[0]-h,B[1]+p[1]-d],_=Ue(e),G=Ue(Be(n,n,!0).offsetParent||document.body,!0),t&&(T=Ue(t)),A=He([b[0],b[1]],P)),{rotation:A,targetClientRect:_,containerClientRect:G,moveableClientRect:T,beforeDirection:O,direction:P,target:e,left:h,top:d,right:g,bottom:v,pos1:b[0],pos2:b[1],pos3:b[2],pos4:b[3],width:D,height:w,rootMatrix:y,beforeMatrix:E,offsetMatrix:x,targetMatrix:M,matrix:S,targetTransform:z,is3d:R,beforeOrigin:B,origin:m,transformOrigin:C}}function Ve(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Ue(t,e){var r=t.getBoundingClientRect(),n=r.left,i=r.width,o=r.top,a=r.bottom,s={left:n,right:r.right,top:o,bottom:a,width:i,height:r.height};return e&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight),s}function Ke(t){if(t){var e=t.getAttribute("data-direction");if(e){var r=[0,0];return-1<e.indexOf("w")&&(r[0]=-1),-1<e.indexOf("e")&&(r[0]=1),-1<e.indexOf("n")&&(r[1]=-1),-1<e.indexOf("s")&&(r[1]=1),r}}}function $e(t,e){return[Bt(e,t[0]),Bt(e,t[1]),Bt(e,t[2]),Bt(e,t[3])]}function Ze(t){var e=t.left,r=t.top;return $e([t.pos1,t.pos2,t.pos3,t.pos4],[e,r])}function Je(t,e){return e?Math.round(t/e)*e:t}function Qe(r,n){return r.forEach(function(t,e){r[e]=Je(r[e],n)}),r}function tr(t,e){t[e]&&(t[e].unset(),t[e]=null)}function er(t,e,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}function rr(t,e,r){var n=e.datas;return n.datas||(n.datas={}),pe({},r,{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,datas:n.datas})}function nr(t,e,r,n){return n&&Mr.prototype.triggerEvent.call(t,e,r),t.triggerEvent(e,r)}function ir(t,e){return window.getComputedStyle(t,e)}function or(t,r,n){var i={},o={};return t.filter(function(e){var t=e.name;if(i[t]||!r.some(function(t){return e[t]}))return!1;if(!n&&e.ableGroup){if(o[e.ableGroup])return!1;o[e.ableGroup]=!0}return i[t]=!0})}function ar(t,e,r){return t*(e?r:1/r)}function sr(t,e,r){return t*(e?1/r:r)}function ur(t,e){return t===e||null==t&&null==e}function cr(o,a){var s=[],u=[];return o.forEach(function(t,e){var r=a(t,e,o),n=u.indexOf(r),i=s[n]||[];-1===n&&(u.push(r),s.push(i)),i.push(t)}),s}function lr(t){return t.reduce(function(t,e){return t.concat(e)},[])}function fr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return Math.abs(e)-Math.abs(t)}),t[0]}function pr(t,e,r){return Gt(St(t,r),wt(e,r),r)}function hr(t,e){var r=t.is3d?4:3,n=pr(t.rootMatrix,[e.distX,e.distY],r);return e.distX=n[0],e.distY=n[1],e}function dr(t,e,r,n,i){return _t(Ie(t,Bt(r,e),i),n)}function gr(t,r,n){return[[r[0],r[0]*t[1]/t[0]],[r[1]*t[0]/t[1],r[1]]].filter(function(t){return t.every(function(t,e){return n?t<=r[e]:t>=r[e]})})[0]||t}function vr(i,t,e,r,n,o,a){var s="Start"===n;if(s&&-1<r.indexOf("Control")&&!o.isRequest&&i.areaElement===o.inputEvent.target)return!1;var u=""+e+r+n,c=""+e+r+"Condition",l="End"===n,f=-1<n.indexOf("After");s&&i.updateRect(n,!0,!1),""!==n||f||hr(i.state,o);var p=-1<r.indexOf("Group"),h=i[t];if(!h.length)return!1;var d,g,v,m,b,y,x,E,S,M,D,w,C,P,O,R=h.filter(function(t){return t[u]}),z=o.datas,B=z.render||(z.render={}),_=pe({},o,{datas:B,originalDatas:z}),G=R.filter(function(t){var e=s&&t[c],r=t.name,n=z[r]||(z[r]={});return!(e&&!e(o,i))&&t[u](i,pe({},o,{datas:n,originalDatas:z}))}),T=G.length;if(s){if(R.length&&!T)return i.state.dragger=null,i.moveables&&i.moveables.forEach(function(t){t.state.dragger=null}),!1;w=p,P=rr(D=i,C=_,{isPinch:!!C.isPinch}),O=w?"Group":"",w&&(P.targets=D.props.targets),nr(D,"onRender"+O+"Start",P)}else l?(x=p,S=rr(y=i,E=_,{isPinch:!!E.sPinch,isDrag:E.isDrag}),M=x?"Group":"",x&&(S.targets=y.props.targets),nr(y,"onRender"+M+"End",S)):T&&(g=p,m=rr(d=i,v=_,{isPinch:!!v.isPinch}),b=g?"Group":"",g&&(m.targets=d.props.targets),nr(d,"onRender"+b,m));if(l&&(i.state.dragger=null),i.isUnmounted)return!1;!s&&T&&(G.some(function(t){return t.updateRect})&&!p?i.updateRect(n,!1,!1):i.updateRect(n,!0,!1)),(!s&&T||l&&!T)&&!a&&i.forceUpdate(),s||l||f||!T||vr(i,t,e,r,n+"After",o)}function mr(r,t,e){var n=r.controlBox.getElement(),i=[];i.push(n),r.props.dragArea||i.push(t);function o(t){var e=t.inputEvent.target;return e===r.areaElement||!r.isMoveableElement(e)||-1<e.className.indexOf("moveable-area")||-1<e.className.indexOf("moveable-padding")}return br(r,i,"targetAbles",e,{dragstart:o,pinchstart:o})}function br(i,t,o,a,s){void 0===s&&(s={});var e=i.props,r=e.pinchOutside,n=e.pinchThreshold,u={container:window,pinchThreshold:n,pinchOutside:r};return["drag","pinch"].forEach(function(n){["Start","","End"].forEach(function(e){var r=""+n+e.toLowerCase();u[r]=function(t){return!(s[r]&&!s[r](t))&&vr(i,o,n,a,e,t)}})}),new re(t,u)}var yr,xr,Er=(yr="div",xr=qt(be),function(t){function e(){this.constructor=r}var r,n;function i(){return null!==t&&t.apply(this,arguments)||this}return jt(r=i,n=t),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e),i.prototype.render=function(){var t=this.props,e=t.className,r=void 0===e?"":e,n=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}(t,["className"]);return I(yr,Ft({ref:m(this,"element"),className:r+" "+xr.className},n))},i.prototype.componentDidMount=function(){this.injectResult=xr.inject(this.element)},i.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},i.prototype.getElement=function(){return this.element},i}(H));function Sr(t,e,r,n){var i=Dt(e,r),o=t?Je(i/Math.PI*180,15)%180:-1;return I("div",{key:"line"+n,className:Ce("line","direction",t),"data-rotation":o,"data-direction":t,style:qe(e,r,i)})}var Mr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={container:null,target:null,beforeMatrix:Pe(),matrix:Pe(),targetMatrix:Pe(),offsetMatrix:Pe(),targetTransform:"",is3d:!1,left:0,top:0,width:0,height:0,transformOrigin:[0,0],direction:1,beforeDirection:1,beforeOrigin:[0,0],origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],renderPoses:[[0,0],[0,0],[0,0],[0,0]],targetClientRect:Ve(),containerClientRect:Ve(),moveableClientRect:Ve(),rotation:0},t.targetAbles=[],t.controlAbles=[],t.isUnmounted=!1,t}fe(t,e);var r=t.prototype;return r.render=function(){var t=this.props,e=this.state,r=t.edge,n=t.parentPosition,i=t.className,o=t.target,a=t.zoom;this.checkUpdate(),this.updateRenderPoses();var s=n||{left:0,top:0},u=s.left,c=s.top,l=e.left,f=e.top,p=e.target,h=e.direction,d=e.renderPoses,g=t.targets,v=(g&&g.length||o)&&p;return I(Er,{ref:m(this,"controlBox"),className:Ce("control-box",-1===h?"reverse":"")+" "+i,style:{position:"absolute",display:v?"block":"none",transform:"translate("+(l-u)+"px, "+(f-c)+"px) translateZ(50px)","--zoom":a,"--zoompx":a+"px"}},this.renderAbles(),Sr(r?"n":"",d[0],d[1],0),Sr(r?"e":"",d[1],d[3],1),Sr(r?"w":"",d[0],d[2],2),Sr(r?"s":"",d[2],d[3],3))},r.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,r=t.container;this.updateEvent(t),r||e||this.updateRect("End",!1,!0)},r.componentDidUpdate=function(t){this.updateEvent(t)},r.componentWillUnmount=function(){this.isUnmounted=!0,tr(this,"targetDragger"),tr(this,"controlDragger")},r.getContainer=function(){var t=this.props,e=t.parentMoveable;return t.container||e&&e.getContainer()||this.controlBox.getElement().parentElement},r.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(me)},r.dragStart=function(t){return this.targetDragger&&this.targetDragger.onDragStart(t),this},r.hitTest=function(t){var e,r;r=t instanceof Element?{left:(e=t.getBoundingClientRect()).left,top:e.top,width:e.width,height:e.height}:pe({width:0,height:0},t);var n=this.state.targetClientRect,i=n.left,o=n.top,a=n.width,s=n.height,u=r.left,c=r.top,l=u+r.width,f=c+r.height,p=i+a,h=o+s,d=Math.max(i,u),g=Math.min(p,l),v=Math.max(o,c),m=Math.min(h,f);if(g<d||m<v)return 0;var b=(Math.min(p,l)-Math.max(u,i))*(Math.min(h,f)-Math.max(o,c));return Math.min(100,(g-d)*(m-v)/b*100)},r.isInside=function(t,e){var r=this.state,n=r.pos1,i=r.pos2,o=r.pos3,a=r.pos4,s=r.target,u=r.targetClientRect;if(!s)return!1;var c,l,f,p,h,d,g,v=u.left,m=u.top;return p=o,h=a,d=[er(c=[t-v,e-m],l=n,f=i),er(c,f,p),er(c,p,l)],g=[er(c,f,p),er(c,p,h),er(c,h,f)],!!(d.every(function(t){return 0<=t})||d.every(function(t){return t<=0})||g.every(function(t){return 0<=t})||g.every(function(t){return t<=0}))},r.updateRect=function(t,e,r){void 0===r&&(r=!0);var n=this.props,i=n.parentMoveable,o=this.state,a=o.target||this.props.target,s=this.getContainer(),u=i?i.props.rootContainer:n.rootContainer;this.updateState(Le(this.controlBox&&this.controlBox.getElement(),a,s,s,u||s,e?o:void 0),!i&&r)},r.updateEvent=function(t){var e=this.controlBox.getElement(),r=this.targetAbles.length,n=this.controlAbles.length,i=this.props,o=i.dragTarget||i.target,a=t.dragTarget||t.target,s=i.dragArea,u=t.dragArea,c=!s&&a!==o,l=!r&&this.targetDragger||c||u!==s;l&&(tr(this,"targetDragger"),this.updateState({dragger:null})),n||tr(this,"controlDragger"),o&&r&&!this.targetDragger&&(this.targetDragger=mr(this,o,"")),!this.controlDragger&&n&&(this.controlDragger=br(this,e,"controlAbles","Control")),l&&this.unsetAbles()},r.isDragging=function(){return!!this.targetDragger&&this.targetDragger.isFlag()||!!this.controlDragger&&this.controlDragger.isFlag()},r.updateTarget=function(t){this.updateRect(t,!0)},r.getRect=function(){var t=this.state,e=Ze(this.state),r=e[0],n=e[1],i=e[2],o=e[3],a=Ye(e),s=t.width,u=t.height,c=a.width,l=a.height,f=a.left,p=a.top,h=[t.left,t.top],d=Bt(h,t.origin);return{width:c,height:l,left:f,top:p,pos1:r,pos2:n,pos3:i,pos4:o,offsetWidth:s,offsetHeight:u,beforeOrigin:Bt(h,t.beforeOrigin),origin:d}},r.request=function(e,t,r){void 0===t&&(t={});var n=this.props,i=n.ables,o=n.groupable,a=i.filter(function(t){return t.name===e})[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=a.request(this),c=u.isControl?"controlAbles":"targetAbles",l=(o?"Group":"")+(u.isControl?"Control":""),f={request:function(t){return vr(s,c,"drag",l,"",pe({},u.request(t),{isRequest:!0}),r),this},requestEnd:function(){return vr(s,c,"drag",l,"End",pe({},u.requestEnd(),{isRequest:!0})),this}};return vr(s,c,"drag",l,"Start",pe({},u.requestStart(t),{isRequest:!0}),r),t.isInstant?f.request(t).requestEnd():f},r.updateRenderPoses=function(){var t=this.state,e=this.props,r=t.beforeOrigin,n=t.transformOrigin,i=t.matrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,c=t.pos4,l=t.left,f=t.top,p=e.padding||{},h=p.left,d=void 0===h?0:h,g=p.top,v=void 0===g?0:g,m=p.bottom,b=void 0===m?0:m,y=p.right,x=void 0===y?0:y,E=o?4:3,S=e.groupable?r:Bt(r,[l,f]);t.renderPoses=[Bt(a,dr(i,[-d,-v],n,S,E)),Bt(s,dr(i,[x,-v],n,S,E)),Bt(u,dr(i,[-d,b],n,S,E)),Bt(c,dr(i,[x,b],n,S,E))]},r.checkUpdate=function(){var t=this.props,e=t.target,r=t.container,n=t.parentMoveable,i=this.state,o=i.target,a=i.container;(o||e)&&(this.updateAbles(),ur(o,e)&&ur(a,r)||(this.updateState({target:e,container:r}),n||!r&&!this.controlBox||this.updateRect("End",!1,!1)))},r.triggerEvent=function(t,e){var r=this.props[t];return r&&r(e)},r.unsetAbles=function(){var e=this;this.targetAbles.filter(function(t){return!!t.unset&&(t.unset(e),!0)}).length&&this.forceUpdate()},r.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var r=this.props,n=r.triggerAblesSimultaneously,i=t.filter(function(t){return t&&r[t.name]}),o="drag"+e+"ControlStart",a=or(i,["drag"+e+"Start","pinch"+e+"Start"],n),s=or(i,[o],n);this.targetAbles=a,this.controlAbles=s},r.updateState=function(t,e){if(e)this.setState(t);else{var r=this.state;for(var n in t)r[n]=t[n]}},r.renderAbles=function(){var i,o,a,s,e=this,r=this.props,t=r.ables,n=r.triggerAblesSimultaneously,u=t.filter(function(t){return t&&r[t.name]}),c={createElement:I};return i=lr(or(u,["render"],n).map(function(t){return(0,t.render)(e,c)||[]})).filter(function(t){return t}),o=function(t){return t.key},a=[],s={},i.forEach(function(t,e){var r=o(t,e,i),n=s[r];n||(n=[],s[r]=n,a.push(n)),n.push(t)}),a.map(function(t){return t[0]})},t.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0},t}(L);function Dr(t){return Dt([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}var wr={name:"pinchable",updateRect:!0,props:{pinchable:Boolean,pinchOutside:Boolean,pinchThreshold:Number},pinchStart:function(r,n){var i=n.datas,t=n.touches,e=n.targets,o=r.props,a=o.pinchable,s=o.ables;if(!a)return!1;var u="onPinch"+(e?"Group":"")+"Start",c="drag"+(e?"Group":"")+"ControlStart",l=(!0===a?r.controlAbles:s.filter(function(t){return-1<a.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[c]}),f=rr(r,n,{});e&&(f.targets=e);var p=nr(r,u,f);i.isPinch=!1!==p,i.ables=l;var h=i.isPinch;if(!h)return!1;var d=Dr(t);return l.forEach(function(t){var e;i[t.name+"Datas"]={},t[c]&&(e=pe({},n,{datas:i[t.name+"Datas"],parentRotate:d,isPinch:!0}),t[c](r,e))}),r.state.snapRenderInfo={request:n.isRequest,direction:[0,0]},h},pinch:function(e,r){var n=r.datas,t=r.scale,i=r.distance,o=r.touches,a=r.inputEvent,s=r.targets;if(n.isPinch){var u=Dr(o),c=i*(1-1/t),l=rr(e,r,{});s&&(l.targets=s),nr(e,"onPinch"+(s?"Group":""),l);var f=n.ables,p="drag"+(s?"Group":"")+"Control";return f.forEach(function(t){t[p]&&t[p](e,pe({},r,{datas:n[t.name+"Datas"],inputEvent:a,parentDistance:c,parentRotate:u,isPinch:!0}))}),l}},pinchEnd:function(e,r){var n=r.datas,i=r.isPinch,o=r.inputEvent,t=r.targets;if(n.isPinch){var a="onPinch"+(t?"Group":"")+"End",s=rr(e,r,{isDrag:i});t&&(s.targets=t),nr(e,a,s);var u=n.ables,c="drag"+(t?"Group":"")+"ControlEnd";return u.forEach(function(t){t[c]&&t[c](e,pe({},r,{isDrag:i,datas:n[t.name+"Datas"],inputEvent:o,isPinch:!0}))}),i}},pinchGroupStart:function(t,e){return this.pinchStart(t,pe({},e,{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,pe({},e,{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,pe({},e,{targets:t.props.targets}))}};function Cr(t,e,r,n,i){var o=t.dragger.move(e,r),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return pe({},i?hr(t,o):o,{isDrag:!0,isPinch:!!n,parentEvent:!0,datas:s})}var Pr=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var e=t.prototype;return e.dragStart=function(t,e){return this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},pe({},this.move(t,e),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var r,n;return this.isFlag?(r=this.prevX+t[0],n=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],n=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=r,clientY:this.prevY=n,inputEvent:e,isDrag:this.isDrag,distX:r-this.startX,distY:n-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentDragger:this}},t}();function Or(t,i,o,a,e,s){var u=!!o.match(/Start$/g),c=!!o.match(/End$/g),l=e.inputEvent,f=e.isPinch,p=e.datas,r=t.moveables.map(function(t,e){var r={},r=u?(new Pr).dragStart(a,l):(t.state.dragger||(t.state.dragger=p.childDraggers[e]),Cr(t.state,a,l,f,s)),n=i[o](t,pe({},r,{parentFlag:!0}));return c&&(t.state.dragger=null),n});return u&&(p.childDraggers=t.moveables.map(function(t){return t.state.dragger})),r}function Rr(t,o,a,e,s,u){var r=o.name,c=e[r]||(e[r]=[]),l=!!a.match(/End$/g);return t.moveables.map(function(t,e){var r=c[e]||(c[e]={}),n=typeof s===pt?s(t,r):s,i=o[a](t,pe({},n,{datas:r,parentFlag:!0}));return i&&u&&u(t,r,i,e),l&&(t.state.dragger=null),i})}function zr(t,e){var r=e.datas,n=t.state,i=n.matrix,o=n.beforeMatrix,a=n.is3d,s=n.left,u=n.top,c=n.origin,l=n.offsetMatrix,f=n.targetMatrix,p=n.transformOrigin,h=a?4:3;r.is3d=a,r.matrix=i,r.targetMatrix=f,r.beforeMatrix=o,r.offsetMatrix=l,r.transformOrigin=p,r.inverseMatrix=St(i,h),r.inverseBeforeMatrix=St(o,h),r.absoluteOrigin=wt(Bt([s,u],c),h),r.startDragBeforeDist=Gt(r.inverseBeforeMatrix,r.absoluteOrigin,h),r.startDragDist=Gt(r.inverseMatrix,r.absoluteOrigin,h)}function Br(t,e){var r=t.datas,n=t.distX,i=t.distY,o=r.inverseBeforeMatrix,a=r.inverseMatrix,s=r.is3d,u=r.startDragBeforeDist,c=r.startDragDist,l=s?4:3;return _t(Gt(e?o:a,Bt(r.absoluteOrigin,[n,i]),l),e?u:c)}function _r(t){var e=[];return 0<=t[1]&&(0<=t[0]&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(0<=t[0]&&e.push(1),t[0]<=0&&e.push(0)),e}function Gr(e,t){return _r(t).map(function(t){return e[t]})}function Tr(t,e){var r=Gr(t,e);return[zt.apply(void 0,r.map(function(t){return t[0]})),zt.apply(void 0,r.map(function(t){return t[1]}))]}function Ar(t,e){var r=t[0],n=t[1],i=t[2];return Tr([t[3],i,n,r],e)}function Ir(t,e,r,n,i,o){var a=Ar(ke(e,r,n,i),o);return[t[0]-a[0],t[1]-a[1]]}function kr(t,e,r,n){return Ot(t,Oe(e,n,r),n)}function Yr(t,e){var r=t.transformOrigin,n=t.offsetMatrix,i=t.is3d?4:3;return kr(n,Ot(t.targetMatrix,Yt(e,i),i),r,i)}function Nr(t,e,r,n,i,o){var a,s,u,c,l,f,p=t.props.groupable,h=t.state,d=h.transformOrigin,g=h.targetMatrix,v=h.offsetMatrix,m=h.is3d,b=h.width,y=h.height,x=h.left,E=h.top,S=m?4:3,M=p?x:0,D=p?E:0;return _t(Ir(i,kr(v,g,(s=e,u=r,void 0===(c=b)&&(c=s),void 0===(l=y)&&(l=u),void 0===(f=d)&&(f=[0,0]),(a=o)?a.map(function(t,e){var r=bt(t),n=r.value,i=r.unit,o=e?l:c,a=e?u:s;return"%"===t||isNaN(n)?a*(o?f[e]/o:0):"%"!==i?n:a*n/100}):f),S),e,r,S,n),[M,D])}function Xr(t,e){return r=Ze(t.state),n=e,Ar([r[0],r[1],r[2],r[3]],n);var r,n}function Wr(t){return t.isRequest?t.parentDirection:xt(t.inputEvent.target,Ce("direction"))}function qr(t,e,p,h,r,n){var d=r[0],g=r[1],i=n[0],o=n[1],v=[],a=h?0:1,m="vertical"===e?"horizontal":"vertical",b=cr(t.filter(function(t){return t.type===e}),function(t){return t.element}).map(function(t){return t[0]}).filter(function(t){var e=t.pos,r=t.sizes;return e[a]<=o&&i<=e[a]+r[a]});return b.forEach(function(t){var l=t.pos[h],f=l+t.sizes[h];b.forEach(function(t){var e,r=t.pos,n=t.sizes,i=t.element,o=r[h],a=o+n[h],s=0,u=0,c=!0;if(f<=o)d<(s=a-(u=f-o))-p&&(c=!1);else{if(!(a<=l))return;(s=o-(u=l-a))+p<g&&(c=!1)}c&&v.push({pos:"vertical"==m?[s,r[1]]:[r[0],s],element:i,sizes:n,size:0,type:m,gap:u,gapGuidelines:b}),f<=d&&g<=o&&(0<=Je(d-((e=(o+f-(g-d))/2)-p),.1)&&v.push({pos:"vertical"==m?[e,r[1]]:[r[0],e],element:i,sizes:n,size:0,type:m,gap:f-d,gapGuidelines:b}))})}),v}function jr(t,e,r,n,i){var o,a,s,u,c,l,f,p,h,d,g,v,m,b,y,x,E,S,M,D,w,C,P,O,R=(p=(o=t).state,h=p.guidelines,d=p.containerClientRect,g=d.scrollHeight,v=d.scrollWidth,m=o.props,b=m.snapHorizontal,y=void 0===b||b,x=m.snapVertical,E=void 0===x||x,S=m.snapGap,M=void 0===S||S,D=m.verticalGuidelines,w=m.horizontalGuidelines,C=m.snapThreshold,P=void 0===C?5:C,O=h.slice(),M&&(s=(a=Ye(Ze(o.state))).top,u=a.left,c=a.bottom,l=a.right,f=h.filter(function(t){return t.element}),O.push.apply(O,qr(f,"horizontal",P,0,[u,l],[s,c]).concat(qr(f,"vertical",P,1,[s,c],[u,l])))),y&&w&&w.forEach(function(t){O.push({type:"horizontal",pos:[0,Je(t,.1)],size:v})}),E&&D&&D.forEach(function(t){O.push({type:"vertical",pos:[Je(t,.1),0],size:g})}),O),z=t.props,B=z.snapElement,_=void 0===B||B,G=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length-1,n=0;n<r;++n){var i=t[n];if(!gt(i))return i}return t[r]}(i,z.snapThreshold,5);return{vertical:Hr(R,"vertical",e,G,n,_),horizontal:Hr(R,"horizontal",r,G,n,_)}}function Fr(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],n=r.guidelineInfos[0],i=n.offset,o=n.dist,a=n.guideline;return{isSnap:e,offset:i,dist:o,pos:r.pos,guideline:a}}function Hr(e,a,t,s,u,c){if(!e||!e.length)return{isSnap:!1,posInfos:[]};var i="vertical"===a?0:1,r=t.map(function(n){var t=e.map(function(t){var e=t.pos,r=n-e[i];return{offset:r,dist:Math.abs(r),guideline:t}}).filter(function(t){var e=t.guideline,r=t.dist,n=e.type,i=e.center,o=e.element;return!(!c&&o||!u&&i||n!==a||s<r)}).sort(function(t,e){return t.dist-e.dist});return{pos:n,guidelineInfos:t}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist});return{isSnap:0<r.length,posInfos:r}}function Lr(t,u){return t.slice().sort(function(t,e){var r=t.sign[u],n=e.sign[u],i=t.offset[u],o=e.offset[u],a=Math.abs(i),s=Math.abs(o);return r?n?t.isBound&&e.isBound?s-a:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?a-s:t.isSnap?-1:e.isSnap||a<xe?1:s<xe?-1:a-s:-1:1})[0]}function Vr(t,e){var r=zt(e[0][0],e[1][0]),n=zt(e[0][1],e[1][1]);return{vertical:r<=t[0],horizontal:n<=t[1]}}function Ur(t,e){var r,n,i=e[0],o=e[1],a=o[0]-i[0],s=o[1]-i[1];return Math.abs(a)<xe&&(a=0),Math.abs(s)<xe&&(s=0),n=a?(r=s?s/a*(t[0]-i[0])+i[1]:i[1],t[1]):(r=i[0],t[0]),r-n}function Kr(t,r,n){void 0===n&&(n=xe);var i=Ur(t[0],r)<=0;return t.slice(1).every(function(t){var e=Ur(t,r);return e<=0==i||Math.abs(e)<=n})}function $r(t,e,r,n,i){return void 0===i&&(i=0),n&&e-i<=t||!n&&t<=r+i?{isBound:!0,offset:n?e-t:r-t}:{isBound:!1,offset:0}}function Zr(t,e,r,n){var i=t[0],o=t[1],a=e[0],s=e[1],u=o[1]-i[1],c=o[0]-i[0],l=s[1]-a[1];if(s[0]-a[0]){if(!l&&u){var f=u/c;return $r(c?(a[1]-i[1])/f+i[0]:i[0],a[0],s[0],r,n)}}else if(c)return $r(u?u/c*(a[0]-i[0])+i[1]:i[1],a[1],s[1],r,n);return{isBound:!1,offset:0}}function Jr(l,t,f,p){return t.map(function(t){var r=t[0],e=t[1],n=t[2],i=function(t,e,r){var n=t.props.innerBounds;if(!n)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=n.left,o=n.top,a=n.width,s=n.height,u=[[i,o],[i,o+s]],c=[[i,o],[i+a,o]],l=[[i+a,o],[i+a,o+s]],f=[[i,o+s],[i+a,o+s]],p=Vr(r,e),h=p.horizontal,d=p.vertical;if(Kr([r,[i,o],[i+a,o],[i,o+s],[i+a,o+s]],e))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Zr(e,c,d),v=Zr(e,f,d),m=Zr(e,u,h),b=Zr(e,l,h),y=g.isBound&&v.isBound,x=g.isBound||v.isBound,E=m.isBound&&b.isBound,S=m.isBound||b.isBound,M=fr(g.offset,v.offset),D=fr(m.offset,b.offset),w=[0,0],C=!1;return{isAllBound:Math.abs(D)<Math.abs(M)?(w=[M,0],C=x,y):(w=[0,D],C=S,E),isVerticalBound:x,isHorizontalBound:S,isBound:C,offset:w}}(l,[e,n],f),o=i.isBound,a=i.offset,s=i.isVerticalBound,u=i.isHorizontalBound,c=Br({datas:p,distX:a[0],distY:a[1]}).map(function(t,e){return t*(r[e]?2/r[e]:0)});return{sign:r,isBound:o,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:c}})}function Qr(t,e,r){var n,i,o,a,s,u,c,l,f,p,h,d,g,v=Jr(t,tn(e,[0,0],!1).map(function(t){var e=t[0],r=t[1],n=t[2];return[e.map(function(t){return 2*Math.abs(t)}),r,n]}),Tr(e,[0,0]),r),m=Lr(v,0),b=Lr(v,1),y=0,x=0,E=m.isVerticalBound||b.isVerticalBound,S=m.isHorizontalBound||b.isHorizontalBound;return(E||S)&&(i={datas:r,distX:-m.offset[0],distY:-b.offset[1]},a=i.datas,s=i.distX,u=i.distY,c=a.beforeMatrix,l=a.matrix,f=a.is3d,p=a.startDragBeforeDist,h=a.startDragDist,d=a.absoluteOrigin,g=f?4:3,y=(n=_t(Gt(o?c:l,Bt(o?p:h,[s,u]),g),d))[0],x=n[1]),{vertical:{isBound:E,offset:y},horizontal:{isBound:S,offset:x}}}function tn(i,t,e){return n=e,o=[],a=(r=t)[0],s=r[1],a&&s?o.push([[0,2*s],r,[-a,s]],[[2*a,0],r,[a,-s]]):a?(o.push([[2*a,0],[a,1],[a,-1]]),n&&o.push([[0,-1],[a,-1],[-a,-1]],[[0,1],[a,1],[-a,1]])):s?(o.push([[0,2*s],[1,s],[-1,s]]),n&&o.push([[-1,0],[-1,s],[-1,-s]],[[1,0],[1,s],[1,-s]])):o.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),o.map(function(t){var e=t[0],r=t[1],n=t[2];return[e,Tr(i,r),Tr(i,n)]});var r,n,o,a,s}function en(t,e,r,n){var i=n?t.map(function(t){return Tt(t,n)}):t,o=[r].concat(e);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t,e){return!Kr(o,t)})}function rn(t,e,r,n,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,c=o.width,l=o.height,f=s-n[0],p=s+c-n[0],h=u-n[1],d=u+l-n[1],g=[[f,h],[p,h],[f,d],[p,d]],v=Tr(r,[0,0]);if(!en(r,g,v,0))return[];var m=[],b=g.map(function(t){return[We(t),Dt([0,0],t)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(t){var i=Dt([0,0],function(t){var e=t[0],r=t[1],n=r[0]-e[0],i=r[1]-e[1];if(!n)return[e[0],0];if(!i)return[0,e[1]];var o=i/n,a=-o*e[0]+e[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),o=function(t){var e=t[0],r=t[1],n=r[0]-e[0],i=r[1]-e[1];if(!n)return Math.abs(e[0]);if(!i)return Math.abs(e[1]);var o=i/n;return Math.abs((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}(t);m.push.apply(m,b.filter(function(t){var e=t[0];return e&&o<=e}).map(function(t){var e=t[0],r=t[1],n=Math.acos(e?o/e:0);return[a+(r+n)-i,a+(r-n)-i]}).reduce(function(t,e){return t.push.apply(t,e),t},[]).filter(function(t){return!en(e,g,v,t)}).map(function(t){return Je(180*t/Math.PI,xe)}))}),m}function nn(t,e,r){var n=t.props.bounds||{},i=n.left,o=n.top,a=n.right,s=n.bottom,u={left:void 0===i?-1/0:i,top:void 0===o?-1/0:o,right:void 0===a?1/0:a,bottom:void 0===s?1/0:s};return{vertical:on(u,e,!0),horizontal:on(u,r,!1)}}function on(t,e,r){var n=t[r?"left":"top"],i=t[r?"right":"bottom"],o=Math.min.apply(Math,e),a=Math.max.apply(Math,e);return o<n+1?{isBound:!0,offset:o-n,pos:n}:i-1<a?{isBound:!0,offset:a-i,pos:i}:{isBound:!1,offset:0,pos:0}}function an(t,e,r){return(r?t.map(function(t){return Tt(t,r)}):t).some(function(t){return t[0]<e.left&&.1<Math.abs(t[0]-e.left)||t[0]>e.right&&.1<Math.abs(t[0]-e.right)||t[1]<e.top&&.1<Math.abs(t[1]-e.top)||t[1]>e.bottom&&.1<Math.abs(t[1]-e.bottom)})}function sn(t,c,r,e,n){var i=t.props.bounds,l=n*Math.PI/180;if(!i)return[];var o=i.left,a=void 0===o?-1/0:o,s=i.top,u=void 0===s?-1/0:s,f=i.right,p=void 0===f?1/0:f,h=i.bottom,d=void 0===h?1/0:h,g=a-e[0],v=p-e[0],m=u-e[1],b=d-e[1],y={left:g,top:m,right:v,bottom:b};if(!an(r,y,0))return[];var x=[];return[[g,0],[v,0],[m,1],[b,1]].forEach(function(t,e){var s=t[0],u=t[1];r.forEach(function(t){var r,e,n,i,o,a=Dt([0,0],t);x.push.apply(x,(e=s,n=u,i=We(r=t),[o=Math.sqrt(i*i-e*e)||0,-o].sort(function(t,e){return Math.abs(t-r[n?0:1])-Math.abs(e-r[n?0:1])}).map(function(t){return Dt([0,0],n?[t,e]:[e,t])}).map(function(t){return l+t-a}).filter(function(t){return!an(c,y,t)}).map(function(t){return Je(180*t/Math.PI,xe)})))})}),x}function un(t,e,r){var n=Ie(t,[e.clientLeft,e.clientTop],r);return[e.left+n[0],e.top+n[1]]}function cn(t){var e,r,n,i,o,a,s,u,g,c,l,f,p,v,m,h,b,y,d,x,E,S,M,D=t.state;D.guidelines&&D.guidelines.length||(n=void 0===(r=(e=t.props).horizontalGuidelines)?[]:r,o=void 0===(i=e.verticalGuidelines)?[]:i,s=void 0===(a=e.elementGuidelines)?[]:a,u=e.bounds,g=e.snapCenter,(u||n.length||o.length||s.length)&&(c=D.containerClientRect,f=(l=D.targetClientRect).top,p=l.left,v=D.rootMatrix,m=D.is3d?4:3,h=un(v,c,m),b=h[0],y=h[1],d=Ze(D),x=_t([Math.min.apply(Math,d.map(function(t){return t[0]})),Math.min.apply(Math,d.map(function(t){return t[1]}))],pr(v,[p-b,f-y],m)).map(function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e}),E=x[0],S=x[1],M=[],s.forEach(function(t){var e=t.getBoundingClientRect(),r=e.left-b,n=e.top-y,i=n+e.height,o=r+e.width,a=pr(v,[r,n],m),s=a[0],u=a[1],c=pr(v,[o,i],m),l=c[0],f=c[1],p=l-s,h=f-u,d=[p,h];M.push({type:"vertical",element:t,pos:[Je(s+E,.1),u],size:h,sizes:d}),M.push({type:"vertical",element:t,pos:[Je(l+E,.1),u],size:h,sizes:d}),M.push({type:"horizontal",element:t,pos:[s,Je(u+S,.1)],size:p,sizes:d}),M.push({type:"horizontal",element:t,pos:[s,Je(f+S,.1)],size:p,sizes:d}),g&&(M.push({type:"vertical",element:t,pos:[Je((s+l)/2+E,.1),u],size:h,sizes:d,center:!0}),M.push({type:"horizontal",element:t,pos:[s,Je((u+f)/2+S,.1)],size:p,sizes:d,center:!0}))}),D.guidelines=M,D.enableSnap=!0))}function ln(t,e){var r=t.props,n=r.snappable,i=r.bounds,o=r.verticalGuidelines,a=r.horizontalGuidelines,s=t.state,u=s.guidelines,c=s.enableSnap;return n&&c&&!(e&&!0!==n&&n.indexOf(e)<0)&&!!(i||u&&u.length||o&&o.length||a&&a.length)}function fn(t,e,r,n,i){var o=function(t,e,r,n){var i=e[0]-t[0],o=e[1]-t[1];Math.abs(i)<xe&&(i=0);Math.abs(o)<xe&&(o=0);if(!i)return n?[0,0]:[0,r];if(!o)return n?[r,0]:[0,0];var a=o/i,s=t[1]-a*t[0];{if(n){var u=a*(e[0]+r)+s;return[r,u-e[1]]}return[(e[1]+r-s)/a-e[0],r]}}(t,e,r,n);if(!o)return[0,0];var a=Br({datas:i,distX:o[0],distY:o[1]});return[a[0],a[1]]}function pn(t,e,r,n,i,o){var a=ke(t,e,r,o?4:3);return $e(a,_t(n,Ar(a,i)))}function hn(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function dn(t,e){return t.isBound?t.offset:e.isSnap?Fr(e).offset:0}function gn(t,e,r,n){var i=function(t,e,r){var n=t.props.bounds||{},i=n.left,o=void 0===i?-1/0:i,a=n.top,s=void 0===a?-1/0:a,u=n.right,c=void 0===u?1/0:u,l=n.bottom,f=void 0===l?1/0:l,p=r[0],h=r[1],d=_t(r,e),g=d[0],v=d[1];Math.abs(g)<xe&&(g=0),Math.abs(v)<xe&&(v=0);var m,b,y,x,E,S=0<v,M=0<g,D={isBound:!1,offset:0,pos:0},w={isBound:!1,offset:0,pos:0};return 0===g&&0===v||(0===g?S?f<h&&(w.pos=f,w.offset=h-f):h<s&&(w.pos=s,w.offset=h-s):0===v?M?c<p&&(D.pos=c,D.offset=p-c):p<o&&(D.pos=o,D.offset=p-o):(m=v/g,b=r[1]-m*p,x=y=0,E=!1,M&&c<=p?(y=m*c+b,x=c,E=!0):!M&&p<=o&&(y=m*o+b,x=o,E=!0),E&&(y<s||f<y)&&(E=!1),E||(S&&f<=h?(x=((y=f)-b)/m,E=!0):!S&&h<=s&&(x=((y=s)-b)/m,E=!0)),E&&(D.isBound=!0,D.pos=x,D.offset=p-x,w.isBound=!0,w.pos=y,w.offset=h-y))),{vertical:D,horizontal:w}}(t,e,r),o=i.horizontal,a=i.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,r){var n=r[0],i=r[1],o=e[0],a=e[1],s=_t(r,e),u=s[0],c=0<(f=s[1]),l=0<u,u=Math.abs(u)<=xe?0:u,f=Math.abs(f)<=xe?0:f,p={isSnap:!1,offset:0,pos:0},h={isSnap:!1,offset:0,pos:0};if(0===u&&0===f)return{vertical:p,horizontal:h};var d=jr(t,u?[n]:[],f?[i]:[]),g=d.vertical,v=d.horizontal;g.posInfos.filter(function(t){var e=t.pos;return l?o<=e:e<=o}),v.posInfos.filter(function(t){var e=t.pos;return c?a<=e:e<=a}),g.isSnap=0<g.posInfos.length,v.isSnap=0<v.posInfos.length;var m,b,y,x,E,S=Fr(g),M=S.isSnap,D=S.guideline,w=Fr(v),C=w.isSnap,P=w.guideline,O=C?P.pos[1]:0,R=M?D.pos[0]:0;return 0===u?C&&(h.isSnap=!0,h.pos=P.pos[1],h.offset=i-h.pos):0===f?M&&(p.isSnap=!0,p.pos=R,p.offset=n-R):(m=f/u,b=r[1]-m*n,x=y=0,E=!1,M?(y=m*(x=R)+b,E=!0):C&&(x=((y=O)-b)/m,E=!0),E&&(p.isSnap=!0,p.pos=x,p.offset=n-x,h.isSnap=!0,h.pos=y,h.offset=i-y)),{vertical:p,horizontal:h}}(t,e,r),u=s.horizontal,c=s.vertical,l=hn(o,u),f=hn(a,c),p=Math.abs(l),h=Math.abs(f);return{horizontal:{isBound:o.isBound,isSnap:u.isSnap,offset:l,dist:p},vertical:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:h}}}function vn(t,e,r,n){void 0===n&&(n=r);var i=nn(t,n.map(function(t){return t[0]}),n.map(function(t){return t[1]})),o=i.horizontal,a=i.vertical,s=e?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:jr(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]})),u=s.horizontal,c=s.vertical,l=dn(o,u),f=dn(a,c),p=Math.abs(l),h=Math.abs(f);return{horizontal:{isBound:o.isBound,isSnap:u.isSnap,offset:l,dist:p},vertical:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:h}}}function mn(t){return t?t/Math.abs(t):0}function bn(t,e,r,n,i,o){var a,s,u,c,y,x,E,S,M,l=(s=n,u=[],c=[-(a=r)[0],-a[1]],a[0]&&a[1]?(u.push([c,[a[0],-a[1]]],[c,[-a[0],a[1]]]),s&&u.push([c,a])):a[0]?s?u.push([c,[c[0],-1]],[c,[c[0],1]],[c,[a[0],-1]],[c,a],[c,[a[0],1]]):u.push([[c[0],-1],[a[0],-1]],[[c[0],0],[a[0],0]],[[c[0],1],[a[0],1]]):a[1]?s?u.push([c,[-1,c[1]]],[c,[1,c[1]]],[c,[-1,a[1]]],[c,[1,a[1]]],[c,a]):u.push([[-1,c[1]],[-1,a[1]]],[[0,c[1]],[0,a[1]]],[[1,c[1]],[1,a[1]]]):u.push([c,[1,0]],[c,[-1,0]],[c,[0,-1]],[c,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),u),f=tn(e,r,n),p=(y=t,x=e,E=n,S=i,M=o,l.map(function(t){var e=t[0],r=t[1],n=Tr(x,e),i=Tr(x,r),o=E?gn(y,n,i,S):vn(y,S,[i]),a=o.horizontal,s=a.dist,u=a.offset,c=a.isBound,l=a.isSnap,f=o.vertical,p=f.dist,h=f.offset,d=f.isBound,g=f.isSnap,v=_t(r,e);if(!h&&!u)return{isBound:d||c,isSnap:g||l,sign:v,offset:[0,0]};var m=s<p,b=fn(n,i,-(m?h:u),m,M).map(function(t,e){return t*(v[e]?2/v[e]:0)});return{sign:v,isBound:m?d:c,isSnap:m?g:l,offset:b}}).concat(Jr(t,f,Tr(e,[0,0]),o))),h=Lr(p,0),d=Lr(p,1);return{width:{isBound:h.isBound,offset:h.offset[0]},height:{isBound:d.isBound,offset:d.offset[1]}}}function yn(t,e,r,n,i,o,a,s){for(var u,c,l,f,p,h,d,g,v,m,b,y,x,E,S,M,D,w,C,P,O,R,z,B,_,G=Ze(t.state),T=t.props.keepRatio,A=0,I=0,k=0;k<2;++k){var Y,N,X=bn(t,e(A,I),i,T,a,s),W=X.width,q=X.height,j=W.isBound,F=q.isBound,H=W.offset,L=q.offset;if(1===k&&(j||(H=0),F||(L=0)),0===k&&a&&!j&&!F)return[0,0];T&&(Y=Math.abs(H)*(r?1/r:1),N=Math.abs(L)*(n?1/n:1),(j&&F?Y<N:F||!j&&Y<N)?H=r*L/n:L=n*H/r),A+=H,I+=L}return i[0]&&i[1]&&(p=t,h=G,g=o,v=s,C=[-(d=i)[0],-d[1]],P=p.state,O=P.width,R=P.height,z=p.props.bounds,_=B=1/0,z&&(m=[[d[0],-d[1]],[-d[0],d[1]]],b=z.left,y=void 0===b?-1/0:b,x=z.top,E=void 0===x?-1/0:x,S=z.right,M=void 0===S?1/0:S,D=z.bottom,w=void 0===D?1/0:D,m.forEach(function(t){var e,r,n,i=t[0]!==C[0],o=t[1]!==C[1],a=Tr(h,t),s=mn(t[1]-C[1]),u=mn(t[0]-C[0]),c=360*Dt(g,a)/Math.PI;o&&(r=a.slice(),(Math.abs(c-360)<2||Math.abs(c-180)<2)&&(r[1]=g[1]),e=fn(g,r,(g[1]<a[1]?w:E)-a[1],!1,v)[1],isNaN(e)||(_=R+s*e)),i&&(r=a.slice(),(Math.abs(c-90)<2||Math.abs(c-270)<2)&&(r[0]=g[0]),n=fn(g,r,(g[0]<a[0]?M:y)-a[0],!0,v)[0],isNaN(n)||(B=O+u*n))})),c=(u={maxWidth:B,maxHeight:_}).maxWidth,l=u.maxHeight,A+=H=(f=function(t,e,r,n,i,o,a,s,u){var c=vn(t,s,[Tr(e,a)]),l=c.horizontal.offset,f=c.vertical.offset;if(f||l){var p=Br({datas:u,distX:-f,distY:-l}),h=p[0],d=p[1];return[Math.min(i||1/0,r+a[0]*h)-r,Math.min(o||1/0,n+a[1]*d)-n]}return[0,0]}(t,e(A,I),r+A,n+I,c,l,i,a,s))[0],I+=L=f[1]),[A,I]}function xn(t,e,r,n){if(!ln(t,"rotatable"))return n;var i=e.pos1,o=e.pos2,a=e.pos3,s=e.pos4,u=n*Math.PI/180,c=[i,o,a,s].map(function(t){return _t(t,r)}),l=c.map(function(t){return Tt(t,u)}),f=sn(t,c,l,r,n).concat(rn(t,c,l,r,n));return f.sort(function(t,e){return Math.abs(t-n)-Math.abs(e-n)}),f.length?f[0]:n}function En(t,e,r,n,i,o){if(!ln(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=$e(o.absolutePoses,[e,r]),s=Ye(a),u=s.left,c=s.right,l=s.top,f=s.bottom,p=[[u,l],[c,l],[u,f],[c,f]];t.props.snapCenter&&p.push([(u+c)/2,(l+f)/2]);var h,d,g,v,m,b,y,x,E,S,M,D,w,C,P,O,R,z,B,_=vn(t,i,p,a),G=_.vertical,T=_.horizontal,A=Qr(t,a,o),I=A.vertical,k=A.horizontal,Y=G.isSnap,N=T.isSnap,X=G.isBound||I.isBound,W=T.isBound||k.isBound,q=fr(G.offset,I.offset),j=fr(T.offset,k.offset),F=(h=n,g=[X,W],v=[Y,N],m=[q,j],S=(d=[e,r])[0],M=d[1],D=g[0],w=g[1],C=v[0],P=v[1],O=m[0],R=m[1],z=-O,B=-R,h&&S&&M?(B=z=0,b=[],D&&w?b.push([0,R],[O,0]):D?b.push([O,0]):w?b.push([0,R]):C&&P?b.push([0,R],[O,0]):C?b.push([O,0]):P&&b.push([0,R]),b.length&&(b.sort(function(t,e){return We(_t([S,M],t))-We(_t([S,M],e))}),(y=b[0])[0]&&Math.abs(S)>xe?(z=-y[0],B=M*Math.abs(S+z)/Math.abs(S)-M):y[1]&&Math.abs(M)>xe&&(x=M,B=-y[1],z=S*Math.abs(M+B)/Math.abs(x)-S),h&&w&&D&&(Math.abs(z)>xe&&Math.abs(z)<Math.abs(O)?(z*=E=Math.abs(O)/Math.abs(z),B*=E):Math.abs(B)>xe&&Math.abs(B)<Math.abs(R)?(z*=E=Math.abs(R)/Math.abs(B),B*=E):(z=fr(-O,z),B=fr(-R,B))))):(z=S||D?-O:0,B=M||w?-R:0),[z,B]);return[{isBound:X,isSnap:Y,offset:F[0]},{isBound:W,isSnap:N,offset:F[1]}]}function Sn(t){var r=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var e=t.guideline;-1<r.indexOf(e)||r.push(e)})}),r}function Mn(t,e,r,n){var i=t-r,o=i<0?i+e:n;return{size:(i<0?0:i)-o,pos:o}}function Dn(t,c,r,l){var f=[],e=cr(t.filter(function(t){var e=t.element,r=t.gap;return e&&!r}),function(t){var e,r,n,i=t.element,o=t.pos,a=o[l],s=(Math.min(0,a-c)<0?-1:1)+"_"+o[l?0:1],u=-1<(n=yt(e=f,function(t){var e=t[0],r=t[1];return i===e&&a===r}))?e[n]:r;return u?u[2]:(f.push([i,a,s]),s)});return e.forEach(function(t){t.sort(function(t,e){return Mn(t.pos[l],t.size,c,r).size-Mn(e.pos[l],t.size,c,r).size||t.pos[l?0:1]-e.pos[l?0:1]})}),e}function wn(t,e,p,h,d,g,v,m,b,y,x,E){var S=e[0],M=e[1],D=e[2],w=e[3];return lr(t.map(function(t,l){var f=!0;return t.map(function(t,e){var r,n=t.pos,i=t.size,o=Mn(n[y],i,h,d),a=o.pos,s=o.size;if(s<v)return null;var u=f;f=!1;var c=m&&u?parseFloat(s.toFixed(b)):0;return E.createElement("div",{className:Ce("line",S,"guideline","dashed"),"data-size":0<c?x(c):"",key:S+"LinkGuidline"+l+"-"+e,style:((r={})[M]=p+a+"px",r[D]=-g+n[y?0:1]+"px",r[w]=s+"px",r)})})}))}function Cn(t,e,n,i,o,a){var s=e[0],u=e[1],c=e[2],l=e[3];return t.map(function(t,e){var r;return a.createElement("div",{className:Ce("line",s,"guideline","target","bold"),key:s+"TargetGuidline"+e,style:((r={})[u]=n+"px",r[c]=-i+t+"px",r[l]=o+"px",r)})})}function Pn(t,e,a,s,u,c){var l=e[0],f=e[1],p=e[2],h=e[3];return t.map(function(t,e){var r,n=t.pos,i=t.size,o=t.element;return c.createElement("div",{className:Ce("line",l,"guideline",o?"bold":""),key:l+"Guidline"+e,style:((r={})[f]=-a+n[u]+"px",r[p]=-s+n[u?0:1]+"px",r[h]=i+"px",r)})})}function On(t,i,P,O){var e=t.filter(function(t){var e=t.element,r=t.gap,n=t.type;return e&&r&&n===i}),r="vertical"===i?[0,1]:[1,0],R=r[0],z=r[1];return lr(e.map(function(t,e){var r=t.pos,n=t.gap,i=t.gapGuidelines,o=t.sizes,a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return Math.abs(t)-Math.abs(e)}),t[0]}(r[z]+o[z]-P[z],r[z]-P[z]-O[z]),s=Math.min(o[z],O[z]);0<a&&s<a?a=2*(a-s/2):a<0&&a<-s&&(a=2*(a+s/2));var u,c,l,f,p,h,d,g,v,m,b,y,x,E,S,M,D,w,C=(0<a?0:O[z])+a/2;return m=i,b=R,y=P,x=O,E=r,S=n,M=C,D=Math.abs(S),w=E[b]+(0<S?x[0]:0),m.filter(function(t){return t.pos[b]<=y[b]}).sort(function(t,e){var r=t.pos;return e.pos[b]-r[b]}).filter(function(t){var e=t.pos,r=t.sizes,n=e[b];return Je(n+r[b],1e-4)===Je(w-D,1e-4)&&(w=n,!0)}).map(function(t){var e=-y[b]+t.pos[b]+t.sizes[b];return pe({},t,{gap:S,renderPos:b?[M,e]:[e,M]})}).concat((u=i,c=R,l=P,f=O,p=r,h=n,d=C,g=Math.abs(h),v=p[c]+(h<0?f[c]:0),u.filter(function(t){return t.pos[c]>l[c]}).sort(function(t,e){var r=t.pos,n=e.pos;return r[c]-n[c]}).filter(function(t){var e=t.pos,r=t.sizes,n=e[c];return Je(n,1e-4)===Je(v+g,1e-4)&&(v=n+r[c],!0)}).map(function(t){var e=-l[c]+t.pos[c]-g;return pe({},t,{gap:h,renderPos:c?[d,e]:[e,d]})})))}))}function Rn(t,e,r,n,s,u){var c=n[0],l=n[1],f=n[2],p=n[3],i=t.props,o=i.snapDigit,h=void 0===o?0:o,a=i.isDisplaySnapDigit,d=void 0===a||a,g="vertical"===r?"horizontal":"vertical",v="vertical"===r?[0,1]:[1,0],m=v[0],b=v[1];return e.map(function(t,e){var r,n=t.renderPos,i=t.gap,o=Math.abs(i),a=d?parseFloat(o.toFixed(h)):0;return u.createElement("div",{className:Ce("line",c,"guideline","gap"),"data-size":0<a?s(a):"",key:g+"GapGuideline"+e,style:((r={})[l]=n[m]+"px",r[f]=n[b]+"px",r[p]=o+"px",r)})})}function zn(t,e,r,n,i){var o=nn(t,e,r),a=o.vertical,s=a.isBound,u=a.pos,c=o.horizontal,l=c.isBound,f=c.pos;s&&n.indexOf(u)<0&&n.push(u),l&&i.indexOf(f)<0&&i.push(f);var p=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var r=t.getRect(),n=r.pos1,i=r.pos2,o=r.pos3,a=r.pos4,u=Tr([n,i,o,a],[0,0]),c=e.left,l=e.top,f=e.width,p=e.height,h=[[c,l],[c,l+p]],d=[[c,l],[c+f,l]],g=[[c+f,l],[c+f,l+p]],v=[[c,l+p],[c+f,l+p]],m=[],b=[],y={top:!1,bottom:!1,left:!1,right:!1};return[[n,i],[i,a],[a,o],[o,n]].forEach(function(t){var e=Vr(u,t),r=e.horizontal,n=e.vertical,i=Zr(t,d,n,1),o=Zr(t,v,n,1),a=Zr(t,h,r,1),s=Zr(t,g,r,1);i.isBound&&!y.top&&(m.push(l),y.top=!0),o.isBound&&!y.bottom&&(m.push(l+p),y.bottom=!0),a.isBound&&!y.left&&(b.push(c),y.left=!0),s.isBound&&!y.right&&(b.push(c+f),y.right=!0)}),{horizontal:m,vertical:b}}(t),h=p.vertical,d=p.horizontal;n.push.apply(n,h.filter(function(t){return n.indexOf(t)<0})),i.push.apply(i,d.filter(function(t){return i.indexOf(t)<0}))}var Bn={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object},render:function(t,e){var r=t.state,n=r.top,i=r.left,o=r.pos1,a=r.pos2,s=r.pos3,u=r.pos4,c=r.snapRenderInfo,l=r.targetClientRect,f=r.containerClientRect,p=r.is3d,h=r.rootMatrix;if(!c||!ln(t,""))return[];var d,g,v,m,b,y,x,E,S=p?4:3,M=Math.min(o[0],a[0],s[0],u[0]),D=Math.min(o[1],a[1],s[1],u[1]),w=un(h,f,S),C=pr(h,[l.left-w[0],l.top-w[1]],S),P=C[0],O=C[1],R=t.props,z=R.snapThreshold,B=void 0===z?5:z,_=R.snapDigit,G=void 0===_?0:_,T=R.isDisplaySnapDigit,A=void 0===T||T,I=R.snapDistFormat,k=void 0===I?function(t){return t}:I,Y=Ze(t.state),N=Ye(Y),X=N.width,W=N.height,q=N.top,j=N.left,F=N.bottom,H=N.right,L=[],V=[],U=[],K=[],$=[];c.request||(c.direction&&$.push(function(t,e,r){var n=[];if(r[0]&&r[1])n=[r,[-r[0],r[1]],[r[0],-r[1]]].map(function(t){return Tr(e,t)});else if(r[0]||r[1])t.props.keepRatio?n=[[-1,-1],[-1,1],[1,-1],[1,1],r].map(function(t){return Tr(e,t)}):1<(n=Gr(e,r)).length&&n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]);else for(var i=[e[0],e[1],e[3],e[2],e[0]],o=0;o<4;++o)n.push(i[o]),n.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return jr(t,n.map(function(t){return t[0]}),n.map(function(t){return t[1]}),!0,1)}(t,Y,c.direction)),c.snap&&(d=Ye(Y),c.center&&(d.middle=(d.top+d.bottom)/2,d.center=(d.left+d.right)/2),$.push((v=d,m=!0,b=1,y=(g=t).props.snapCenter&&m,x=["left","right"],E=["top","bottom"],y&&(x.push("center"),E.push("middle")),x=x.filter(function(t){return t in v}),E=E.filter(function(t){return t in v}),jr(g,x.map(function(t){return v[t]}),E.map(function(t){return v[t]}),y,b)))),$.forEach(function(t){var e=t.vertical.posInfos,r=t.horizontal.posInfos;L.push.apply(L,e.map(function(t){return t.pos})),V.push.apply(V,r.map(function(t){return t.pos})),U.push.apply(U,Sn(e)),K.push.apply(K,Sn(r))})),zn(t,[j,H],[q,F],L,V);var Z=Dn(K,P,X,0),J=Dn(U,O,W,1),Q=["horizontal","left","top","width"],tt=["vertical","top","left","height"],et=On(U,"vertical",[i,n],[X,W]),rt=On(K,"horizontal",[i,n],[X,W]),nt=U.concat(K);return nr(t,"onSnap",{guidelines:nt.filter(function(t){return!t.element}),elements:cr(nt.filter(function(t){return t.element}),function(t){return t.element}),gaps:et.concat(rt)},!0),Rn(t,et,"vertical",Q,k,e).concat(Rn(t,rt,"horizontal",tt,k,e),wn(Z,Q,M,P,X,n,B,A,G,0,k,e),wn(J,tt,D,O,W,i,B,A,G,1,k,e),Cn(V,Q,M,n,X,e),Cn(L,tt,D,i,W,e),Pn(K,Q,i,n,0,e),Pn(U,tt,n,i,1,e))},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},cn(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t){return Wr(t)||kn(t)},dragControlStart:function(t,e){t.state.snapRenderInfo=null,cn(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t,e){t.state.snapRenderInfo=null,cn(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null}},_n={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number},render:function(t,e){var r=t.props.throttleDragRotate,n=t.state,i=n.dragInfo,o=n.beforeOrigin;if(r&&i){var a=i.dist;if(a[0]||a[1]){var s=We(a),u=Dt(a,[0,0]);return e.createElement("div",{className:Ce("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:s+"px",transform:"translate("+o[0]+"px, "+o[1]+"px) rotate("+u+"rad)"}})}}},dragStart:function(t,e){var r=e.datas,n=e.parentEvent,i=e.parentDragger,o=t.state,a=o.targetTransform,s=o.target;if(o.dragger)return!1;o.dragger=i||t.targetDragger;var u,c=window.getComputedStyle(s);r.datas={},r.left=parseFloat(c.left||"")||0,r.top=parseFloat(c.top||"")||0,r.bottom=parseFloat(c.bottom||"")||0,r.right=parseFloat(c.right||"")||0,r.transform=a,r.startTranslate=[0,0],zr(t,{datas:r}),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,u=t,r.absolutePoses=Ze(u.state);var l=rr(t,e,{set:function(t){r.startTranslate=t}});return!1!==(n||nr(t,"onDragStart",l))?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.dragger=null,r.isPinch=!1),!!r.isDrag&&l},drag:function(t,e){var r=e.datas,n=e.parentEvent,i=e.parentFlag,o=e.isPinch,a=e.isRequest,s=e.distX,u=e.distY,c=r.isDrag,l=r.prevDist,f=r.prevBeforeDist,p=r.transform,h=r.startTranslate;if(c){var d,g,v,m,b,y,x,E,S,M,D=t.props,w=D.parentMoveable,C=!n&&D.throttleDrag||0,P=!n&&D.throttleDragRotate||0,O=!1,R=0;!n&&0<P&&(s||u)&&(d=Je(180*Dt([0,0],[s,u])/Math.PI,P),g=We([s,u]),R=d*Math.PI/180,s=g*Math.cos(R),u=g*Math.sin(R)),o||n||i||!s&&!u||(m=(v=En(t,s,u,P,a,r))[0],b=v[1],y=m.isSnap,x=m.isBound,E=m.offset,S=b.isSnap,M=b.isBound,O=y||S||x||M,s+=E,u+=b.offset),r.passDeltaX=s-(r.passDistX||0),r.passDeltaY=u-(r.passDistY||0),r.passDistX=s,r.passDistY=u;var z=Bt(Br({datas:r,distX:s,distY:u},!0),h),B=Bt(Br({datas:r,distX:s,distY:u},!1),h);P||O||(Qe(B,C),Qe(z,C));var _=_t(z,h),G=_t(B,h),T=_t(G,l),A=_t(_,f);r.prevDist=G,r.prevBeforeDist=_;var I=r.left+_[0],k=r.top+_[1],Y=r.right-_[0],N=r.bottom-_[1],X=p+" translate("+G[0]+"px, "+G[1]+"px)";if(t.state.dragInfo.dist=n?[0,0]:G,n||w||!T.every(function(t){return!t})||!A.some(function(t){return!t})){var W=rr(t,e,{transform:X,dist:G,delta:T,translate:B,beforeDist:_,beforeDelta:A,beforeTranslate:z,left:I,top:k,right:Y,bottom:N,isPinch:o});return n||nr(t,"onDrag",W),W}}},dragEnd:function(t,e){var r=e.parentEvent,n=e.datas,i=e.isDrag;if(t.state.dragger=null,t.state.dragInfo=null,n.isDrag)return n.isDrag=!1,r||nr(t,"onDragEnd",rr(t,e,{isDrag:i})),i},dragGroupStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var a=Or(t,this,"dragStart",[n||0,i||0],e,!1),s=nr(t,"onDragGroupStart",pe({},o,{targets:t.props.targets,events:a}));return r.isDrag=!1!==s,!!r.isDrag&&o},dragGroup:function(t,e){if(e.datas.isDrag){var r=this.drag(t,e),n=e.datas,i=Or(t,this,"drag",[n.passDeltaX,n.passDeltaY],e,!1);if(r){var o=pe({targets:t.props.targets,events:i},r);return nr(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var r=e.isDrag;if(e.datas.isDrag)return this.dragEnd(t,e),Or(t,this,"dragEnd",[0,0],e,!1),nr(t,"onDragGroupEnd",rr(t,e,{targets:t.props.targets,isDrag:r})),r},request:function(t){var e={},r=t.getRect(),n=0,i=0;return{isControl:!1,requestStart:function(t){return{datas:e}},request:function(t){return"x"in t?n=t.x-r.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY),{datas:e,distX:n,distY:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function Gn(t,e,r,n,i,o){var a=t.state.is3d?4:3,s=Ie(t.state.rootMatrix,i,a),u=Bt([o.left,o.top],s);e.startAbsoluteOrigin=u,e.prevDeg=Dt(u,[r,n])/Math.PI*180,e.prevSnapDeg=e.prevDeg,e.startDeg=e.prevDeg,e.loop=0}function Tn(t,e,r,n,i,o){var a=r.prevDeg,s=o+n,u=xn(t,e,r.origin,n);return[i*((r.prevDeg=u)-a),u,s]}function An(t,e,r,n,i,o,a,s){var u=r.prevDeg,c=r.prevSnapDeg,l=r.startDeg,f=r.loop;n<u&&270<u&&n<90?++r.loop:u<n&&u<90&&270<n&&--r.loop;var p=r.loop,h=360*f+c-l+o,d=360*p+n-l+o;r.prevDeg=d-360*p+l-o;var g=i*((d=Je(d,a))-o);return s&&(d=(g=xn(t,e,r.origin,g))/i+o),r.prevSnapDeg=d-360*p+l-o,[i*(d-h),g,d]}function In(t,e,r,n,i,o,a,s){return An(t,e,r,Dt(r.startAbsoluteOrigin,[i,o])/Math.PI*180,n,a,s,!0)}function kn(t){return!!t.isRequest||xt(t.inputEvent.target,Ce("rotation"))}var Yn={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},render:function(t,e){var r=t.props,n=r.rotatable,i=r.rotationPosition;if(!n)return null;var o,a,s,u,c,l,f=t.state,p=f.renderPoses,h=f.direction,d=(o=i,s=(a=p)[0],u=a[1],c=a[2],l=a[3],"left"===o?[c,s]:"right"===o?[u,l]:"bottom"===o?[l,c]:[s,u]),g=He(d,h);return e.createElement("div",{key:"rotation",className:Ce("line rotation-line"),style:{transform:"translate(-50%) translate("+(d[0][0]+d[1][0])/2+"px, "+(d[0][1]+d[1][1])/2+"px) rotate("+g+"rad)"}},e.createElement("div",{className:Ce("control","rotation")}))},dragControlCondition:kn,dragControlStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=e.parentRotate,a=e.parentFlag,s=e.isPinch,u=e.isRequest,c=t.state,l=c.target,f=c.left,p=c.top,h=c.origin,d=c.beforeOrigin,g=c.direction,v=c.beforeDirection,m=c.targetTransform;if(!u&&!l)return!1;var b,y,x=t.getRect();r.rect=x,r.transform=m,r.left=f,r.top=p,u||s||a?(b=o||0,r.beforeInfo={origin:x.beforeOrigin,prevDeg:b,startDeg:b,prevSnapDeg:b,loop:0},r.afterInfo={origin:x.origin,prevDeg:b,startDeg:b,prevSnapDeg:b,loop:0}):(r.beforeInfo={origin:x.beforeOrigin},r.afterInfo={origin:x.origin},y=Ue(t.controlBox.getElement()),Gn(t,r.beforeInfo,n,i,d,y),Gn(t,r.afterInfo,n,i,h,y)),r.direction=g,r.beforeDirection=v,r.startRotate=0,r.datas={};var E=rr(t,e,{set:function(t){r.startRotate=t}}),S=nr(t,"onRotateStart",E);return r.isRotate=!1!==S,t.state.snapRenderInfo={request:e.isRequest},!!r.isRotate&&E},dragControl:function(t,e){var r,n,i,o,a=e.datas,s=e.clientX,u=e.clientY,c=e.parentRotate,l=e.parentFlag,f=e.isPinch,p=a.direction,h=a.beforeDirection,d=a.beforeInfo,g=a.afterInfo,v=a.isRotate,m=a.startRotate,b=a.rect;if(v){var y,x,E,S,M,D,w,C,P,O=t.props,R=O.throttleRotate,z=void 0===R?0:R,B=O.parentMoveable;if(P="parentDist"in e?(E=(x=Tn(t,b,g,y=e.parentDist,p,m))[0],S=x[1],M=x[2],w=(D=Tn(t,b,d,y,p,m))[0],C=D[1],D[2]):f||l?(E=(r=An(t,b,g,c,p,m,z))[0],S=r[1],M=r[2],w=(n=An(t,b,d,c,p,m,z))[0],C=n[1],n[2]):(E=(i=In(t,b,g,p,s,u,m,z))[0],S=i[1],M=i[2],w=(o=In(t,b,d,h,s,u,m,z))[0],C=o[1],o[2]),E||w||B){var _=rr(t,e,{delta:E,dist:S,rotate:M,beforeDist:C,beforeDelta:w,beforeRotate:P,transform:a.transform+" rotate("+S+"deg)",isPinch:!!f});return nr(t,"onRotate",_),_}}},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isRotate&&(r.isRotate=!1,nr(t,"onRotateEnd",rr(t,e,{isDrag:n})),n)},dragGroupControlCondition:kn,dragGroupControlStart:function(t,e){var r=e.datas,u=e.inputEvent,n=t.state,c=n.left,l=n.top,f=n.beforeOrigin,i=this.dragControlStart(t,e);if(!i)return!1;i.set(t.rotation);var o=Rr(t,this,"dragControlStart",r,pe({},e,{parentRotate:0}),function(t,e,r){var n=t.state,i=n.left,o=n.top,a=n.beforeOrigin,s=Bt(_t([i,o],[c,l]),_t(a,f));e.prevClient=s,r.dragStart=_n.dragStart(t,(new Pr).dragStart(s,u))}),a=nr(t,"onRotateGroupStart",pe({},i,{targets:t.props.targets,events:o}));return r.isRotate=!1!==a,!!r.isRotate&&i},dragGroupControl:function(e,p){var h=p.inputEvent,t=p.datas;if(t.isRotate){var r=this.dragControl(e,p);if(r){var n=r.beforeDist,d=r.beforeDelta/180*Math.PI,i=Rr(e,this,"dragControl",t,pe({},p,{parentRotate:n}),function(t,e,r,n){var i=e.prevClient,o=i[0],a=i[1],s=Tt([o,a],d),u=s[0],c=s[1],l=[u-o,c-a];e.prevClient=[u,c];var f=_n.drag(t,Cr(t.state,l,h,!!p.isPinch,!1));r.drag=f});e.rotation=r.beforeRotate;var o=pe({targets:e.props.targets,events:i,set:function(t){e.rotation=t}},r);return nr(e,"onRotateGroup",o),o}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isRotate)return this.dragControlEnd(t,e),Rr(t,this,"dragControlEnd",n,e),nr(t,"onRotateGroupEnd",rr(t,e,{targets:t.props.targets,isDrag:r})),r},request:function(){var e={},r=0;return{isControl:!0,requestStart:function(t){return{datas:e}},request:function(t){return r+=t.deltaRotate,{datas:e,parentDist:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Nn(t,e,n){var r=t.state,i=r.renderPoses,o=r.rotation,a=t.props.renderDirections,s=void 0===a?e:a,u={};return s.forEach(function(t){u[t]=!0}),s.map(function(t){var e=De[t];if(!e||!u[t])return null;var r=(Je(o/Math.PI*180,15)+we[t])%180;return n.createElement("div",{className:Ce("control","direction",t),"data-rotation":r,"data-direction":t,key:"direction-"+t,style:je.apply(void 0,[o].concat(e.map(function(t){return i[t]})))})})}function Xn(t,e){return Nn(t,Me,e)}function Wn(t,e){return Nn(t,["nw","ne","sw","se"],e)}var qn={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,baseDirection:Array,keepRatio:Boolean},render:function(t,e){var r=t.props,n=r.resizable,i=r.edge;if(n)return(i?Wn:Xn)(t,e)},dragControlCondition:Wr,dragControlStart:function(t,e){var r,n,i,o=e.inputEvent,a=e.isPinch,s=e.parentDirection,u=e.datas,c=e.parentFlag,l=s||(a?[0,0]:Ke(o.target)),f=t.state,p=f.target,h=f.width,d=f.height;if(!l||!p)return!1;a||zr(t,{datas:u}),u.datas={},u.direction=l,u.startOffsetWidth=h,u.startOffsetHeight=d,u.prevWidth=0,u.prevHeight=0,n=p,i=window.getComputedStyle(n),r=[parseFloat(i.width),parseFloat(i.height)],u.startWidth=r[0],u.startHeight=r[1];var g,v=[Math.max(0,h-u.startWidth),Math.max(0,d-u.startHeight)];u.minSize=v,u.maxSize=[1/0,1/0],c||(g=window.getComputedStyle(p),u.minSize=Bt([parseFloat(g.minWidth)||0,parseFloat(g.minHeight)||0],v),u.maxSize=Bt([parseFloat(g.maxWidth)||1/0,parseFloat(g.maxHeight)||1/0],v));var m=t.props.transformOrigin||"% %";u.transformOrigin=m&&"string"==typeof m?m.split(" "):m,u.startDirection=function(t,e){if(!e[0]&&!e[1])return[0,0];var r=t.props.baseDirection,n=void 0===r?[-1,-1]:r;return[e[0]?e[0]:-1*n[0],e[1]?e[1]:-1*n[1]]}(t,l),u.fixedPosition=Xr(t,u.startDirection),u.fixedOriginalPosition=Xr(t,l);var b=rr(t,e,{direction:l,set:function(t){var e=t[0],r=t[1];u.startWidth=e,u.startHeight=r},setOrigin:function(t){u.transformOrigin=t},dragStart:_n.dragStart(t,(new Pr).dragStart([0,0],o))});return!1!==nr(t,"onResizeStart",b)&&(u.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:l}),!!u.isResize&&b},dragControl:function(t,e){var r,n=e.datas,i=e.distX,o=e.distY,a=e.parentFlag,s=e.isPinch,u=e.parentDistance,c=e.parentScale,l=e.inputEvent,f=e.parentKeepRatio,p=e.dragClient,h=e.parentDist,d=e.isRequest,g=n.direction,v=n.isResize,m=n.transformOrigin;if(v){var b=n.startWidth,y=n.startHeight,x=n.startOffsetWidth,E=n.startOffsetHeight,S=n.prevWidth,M=n.prevHeight,D=n.minSize,w=n.maxSize,C=t.props,P=C.throttleResize,O=void 0===P?0:P,R=C.parentMoveable,z=g;g[0]||g[1]||(z=[1,1]);var B,_,G,T,A,I,k=t.props.keepRatio||f,Y=z[0]||!z[1],N=Y?E/x:x/E,X=k||a?g:n.startDirection,W=p,q=0,j=0;p||(W=!a&&s?Xr(t,[0,0]):k?n.fixedOriginalPosition:n.fixedPosition),h?(q=h[0],j=h[1]):c?(q=(c[0]-1)*x,j=(c[1]-1)*E):s?u&&(j=(q=u)*E/x):(B=Br({datas:n,distX:i,distY:o}),q=z[0]*B[0],j=z[1]*B[1],k&&x&&E&&(_=Dt([0,0],B),G=Dt([0,0],z),T=Dt([0,0],[x,E]),A=We([q,j]),I=Math.cos(_-G)*A,z[0]?j=z[1]?(q=Math.cos(T)*I,Math.sin(T)*I):ar(q=I,Y,N):q=sr(j=I,Y,N)));var F=z[0]||k?Math.max(x+q,xe):x,H=z[1]||k?Math.max(E+j,xe):E;k&&x&&E&&(H=F*E/x);var L,V=[0,0];s||(V=function(t,r,n,i,o,e,a){if(!ln(t,"resizable"))return[0,0];var s=t.state,u=s.matrix,c=s.is3d;return yn(t,function(t,e){return pn(u,r+t,n+e,o,i,c)},r,n,i,o,e,a)}(t,F,H,g,n.fixedOriginalPosition,d,n)),h&&(h[0]||(V[0]=0),h[1]||(V[1]=0)),k?(z[0]&&z[1]&&V[0]&&V[1]&&(Math.abs(V[0])>Math.abs(V[1])?V[1]=0:V[0]=0),(L=!V[0]&&!V[1])&&(Y?F=Je(F,O):H=Je(H,O)),z[0]&&!z[1]||V[0]&&!V[1]||L&&Y?H=ar(F+=V[0],Y,N):(!z[0]&&z[1]||!V[0]&&V[1]||L&&!Y)&&(F=sr(H+=V[1],Y,N))):(F+=V[0],H+=V[1],V[0]||(F=Je(F,O)),V[1]||(H=Je(H,O))),F=(r=function(t,r,n,e){if(!e)return t.map(function(t,e){return Math.min(n[e],Math.max(t,r[e]))});var i=t[0],o=t[1],a=gr(t,r,!1),s=a[0],u=a[1],c=gr(t,n,!0),l=c[0],f=c[1];return i<s||o<u?(i=s,o=u):(l<i||f<o)&&(i=l,o=f),[i,o]}([F,H],D,w,k))[0],H=r[1];var U=[(q=(F=Math.round(F))-x)-S,(j=(H=Math.round(H))-E)-M];n.prevWidth=q,n.prevHeight=j;var K=Nr(t,F,H,X,W,m);if(R||!U.every(function(t){return!t})||!K.every(function(t){return!t})){var $=rr(t,e,{width:b+q,height:y+j,offsetWidth:F,offsetHeight:H,direction:g,dist:[q,j],delta:U,isPinch:!!s,drag:_n.drag(t,Cr(t.state,K,l,!!s,!1))});return nr(t,"onResize",$),$}}},dragControlAfter:function(t,e){var r=e.datas,n=r.isResize,i=r.startOffsetWidth,o=r.startOffsetHeight,a=r.prevWidth,s=r.prevHeight;if(n){var u=t.state,c=u.width-(i+a),l=u.height-(o+s),f=3<Math.abs(c),p=3<Math.abs(l);return f&&(r.startWidth+=c,r.startOffsetWidth+=c,r.prevWidth+=c),p&&(r.startHeight+=l,r.startOffsetHeight+=l,r.prevHeight+=l),f||p?(this.dragControl(t,e),!0):void 0}},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isResize&&(r.isResize=!1,nr(t,"onResizeEnd",rr(t,e,{isDrag:n})),n)},dragGroupControlCondition:Wr,dragGroupControlStart:function(a,s){var t=s.datas,e=this.dragControlStart(a,s);if(!e)return!1;var u=e.direction,c=Xr(a,u),r=Rr(a,this,"dragControlStart",t,function(t,e){var r=Xr(t,u),n=Gt(It(-a.rotation/180*Math.PI,3),[r[0]-c[0],r[1]-c[1],1],3),i=n[0],o=n[1];return e.originalX=i,e.originalY=o,s}),n=pe({},e,{targets:a.props.targets,events:r}),i=nr(a,"onResizeGroupStart",n);return t.isResize=!1!==i,!!t.isResize&&e},dragGroupControl:function(o,a){var t=a.datas;if(t.isResize){var e=this.dragControl(o,a);if(e){var r=e.offsetWidth,n=e.offsetHeight,i=e.dist,s=o.props.keepRatio,u=[r/(r-i[0]),n/(n-i[1])],c=Xr(o,t.direction),l=Rr(o,this,"dragControl",t,function(t,e){var r=Gt(It(o.rotation/180*Math.PI,3),[e.originalX*u[0],e.originalY*u[1],1],3),n=r[0],i=r[1];return pe({},a,{parentDist:null,parentScale:u,dragClient:Bt(c,[n,i]),parentKeepRatio:s})}),f=pe({targets:o.props.targets,events:l},e);return nr(o,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isResize)return this.dragControlEnd(t,e),Rr(t,this,"dragControlEnd",n,e),nr(t,"onResizeGroupEnd",rr(t,e,{targets:t.props.targets,isDrag:r})),r},request:function(t){var e={},r=0,n=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?r=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(r+=t.deltaWidth),"offsetHeight"in t?n=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(n+=t.deltaHeight),{datas:e,parentDist:[r,n]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},jn={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},render:function(t,e){var r=t.props,n=r.resizable,i=r.scalable,o=r.edge;if(!n&&i)return(o?Wn:Xn)(t,e)},dragControlCondition:Wr,dragControlStart:function(t,e){var r=e.datas,n=e.isPinch,i=e.inputEvent,o=e.parentDirection||(n?[0,0]:Ke(i.target)),a=t.state,s=a.width,u=a.height,c=a.targetTransform,l=a.target;if(!o||!l)return!1;n||zr(t,{datas:r}),r.datas={},r.transform=c,r.prevDist=[1,1],r.direction=o,r.width=s,r.height=u,r.startScale=[1,1],r.fixedPosition=Xr(t,o);var f=rr(t,e,{direction:o,set:function(t){r.startScale=t},dragStart:_n.dragStart(t,(new Pr).dragStart([0,0],i))});return!1!==nr(t,"onScaleStart",f)&&(r.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!r.isScale&&f},dragControl:function(t,e){var r=e.datas,n=e.distX,i=e.distY,o=e.parentScale,a=e.parentDistance,s=e.parentKeepRatio,u=e.parentFlag,c=e.isPinch,l=e.inputEvent,f=e.dragClient,p=e.parentDist,h=e.isRequest,d=r.prevDist,g=r.direction,v=r.width,m=r.height,b=r.transform,y=r.isScale,x=r.startScale;if(!y)return!1;var E=t.props,S=E.throttleScale,M=E.parentMoveable,D=g;g[0]||g[1]||(D=[1,1]);var w,C,P,O,R,z,B,_,G=t.props.keepRatio||s,T=t.state,A=D[0]||!D[1],I=v*x[0],k=m*x[1],Y=A?k/I:I/k,N=1,X=1,W=f;f||(W=!u&&c?Xr(t,[0,0]):r.fixedPosition),p?(N=(v+p[0])/v,X=(m+p[1])/m):o?(N=o[0],X=o[1]):c?a&&(N=(v+a)/v,X=(m+a*m/v)/m):(w=Br({datas:r,distX:n,distY:i}),C=D[0]*w[0],P=D[1]*w[1],G&&v&&m&&(O=Dt([0,0],w),R=Dt([0,0],D),z=Dt([0,0],[I,k]),B=We([C,P]),_=Math.cos(O-R)*B,D[0]?P=D[1]?(C=Math.cos(z)*_,Math.sin(z)*_):ar(C=_,A,Y):C=sr(P=_,A,Y)),N=(v+C)/v,X=(m+P)/m),N=D[0]||G?N*x[0]:x[0],X=D[1]||G?X*x[1]:x[1],0===N&&(N=1e-9*(0<d[0]?1:-1)),0===X&&(X=1e-9*(0<d[1]?1:-1));var q,j=[N/x[0],X/x[1]],F=[N,X];c||!t.props.groupable||mt(q=(T.snapRenderInfo||{}).direction)&&(q[0]||q[1])&&(T.snapRenderInfo={direction:g,request:e.isRequest});var H,L,V,U=[0,0];c||(U=function(t,r,n,i,e,o){var a=o.width,s=o.height;if(!ln(t,"scalable"))return[0,0];var u=o.is3d,c=yn(t,function(t,e){return pn(Yr(o,Bt(r,[t/a,e/s])),a,s,i,n,u)},a,s,n,i,e,o);return[c[0]/a,c[1]/s]}(t,j,g,r.fixedPosition,h,r)),G?(D[0]&&D[1]&&U[0]&&U[1]&&(Math.abs(U[0])>Math.abs(U[1])?U[1]=0:U[0]=0),(H=!U[0]&&!U[1])&&(A?j[0]=Je(j[0]*x[0],S)/x[0]:j[1]=Je(j[1]*x[1],S)/x[1]),D[0]&&!D[1]||U[0]&&!U[1]||H&&A?(j[0]+=U[0],L=ar(v*j[0]*x[0],A,Y),j[1]=L/m/x[1]):(!D[0]&&D[1]||!U[0]&&U[1]||H&&!A)&&(j[1]+=U[1],V=sr(m*j[1]*x[1],A,Y),j[0]=V/v/x[0])):(j[0]+=U[0],j[1]+=U[1],U[0]||(j[0]=Je(j[0]*x[0],S)/x[0]),U[1]||(j[1]=Je(j[1]*x[1],S)/x[1])),0===j[0]&&(j[0]=1e-9*(0<d[0]?1:-1)),0===j[1]&&(j[1]=1e-9*(0<d[1]?1:-1));var K,$,Z=[j[0]/d[0],j[1]/d[1]];$=x,F=[(K=j)[0]*$[0],K[1]*$[1]],r.prevDist=j;var J,Q,tt,et,rt,nt,it,ot,at,st,ut,ct,lt,ft,pt=(Q=Z,tt=g,et=W,rt=(J=t).state,nt=rt.is3d,it=rt.left,ot=rt.top,at=rt.width,st=rt.height,ut=nt?4:3,ct=J.props.groupable,lt=ct?it:0,ft=ct?ot:0,_t(Ir(et,Yr(J.state,Q),at,st,ut,tt),[lt,ft]));if(N===d[0]&&X===d[1]&&pt.every(function(t){return!t})&&!M)return!1;var ht=rr(t,e,{scale:F,direction:g,dist:j,delta:Z,transform:b+" scale("+N+", "+X+")",isPinch:!!c,drag:_n.drag(t,Cr(t.state,pt,l,c,!1))});return nr(t,"onScale",ht),ht},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isScale&&(r.isScale=!1,nr(t,"onScaleEnd",rr(t,e,{isDrag:n})),n)},dragGroupControlCondition:Wr,dragGroupControlStart:function(a,s){var t=s.datas,e=this.dragControlStart(a,s);if(!e)return!1;var u=e.direction,c=Xr(a,u),r=Rr(a,this,"dragControlStart",t,function(t,e){var r=Xr(t,u),n=Gt(It(-a.rotation/180*Math.PI,3),[r[0]-c[0],r[1]-c[1],1],3),i=n[0],o=n[1];return e.originalX=i,e.originalY=o,s}),n=pe({},e,{targets:a.props.targets,events:r}),i=nr(a,"onScaleGroupStart",n);return t.isScale=!1!==i,!!t.isScale&&n},dragGroupControl:function(o,a){var t=a.datas;if(t.isScale){var e=this.dragControl(o,a);if(e){var s=o.props.keepRatio,u=e.scale,c=Xr(o,t.direction),r=Rr(o,this,"dragControl",t,function(t,e){var r=Gt(It(o.rotation/180*Math.PI,3),[e.originalX*u[0],e.originalY*u[1],1],3),n=r[0],i=r[1];return pe({},a,{parentDist:null,parentScale:u,parentKeepRatio:s,dragClient:Bt(c,[n,i])})}),n=pe({targets:o.props.targets,events:r},e);return nr(o,"onScaleGroup",n),n}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isScale)return this.dragControlEnd(t,e),Rr(t,this,"dragControlEnd",n,e),nr(t,"onScaleGroupEnd",rr(t,e,{targets:t.props.targets,isDrag:r})),r},request:function(){var e={},r=0,n=0;return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return r+=t.deltaWidth,n+=t.deltaHeight,{datas:e,parentDist:[r,n]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Fn(t,a){return t.map(function(t,e){return r=t,n=a[e],(r*(o=2)+n*(i=1))/(i+o);var r,n,i,o})}function Hn(t,e,r){var n=Dt(t,e),i=Dt(t,r)-n;return 0<=i?i:i+2*Math.PI}var Ln={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},render:function(t,e){var r=t.props,n=r.resizable,i=r.scalable,o=r.warpable;if(!n&&!i&&o){var a=t.state,s=a.pos1,u=a.pos2,c=a.pos3,l=a.pos4,f=Fn(s,u),p=Fn(u,s),h=Fn(s,c),d=Fn(c,s),g=Fn(c,l),v=Fn(l,c),m=Fn(u,l),b=Fn(l,u);return[e.createElement("div",{className:Ce("line"),key:"middeLine1",style:qe(f,g)}),e.createElement("div",{className:Ce("line"),key:"middeLine2",style:qe(p,v)}),e.createElement("div",{className:Ce("line"),key:"middeLine3",style:qe(h,m)}),e.createElement("div",{className:Ce("line"),key:"middeLine4",style:qe(d,b)})].concat(Xn(t,e))}},dragControlCondition:function(t){return!t.isRequest&&xt(t.inputEvent.target,Ce("direction"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,o=Ke(r.target);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,c=a.targetTransform,l=a.targetMatrix,f=a.width,p=a.height,h=a.left,d=a.top;return n.datas={},n.targetTransform=c,n.warpTargetMatrix=u?l:Ct(l,3,4),n.targetInverseMatrix=Et(St(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=h,n.top=d,zr(t,{datas:n}),n.poses=[[0,0],[f,0],[0,p],[f,p]].map(function(t){return _t(t,s)}),n.nextPoses=n.poses.map(function(t){var e=t[0],r=t[1];return Gt(n.warpTargetMatrix,[e,r,0,1],4)}),n.startMatrix=kt(4),n.prevMatrix=kt(4),n.absolutePoses=Ze(a),n.posIndexes=_r(o),!(a.snapRenderInfo={request:e.isRequest,direction:o})!==nr(t,"onWarpStart",rr(t,e,{set:function(t){n.startMatrix=t}}))&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var r,n,i,o,a=e.datas,s=e.isRequest,u=e.distX,c=e.distY,l=a.targetInverseMatrix,f=a.prevMatrix,p=a.isWarp,h=a.startMatrix,d=a.poses,g=a.posIndexes,v=a.absolutePoses;if(!p)return!1;ln(t,"warpable")&&(1<(r=g.map(function(t){return v[t]})).length&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]),i=(n=vn(t,s,r.map(function(t){return[t[0]+u,t[1]+c]}))).horizontal,o=n.vertical,c-=i.offset,u-=o.offset);var m=Br({datas:a,distX:u,distY:c},!0),b=a.nextPoses.slice();if(g.forEach(function(t){b[t]=Bt(b[t],m)}),!ye.every(function(t){return e=t.map(function(t){return d[t]}),r=t.map(function(t){return b[t]}),n=Hn(e[0],e[1],e[2]),i=Hn(r[0],r[1],r[2]),!((o=Math.PI)<=n&&i<=o||n<=o&&o<=i);var e,r,n,i,o}))return!1;var y=Xt(d[0],d[1],d[2],d[3],b[0],b[1],b[2],b[3]);if(!y.length)return!1;var x=At(Ot(l,y,4)),E=a.targetTransform+" matrix3d("+x.join(",")+")";return nr(t,"onWarp",rr(t,e,{delta:Rt(St(f,4),x,4),matrix:Rt(h,a.prevMatrix=x,4),multiply:Rt,dist:x,transform:E})),!0},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isWarp&&(r.isWarp=!1,nr(t,"onWarpEnd",rr(t,e,{isDrag:n})),n)}},Vn=Ce("area"),Un=Ce("area-pieces"),Kn=Ce("area-piece"),$n=Ce("avoid");function Zn(t){var e,r,n,i=t.areaElement,o=t.state,a=o.width,s=o.height;r=$n,(e=i).classList?e.classList.remove(r):(n=new RegExp("(\\s|^)"+r+"(\\s|$)"),e.className=e.className.replace(n," ")),i.style.cssText+="left: 0px; top: 0px; width: "+a+"px; height: "+s+"px"}function Jn(t){return t.createElement("div",{key:"area_pieces",className:Un},t.createElement("div",{className:Kn}),t.createElement("div",{className:Kn}),t.createElement("div",{className:Kn}),t.createElement("div",{className:Kn}))}var Qn={name:"dragArea",props:{dragArea:Boolean},render:function(t,e){var r=t.props,n=r.target,i=r.dragArea,o=r.groupable,a=t.state,s=a.width,u=a.height,c=a.renderPoses;if(o)return[e.createElement("div",{key:"area",ref:m(t,"areaElement"),className:Vn}),Jn(e)];if(!n||!i)return[];var l=Xt([0,0],[s,0],[0,u],[s,u],c[0],c[1],c[2],c[3]),f=l.length?"matrix3d("+At(l).join(",")+")":"none";return[e.createElement("div",{key:"area",ref:m(t,"areaElement"),className:Vn,style:{top:"0px",left:"0px",width:s+"px",height:u+"px",transformOrigin:"0 0",transform:f}}),Jn(e)]},dragStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=e.inputEvent;if(!o)return!1;r.isDragArea=!1,r.inputTarget=o.target;var a,s,u=t.areaElement,c=t.state,l=c.moveableClientRect,f=c.renderPoses,p=c.rootMatrix,h=c.is3d,d=l.left,g=l.top,v=Ye(f),m=v.left,b=v.top,y=v.width,x=v.height,E=pr(p,[n-d,i-g],h?4:3),S=E[0],M=E[1],D=[{left:m,top:b,width:y,height:(M-=b)-10},{left:m,top:b,width:(S-=m)-10,height:x},{left:m,top:b+M+10,width:y,height:x-M-10},{left:m+S+10,top:b,width:y-S-10,height:x}],w=[].slice.call(u.nextElementSibling.children);return D.forEach(function(t,e){w[e].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),s=$n,(a=u).classList?a.classList.add(s):a.className+=" "+s,!0},drag:function(t,e){var r=e.datas;if(!e.inputEvent)return!1;r.isDragArea||(r.isDragArea=!0,Zn(t))},dragEnd:function(t,e){if(!e.inputEvent)return!1;var r=e.inputEvent,n=e.datas.isDragArea;n||Zn(t);var i,o=t.state.target,a=r.target;n||t.isMoveableElement(a)||(i=o.contains(a),nr(t,"onClick",rr(t,e,{isDouble:e.isDouble,inputTarget:a,isTarget:o===a,containsTarget:i})))},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){var r=e.inputEvent,n=e.isDragArea,i=e.datas;if(!r)return!1;n||Zn(t);var o,a,s,u,c=i.inputTarget,l=r.target;n||t.isMoveableElement(l)||c===l||(s=-1<(a=(o=t.props.targets).indexOf(l)),u=!1,-1===a&&(u=-1<(a=yt(o,function(t){return t.contains(l)}))),nr(t,"onClickGroup",rr(t,e,{isDouble:e.isDouble,targets:o,inputTarget:l,targetIndex:a,isTarget:s,containsTarget:u})))}},ti={name:"origin",props:{origin:Boolean},render:function(t,e){if(!t.props.origin)return null;var r=t.state,n=r.beforeOrigin,i=r.rotation;return[e.createElement("div",{className:Ce("control","origin"),style:je(i,n),key:"beforeOrigin"})]}};function ei(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var ri={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number},dragStart:function(o,a){var t=o.props.scrollContainer,e=void 0===t?o.getContainer():t,r=new oe;a.datas.dragScroll=r;var n=a.isControl?"controlDragger":"targetDragger",s=a.targets;r.on("scroll",function(t){var e=t.container,r=t.direction,n=rr(o,a,{scrollContainer:e,direction:r}),i=s?"onScrollGroup":"onScroll";s&&(n.targets=s),nr(o,i,n)}).on("move",function(t){var e=t.offsetX,r=t.offsetY;o[n].scrollBy(e,r,a.inputEvent,!1)}),r.dragStart(a,{container:e})},checkScroll:function(t,e){var r=e.datas.dragScroll;if(r){var n=t.props,i=n.scrollContainer,o=void 0===i?t.getContainer():i,a=n.scrollThreshold,s=void 0===a?0:a,u=n.getScrollPosition,c=void 0===u?ei:u;return r.drag(e,{container:o,threshold:s,getScrollPosition:function(t){return c({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,pe({},e,{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,pe({},e,{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,pe({},e,{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,pe({},e,{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,pe({},e,{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,pe({},e,{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,pe({},e,{targets:t.props.targets}))}},ni={name:"",props:{target:Object,container:Object,dragArea:Boolean,origin:Boolean,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number}},ii={name:"padding",props:{padding:Object},render:function(t,o){var e=t.props;if(e.dragArea)return[];var r=e.padding||{},n=r.left,i=void 0===n?0:n,a=r.top,s=void 0===a?0:a,u=r.right,c=void 0===u?0:u,l=r.bottom,f=void 0===l?0:l,p=t.state,h=p.renderPoses,d=[p.pos1,p.pos2,p.pos3,p.pos4],g=[];return 0<i&&g.push([0,2]),0<s&&g.push([0,1]),0<c&&g.push([1,3]),0<f&&g.push([2,3]),g.map(function(t,e){var r=t[0],n=t[1],i=Xt([0,0],[100,0],[0,100],[100,100],d[r],d[n],h[r],h[n]);if(i.length)return o.createElement("div",{key:"padding"+e,className:Ce("padding"),style:{transform:"matrix3d("+At(i).join(",")+")"}})})}},oi=[ni,Bn,wr,_n,Yn,qn,jn,Ln,ri,Qn,ii,ti],ai={name:"groupable",props:{defaultGroupRotate:Number,groupable:Boolean},render:function(o,a){var t=o.props.targets||[];o.moveables=[];var e=o.state,s={left:e.left,top:e.top};return t.map(function(t,e){return a.createElement(Mr,{key:"moveable"+e,ref:(i=e,function(t){t&&(r[n][i]=t)}),target:t,origin:!(n="moveables"),parentMoveable:r=o,parentPosition:s});var r,n,i})}};function si(t,o){return Math.max.apply(Math,t.map(function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.max(e[o],r[o],n[o],i[o])}))}function ui(t,o){return Math.min.apply(Math,t.map(function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.min(e[o],r[o],n[o],i[o])}))}var ci=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.differ=new ce,t.moveables=[],t.rotation=0,t}fe(t,r);var e=t.prototype;return e.updateEvent=function(t){var e=this.state,r=this.props;e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetDragger=mr(this,e.target,"Group"),this.controlDragger=br(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var n=!ur(t.container,r.container);n&&(e.container=r.container);var i=this.differ.update(r.targets),o=i.added,a=i.changed,s=i.removed;(n||o.length||a.length||s.length)&&this.updateRect()},e.checkUpdate=function(){this.updateAbles()},e.updateRect=function(e,t,r){var n,i,o,a,s,u,c,l,f,p,h,d,g,v;void 0===r&&(r=!0),this.controlBox&&(this.moveables.forEach(function(t){t.updateRect(e,!1,!1)}),n=this.state,i=this.props,o=n.target||i.target,(!t||""!==e&&i.updateGroup)&&(this.rotation=i.defaultGroupRotate),a=this.rotation,u=(s=function(t,e){if(!t.length)return[0,0,0,0];var o,i,a,n,s,r,u,c=t.map(function(t){return Ze(t.state)}),l=Ee,f=Ee,p=0,h=0,d=Je(e,xe);return d%90?(o=e/180*Math.PI,i=Math.tan(o),a=-1/i,n=[Se,Ee],s=[Se,Ee],c.forEach(function(t){t.forEach(function(t){var e=t[1]-i*t[0],r=t[1]-a*t[0];n[0]=Math.max(n[0],e),n[1]=Math.min(n[1],e),s[0]=Math.max(s[0],r),s[1]=Math.min(s[1],r)})}),n.forEach(function(n){s.forEach(function(t){var e=(t-n)/(i-a),r=i*e+n;l=Math.min(l,e),f=Math.min(f,r)})}),p=si(r=c.map(function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return[Tt(e,-o),Tt(r,-o),Tt(n,-o),Tt(i,-o)]}),0)-ui(r,0),h=si(r,1)-ui(r,1)):(l=ui(c,0),f=ui(c,1),p=si(c,0)-l,h=si(c,1)-f,d%180&&(u=p,p=h,h=u)),[l,f,p,h]}(this.moveables,a))[0],c=s[1],l=s[2],f=s[3],o.style.cssText+="left:0px;top:0px;width:"+l+"px; height:"+f+"px;transform:rotate("+a+"deg)",n.width=l,n.height=f,p=this.getContainer(),d=[(h=Le(this.controlBox.getElement(),o,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||p,n)).left,h.top],g=Ze(h),h.pos1=g[0],h.pos2=g[1],h.pos3=g[2],h.pos4=g[3],h.origin=Bt(d,h.origin),h.beforeOrigin=Bt(d,h.beforeOrigin),(v=h.targetClientRect).top+=c-h.top-n.top,v.left+=u-h.left-n.left,this.updateState(pe({},h,{left:u-h.left,top:c-h.top}),r))},e.triggerEvent=function(t,e){if(-1<t.indexOf("Group"))return r.prototype.triggerEvent.call(this,t,e)},e.updateAbles=function(){r.prototype.updateAbles.call(this,this.props.ables.concat([ai]),"Group")},t.defaultProps=pe({},Mr.defaultProps,{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0}),t}(Mr),li=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}fe(e,t);var r=e.prototype;return r.render=function(){var t=this.props.ables||[],e=this.props.target||this.props.targets,r=mt(e);if(r&&1<e.length){var n=pe({},this.props,{target:null,targets:e,ables:oi.concat([ai],t)});return I(ci,pe({key:"group",ref:m(this,"moveable")},n))}var i=r?e[0]:e;return I(Mr,pe({key:"single",ref:m(this,"moveable")},pe({},this.props,{target:i,ables:oi.concat(t)})))},r.isMoveableElement=function(t){return this.moveable.isMoveableElement(t)},r.dragStart=function(t){this.moveable.dragStart(t)},r.isInside=function(t,e){return this.moveable.isInside(t,e)},r.hitTest=function(t){return this.moveable.hitTest(t)},r.updateRect=function(){this.moveable.updateRect()},r.updateTarget=function(){this.moveable.updateTarget()},r.isDragging=function(){return this.moveable.isDragging()},r.getRect=function(){return this.moveable.getRect()},r.request=function(t,e){return this.moveable.request(t,e)},r.destroy=function(){this.moveable.componentWillUnmount()},e}(L),fi=function(r){function t(t){var e=r.call(this,t)||this;return e.state={},e.state=e.props,e}return i(t,r),t.prototype.render=function(){return t=I(li,s({ref:m(this,"moveable")},this.state)),e=this.state.parentElement,I(V,{element:t,container:e});var t,e},t}(H),pi=["draggable","resizable","scalable","rotatable","warpable","pinchable","snappable","origin","target","edge","throttleDrag","throttleDragRotate","throttleResize","throttleScale","throttleRotate","keepRatio","dragArea","pinchThreshold","snapCenter","snapThreshold","horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","className","renderDirections","scrollable","getScrollPosition","scrollContainer","scrollThreshold","baseDirection","snapElement","snapVertical","snapHorizontal","snapGap","isDisplaySnapDigit","snapDigit","zoom","triggerAblesSimultaneously","padding","snapDistFormat","dragTarget"],hi=["dragStart","drag","dragEnd","resizeStart","resize","resizeEnd","scaleStart","scale","scaleEnd","rotateStart","rotate","rotateEnd","warpStart","warp","warpEnd","pinchStart","pinch","pinchEnd","dragGroupStart","dragGroup","dragGroupEnd","resizeGroupStart","resizeGroup","resizeGroupEnd","scaleGroupStart","scaleGroup","scaleGroupEnd","rotateGroupStart","rotateGroup","rotateGroupEnd","pinchGroupStart","pinchGroup","pinchGroupEnd","click","clickGroup","scroll","scrollGroup","renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd","snap"],di=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging"],gi=function(a){function t(t,e){void 0===e&&(e={});var r=a.call(this)||this;r.tempElement=document.createElement("div");var n=s({container:t},e),i={};hi.forEach(function(e){i[("on "+e).replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})]=function(t){return r.trigger(e,t)}}),Z(I(fi,s({ref:m(r,"innerMoveable"),parentElement:t},n,i)),r.tempElement);var o=n.target;return p(o)&&1<o.length&&r.updateRect(),r}i(t,a);var e=t.prototype;return e.setState=function(t,e){this.innerMoveable.setState(t,e)},e.destroy=function(){Z(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.moveable},t=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,r,a):i(e,r))||a);return 3<o&&a&&Object.defineProperty(e,r,a),a}([r(di,function(t,n){t[n]||(t[n]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.getMoveable();if(r&&r[n])return r[n].apply(r,t)})}),r(pi,function(t,r){Object.defineProperty(t,r,{get:function(){return this.getMoveable().props[r]},set:function(t){var e;this.setState(((e={})[r]=t,e))},enumerable:!0,configurable:!0})})],t)}(t),vi={__proto__:null,default:gi,PROPERTIES:pi,EVENTS:hi,METHODS:di};for(var mi in vi)gi[mi]=vi[mi];return gi});
//# sourceMappingURL=moveable.min.js.map
