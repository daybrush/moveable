/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable.git
version: 0.24.3
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Moveable=n()}(this,function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function i(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var u=function(){return(u=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function C(n,r){return function(t){t&&(n[r]=t)}}function r(r,e){return function(t){var n=t.prototype;r.forEach(function(t){e(n,t)})}}var b=function(){function t(){this.keys=[],this.values=[]}var n=t.prototype;return n.get=function(t){return this.values[this.keys.indexOf(t)]},n.set=function(t,n){var r=this.keys,e=this.values,i=r.indexOf(t),o=-1===i?r.length:i;r[o]=t,e[o]=n},t}(),x=function(){function t(){this.object={}}var n=t.prototype;return n.get=function(t){return this.object[t]},n.set=function(t,n){this.object[t]=n},t}(),S="function"==typeof Map,o=function(){function t(){}var n=t.prototype;return n.connect=function(t,n){this.prev=t,this.next=n,t&&(t.next=this),n&&(n.prev=this)},n.disconnect=function(){var t=this.prev,n=this.next;t&&(t.next=n),n&&(n.prev=t)},n.getIndex=function(){for(var t=this,n=-1;t;)t=t.prev,++n;return n},t}();var E=function(){function t(t,n,r,e,i,o,a,s){this.prevList=t,this.list=n,this.added=r,this.removed=e,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var n=t.prototype;return Object.defineProperty(n,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(n,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),n.caculateOrdered=function(){var t,r,s,u,n=(t=this.changedBeforeAdded,r=this.fixed,s=[],u=[],t.forEach(function(t){var n=t[0],r=t[1],e=new o;s[n]=e,u[r]=e}),s.forEach(function(t,n){t.connect(s[n-1])}),t.filter(function(t,n){return!r[n]}).map(function(t,n){var r=t[0],e=t[1];if(r===e)return[0,0];var i=s[r],o=u[e-1],a=i.getIndex();return i.disconnect(),o?i.connect(o,o.next):i.connect(void 0,s[0]),[a,i.getIndex()]})),l=this.changed,c=[];this.cacheOrdered=n.filter(function(t,n){var r=t[0],e=t[1],i=l[n],o=i[0],a=i[1];if(r!==e)return c.push([o,a]),!0}),this.cachePureChanged=c},t}();function l(t,n,r){var e=S?Map:r?x:b,i=r||function(t){return t},o=[],a=[],s=[],u=t.map(i),l=n.map(i),c=new e,p=new e,f=[],d=[],h={},g=[],v=0,m=0;return u.forEach(function(t,n){c.set(t,n)}),l.forEach(function(t,n){p.set(t,n)}),u.forEach(function(t,n){var r=p.get(t);void 0===r?(++m,a.push(n)):h[r]=m}),l.forEach(function(t,n){var r=c.get(t);void 0===r?(o.push(n),++v):(s.push([r,n]),m=h[n]||0,f.push([r-m,n-v]),d.push(n===r),r!==n&&g.push([r,n]))}),a.reverse(),new E(t,n,o,a,g,s,f,d)}var t=function(){function t(t,n){void 0===t&&(t=[]),this.findKeyCallback=n,this.list=[].slice.call(t)}return t.prototype.update=function(t){var n=[].slice.call(t),r=l(this.list,n,this.findKeyCallback);return this.list=n,r},t}(),n="string",a="number",s="undefined";function c(t){return typeof t===n}function p(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(t,n,r){return""+n+e+r.toLowerCase()})}var f=function(t,n){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function d(t,n){function r(){this.constructor=t}f(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var h=function(){return(h=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function g(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++)n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i])&&(r[e[i]]=t[e[i]]);return r}function v(t,n){if(t===n)return!1;for(var r in t)if(!(r in n))return!0;for(var r in n)if(t[r]!==n[r])return!0;return!1}function m(i,o){var a=Object.keys(i),r=Object.keys(o),t=l(a,r,function(t){return t}),e={},s={},u={};return t.added.forEach(function(t){var n=r[t];e[n]=o[n]}),t.removed.forEach(function(t){var n=a[t];s[n]=i[n]}),t.maintained.forEach(function(t){var n=t[0],r=a[n],e=[i[r],o[r]];i[r]!==o[r]&&(u[r]=e)}),{added:e,removed:s,changed:u}}function y(t){t.forEach(function(t){t()})}function M(t){var n=0;return t.map(function(t){return null==t?"$compat"+ ++n:""+t})}function D(t,n,r,e){return c(t)||typeof t===a?new B("text_"+t,n,r,e,null,{}):new("string"==typeof t.type?T:t.type.prototype.render?N:I)(t.type,n,r,e,t.ref,t.props)}function w(t){var r=[];return t.forEach(function(t){var n;r=r.concat((n=t,Array.isArray(n)?w(t):t))}),r}function R(t){var n=t.className,r=g(t,["className"]);return null!=n&&(r.class=n),delete r.style,delete r.children,r}function z(t,n){if(!n)return t;for(var r in n)typeof t[r]===s&&(t[r]=n[r]);return t}function P(t,n){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];var i=n||{},o=i.key,a=i.ref,s=g(i,["key","ref"]);return{type:t,key:o,ref:a,props:h(h({},s),{children:w(r).filter(function(t){return null!=t&&!1!==t})})}}var O=function(){function t(t,n,r,e,i,o){void 0===o&&(o={}),this.type=t,this.key=n,this.index=r,this.container=e,this.ref=i,this.props=o,this._providers=[]}var n=t.prototype;return n._should=function(t,n){return!0},n._update=function(t,n,r,e){if(this.base&&!c(n)&&!e&&!this._should(n.props,r))return!1;this.original=n,this._setState(r);var i=this.props;return c(n)||(this.props=n.props,this.ref=n.ref),this._render(t,this.base?i:{},r),!0},n._mounted=function(){var t=this.ref;t&&t(this.base)},n._setState=function(t){},n._updated=function(){var t=this.ref;t&&t(this.base)},n._destroy=function(){var t=this.ref;t&&t(null)},t}();function G(t){var n={},r={};for(var e in t)0===e.indexOf("on")?r[e.replace("on","").toLowerCase()]=t[e]:n[e]=t[e];return{attributes:n,events:r}}var B=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}d(n,t);var r=n.prototype;return r._render=function(t){var n=this,r=!this.base;return r&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){r?n._mounted():n._updated()}),!0},r._unmount=function(){this.base.parentNode.removeChild(this.base)},n}(O),T=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.events={},t}d(t,n);var r=t.prototype;return r.addEventListener=function(t,n){var r=this.events;r[t]=function(t){t.nativeEvent=t,n(t)},this.base.addEventListener(t,r[t])},r.removeEventListener=function(t){var n=this.events;this.base.removeEventListener(t,n[t]),delete n[t]},r._should=function(t){return v(this.props,t)},r._render=function(t,n){var r=this,e=!this.base;e&&(this.base=this.props.portalContainer||document.createElement(this.type)),q(this,this._providers,this.props.children,t,null);var i=this.base,o=G(n),a=o.attributes,s=o.events,u=G(this.props),l=u.attributes,c=u.events;return function(t,n,r){var e=m(t,n),i=e.added,o=e.removed,a=e.changed;for(var s in i)r.setAttribute(s,i[s]);for(var s in a)r.setAttribute(s,a[s][1]);for(var s in o)r.removeAttribute(s)}(R(a),R(l),i),function(t,n,r){var e=m(t,n),i=e.added,o=e.removed,a=e.changed;for(var s in o)r.removeEventListener(s);for(var s in i)r.addEventListener(s,i[s]);for(var s in a)r.removeEventListener(s),r.addEventListener(s,a[s][1]);for(var s in o)r.removeEventListener(s)}(s,c,this),function(t,n,r){var e=r.style,i=m(t,n),o=i.added,a=i.removed,s=i.changed;for(var u in o){var l=p(u,"-");e.setProperty?e.setProperty(l,o[u]):e[l]=o[u]}for(var u in s){l=p(u,"-");e.setProperty?e.setProperty(l,s[u][1]):e[l]=s[u][1]}for(var u in a){l=p(u,"-");e.removeProperty?e.removeProperty(l):e[l]=""}}(n.style||{},this.props.style||{},i),t.push(function(){e?r._mounted():r._updated()}),!0},r._unmount=function(){var t=this.events,n=this.base;for(var r in t)n.removeEventListener(r,t[r]);this._providers.forEach(function(t){t._unmount()}),this.events={},this.props.portalContainer||n.parentNode.removeChild(n)},t}(O);function A(t){if(!t)return null;if(t instanceof Node)return t;var n=t._provider._providers;return n.length?A(n[0].base):null}var I=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}d(n,t);var r=n.prototype;return r._render=function(t){var n=this.type(this.props);return q(this,this._providers,n?[n]:[],t),!0},r._unmount=function(){this._providers.forEach(function(t){t._unmount()})},n}(O),k=function(r){function t(t){var n=r.call(this,"container","container",0,null)||this;return n.base=t,n}d(t,r);var n=t.prototype;return n._render=function(){return!0},n._unmount=function(){},t}(O),N=function(a){function t(t,n,r,e,i,o){return void 0===o&&(o={}),a.call(this,t,n,r,e,i,z(o,t.defaultProps))||this}d(t,a);var n=t.prototype;return n._should=function(t,n){return this.base.shouldComponentUpdate(z(t,this.type.defaultProps),n||this.base.state)},n._render=function(t,n,r){var e=this;this.props=z(this.props,this.type.defaultProps);var i=!this.base;i?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var o=this.base,a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),q(this,this._providers,s?[s]:[],t,r,null),t.push(function(){i?(e._mounted(),o.componentDidMount()):(e._updated(),o.componentDidUpdate(n,a))})},n._setState=function(t){t&&(this.base.state=t)},n._unmount=function(){this._providers.forEach(function(t){t._unmount()}),this.base.componentWillUnmount()},t}(O),F=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return!0},n.render=function(){return null},n.setState=function(t,n,r){var e=[],i=this._provider;q(i.container,[i],[i.original],e,h(h({},this.state),t),r)&&(n&&e.push(n),y(e))},n.forceUpdate=function(t){this.setState(this.state,t,!0)},n.componentDidMount=function(){},n.componentDidUpdate=function(t,n){},n.componentWillUnmount=function(){},t}(),Y=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return d(n,t),n.prototype.shouldComponentUpdate=function(t,n){return v(this.props,t)||v(this.state,n)},n}(F),X=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}d(n,t);var r=n.prototype;return r.componentDidMount=function(){var t=this.props,n=t.element,r=t.container;this._portalProvider=new k(r),_(n,r,this._portalProvider)},r.componentDidUpdate=function(){var t=this.props;_(t.element,t.container,this._portalProvider)},r.componentWillUnmount=function(){_(null,this.props.container,this._portalProvider),this._portalProvider=null},n}(Y);function j(i,a,o){var s=o.map(function(t){return c(t)?null:t.key}),t=l(M(a.map(function(t){return t.key})),M(s),function(t){return t});t.removed.forEach(function(t){a.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var n=t[0],r=t[1],e=a.splice(n,1)[0];a.splice(r,0,e);var i=A(e.base),o=A(a[r+1]&&a[r+1].base);i&&i.parentNode.insertBefore(i,o)}),t.added.forEach(function(t){a.splice(t,0,D(o[t],s[t],t,i))});var n=t.maintained.filter(function(t){t[0];var n=t[1],r=o[n],e=a[n];return(c(r)?"text_"+r:r.type)!==e.type?(e._unmount(),a.splice(n,1,D(r,s[n],n,i)),!0):(e.index=n,!1)});return function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)e[i]=o[a];return e}(t.added,n.map(function(t){t[0];return t[1]}))}function q(i,o,r,e,a,s){var t=j(i,o,r),n=o.filter(function(t,n){return t._update(e,r[n],a,s)}),u=function t(n){if(!n)return null;var r=n.base;return r instanceof Node?r:t(n.container)}(i);return u&&t.reverse().forEach(function(t){var n,r=o[t],e=A(r.base);e&&(u===e||e.parentNode||(n=function(t,n){for(var r=t._providers,e=r.length,i=n.index+1;i<e;++i){var o=A(r[i].base);if(o)return o}return null}(i,r),u.insertBefore(e,n)))}),0<n.length}function _(t,n,r){void 0===r&&(r=n.__REACT_COMPAT__);var e,i,o,a,s=!!r;return r=r||new k(n),i=t?[t]:[],a=[],q(e=r,e._providers,i,a,o),y(a),s||(n.__REACT_COMPAT__=r),r}function W(t,n,r){var e=n.__REACT_COMPAT__;t&&!e&&(n.innerHTML=""),_(t,n,e),r&&r()}var L="simple-1.1.0";function H(t,n){for(var r=t.length,e=0;e<r;++e)if(n(t[e],e))return!0;return!1}function V(t,n){for(var r=t.length,e=0;e<r;++e)if(n(t[e],e))return t[e];return null}function U(t,n){try{return new RegExp(t,"g").exec(n)}catch(t){return null}}function Z(t){return t.replace(/_/g,".")}function $(t,i){var o=null,a="-1";return H(t,function(t){var n,r,e=U("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",i);return e&&!t.brand&&(o=t,a=e[3]||"-1",t.versionAlias?a=t.versionAlias:t.versionTest&&(n=t.versionTest.toLowerCase(),r=U("("+n+")((?:\\/|\\s|:)([0-9|\\.|_]+))",i),a=(r?r[3]:"")||a),a=Z(a),1)}),{preset:o,version:a}}function K(t,r){var e={brand:"",version:"-1"};return H(t,function(t){var n=J(r,t);return n&&(e.brand=t.id,e.version=t.versionAlias||n.version,"-1"!==e.version)}),e}function J(t,r){return V(t,function(t){var n=t.brand;return U(""+r.test,n.toLowerCase())})}var Q=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],tt=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],nt=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],rt=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],et=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function it(t){var n,r=function(t){var n=t;if(void 0===n){if("undefined"==typeof navigator||!navigator)return"";n=navigator.userAgent||""}return n.toLowerCase()}(t),e=!!/mobi/g.exec(r),i={name:"unknown",version:"-1",majorVersion:-1,webview:!!$(rt,r).preset,chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},o={name:"unknown",version:"-1",majorVersion:-1},a=$(Q,r),s=a.preset,u=a.version,l=$(et,r),c=l.preset,p=l.version,f=$(tt,r);return i.chromium=!!f.preset,i.chromiumVersion=f.version,i.chromium||(n=$(nt,r),i.webkit=!!n.preset,i.webkitVersion=n.version),c&&(o.name=c.id,o.version=p,o.majorVersion=parseInt(p,10)),s&&(i.name=s.id,i.version=u,i.webview&&"ios"===o.name&&"safari"!==i.name&&(i.webview=!1)),i.majorVersion=parseInt(i.version,10),{browser:i,os:o,isMobile:e,isHints:!1}}function ot(t){return void 0===t&&function(){if("undefined"!=typeof navigator&&navigator&&navigator.userAgentData){var t=navigator.userAgentData,n=t.brands||t.uaList;return n&&n.length}}()?function(t){var n=navigator.userAgentData,r=(n.uaList||n.brands).slice(),e=n.mobile||!1,i=r[0],o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!K(rt,r).brand},a={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&H(nt,function(t){return J(r,t)});var s,u,l,c=K(tt,r);o.chromium=!!c.brand,o.chromiumVersion=c.version,o.chromium||(s=K(nt,r),o.webkit=!!s.brand,o.webkitVersion=s.version),t&&(u=t.platform.toLowerCase(),l=V(et,function(t){return new RegExp(""+t.test,"g").exec(u)}),a.name=l?l.id:u,a.version=t.platformVersion);var p=K(Q,r);return p.brand&&(o.name=p.brand,o.version=t?t.uaFullVersion:p.version),"Linux armv8l"===navigator.platform?a.name="android":o.webkit&&(a.name=e?"ios":"mac"),"ios"===a.name&&o.webview&&(o.version="-1"),a.version=Z(a.version),o.version=Z(o.version),a.majorVersion=parseInt(a.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:a,isMobile:e,isHints:!0}}():it(t)}function at(n,r){return function(t){t&&(n[r]=t)}}function st(n,r,e){return function(t){t&&(n[r][e]=t)}}var ut="function",lt="object",ct="string",pt="undefined",ft=['"',"'",'\\"',"\\'"],dt=1e-7,ht={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,n){return t*n/100},vw:function(t,n){return void 0===n&&(n=window.innerWidth),t/100*n},vh:function(t,n){return void 0===n&&(n=window.innerHeight),t/100*n},vmax:function(t,n){return void 0===n&&(n=Math.max(window.innerWidth,window.innerHeight)),t/100*n},vmin:function(t,n){return void 0===n&&(n=Math.min(window.innerWidth,window.innerHeight)),t/100*n}};function gt(t){return typeof t===pt}function vt(t){return t&&typeof t===lt}function mt(t){return Array.isArray(t)}function bt(t){return typeof t===ct}function xt(t){return typeof t===ut}function St(t,n,r,e){for(var i=r;i<e;++i){var o=n[i].trim();if(o===t)return i;var a=i;if("("===o?a=St(")",n,i+1,e):-1<ft.indexOf(o)&&(a=St(o,n,i+1,e)),-1===a)break;i=a}return-1}function Et(t,n){for(var r=new RegExp("(\\s*"+(n||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),e=t.split(r).filter(Boolean),i=e.length,o=[],a=[],s=0;s<i;++s){var u=e[s].trim(),l=s;if("("===u)l=St(")",e,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<ft.indexOf(u))l=St(u,e,s+1,i);else if(u===n){a.length&&(o.push(a.join("")),a=[]);continue}}-1===l&&(l=i-1),a.push(e.slice(s,l+1).join("")),s=l}return a.length&&o.push(a.join("")),o}function yt(t){return Et(t,"")}function Mt(t){return Et(t,",")}function Ct(t){var n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!n||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]}}function Dt(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var r=n[1],e=n[2];return{prefix:r,unit:n[3],value:parseFloat(e)}}function wt(t,n,r){void 0===r&&(r=-1);for(var e=t.length,i=0;i<e;++i)if(n(t[i],i,t))return i;return r}function Rt(t){if(Object.keys)return Object.keys(t);var n=[];for(var r in n)n.push(r);return n}function zt(t,n){var r=Dt(t),e=r.value,i=r.unit;if(vt(n)){var o=n[i];if(o){if(xt(o))return o(e);if(ht[i])return ht[i](e,o)}}else if("%"===i)return e*n/100;return ht[i]?ht[i](e):e}function Pt(t,n){return n?Math.round(t/n)*n:t}function Ot(t,r,e){return[[Pt(r[0],dt),Pt(r[0]*t[1]/t[0],dt)],[Pt(r[1]*t[0]/t[1],dt),Pt(r[1],dt)]].filter(function(t){return t.every(function(t,n){return e?t<=r[n]:t>=r[n]})})[0]||t}function Gt(t,o,a,n){if(!n)return t.map(function(t,n){return r=t,e=o[n],i=a[n],Math.max(e,Math.min(r,i));var r,e,i});var r=t[0],e=t[1],i=Ot(t,o,!1),s=i[0],u=i[1],l=Ot(t,a,!0),c=l[0],p=l[1];return r<s||e<u?(r=s,e=u):(c<r||p<e)&&(r=c,e=p),[r,e]}function Bt(t){for(var n=t.length,r=0,e=n-1;0<=e;--e)r+=t[e];return n?r/n:0}function Tt(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=Math.atan2(e,r);return 0<=i?i:i+2*Math.PI}function At(t){var r,n=(r=t,[0,1].map(function(n){return Bt(r.map(function(t){return t[n]}))})),e=Tt(n,t[0]),i=Tt(n,t[1]);return e<i&&i-e<Math.PI||i<e&&i-e<-Math.PI?1:-1}function It(t,n){return Math.sqrt(Math.pow((n?n[0]:0)-t[0],2)+Math.pow((n?n[1]:0)-t[1],2))}function kt(t,n){return t.classList?t.classList.contains(n):!!t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}var Nt=1e-7;function Ft(t,n){return n?Math.round(t/n)*n:t}function Yt(t,n,r){void 0===r&&(r=Math.sqrt(t.length));for(var e=t.slice(),i=0;i<r;++i)e[i*r+n-1]=0,e[(n-1)*r+i]=0;return e[(n-1)*(r+1)]=1,e}function Xt(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),e=sn(n),i=0;i<n;++i){var o=n*i+i;if(!Ft(r[o],Nt))for(var a=i+1;a<n;++a)if(r[n*i+a]){!function(t,n,r,e,i){for(var o=0;o<i;++o){var a=r+o*i,s=e+o*i,u=t[a],l=n[a];t[a]=t[s],t[s]=u,n[a]=n[s],n[s]=l}}(r,e,i,a,n);break}if(!Ft(r[o],Nt))return[];!function(t,n,r,e,i){for(var o=0;o<e;++o){var a=r+o*e;t[a]/=i,n[a]/=i}}(r,e,i,n,r[o]);for(a=0;a<n;++a){var s=a,u=r[a+i*n];Ft(u,Nt)&&i!==a&&function(t,n,r,e,i,o){for(var a=0;a<i;++a){var s=r+a*i,u=e+a*i;t[s]+=t[u]*o,n[s]+=n[u]*o}}(r,e,s,i,n,-u)}}return e}function jt(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=[],e=t[n*n-1],i=0;i<n-1;++i)r[i]=t[n*(n-1)+i]/e;return r[n-1]=0,r}function qt(t,n){for(var r=sn(n),e=0;e<n-1;++e)r[n*(n-1)+e]=t[e]||0;return r}function _t(t,n){for(var r=t.slice(),e=t.length;e<n-1;++e)r[e]=0;return r[n-1]=1,r}function Wt(t,n,r){if(void 0===n&&(n=Math.sqrt(t.length)),n===r)return t;for(var e=sn(r),i=Math.min(n,r),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)e[o*r+a]=t[o*n+a];e[(o+1)*r-1]=t[(o+1)*n-1],e[(r-1)*r+o]=t[(n-1)*n+o]}return e[r*r-1]=t[n*n-1],e}function Lt(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var e=sn(n);return t.forEach(function(t){e=Ht(e,t,n)}),e}function Ht(t,n,r){void 0===r&&(r=Math.sqrt(t.length));var e=[],i=t.length/r,o=n.length/i;if(!i)return n;if(!o)return t;for(var a=0;a<r;++a)for(var s=0;s<o;++s)for(var u=e[s*r+a]=0;u<i;++u)e[s*r+a]+=t[u*r+a]*n[s*i+u];return e}function Vt(t,n){for(var r=Math.min(t.length,n.length),e=t.slice(),i=0;i<r;++i)e[i]=e[i]+n[i];return e}function Ut(t,n){for(var r=Math.min(t.length,n.length),e=t.slice(),i=0;i<r;++i)e[i]=e[i]-n[i];return e}function Zt(t,n){return void 0===n&&(n=6===t.length),n?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function $t(t,n){return void 0===n&&(n=9===t.length),n?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Kt(t,n,r){void 0===r&&(r=n.length);var e=Ht(t,n,r),i=e[r-1];return e.map(function(t){return t/i})}function Jt(t,n){return Ht(t,[1,0,0,0,0,Math.cos(n),Math.sin(n),0,0,-Math.sin(n),Math.cos(n),0,0,0,0,1],4)}function Qt(t,n){return Ht(t,[Math.cos(n),0,-Math.sin(n),0,0,1,0,0,Math.sin(n),0,Math.cos(n),0,0,0,0,1],4)}function tn(t,n){return Ht(t,an(n,4))}function nn(t,n){var r=n[0],e=void 0===r?1:r,i=n[1],o=void 0===i?1:i,a=n[2];return Ht(t,[e,0,0,0,0,o,0,0,0,0,void 0===a?1:a,0,0,0,0,1],4)}function rn(t,n){return Kt(an(n,3),_t(t,3))}function en(t,n){var r=n[0],e=void 0===r?0:r,i=n[1],o=void 0===i?0:i,a=n[2];return Ht(t,[1,0,0,0,0,1,0,0,0,0,1,0,e,o,void 0===a?0:a,1],4)}function on(t,n){return Ht(t,n,4)}function an(t,n){var r=Math.cos(t),e=Math.sin(t),i=sn(n);return i[0]=r,i[1]=e,i[n]=-e,i[n+1]=r,i}function sn(t){for(var n=t*t,r=[],e=0;e<n;++e)r[e]=e%(t+1)?0:1;return r}function un(t,n){for(var r=sn(n),e=Math.min(t.length,n-1),i=0;i<e;++i)r[(n+1)*i]=t[i];return r}function ln(t,n){for(var r=sn(n),e=Math.min(t.length,n-1),i=0;i<e;++i)r[n*(n-1)+i]=t[i];return r}function cn(t,n,r,e,i,o,a,s){var u=t[0],l=t[1],c=n[0],p=n[1],f=r[0],d=r[1],h=e[0],g=e[1],v=i[0],m=i[1],b=o[0],x=o[1],S=a[0],E=a[1],y=s[0],M=s[1],C=Xt([u,0,c,0,f,0,h,0,l,0,p,0,d,0,g,0,1,0,1,0,1,0,1,0,0,u,0,c,0,f,0,h,0,l,0,p,0,d,0,g,0,1,0,1,0,1,0,1,-v*u,-m*u,-b*c,-x*c,-S*f,-E*f,-y*h,-M*h,-v*l,-m*l,-b*p,-x*p,-S*d,-E*d,-y*g,-M*g],8);if(!C.length)return[];var D=Ht(C,[v,m,b,x,S,E,y,M],8);return D[8]=1,Wt(function(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=[],e=0;e<n;++e)for(var i=0;i<n;++i)r[i*n+e]=t[n*e+i];return r}(D),3,4)}var pn=['"',"'",'\\"',"\\'"];function fn(t,n,r,e){for(var i=r;i<e;++i){var o=n[i].trim();if(o===t)return i;var a=i;if("("===o?a=fn(")",n,i+1,e):-1<pn.indexOf(o)&&(a=fn(o,n,i+1,e)),-1===a)break;i=a}return-1}function dn(t,n){for(var r=new RegExp("(\\s*"+(n||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),e=t.split(r).filter(Boolean),i=e.length,o=[],a=[],s=0;s<i;++s){var u=e[s].trim(),l=s;if("("===u)l=fn(")",e,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<pn.indexOf(u))l=fn(u,e,s+1,i);else if(u===n){a.length&&(o.push(a.join("")),a=[]);continue}}-1===l&&(l=i-1),a.push(e.slice(s,l+1).join("")),s=l}return a.length&&o.push(a.join("")),o}function hn(t){return dn(t,",")}function gn(t){return vn(mn(t))}function vn(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(t){var n=t.matrixFunction,r=t.functionValue;n&&(e=n(e,r))}),e}function mn(t){var n;return(n=t,Array.isArray(n)?t:dn(t,"")).map(function(t){var n,r,e,i,o,a,s,u,l,c,p,f,d=!(n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t))||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]},h=d.prefix,g=d.value,v=null,m=h,b="";return"translate"===h||"translateX"===h||"translate3d"===h?(v=en,b=[(r=hn(g).map(function(t){return parseFloat(t)}))[0],void 0===(e=r[1])?0:e,void 0===(i=r[2])?0:i]):"translateY"===h?(v=en,b=[0,parseFloat(g),0]):"translateZ"===h?(v=en,b=[0,0,parseFloat(g)]):"scale"===h||"scale3d"===h?(v=nn,b=[u=(o=hn(g).map(function(t){return parseFloat(t)}))[0],void 0===(a=o[1])?u:a,void 0===(s=o[2])?1:s]):"scaleX"===h?(v=nn,b=[u=parseFloat(g),1,1]):"scaleY"===h?(v=nn,b=[1,parseFloat(g),1]):"scaleZ"===h?(v=nn,b=[1,1,parseFloat(g)]):"rotate"===h||"rotateZ"===h||"rotateX"===h||"rotateY"===h?(c=(l=function(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var r=n[1],e=n[2];return{prefix:r,unit:n[3],value:parseFloat(e)}}(g)).unit,p=l.value,"rotate"===h||"rotateZ"===h?(m="rotateZ",v=tn):"rotateX"===h?v=Jt:"rotateY"===h&&(v=Qt),b="rad"===c?p:p*Math.PI/180):"matrix3d"===h?(v=on,b=hn(g).map(function(t){return parseFloat(t)})):"matrix"===h?(v=on,b=[(f=hn(g).map(function(t){return parseFloat(t)}))[0],f[1],0,0,f[2],f[3],0,0,0,0,1,0,f[4],f[5],0,1]):m="",{name:h,functionName:m,value:g,matrixFunction:v,functionValue:b}})}function bn(t,n,r){void 0===r&&(r=-1);for(var e=t.length,i=0;i<e;++i)if(n(t[i],i,t))return i;return r}function xn(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=Math.atan2(e,r);return 0<=i?i:i+2*Math.PI}function Sn(t){return[0,1].map(function(n){return function(t){for(var n=t.length,r=0,e=n-1;0<=e;--e)r+=t[e];return n?r/n:0}(t.map(function(t){return t[n]}))})}function En(t){var n=Sn(t),r=xn(n,t[0]),e=xn(n,t[1]);return r<e&&e-r<Math.PI||e<r&&e-r<-Math.PI?1:-1}function yn(t,n){return Math.sqrt(Math.pow((n?n[0]:0)-t[0],2)+Math.pow((n?n[1]:0)-t[1],2))}function Mn(e){return e.length<3?0:Math.abs(function(t){for(var n=0,r=t.length-1;0<=r;--r)n+=t[r];return n}(e.map(function(t,n){var r=e[n+1]||e[0];return t[0]*r[1]-r[0]*t[1]})))/2}function Cn(t,n){var r=n.width,e=n.height,i=n.left,o=n.top,a=Dn(t),s=a.minX,u=a.minY,l=a.maxX,c=a.maxY,p=r/(l-s),f=e/(c-u);return t.map(function(t){return[i+(t[0]-s)*p,o+(t[1]-u)*f]})}function Dn(t){var n=t.map(function(t){return t[0]}),r=t.map(function(t){return t[1]});return{minX:Math.min.apply(Math,n),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,n),maxY:Math.max.apply(Math,r)}}function wn(t,n,r){var i=t[0],o=t[1],e=Dn(n),a=e.minX,s=e.minY,u=e.maxX,l=e.maxY,c=[[a,o],[u,o]],p=[[i,s],[i,l]],f=Rn(c[0],c[1]),d=Rn(p[0],p[1]),h=On(n),g=[],v=[];return h.forEach(function(t){var n=Rn(t[0],t[1]),r=Pn(zn(f,n),[c,t]),e=Pn(zn(d,n),[p,t]);1===r.length&&t[0][1]===o||g.push.apply(g,r),1===e.length&&t[0][0]===i||v.push.apply(v,e),n[0]||g.push.apply(g,r),n[1]||v.push.apply(v,e)}),!r&&(-1<bn(g,function(t){return t[0]===i})||-1<bn(v,function(t){return t[1]===o}))||!!(g.filter(function(t){return t[0]>i}).length%2&&v.filter(function(t){return t[1]>o}).length%2)}function Rn(t,n){var r=t[0],e=t[1],i=n[0],o=n[1];if(r===i&&e===o)return[0,0,0];if(r===i)return[1,0,-r];if(e===o)return[0,1,-e];var a=(i-r)/(e-o);return[1,a,-r-a*e]}function zn(t,n){var r,e,i=t[0],o=t[1],a=t[2],s=n[0],u=n[1],l=n[2],c=0===i&&0===s,p=0===o&&0===u;if(c&&p)return[];if(c){var f=-a/o;return f!=-l/u?[]:[[-1/0,f],[1/0,f]]}if(p){var d=-a/i;return d!=-l/s?[]:[[d,-1/0],[d,1/0]]}return 0!==i?0!==s?0!==o?0!==u?[[r=(o*l-u*a)/(u*i-o*s),e=-(i*r+a)/o]]:[[r=-l/s,e=-(i*r+a)/o]]:[[r=-a/i,e=-(s*r+l)/u]]:[[r=-(o*(e=-l/u)+a)/i,e]]:[[r=-(u*(e=-a/o)+l)/s,e]]}function Pn(t,n){var r=n.map(function(n){return[0,1].map(function(t){return[Math.min(n[0][t],n[1][t]),Math.max(n[0][t],n[1][t])]})});if(2===t.length){var e=t[0],i=e[0],o=e[1];if(i===t[1][0]){var a=Math.max.apply(Math,r.map(function(t){return t[1][0]})),s=Math.min.apply(Math,r.map(function(t){return t[1][1]}));return s<a?[]:[[i,a],[i,s]]}if(o===t[1][1]){var u=Math.max.apply(Math,r.map(function(t){return t[0][0]})),l=Math.min.apply(Math,r.map(function(t){return t[0][1]}));return l<u?[]:[[u,o],[l,o]]}}return t.filter(function(n){return r.every(function(t){return t[0][0]<=n[0]&&n[0]<=t[0][1]&&t[1][0]<=n[1]&&n[1]<=t[1][1]})})}function On(r){return function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)e[i]=o[a];return e}(r.slice(1),[r[0]]).map(function(t,n){return[r[n],t]})}function Gn(t,n){return Mn(function(t,n){var r=t.slice(),s=n.slice();-1===En(r)&&r.reverse(),-1===En(s)&&s.reverse();var u=On(r),l=On(s),e=u.map(function(t){return Rn(t[0],t[1])}),c=l.map(function(t){return Rn(t[0],t[1])}),p=[];e.forEach(function(e,i){var o=u[i],a=[];c.forEach(function(t,n){var r=Pn(zn(e,t),[o,l[n]]);a.push.apply(a,r.map(function(t){return{index1:i,index2:n,pos:t}}))}),a.sort(function(t,n){return yn(o[0],t.pos)-yn(o[0],n.pos)}),p.push.apply(p,a),wn(o[1],s)&&p.push({index1:i,index2:-1,pos:o[1]})}),l.forEach(function(t,e){var i,n;wn(t[1],r)&&(i=!1,-1===(n=bn(p,function(t){return t.index2!==e?!!i:void(i=!0)}))&&(i=!1,n=bn(p,function(t){var n=t.index1,r=t.index2;if(-1!==n||r+1!==e)return!!i;i=!0})),-1===n?p.push({index1:-1,index2:e,pos:t[1]}):p.splice(n,0,{index1:-1,index2:e,pos:t[1]}))});var i=p.map(function(t){return t.pos}),o={};return i.filter(function(t){var n=t[0]+"x"+t[1];return!o[n]&&(o[n]=!0)})}(t,n))}var Bn=function(t,n){return(Bn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};var Tn,An="function"==typeof Map?void 0:(Tn=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++Tn)}),In=function(n){function t(){this.constructor=r}var r,e;function i(t){return void 0===t&&(t=[]),n.call(this,t,An)||this}return Bn(r=i,e=n),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t),i}(t);function kn(t,n){return l(t,n,An)}function Nn(t){return t&&"object"==typeof t}var Fn=function(){return(Fn=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var Yn=function(){function t(){this._events={}}var n=t.prototype;return n.on=function(t,n){if(Nn(t))for(var r in t)this.on(r,t[r]);else this._addEvent(t,n,{});return this},n.off=function(t,n){if(t)if(Nn(t))for(var r in t)this.off(r);else{var e,i;n?!(e=this._events[t])||-1<(i=function(t,n,r){void 0===r&&(r=-1);for(var e=t.length,i=0;i<e;++i)if(n(t[i],i,t))return i;return r}(e,function(t){return t.listener===n}))&&e.splice(i,1):this._events[t]=[]}else this._events={};return this},n.once=function(n,t){var r=this;return t&&this._addEvent(n,t,{once:!0}),new Promise(function(t){r._addEvent(n,t,{once:!0})})},n.emit=function(n,r){var e=this;void 0===r&&(r={});var t=this._events[n];if(!n||!t)return!0;var i=!1;return r.eventType=n,r.stop=function(){i=!0},r.currentTarget=this,function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)e[i]=o[a];return e}(t).forEach(function(t){t.listener(r),t.once&&e.off(n,t.listener)}),!i},n.trigger=function(t,n){return void 0===n&&(n={}),this.emit(t,n)},n._addEvent=function(t,n,r){var e=this._events;e[t]=e[t]||[],e[t].push(Fn({listener:n},r))},t}();var Xn=function(t,n){return(Xn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function jn(t){var n=t.container;return[n.scrollLeft,n.scrollTop]}var qn=function(n){function t(){this.constructor=r}var r,e;function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.startRect=null,t.startPos=[],t.prevTime=0,t.timer=0,t}Xn(r=i,e=n),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t);var o=i.prototype;return o.dragStart=function(t,n){var r=n.container.getBoundingClientRect(),e=r.top,i=r.left,o=r.width,a=r.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:e,left:i,width:o,height:a}},o.drag=function(t,n){var r=this,e=t.clientX,i=t.clientY,o=n.container,a=n.threshold,s=void 0===a?0:a,u=n.throttleTime,l=void 0===u?0:u,c=n.getScrollPosition,p=void 0===c?jn:c,f=this.startRect,d=this.startPos,h=Date.now?Date.now():(new Date).getTime(),g=Math.max(l+this.prevTime-h,0),v=[0,0];if(f.top>i-s?(d[1]>f.top||i<d[1])&&(v[1]=-1):f.top+f.height<i+s&&(d[1]<f.top+f.height||i>d[1])&&(v[1]=1),f.left>e-s?(d[0]>f.left||e<d[0])&&(v[0]=-1):f.left+f.width<e+s&&(d[0]<f.left+f.width||e>d[0])&&(v[0]=1),clearTimeout(this.timer),!v[0]&&!v[1])return!1;if(0<g)return this.timer=window.setTimeout(function(){r.drag(t,n)},g),!1;this.prevTime=h;var m=p({container:o,direction:v});this.trigger("scroll",{container:o,direction:v,inputEvent:t});var b=p({container:o,direction:v}),x=b[0]-m[0],S=b[1]-m[1];return!(!x&&!S)&&(this.trigger("move",{offsetX:v[0]?x:0,offsetY:v[1]?S:0,inputEvent:t}),l&&(this.timer=window.setTimeout(function(){r.drag(t,n)},l)),!0)},o.dragEnd=function(){clearTimeout(this.timer)},i}(Yn);function _n(){return Date.now?Date.now():(new Date).getTime()}function Wn(t,n,r,e){t.addEventListener(n,r,e)}function Ln(t,n,r){t.removeEventListener(n,r)}var Hn=function(t,n){return(Hn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};var Vn=function(){return(Vn=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function Un(t){return 180*(n=[t[0].clientX,t[0].clientY],r=[t[1].clientX,t[1].clientY],e=r[0]-n[0],i=r[1]-n[1],(0<=(o=Math.atan2(i,e))?o:o+2*Math.PI)/Math.PI);var n,r,e,i,o}function Zn(t){return t.touches?function(t){for(var n=Math.min(t.length,2),r=[],e=0;e<n;++e)r.push(Jn(t[e]));return r}(t.touches):[Jn(t)]}function $n(t,n,r){var e=r.length,i=Qn(t,e),o=i.clientX,a=i.clientY,s=i.originalClientX,u=i.originalClientY,l=Qn(n,e),c=l.clientX,p=l.clientY,f=Qn(r,e);return{clientX:s,clientY:u,deltaX:o-c,deltaY:a-p,distX:o-f.clientX,distY:a-f.clientY}}function Kn(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Jn(t){return{clientX:t.clientX,clientY:t.clientY}}function Qn(t,n){void 0===n&&(n=t.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},e=0;e<n;++e){var i=t[e];r.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,r.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,r.clientX+=i.clientX,r.clientY+=i.clientY}return n?{clientX:r.clientX/n,clientY:r.clientY/n,originalClientX:r.originalClientX/n,originalClientY:r.originalClientY/n}:r}var tr=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var n=t.prototype;return n.addClients=function(t){void 0===t&&(t=this.prevClients);var n=this.getPosition(t),r=n.deltaX,e=n.deltaY;return this.movement+=Math.sqrt(r*r+e*e),this.prevClients=t,n},n.getAngle=function(t){return void 0===t&&(t=this.prevClients),Un(t)},n.getRotation=function(t){return void 0===t&&(t=this.prevClients),Un(t)-Un(this.startClients)},n.getPosition=function(t){return $n(t||this.prevClients,this.prevClients,this.startClients)},n.getPositions=function(r){void 0===r&&(r=this.prevClients);var e=this.prevClients;return this.startClients.map(function(t,n){return $n([r[n]],[e[n]],[t])})},n.getMovement=function(t){var n=this.movement;if(!t)return n;var r=Qn(t,this.length),e=Qn(this.prevClients,this.length),i=r.clientX-e.clientX,o=r.clientY-e.clientY;return Math.sqrt(i*i+o*o)+n},n.getDistance=function(t){return void 0===t&&(t=this.prevClients),Kn(t)},n.getScale=function(t){return void 0===t&&(t=this.prevClients),Kn(t)/Kn(this.startClients)},n.move=function(n,r){this.startClients.forEach(function(t){t.clientX-=n,t.clientY-=r}),this.prevClients.forEach(function(t){t.clientX-=n,t.clientY-=r})},t}(),nr=["textarea","input"],rr=function(u){function t(){this.constructor=n}var n,r;function e(t,n){void 0===n&&(n={});var b=u.call(this)||this;b.options={},b.flag=!1,b.pinchFlag=!1,b.datas={},b.isDrag=!1,b.isPinch=!1,b.isMouse=!1,b.isTouch=!1,b.clientStores=[],b.targets=[],b.prevTime=0,b.doubleFlag=!1,b.onDragStart=function(t,n){if(void 0===n&&(n=!0),b.flag||!1!==t.cancelable){var r=b.options,e=r.container,i=r.pinchOutside,o=r.preventRightClick,a=r.preventDefault,s=r.checkInput,u=b.isTouch,l=!b.flag;if(l){var c,p=document.activeElement,f=t.target,d=f.tagName.toLowerCase(),h=-1<nr.indexOf(d),g=f.isContentEditable;if(h||g){if(s||p===f)return!1;if(p&&g&&p.isContentEditable&&p.contains(f))return!1}else{(a||"touchstart"===t.type)&&p&&(c=p.tagName,(p.isContentEditable||-1<nr.indexOf(c))&&p.blur())}if(b.clientStores=[new tr(Zn(t))],b.flag=!0,b.isDrag=!1,b.datas={},o&&(3===t.which||2===t.button))return b.initDrag(),!1;b.doubleFlag=_n()-b.prevTime<200,!1===b.emit("dragStart",Vn({datas:b.datas,inputEvent:t,isTrusted:n,isDouble:b.doubleFlag},b.getCurrentStore().getPosition()))&&b.initDrag(),b.flag&&a&&t.preventDefault()}if(!b.flag)return!1;var v,m=0;if(l&&u&&i&&(m=setTimeout(function(){Wn(e,"touchstart",b.onDragStart,{passive:!1})})),!l&&u&&i&&Ln(e,"touchstart",b.onDragStart),b.flag&&((v=t).touches&&2<=v.touches.length)){if(clearTimeout(m),l&&t.touches.length!==t.changedTouches.length)return;b.pinchFlag||b.onPinchStart(t)}}},b.onDrag=function(t,n){var r,e;b.flag&&(r=Zn(t),e=b.moveClients(r,t,!1),(b.pinchFlag||e.deltaX||e.deltaY)&&b.emit("drag",Vn({},e,{isScroll:!!n,inputEvent:t})),b.pinchFlag&&b.onPinch(t,r),b.getCurrentStore().addClients(r))},b.onDragEnd=function(t){var n,r,e,i,o,a;b.flag&&(r=(n=b.options).pinchOutside,e=n.container,b.isTouch&&r&&Ln(e,"touchstart",b.onDragStart),b.flag=!1,i=b.getCurrentStore().getPosition(),o=_n(),a=!b.isDrag&&b.doubleFlag,b.prevTime=b.isDrag||a?0:o,b.emit("dragEnd",Vn({datas:b.datas,isDouble:a,isDrag:b.isDrag,inputEvent:t},i)),b.pinchFlag&&b.onPinchEnd(t),b.clientStores=[])},b.onBlur=function(){b.onDragEnd()};var r=[].concat(t);b.options=Vn({checkInput:!1,container:1<r.length?window:r[0],preventRightClick:!0,preventDefault:!0,checkWindowBlur:!1,pinchThreshold:0,events:["touch","mouse"]},n);var e,i=b.options,o=i.container,a=i.events,s=i.checkWindowBlur;return b.isTouch=-1<a.indexOf("touch"),b.isMouse=-1<a.indexOf("mouse"),b.targets=r,b.isMouse&&(r.forEach(function(t){Wn(t,"mousedown",b.onDragStart)}),Wn(o,"mousemove",b.onDrag),Wn(o,"mouseup",b.onDragEnd),Wn(o,"contextmenu",b.onDragEnd)),s&&Wn(window,"blur",b.onBlur),b.isTouch&&(e={passive:!1},r.forEach(function(t){Wn(t,"touchstart",b.onDragStart,e)}),Wn(o,"touchmove",b.onDrag,e),Wn(o,"touchend",b.onDragEnd,e),Wn(o,"touchcancel",b.onDragEnd,e)),b}Hn(n=e,r=u),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var i=e.prototype;return i.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,n){return t+n.movement},0)},i.isDragging=function(){return this.isDrag},i.isFlag=function(){return this.flag},i.isPinchFlag=function(){return this.pinchFlag},i.isDoubleFlag=function(){return this.doubleFlag},i.isPinching=function(){return this.isPinch},i.scrollBy=function(t,n,r,e){void 0===e&&(e=!0),this.flag&&(this.clientStores[0].move(t,n),e&&this.onDrag(r,!0))},i.move=function(t,n){var e=t[0],i=t[1],r=this.getCurrentStore().prevClients;return this.moveClients(r.map(function(t){var n=t.clientX,r=t.clientY;return{clientX:n+e,clientY:r+i,originalClientX:n,originalClientY:r}}),n,!0)},i.triggerDragStart=function(t){this.onDragStart(t,!1)},i.setEventDatas=function(t){var n=this.datas;for(var r in t)n[r]=t[r];return this},i.getEventDatas=function(){return this.datas},i.unset=function(){var n=this,t=this.targets,r=this.options.container;this.off(),Ln(window,"blur",this.onBlur),this.isMouse&&(t.forEach(function(t){Ln(t,"mousedown",n.onDragStart)}),Ln(r,"mousemove",this.onDrag),Ln(r,"mouseup",this.onDragEnd),Ln(r,"contextmenu",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){Ln(t,"touchstart",n.onDragStart)}),Ln(r,"touchstart",this.onDragStart),Ln(r,"touchmove",this.onDrag),Ln(r,"touchend",this.onDragEnd),Ln(r,"touchcancel",this.onDragEnd))},i.onPinchStart=function(t){var n,r=this.options.pinchThreshold;this.isDrag&&this.getMovement()>r||(n=new tr(Zn(t)),this.pinchFlag=!0,this.clientStores.splice(0,0,n),!1===this.emit("pinchStart",Vn({datas:this.datas,angle:n.getAngle(),touches:this.getCurrentStore().getPositions()},n.getPosition(),{inputEvent:t}))&&(this.pinchFlag=!1))},i.onPinch=function(t,n){var r;!this.flag||!this.pinchFlag||n.length<2||(r=this.getCurrentStore(),this.isPinch=!0,this.emit("pinch",Vn({datas:this.datas,movement:this.getMovement(n),angle:r.getAngle(n),rotation:r.getRotation(n),touches:r.getPositions(n),scale:r.getScale(n),distance:r.getDistance(n)},r.getPosition(n),{inputEvent:t})))},i.onPinchEnd=function(t){var n,r;this.pinchFlag&&(n=this.isPinch,this.isPinch=!1,this.pinchFlag=!1,r=this.getCurrentStore(),this.emit("pinchEnd",Vn({datas:this.datas,isPinch:n,touches:r.getPositions()},r.getPosition(),{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1)},i.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1},i.getCurrentStore=function(){return this.clientStores[0]},i.moveClients=function(t,n,r){var e=this.getCurrentStore()[r?"addClients":"getPosition"](t);return this.isDrag=!0,Vn({datas:this.datas},e,{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e}(Yn),er=['"',"'",'\\"',"\\'"];function ir(t,n,r,e){for(var i=r;i<e;++i){var o=n[i].trim();if(o===t)return i;var a=i;if("("===o?a=ir(")",n,i+1,e):-1<er.indexOf(o)&&(a=ir(o,n,i+1,e)),-1===a)break;i=a}return-1}function or(t){return function(t,n){for(var r=new RegExp("(\\s*"+(n||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),e=t.split(r).filter(Boolean),i=e.length,o=[],a=[],s=0;s<i;++s){var u=e[s].trim(),l=s;if("("===u)l=ir(")",e,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<er.indexOf(u))l=ir(u,e,s+1,i);else if(u===n){a.length&&(o.push(a.join("")),a=[]);continue}}-1===l&&(l=i-1),a.push(e.slice(s,l+1).join("")),s=l}return a.length&&o.push(a.join("")),o}(t,",")}var ar=function(t){for(var n=5381,r=t.length;r;)n=33*n^t.charCodeAt(--r);return n>>>0};function sr(t,n,r,e){var i,o,a=document.createElement("style");return a.setAttribute("type","text/css"),a.setAttribute("data-styled-id",t),r.nonce&&a.setAttribute("nonce",r.nonce),a.innerHTML=(i=t,o=n,r.original?o:o.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(t,n){var r=n.trim();return(r?or(r):[""]).map(function(t){var n=t.trim();return 0===n.indexOf("@")?n:-1<n.indexOf(":global")?n.replace(/\:global/g,""):-1<n.indexOf(":host")?""+n.replace(/\:host/g,"."+i):n?"."+i+" "+n:"."+i}).join(", ")+" {"})),(e||document.head||document.body).appendChild(a),a}function ur(o){var a,s="rCS"+ar(o).toString(36),u=0;return{className:s,inject:function(t,n){void 0===n&&(n={});var r,e=function(t){if(t&&t.getRootNode){var n=t.getRootNode();if(11===n.nodeType)return n}}(t),i=0===u;return(e||i)&&(r=sr(s,o,n,e)),i&&(a=r),e||++u,{destroy:function(){e?(t.removeChild(r),r=null):(0<u&&--u,0===u&&a&&(a.parentNode.removeChild(a),a=null))}}}}}var lr=function(t,n){return(lr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function cr(t,n){function r(){this.constructor=t}lr(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var pr=function(){return(pr=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var fr=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}cr(t,n);var r=t.prototype;return r.render=function(){var t=this.props,n=t.className,r=void 0===n?"":n,e=(t.cspNonce,t.portalContainer),i=function(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++)n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i])&&(r[e[i]]=t[e[i]]);return r}(t,["className","cspNonce","portalContainer"]),o=this.injector.className,a=this.tag,s={};return-1<L.indexOf("simple")&&e&&(s={portalContainer:e}),P(a,pr({ref:C(this,"element"),"data-styled-id":o,className:r+" "+o},s,i))},r.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},r.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},r.getElement=function(){return this.element},t}(F);function dr(r,t){var e=ur(t);return function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injector=e,t.tag=r,t}return cr(t,n),t}(fr)}var hr=function(t,n){return(hr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function gr(t,n){function r(){this.constructor=t}hr(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var vr=function(){return(vr=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function mr(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)e[i]=o[a];return e}function br(t,n){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+n+'deg);transform-origin: 16px 16px"></path></svg>'}var xr,Sr=ot().browser.webkit,Er=Sr&&(!!(xr=/applewebkit\/([^\s]+)/g.exec(navigator.userAgent.toLowerCase()))&&parseFloat(xr[1])<605),yr="moveable-",Mr="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+(r=br(1,n=t),e=br(2,n),i=45*Math.round(n/45)%180,"cursor:"+(o=135==i?"nwse-resize":45==i?"nesw-resize":90==i?"ew-resize":"ns-resize")+";cursor: url('"+r+"') 16 16, "+o+";cursor: -webkit-image-set(url('"+r+"') 1x, url('"+e+"') 2x) 16 16, "+o+";")+"\n}\n";var n,r,e,i,o}).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(Er?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n",Cr=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Dr=1e-7,wr=Math.pow(10,10),Rr=-wr,zr=["n","w","s","e","nw","ne","sw","se"],Pr={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},Or={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Gr=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager"];function Br(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(t){return t.split(" ").map(function(t){return t?""+n+t:""}).join(" ")}).join(" ")}.apply(void 0,mr([yr],t))}function Tr(t,n,r){return Lt(n,ln(r,n),t,ln(r.map(function(t){return-t}),n))}function Ar(s){return Ir(fe(s,":before")).map(function(t,n){var r,e,i=Dt(t),o=i.value,a=i.unit;return o*(r=s,e=0===n,"%"!==a?1:qr(r.ownerSVGElement)[e?"width":"height"]/100)})}function Ir(t){var n=t.transformOrigin;return n?n.split(" "):["0","0"]}function kr(t,n,r){for(var e=document.body,i=!t||r?t:t.parentElement,o=t===n||i===n,a="relative";i&&i!==e;){n===i&&(o=!0);var s=fe(i),u=s.transform,a=s.position;if("svg"===i.tagName.toLowerCase()||"static"!==a||u&&"none"!==u)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===e,offsetParent:i||e}}function Nr(t,n,r,e){var i,o,a=t.tagName.toLowerCase(),s=t.offsetLeft,u=t.offsetTop;e&&(s-=(o=(n||document.documentElement).getBoundingClientRect()).left,u-=o.top);var l,c,p=gt(s),f=!p;return f||"svg"===a?c=(l=Ir(r).map(function(t){return parseFloat(t)})).slice():(c=(l=Er?Ar(t):Ir(r).map(function(t){return parseFloat(t)})).slice(),f=!0,s=(i=function(t,n){if(!t.getBBox)return[0,0];var r=t.getBBox(),e=qr(t.ownerSVGElement),i=r.x-e.x,o=r.y-e.y;return[i,o,n[0]-i,n[1]-o]}(t,l))[0],u=i[1],l[0]=i[2],l[1]=i[3]),{tagName:a,isSVG:p,hasOffset:f,offset:[s||0,u||0],origin:l,targetOrigin:c}}function Fr(t,n,r){void 0===r&&(r=window.getComputedStyle(t));var e=window.getComputedStyle(document.body),i=e.position;if(!(n||i&&"static"!==i))return[0,0];var o=parseInt(e.marginLeft,10),a=parseInt(e.marginTop,10);return"absolute"===r.position&&("auto"===r.top&&"auto"===r.bottom||(a=0),"auto"===r.left&&"auto"===r.right||(o=0)),[o,a]}function Yr(t,n){for(var r,e,i,o,a=t,s=[],u=!1,l=!1,c=3,p=kr(n,n,!0).offsetParent;a&&!u;){var f=fe(a),d=f.position,h="fixed"===d,g=Zt((o=f.transform)&&"none"!==o?vt(o)?o:Ct(o).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0]),v=g.length;if(!l&&16===v){l=!0,c=4;for(var m=s.length,b=0;b<m;++b)s[b]=Wt(s[b],3,4)}l&&9===v&&(g=Wt(g,3,4));var x=Nr(a,n,f,h),S=x.tagName,E=x.hasOffset,y=x.isSVG,M=x.origin,C=x.targetOrigin,D=x.offset,w=D[0],R=D[1];"svg"===S&&i?s.push(function(t,n){var r=qr(t),e=r.width,i=r.height,o=r.clientWidth,a=r.clientHeight,s=o/e,u=a/i,l=t.preserveAspectRatio.baseVal,c=l.align,p=l.meetOrSlice,f=[0,0],d=[s,u],h=[0,0];{var g,v,m;1!==c&&(g=(c-2)%3,v=Math.floor((c-2)/3),f[0]=e*g/2,f[1]=i*v/2,m=2===p?Math.max(u,s):Math.min(s,u),d[0]=m,d[1]=m,h[0]=(o-e)/2*g,h[1]=(a-i)/2*v)}var b=un(d,n);return b[n*(n-1)]=h[0],b[n*(n-1)+1]=h[1],Tr(b,n,f)}(a,c),sn(c)):"g"===S&&t!==a&&(R=w=0);var z=kr(a,n),P=z.offsetParent,O=z.isEnd,G=z.isStatic;Sr&&E&&!y&&G&&("relative"===d||"static"===d)&&(w-=P.offsetLeft,R-=P.offsetTop,u=u||O);var B,T=0,A=0;if(E&&p!==P&&(T=P.clientLeft,A=P.clientTop),E&&P===document.body&&(w+=(B=Fr(a,!1,f))[0],R+=B[1]),s.push(Tr(g,c,M),ln(E?[w-a.scrollLeft+T,R-a.scrollTop+A]:[a,M],c)),i=i||g,r=r||M,e=e||C,u||h)break;a=P,u=O}return{offsetContainer:p,matrixes:s,targetMatrix:i=i||sn(c),transformOrigin:r=r||[0,0],targetOrigin:e=e||[0,0],is3d:l}}function Xr(t,n,r,e){var i;void 0===r&&(r=n);var o,a,s,u,l=0,c=0,p=0,f={};t&&(o=fe(t),l=t.offsetWidth,c=t.offsetHeight,gt(l)&&(l=(i=Jr(t,o,!0))[0],c=i[1])),t&&(s=Vr((a=function(t,n,r,e){void 0===r&&(r=n);var i=Yr(t,n),o=i.matrixes,a=i.is3d,s=i.targetMatrix,u=i.transformOrigin,l=i.targetOrigin,c=Yr(i.offsetContainer,r),p=c.matrixes,f=c.is3d,d=e||f||a,h=d?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,v=n||document.body,m=s,b=sn(h),x=sn(h),S=sn(h),E=sn(h),y=o.length,M=kr(v,v,!0).offsetParent;p.reverse(),o.reverse(),!a&&d&&(m=Wt(m,3,4),o.forEach(function(t,n){o[n]=Wt(t,3,4)}));!f&&d&&p.forEach(function(t,n){p[n]=Wt(t,3,4)});p.forEach(function(t){x=Ht(x,t,h)}),o.forEach(function(t,n){var r;y-2===n&&(S=b.slice()),y-1===n&&(E=b.slice()),vt(t[h*(h-1)])&&(r=function(t,n,r,e,i,o){var a,s=Jr(t,void 0,!0),u=s[0],l=s[1],c=n.getBoundingClientRect(),p=[0,0];n===document.body&&(p=Fr(t,!0));var f=t.getBoundingClientRect(),d=f.left-c.left+n.scrollLeft-(n.clientLeft||0)+p[0],h=f.top-c.top+n.scrollTop-(n.clientTop||0)+p[1],g=f.width,v=f.height,m=Lt(r,i,o),b=Hr(m,u,l,r),x=b.left,S=b.top,E=b.width,y=b.height,M=_r(m,e,r),C=Ut(M,[x,S]),D=[d+C[0]*g/E,h+C[1]*v/y],w=[0,0],R=0;for(;++R<10;){var z=Xt(i,r);a=Ut(_r(z,D,r),_r(z,M,r)),w[0]=a[0],w[1]=a[1];var P=Hr(Lt(r,i,ln(w,r),o),u,l,r),O=P.left,G=P.top,B=O-d,T=G-h;if(Math.abs(B)<2&&Math.abs(T)<2)break;D[0]-=B,D[1]-=T}return w.map(function(t){return Math.round(t)})}(t[h*(h-1)],M,h,t[h*(h-1)+1],b,o[n+1]),t[h*(h-1)]=r[0],t[h*(h-1)+1]=r[1]),b=Ht(b,t,h)});var C=!g&&a;m=m||sn(C?4:3);var D=jr(g&&16===m.length?Wt(m,4,3):m,C);return{rootMatrix:x=Yt(x,h,h),beforeMatrix:S,offsetMatrix:E,allMatrix:b,targetMatrix:m,targetTransform:D,transformOrigin:u,targetOrigin:l,is3d:d}}(t,n,r,e)).allMatrix,a.transformOrigin,l,c),f=vr(vr({},a),s),p=Qr([(u=Vr(a.allMatrix,[50,50],100,100)).pos1,u.pos2],u.direction));var d=e?4:3;return vr({width:l,height:c,rotation:p,rootMatrix:sn(d),beforeMatrix:sn(d),offsetMatrix:sn(d),allMatrix:sn(d),targetMatrix:sn(d),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!e,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},f)}function jr(t,n){return void 0===n&&(n=9<t.length),(n?"matrix3d":"matrix")+"("+$t(t,!n).join(",")+")"}function qr(t){var n=t.clientWidth,r=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:n,clientHeight:r};var e=t.viewBox,i=e&&e.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||n,height:i.height||r,clientWidth:n,clientHeight:r}}function _r(t,n,r){return Kt(t,_t(n,r),r)}function Wr(n,t,r,e){return[[0,0],[t,0],[0,r],[t,r]].map(function(t){return _r(n,t,e)})}function Lr(t){var n=t.map(function(t){return t[0]}),r=t.map(function(t){return t[1]}),e=Math.min.apply(Math,n),i=Math.min.apply(Math,r),o=Math.max.apply(Math,n),a=Math.max.apply(Math,r);return{left:e,top:i,right:o,bottom:a,width:o-e,height:a-i}}function Hr(t,n,r,e){return Lr(Wr(t,n,r,e))}function Vr(t,n,r,e){var i=16===t.length?4:3,o=Wr(t,r,e,i),a=o[0],s=a[0],u=a[1],l=o[1],c=l[0],p=l[1],f=o[2],d=f[0],h=f[1],g=o[3],v=g[0],m=g[1],b=_r(t,n,i),x=b[0],S=b[1],E=Math.min(s,c,d,v),y=Math.min(u,p,h,m);return{left:E,top:y,right:Math.max(s,c,d,v),bottom:Math.max(u,p,h,m),origin:[x=x-E||0,S=S-y||0],pos1:[s=s-E||0,u=u-y||0],pos2:[c=c-E||0,p=p-y||0],pos3:[d=d-E||0,h=h-y||0],pos4:[v=v-E||0,m=m-y||0],direction:At(o)}}function Ur(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Zr(t,n){return Ur([n[0]-t[0],n[1]-t[1]])}function $r(t,n,r,e){void 0===r&&(r=1),void 0===e&&(e=Tt(t,n));var i=Zr(t,n);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+e+"rad) scaleY("+r+")",width:i+"px"}}function Kr(t,n){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];var i=r.length;return{transform:"translateZ(0px) translate("+r.reduce(function(t,n){return t+n[0]},0)/i+"px, "+r.reduce(function(t,n){return t+n[1]},0)/i+"px) rotate("+t+"rad) scale("+n+")"}}function Jr(t,n,r,e){void 0===n&&(n=window.getComputedStyle(t)),void 0===e&&(e=r||"border-box"===n.boxSizing);var i=t.offsetWidth,o=t.offsetHeight,a=!gt(i);if((r||e)&&a)return[i,o];if(a||"svg"===t.tagName.toLowerCase())return i=t.clientWidth,o=t.clientHeight,r||e?[i+(parseFloat(n.borderLeftWidth)||0)+(parseFloat(n.borderRightWidth)||0),o+(parseFloat(n.borderTopWidth)||0)+(parseFloat(n.borderBottomWidth)||0)]:[i-(parseFloat(n.paddingLeft)||0)-(parseFloat(n.paddingRight)||0),o-(parseFloat(n.paddingTop)||0)-(parseFloat(n.paddingBottom)||0)];var s=t.getBBox();return[s.width,s.height]}function Qr(t,n){return Tt(0<n?t[0]:t[1],0<n?t[1]:t[0])}function te(t,n,r,e,i){var o,a,s=1,u=[0,0],l=ne(),c=ne(),p=ne(),f=Xr(n,r,i,!1);return n&&(o=f.is3d?4:3,s=(a=Vr(f.offsetMatrix,Vt(f.transformOrigin,jt(f.targetMatrix,o)),f.width,f.height)).direction,u=Vt(a.origin,[a.left-f.left,a.top-f.top]),l=re(n),c=re(kr(e,e,!0).offsetParent||document.body,!0),t&&(p=re(t))),vr({targetClientRect:l,containerClientRect:c,moveableClientRect:p,beforeDirection:s,beforeOrigin:u,originalBeforeOrigin:u,target:n},f)}function ne(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function re(t,n){var r,e=0,i=0,o=0,a=0;t===document.body||t===document.documentElement?(o=window.innerWidth,a=window.innerHeight,e=-(document.documentElement.scrollLeft||document.body.scrollLeft),i=-(document.documentElement.scrollTop||document.body.scrollTop)):(e=(r=t.getBoundingClientRect()).left,i=r.top,o=r.width,a=r.height);var s={left:e,right:e+o,top:i,bottom:i+a,width:o,height:a};return n&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight,s.overflow="visible"!==fe(t).overflow),s}function ee(t){if(t){var n=t.getAttribute("data-direction");if(n){var r=[0,0];return-1<n.indexOf("w")&&(r[0]=-1),-1<n.indexOf("e")&&(r[0]=1),-1<n.indexOf("n")&&(r[1]=-1),-1<n.indexOf("s")&&(r[1]=1),r}}}function ie(t,n){return[Vt(n,t[0]),Vt(n,t[1]),Vt(n,t[2]),Vt(n,t[3])]}function oe(t){var n=t.left,r=t.top;return ie([t.pos1,t.pos2,t.pos3,t.pos4],[n,r])}function ae(t,n){return n?Math.round(t/n)*n:t}function se(r,e){return r.forEach(function(t,n){r[n]=ae(r[n],e)}),r}function ue(t,n){t[n]&&(t[n].unset(),t[n]=null)}function le(t,n,r){var e=n.datas;e.datas||(e.datas={});var i=vr(vr({},r),{target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,moveable:t,datas:e.datas});return e.isStartEvent?e.lastEvent=i:e.isStartEvent=!0,i}function ce(t,n,r){var e=n.datas,i="isDrag"in r?r.isDrag:n.isDrag;return e.datas||(e.datas={}),vr(vr({isDrag:i},r),{moveable:t,target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,lastEvent:e.lastEvent,isDouble:n.isDouble,datas:e.datas})}function pe(t,n,r,e){return t.triggerEvent(n,r,e)}function fe(t,n){return window.getComputedStyle(t,n)}function de(t,r,e){var i={},o={};return t.filter(function(n){var t=n.name;if(i[t]||!r.some(function(t){return n[t]}))return!1;if(!e&&n.ableGroup){if(o[n.ableGroup])return!1;o[n.ableGroup]=!0}return i[t]=!0})}function he(t,n){return t===n||null==t&&null==n}function ge(o,a){var s=[],u=[];return o.forEach(function(t,n){var r=a(t,n,o),e=u.indexOf(r),i=s[e]||[];-1===e&&(u.push(r),s.push(i)),i.push(t)}),s}function ve(t){return t.reduce(function(t,n){return t.concat(n)},[])}function me(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort(function(t,n){return Math.abs(n)-Math.abs(t)}),t[0]}function be(t,n,r){return Kt(Xt(t,r),_t(n,r),r)}function xe(t,n){var r=t.is3d?4:3,e=be(t.rootMatrix,[n.distX,n.distY],r);return n.distX=e[0],n.distY=e[1],n}function Se(t,n,r,e,i){return Ut(_r(t,Vt(r,n),i),e)}function Ee(t,n,r){return r?t/n*100+"%":t+"px"}function ye(t){return Math.abs(t)<=Dr?0:t}function Me(t){return t.isRequest?("resizable"===t.requestAble||"scalable"===t.requestAble)&&t.parentDirection:kt(t.inputEvent.target,Br("direction"))}function Ce(t){var n={};for(var r in t)n[t[r]]=r;return n}function De(t,n){return t?bt(t)?n?document.querySelector(t):t:xt(t)?t():"current"in t?t.current:t:null}function we(t,r){return t?((n=t)&&vt(n)&&(mt(n)||"length"in n)?[].slice.call(t):[t]).reduce(function(t,n){return bt(n)&&r?mr(t,[].slice.call(document.querySelectorAll(n))):(t.push(De(n,r)),t)},[]):[];var n}function Re(t,n){return r=vr(vr({},t),{classNames:mr([Br("line","guideline",t.direction)],t.classNames).filter(function(t){return t}),size:t.size||t.sizeValue+"px",pos:t.pos||t.posValue.map(function(t){return t+"px"})}),e=n,o=r.direction,a=r.classNames,s=r.size,u=r.pos,l=r.zoom,c=r.key,f=(p="horizontal"===o)?"Y":"X",e.createElement("div",{key:c,className:a.join(" "),style:((i={})[p?"width":"height"]=""+s,i.transform="translate("+u[0]+", "+u[1]+") translate"+f+"(-50%) scale"+f+"("+l+")",i)});var r,e,i,o,a,s,u,l,c,p,f}var ze={name:"pinchable",updateRect:!0,props:{pinchable:Boolean},events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(r,e){var t=e.datas,n=e.targets,i=e.angle,o=e.originalDatas,a=r.props,s=a.pinchable,u=a.ables;if(!s)return!1;var l="onPinch"+(n?"Group":"")+"Start",c="drag"+(n?"Group":"")+"ControlStart",p=(!0===s?r.controlAbles:u.filter(function(t){return-1<s.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[c]}),f=le(r,e,{});n&&(f.targets=n);var d=pe(r,l,f);t.isPinch=!1!==d,t.ables=p;var h=t.isPinch;return!!h&&(p.forEach(function(t){var n;o[t.name]=o[t.name]||{},t[c]&&(n=vr(vr({},e),{datas:o[t.name],parentRotate:i,isPinch:!0}),t[c](r,n))}),r.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},h)},pinch:function(n,r){var t=r.datas,e=r.scale,i=r.distance,o=r.originalDatas,a=r.inputEvent,s=r.targets,u=r.angle;if(t.isPinch){var l=i*(1-1/e),c=le(n,r,{});s&&(c.targets=s),pe(n,"onPinch"+(s?"Group":""),c);var p=t.ables,f="drag"+(s?"Group":"")+"Control";return p.forEach(function(t){t[f]&&t[f](n,vr(vr({},r),{datas:o[t.name],inputEvent:a,parentDistance:l,parentRotate:u,isPinch:!0}))}),c}},pinchEnd:function(n,r){var t=r.datas,e=r.isPinch,i=r.inputEvent,o=r.targets,a=r.originalDatas;if(t.isPinch){var s="onPinch"+(o?"Group":"")+"End",u=ce(n,r,{isDrag:e});o&&(u.targets=o),pe(n,s,u);var l=t.ables,c="drag"+(o?"Group":"")+"ControlEnd";return l.forEach(function(t){t[c]&&t[c](n,vr(vr({},r),{isDrag:e,datas:a[t.name],inputEvent:i,isPinch:!0}))}),e}},pinchGroupStart:function(t,n){return this.pinchStart(t,vr(vr({},n),{targets:t.props.targets}))},pinchGroup:function(t,n){return this.pinch(t,vr(vr({},n),{targets:t.props.targets}))},pinchGroupEnd:function(t,n){return this.pinchEnd(t,vr(vr({},n),{targets:t.props.targets}))}};function Pe(t,n,r,e,i){var o=n.gesto.move(r,t.inputEvent),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return vr(vr({},i?xe(n,o):o),{isDrag:!0,isPinch:!!e,parentEvent:!0,datas:s,originalDatas:t.originalDatas})}var Oe=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var n=t.prototype;return n.dragStart=function(t,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return(this.datas=r).draggable||(r.draggable={}),vr(vr({},this.move(t,n.inputEvent)),{type:"dragstart"})},n.drag=function(t,n){return this.move([t[0]-this.prevX,t[1]-this.prevY],n)},n.move=function(t,n){var r,e;return this.isFlag?(r=this.prevX+t[0],e=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],e=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=r,clientY:this.prevY=e,inputEvent:n,isDrag:this.isDrag,distX:r-this.startX,distY:e-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Ge(t,r,e){var n=e.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map(function(t,n){return o[n]=o[n]||{},o[n][r]=o[n][r]||{},vr(vr({},e),{datas:o[n][r],originalDatas:o[n]})})}function Be(t,o,a,s,n,u){var l=!!a.match(/Start$/g),c=!!a.match(/End$/g),p=n.isPinch,f=n.datas,r=Ge(t,o.name,n),d=t.moveables,e=r.map(function(t,n){var r=d[n],e=t,e=l?(new Oe).dragStart(s,t):(r.state.gesto||(r.state.gesto=f.childGestos[n]),Pe(t,r.state,s,p,u)),i=o[a](r,vr(vr({},e),{parentFlag:!0}));return c&&(r.state.gesto=null),i});return l&&(f.childGestos=d.map(function(t){return t.state.gesto})),e}function Te(t,o,a,n,s,u){void 0===s&&(s=function(t,n){return n});var l=!!a.match(/End$/g),r=Ge(t,o.name,n),c=t.moveables;return r.map(function(t,n){var r=c[n],e=s(r,t),i=o[a](r,vr(vr({},e),{parentFlag:!0}));return i&&u&&u(r,t,i,n),l&&(r.state.gesto=null),i})}function Ae(t,n){var r=n.clientX,e=n.clientY,i=n.datas,o=t.state,a=o.moveableClientRect,s=o.rootMatrix,u=o.is3d,l=o.pos1,c=Ut(be(s,[r-a.left,e-a.top],u?4:3),l),p=Xe({datas:i,distX:c[0],distY:c[1]});return[p[0],p[1]]}function Ie(t,n){var r=n.datas,e=t.state,i=e.allMatrix,o=e.beforeMatrix,a=e.is3d,s=e.left,u=e.top,l=e.origin,c=e.offsetMatrix,p=e.targetMatrix,f=e.transformOrigin,d=a?4:3;r.is3d=a,r.matrix=i,r.targetMatrix=p,r.beforeMatrix=o,r.offsetMatrix=c,r.transformOrigin=f,r.inverseMatrix=Xt(i,d),r.inverseBeforeMatrix=Xt(o,d),r.absoluteOrigin=_t(Vt([s,u],l),d),r.startDragBeforeDist=Kt(r.inverseBeforeMatrix,r.absoluteOrigin,d),r.startDragDist=Kt(r.inverseMatrix,r.absoluteOrigin,d)}function ke(t,n){var r,e,i,o,a,s,u,l,c,p,f,d,h,g,v,m,b,x=t.datas,S=t.originalDatas.beforeRenderable,E=x.transformIndex,y=S.nextTransforms,M=S.nextTransformAppendedIndexes,C=-1===E?y.length:E+M.filter(function(t){return t<E}).length,D=(e=C,i=(r=y).slice(0,e<0?void 0:e),o=r.slice(0,e<0?void 0:e+1),a=r[e]||"",s=e<0?[]:r.slice(e),u=e<0?[]:r.slice(e+1),l=mn(i),c=mn(o),p=mn([a]),f=mn(s),d=mn(u),h=vn(l),g=vn(c),v=vn(f),m=vn(d),b=Ht(h,v,4),{transforms:r,beforeFunctionMatrix:h,beforeFunctionMatrix2:g,targetFunctionMatrix:vn(p),afterFunctionMatrix:v,afterFunctionMatrix2:m,allFunctionMatrix:b,beforeFunctions:l,beforeFunctions2:c,targetFunction:p[0],afterFunctions:f,afterFunctions2:d,beforeFunctionTexts:i,beforeFunctionTexts2:o,targetFunctionText:a,afterFunctionTexts:s,afterFunctionTexts2:u}),w=D.targetFunction,R="rotate"===n?"rotateZ":n;x.beforeFunctionTexts=D.beforeFunctionTexts,x.afterFunctionTexts=D.afterFunctionTexts,x.beforeTransform=D.beforeFunctionMatrix,x.beforeTransform2=D.beforeFunctionMatrix2,x.targetTansform=D.targetFunctionMatrix,x.afterTransform=D.afterFunctionMatrix,x.afterTransform2=D.afterFunctionMatrix2,x.targetAllTransform=D.allFunctionMatrix,w.functionName===R?(x.afterFunctionTexts.splice(0,1),x.isAppendTransform=!1):(x.isAppendTransform=!0,S.nextTransformAppendedIndexes=mr(M,[C]))}function Ne(t,n,r){return t.beforeFunctionTexts.join(" ")+" "+(t.isAppendTransform?r:n)+" "+t.afterFunctionTexts.join(" ")}function Fe(t,n,r){var e=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,a=t.afterTransform2,s=t.targetAllTransform,u=r?Ht(s,n,4):Ht(n,s,4),l=Ht(Xt(r?o:e,4),u,4);return Ht(l,Xt(r?a:i,4),4)}function Ye(t){var n=t.datas,r=t.distX,e=t.distY,i=n.inverseBeforeMatrix,o=n.is3d,a=n.startDragBeforeDist,s=o?4:3;return Ut(Kt(i,Vt(n.absoluteOrigin,[r,e]),s),a)}function Xe(t,n){var r=t.datas,e=t.distX,i=t.distY,o=r.inverseBeforeMatrix,a=r.inverseMatrix,s=r.is3d,u=r.startDragBeforeDist,l=r.startDragDist,c=s?4:3;return Ut(Kt(n?o:a,Vt(r.absoluteOrigin,[e,i]),c),n?u:l)}function je(t){var n=[];return 0<=t[1]&&(0<=t[0]&&n.push(3),t[0]<=0&&n.push(2)),t[1]<=0&&(0<=t[0]&&n.push(1),t[0]<=0&&n.push(0)),n}function qe(n,t){return je(t).map(function(t){return n[t]})}function _e(t,n){var r=qe(t,n);return[Bt(r.map(function(t){return t[0]})),Bt(r.map(function(t){return t[1]}))]}function We(t,n,r,e){return Ht(t,Tr(n,e,r),e)}function Le(r){var e=r.originalDatas.beforeRenderable;return{setTransform:function(t,n){void 0===n&&(n=-1),e.startTransforms=mt(t)?t:yt(t),Ve(r,n)},setTransformIndex:function(t){Ve(r,t)}}}function He(t){Ve(t,-1)}function Ve(t,n){var r,e,i=t.originalDatas.beforeRenderable,o=t.datas;-1===(o.transformIndex=n)||(r=i.startTransforms[n])&&(e=mn([r]),o.startValue=e[0].functionValue)}function Ue(t,n){t.originalDatas.beforeRenderable.nextTransforms=yt(n)}function Ze(t,n,r,e,i){return Ue(i,n),{transform:n,drag:to.drag(t,Pe(i,t.state,r,e,!1))}}function $e(t,n,r,e,i){var o,a,s,u,l,c,p,f,d,h=t.state,g=h.left,v=h.top,m=t.props.groupable,b=m?g:0,x=m?v:0,S=Ut(e,Je(t,r,(o=t.state,a=i,s=n,u=o.transformOrigin,l=o.offsetMatrix,c=o.is3d,p=a.beforeTransform,f=a.afterTransform,d=c?4:3,We(l,Wt(Ht(Ht(p,gn([s]),4),f,4),4,d),u,d))));return Ut(S,[b,x])}function Ke(t){var n=t.state,r=n.width,e=n.height,i=n.transformOrigin;return[i[0]/(r/2)-1,i[1]/(e/2)-1]}function Je(t,n,r){void 0===r&&(r=t.state.allMatrix);var e=t.state,i=e.width,o=e.height,a=e.is3d?4:3;return _r(r,[i/2*(1+n[0]),o/2*(1+n[1])],a)}function Qe(t,n,r,e,i,o){var a,s,u,l,c,p,f,d,h,g=t.props.groupable,v=t.state,m=v.transformOrigin,b=v.targetMatrix,x=v.offsetMatrix,S=v.is3d,E=v.width,y=v.height,M=v.left,C=v.top,D=S?4:3,w=g?M:0,R=g?C:0,z=We(x,b,(s=n,u=r,void 0===(l=E)&&(l=s),void 0===(c=y)&&(c=u),void 0===(p=m)&&(p=[0,0]),(a=o)?a.map(function(t,n){var r=Dt(t),e=r.value,i=r.unit,o=n?c:l,a=n?u:s;return"%"===t||isNaN(e)?a*(o?p[n]/o:0):"%"!==i?e:a*e/100}):p),D);return Ut((f=i,d=e,h=_e(Wr(z,n,r,D),d),[f[0]-h[0],f[1]-h[1]]),[w,R])}function ti(t,n){return _e(oe(t.state),n)}function ni(t,n,r){var e=_r(t,[n.clientLeft,n.clientTop],r);return[n.left+e[0],n.top+e[1]]}function ri(t,n,d,h,r,e){var g=r[0],v=r[1],i=e[0],o=e[1],m=[],a=h?0:1,b="vertical"===n?"horizontal":"vertical",x=ge(t.filter(function(t){return t.type===n}),function(t){return t.element}).map(function(t){return t[0]}).filter(function(t){var n=t.pos,r=t.sizes;return n[a]<=o&&i<=n[a]+r[a]});return x.forEach(function(t){var p=t.pos[h],f=p+t.sizes[h];x.forEach(function(t){var n,r=t.pos,e=t.sizes,i=t.element,o=t.className,a=r[h],s=a+e[h],u=0,l=0,c=!0;if(f<=a)g<(u=s-(l=f-a))-d&&(c=!1);else{if(!(s<=p))return;(u=a-(l=p-s))+d<v&&(c=!1)}c&&m.push({pos:"vertical"==b?[u,r[1]]:[r[0],u],element:i,sizes:e,size:0,type:b,gap:l,className:o,gapGuidelines:x}),f<=g&&v<=a&&(0<=ae(g-((n=(a+f-(v-g))/2)-d),.1)&&m.push({pos:"vertical"==b?[n,r[1]]:[r[0],n],className:o,element:i,sizes:e,size:0,type:b,gap:f-g,gapGuidelines:x}))})}),m}function ei(n,r,e,t,i,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),t&&t.forEach(function(t){n.push({type:"horizontal",pos:[0,ae(t-a,.1)],size:r})}),i&&i.forEach(function(t){n.push({type:"vertical",pos:[ae(t-o,.1),0],size:e})}),n}function ii(t,n){var E=[];if(!n.length)return E;var r=t.state,y=t.props.snapCenter,e=r.containerClientRect,i=r.targetClientRect,o=i.top,a=i.left,M=r.rootMatrix,C=r.is3d?4:3,s=ni(M,e,C),D=s[0],w=s[1],u=Dn(oe(r)),l=Ut([u.minX,u.minY],be(M,[a-D,o-w],C)).map(function(t){return n=t,Math.round(n%1==-.5?n-1:n);var n}),R=l[0],z=l[1];return n.forEach(function(t){var n=t.element,r=t.top,e=t.left,i=t.right,o=t.bottom,a=t.className,s=n.getBoundingClientRect(),u=s.left-D,l=s.top-w,c=l+s.height,p=u+s.width,f=be(M,[u,l],C),d=f[0],h=f[1],g=be(M,[p,c],C),v=g[0],m=g[1],b=v-d,x=m-h,S=[b,x];!1!==r&&E.push({type:"vertical",element:n,pos:[ae(d+R,.1),h],size:x,sizes:S,className:a}),!1!==o&&E.push({type:"vertical",element:n,pos:[ae(v+R,.1),h],size:x,sizes:S,className:a}),!1!==e&&E.push({type:"horizontal",element:n,pos:[d,ae(h+z,.1)],size:b,sizes:S,className:a}),!1!==i&&E.push({type:"horizontal",element:n,pos:[d,ae(m+z,.1)],size:b,sizes:S,className:a}),y&&(E.push({type:"vertical",element:n,pos:[ae((d+v)/2+R,.1),h],size:x,sizes:S,center:!0,className:a}),E.push({type:"horizontal",element:n,pos:[d,ae((h+m)/2+z,.1)],size:b,sizes:S,center:!0,className:a}))}),E}function oi(t,n,r){void 0===r&&(r=[]);var e=[],i=t.state;if(n&&i.guidelines&&i.guidelines.length)return e;var o=t.props.elementGuidelines,a=void 0===o?[]:o;if(!a.length)return e;var s=i.elementGuidelineValues||[],u=a.map(function(t){return"parentElement"in t?{element:t}:t});i.elementGuidelineValues=u;var l=kn(s.map(function(t){return t.element}),u.map(function(t){return t.element})),c=l.added,p=l.removed.map(function(t){return s[t].element}),f=ii(t,c.map(function(t){return u[t]}).filter(function(t){return t.refresh&&n||!t.refresh&&!n}));return mr(r.filter(function(t){return-1===p.indexOf(t.element)}),f)}function ai(t){var n,r,e,i,o,a,s=t.state,u=s.staticGuidelines,l=s.containerClientRect,c=l.scrollHeight,p=l.scrollWidth,f=l.clientHeight,d=l.clientWidth,h=l.overflow,g=l.clientLeft,v=l.clientTop,m=t.props,b=m.snapHorizontal,x=void 0===b||b,S=m.snapVertical,E=void 0===S||S,y=m.snapGap,M=void 0===y||y,C=m.verticalGuidelines,D=m.horizontalGuidelines,w=m.snapThreshold,R=void 0===w?5:w,z=mr(u,oi(t,!0));return M&&(r=(n=Lr(oe(t.state))).top,e=n.left,i=n.bottom,o=n.right,a=u.filter(function(t){return t.element}),z.push.apply(z,mr(ri(a,"horizontal",R,0,[e,o],[r,i]),ri(a,"vertical",R,1,[r,i],[e,o])))),ei(z,h?p:d,h?c:f,x&&D,E&&C,g,v),z}function si(t,n,r,e,i){var o=t.props,a=o.snapElement,s=void 0===a||a,u=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length-1,e=0;e<r;++e){var i=t[e];if(!gt(i))return i}return t[r]}(i,o.snapThreshold,5);return ui(t.state.guidelines,n,r,{snapThreshold:u,snapCenter:e,snapElement:s})}function ui(t,n,r,e){return{vertical:pi(t,"vertical",n,e),horizontal:pi(t,"horizontal",r,e)}}function li(t,n,r,e){var i=t.props.snapCenter&&r,o=["left","right"],a=["top","bottom"];return i&&(o.push("center"),a.push("middle")),o=o.filter(function(t){return t in n}),a=a.filter(function(t){return t in n}),si(t,o.map(function(t){return n[t]}),a.map(function(t){return n[t]}),i,e)}function ci(t){var n=t.isSnap;if(!n)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],e=r.guidelineInfos[0],i=e.offset,o=e.dist,a=e.guideline;return{isSnap:n,offset:i,dist:o,pos:r.pos,guideline:a}}function pi(r,a,t,n){var e=void 0===n?{}:n,i=e.snapThreshold,s=void 0===i?5:i,u=e.snapElement,l=e.snapCenter;if(!r||!r.length)return{isSnap:!1,index:-1,posInfos:[]};var o="vertical"===a?0:1,c=t.map(function(e,t){var n=r.map(function(t){var n=t.pos,r=e-n[o];return{offset:r,dist:Math.abs(r),guideline:t}}).filter(function(t){var n=t.guideline,r=t.dist,e=n.type,i=n.center,o=n.element;return!(!u&&o||!l&&i||e!==a||s<r)}).sort(function(t,n){return t.dist-n.dist});return{pos:e,index:t,guidelineInfos:n}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,n){return t.guidelineInfos[0].dist-n.guidelineInfos[0].dist}),p=0<c.length;return{isSnap:p,index:p?c[0].index:-1,posInfos:c}}function fi(t,n){var r=Math.abs(t.offset),e=Math.abs(n.offset);return t.isBound&&n.isBound?e-r:t.isBound?-1:n.isBound?1:t.isSnap&&n.isSnap?e-r:t.isSnap?-1:n.isSnap||r<Dr?1:e<Dr?-1:r-e}function di(t,a){return t.slice().sort(function(t,n){var r=t.sign[a],e=n.sign[a],i=t.offset[a],o=n.offset[a];return r?e?fi({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:n.isBound,isSnap:n.isSnap,offset:o}):-1:1})[0]}function hi(t,n){var r=Bt([n[0][0],n[1][0]]),e=Bt([n[0][1],n[1][1]]);return{vertical:r<=t[0],horizontal:e<=t[1]}}function gi(t,n){var r,e,i=n[0],o=n[1],a=o[0]-i[0],s=o[1]-i[1];return Math.abs(a)<Dr&&(a=0),Math.abs(s)<Dr&&(s=0),e=a?(r=s?s/a*(t[0]-i[0])+i[1]:i[1],t[1]):(r=i[0],t[0]),r-e}function vi(t,r,e){void 0===e&&(e=Dr);var i=gi(t[0],r)<=0;return t.slice(1).every(function(t){var n=gi(t,r);return n<=0==i||Math.abs(n)<=e})}function mi(t,n,r,e,i){return void 0===i&&(i=0),e&&n-i<=t||!e&&t<=r+i?{isBound:!0,offset:e?n-t:r-t}:{isBound:!1,offset:0}}function bi(t,n,r,e,i){var o=t[0],a=t[1],s=n[0],u=n[1],l=ye(a[1]-o[1]),c=ye(a[0]-o[0]),p=ye(u[1]-s[1]);if(!ye(u[0]-s[0])){if(i&&!l)return{isBound:!1,offset:0};if(c)return mi(l/c*(s[0]-o[0])+o[1],s[1],u[1],r,e);var f=s[0]-o[0];return{isBound:d=Math.abs(f)<=(e||0),offset:d?f:0}}if(p)return{isBound:!1,offset:0};if(i&&!c)return{isBound:!1,offset:0};if(l)return mi((s[1]-o[1])/(l/c)+o[0],s[0],u[0],r,e);var d,f=s[1]-o[1];return{isBound:d=Math.abs(f)<=(e||0),offset:d?f:0}}function xi(c,t,p,f){return t.map(function(t){var r=t[0],n=t[1],e=t[2],i=function(t,n,r){var e=t.props.innerBounds;if(!e)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=e.left,o=e.top,a=e.width,s=e.height,u=[[i,o],[i,o+s]],l=[[i,o],[i+a,o]],c=[[i+a,o],[i+a,o+s]],p=[[i,o+s],[i+a,o+s]],f=hi(r,n),d=f.horizontal,h=f.vertical;if(vi([r,[i,o],[i+a,o],[i,o+s],[i+a,o+s]],n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=bi(n,l,h),v=bi(n,p,h),m=bi(n,u,d),b=bi(n,c,d),x=g.isBound&&v.isBound,S=g.isBound||v.isBound,E=m.isBound&&b.isBound,y=m.isBound||b.isBound,M=me(g.offset,v.offset),C=me(m.offset,b.offset),D=[0,0],w=!1;return{isAllBound:Math.abs(C)<Math.abs(M)?(D=[M,0],w=S,x):(D=[0,C],w=y,E),isVerticalBound:S,isHorizontalBound:y,isBound:w,offset:D}}(c,[n,e],p),o=i.isBound,a=i.offset,s=i.isVerticalBound,u=i.isHorizontalBound,l=Xe({datas:f,distX:a[0],distY:a[1]}).map(function(t,n){return t*(r[n]?2/r[n]:0)});return{sign:r,isBound:o,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:l}})}function Si(t,n,r){var e,i,o,a,s,u,l,c,p,f,d,h,g,v=xi(t,Ei(n,[0,0],!1).map(function(t){var n=t[0],r=t[1],e=t[2];return[n.map(function(t){return 2*Math.abs(t)}),r,e]}),_e(n,[0,0]),r),m=di(v,0),b=di(v,1),x=0,S=0,E=m.isVerticalBound||b.isVerticalBound,y=m.isHorizontalBound||b.isHorizontalBound;return(E||y)&&(i={datas:r,distX:-m.offset[0],distY:-b.offset[1]},a=i.datas,s=i.distX,u=i.distY,l=a.beforeMatrix,c=a.matrix,p=a.is3d,f=a.startDragBeforeDist,d=a.startDragDist,h=a.absoluteOrigin,g=p?4:3,x=(e=Ut(Kt(o?l:c,Vt(o?f:d,[s,u]),g),h))[0],S=e[1]),{vertical:{isBound:E,offset:x},horizontal:{isBound:y,offset:S}}}function Ei(i,t,n){return e=n,o=[],a=(r=t)[0],s=r[1],a&&s?o.push([[0,2*s],r,[-a,s]],[[2*a,0],r,[a,-s]]):a?(o.push([[2*a,0],[a,1],[a,-1]]),e&&o.push([[0,-1],[a,-1],[-a,-1]],[[0,1],[a,1],[-a,1]])):s?(o.push([[0,2*s],[1,s],[-1,s]]),e&&o.push([[-1,0],[-1,s],[-1,-s]],[[1,0],[1,s],[1,-s]])):o.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),o.map(function(t){var n=t[0],r=t[1],e=t[2];return[n,_e(i,r),_e(i,e)]});var r,e,o,a,s}function yi(t,n,r,e){var i=e?t.map(function(t){return rn(t,e)}):t,o=mr([r],n);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t,n){return!vi(o,t)})}function Mi(t,n,r,e,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,l=o.width,c=o.height,p=s-e[0],f=s+l-e[0],d=u-e[1],h=u+c-e[1],g=[[p,d],[f,d],[p,h],[f,h]],v=_e(r,[0,0]);if(!yi(r,g,v,0))return[];var m=[],b=g.map(function(t){return[Ur(t),Tt([0,0],t)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(t){var i=Tt([0,0],function(t){var n=t[0],r=t[1],e=r[0]-n[0],i=r[1]-n[1];if(!e)return[n[0],0];if(!i)return[0,n[1]];var o=i/e,a=-o*n[0]+n[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),o=function(t){var n=t[0],r=t[1],e=r[0]-n[0],i=r[1]-n[1];if(!e)return Math.abs(n[0]);if(!i)return Math.abs(n[1]);var o=i/e;return Math.abs((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}(t);m.push.apply(m,b.filter(function(t){var n=t[0];return n&&o<=n}).map(function(t){var n=t[0],r=t[1],e=Math.acos(n?o/n:0);return[a+(r+e)-i,a+(r-e)-i]}).reduce(function(t,n){return t.push.apply(t,n),t},[]).filter(function(t){return!yi(n,g,v,t)}).map(function(t){return ae(180*t/Math.PI,Dr)}))}),m}function Ci(t,n,r){var e=t||{},i=e.left,o=e.top,a=e.right,s=e.bottom,u={left:void 0===i?-1/0:i,top:void 0===o?-1/0:o,right:void 0===a?1/0:a,bottom:void 0===s?1/0:s};return{vertical:Di(u,n,!0),horizontal:Di(u,r,!1)}}function Di(t,n,r){var e=t[r?"left":"top"],i=t[r?"right":"bottom"],o=Math.min.apply(Math,n),a=Math.max.apply(Math,n),s=[];return o<e+1&&s.push({isBound:!0,offset:o-e,pos:e}),i-1<a&&s.push({isBound:!0,offset:a-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(t,n){return Math.abs(n.offset)-Math.abs(t.offset)})}function wi(t,n,r){return(r?t.map(function(t){return rn(t,r)}):t).some(function(t){return t[0]<n.left&&.1<Math.abs(t[0]-n.left)||t[0]>n.right&&.1<Math.abs(t[0]-n.right)||t[1]<n.top&&.1<Math.abs(t[1]-n.top)||t[1]>n.bottom&&.1<Math.abs(t[1]-n.bottom)})}function Ri(t,l,r,n,e){var i=t.props.bounds,c=e*Math.PI/180;if(!i)return[];var o=i.left,a=void 0===o?-1/0:o,s=i.top,u=void 0===s?-1/0:s,p=i.right,f=void 0===p?1/0:p,d=i.bottom,h=void 0===d?1/0:d,g=a-n[0],v=f-n[0],m=u-n[1],b=h-n[1],x={left:g,top:m,right:v,bottom:b};if(!wi(r,x,0))return[];var S=[];return[[g,0],[v,0],[m,1],[b,1]].forEach(function(t,n){var s=t[0],u=t[1];r.forEach(function(t){var r,n,e,i,o,a=Tt([0,0],t);S.push.apply(S,(n=s,e=u,i=Ur(r=t),[o=Math.sqrt(i*i-n*n)||0,-o].sort(function(t,n){return Math.abs(t-r[e?0:1])-Math.abs(n-r[e?0:1])}).map(function(t){return Tt([0,0],e?[t,n]:[n,t])}).map(function(t){return c+t-a}).filter(function(t){return!wi(l,x,t)}).map(function(t){return ae(180*t/Math.PI,Dr)})))})}),S}var zi={horizontal:["left","top","width","Y","X"],vertical:["top","left","height","X","Y"]};function Pi(t){var n=t.state;n.guidelines&&n.guidelines.length||(n.elementGuidelineValues=[],n.staticGuidelines=oi(t,!1),n.guidelines=ai(t),n.enableSnap=!0)}function Oi(t,n){var r=t.props,e=r.snappable,i=r.bounds,o=r.innerBounds,a=r.verticalGuidelines,s=r.horizontalGuidelines,u=t.state,l=u.guidelines,c=u.enableSnap;return e&&c&&!(n&&!0!==e&&e.indexOf(n)<0)&&!!(i||o||l&&l.length||a&&a.length||s&&s.length)}function Gi(t,n,r,e,i){var o=function(t,n,r,e){var i=n[0]-t[0],o=n[1]-t[1];Math.abs(i)<Dr&&(i=0);Math.abs(o)<Dr&&(o=0);if(!i)return e?[0,0]:[0,r];if(!o)return e?[r,0]:[0,0];var a=o/i,s=t[1]-a*t[0];{if(e){var u=a*(n[0]+r)+s;return[r,u-n[1]]}return[(n[1]+r-s)/a-n[0],r]}}(t,n,r,e);if(!o)return[0,0];var a=Xe({datas:i,distX:o[0],distY:o[1]});return[a[0],a[1]]}function Bi(t,n,r,e,i,o){var a=Wr(t,n,r,o?4:3);return ie(a,Ut(e,_e(a,i.map(function(t){return-t}))))}function Ti(t,n){return t.isBound?t.offset:n.isSnap?n.offset:0}function Ai(t,n){return t.isBound?t.offset:n.isSnap?ci(n).offset:0}function Ii(t,n,r,e){var i=function(t,n,r){var e=t.props.bounds||{},i=e.left,o=void 0===i?-1/0:i,a=e.top,s=void 0===a?-1/0:a,u=e.right,l=void 0===u?1/0:u,c=e.bottom,p=void 0===c?1/0:c,f=r[0],d=r[1],h=Ut(r,n),g=h[0],v=h[1];Math.abs(g)<Dr&&(g=0),Math.abs(v)<Dr&&(v=0);var m,b,x,S,E,y=0<v,M=0<g,C={isBound:!1,offset:0,pos:0},D={isBound:!1,offset:0,pos:0};return 0===g&&0===v||(0===g?y?p<d&&(D.pos=p,D.offset=d-p):d<s&&(D.pos=s,D.offset=d-s):0===v?M?l<f&&(C.pos=l,C.offset=f-l):f<o&&(C.pos=o,C.offset=f-o):(m=v/g,b=r[1]-m*f,S=x=0,E=!1,M&&l<=f?(x=m*l+b,S=l,E=!0):!M&&f<=o&&(x=m*o+b,S=o,E=!0),E&&(x<s||p<x)&&(E=!1),E||(y&&p<=d?(S=((x=p)-b)/m,E=!0):!y&&d<=s&&(S=((x=s)-b)/m,E=!0)),E&&(C.isBound=!0,C.pos=S,C.offset=f-S,D.isBound=!0,D.pos=x,D.offset=d-x))),{vertical:C,horizontal:D}}(t,n,r),o=i.horizontal,a=i.vertical,s=e?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,n,r){var e=r[0],i=r[1],o=n[0],a=n[1],s=Ut(r,n),u=s[0],l=0<(p=s[1]),c=0<u,u=ye(u),p=ye(p),f={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===u&&0===p)return{vertical:f,horizontal:d};var h=si(t,u?[e]:[],p?[i]:[]),g=h.vertical,v=h.horizontal;g.posInfos.filter(function(t){var n=t.pos;return c?o<=n:n<=o}),v.posInfos.filter(function(t){var n=t.pos;return l?a<=n:n<=a}),g.isSnap=0<g.posInfos.length,v.isSnap=0<v.posInfos.length;var m,b,x,S,E,y=ci(g),M=y.isSnap,C=y.guideline,D=ci(v),w=D.isSnap,R=D.guideline,z=w?R.pos[1]:0,P=M?C.pos[0]:0;return 0===u?w&&(d.isSnap=!0,d.pos=R.pos[1],d.offset=i-d.pos):0===p?M&&(f.isSnap=!0,f.pos=P,f.offset=e-P):(m=p/u,b=r[1]-m*e,S=x=0,E=!1,M?(x=m*(S=P)+b,E=!0):w&&(S=((x=z)-b)/m,E=!0),E&&(f.isSnap=!0,f.pos=S,f.offset=e-S,d.isSnap=!0,d.pos=x,d.offset=i-x)),{vertical:f,horizontal:d}}(t,n,r),u=s.horizontal,l=s.vertical,c=Ti(o,u),p=Ti(a,l),f=Math.abs(c),d=Math.abs(p);return{horizontal:{isBound:o.isBound,isSnap:u.isSnap,offset:c,dist:f},vertical:{isBound:a.isBound,isSnap:l.isSnap,offset:p,dist:d}}}function ki(t,n,r,e){void 0===e&&(e=r);var i=Ci(t.props.bounds,e.map(function(t){return t[0]}),e.map(function(t){return t[1]})),o=i.horizontal,a=i.vertical,s=n?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:si(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]}),t.props.snapCenter),u=s.horizontal,l=s.vertical,c=Ai(o[0],u),p=Ai(a[0],l),f=Math.abs(c),d=Math.abs(p);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:f,bounds:o,snap:u},vertical:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:p,dist:d,bounds:a,snap:l}}}function Ni(t,n,r,e,i){void 0===i&&(i={});var o=Ci(n,r,e),a=o.horizontal,s=o.vertical,u=i.isRequest?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:ui(t,r,e,i),l=u.horizontal,c=u.vertical,p=Ai(a[0],l),f=Ai(s[0],c),d=Math.abs(p),h=Math.abs(f);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:p,dist:d,bounds:a,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:h,bounds:s,snap:c}}}function Fi(t){return t?t/Math.abs(t):0}function Yi(G,B,t,T,A,I){return t.map(function(t){var n=t[0],r=t[1],e=_e(B,n),i=_e(B,r),o=T?Ii(G,e,i,A):ki(G,A,[i]),a=o.horizontal,s=a.offset,u=a.isBound,l=a.isSnap,c=o.vertical,p=c.offset,f=c.isBound,d=c.isSnap,h=Ut(r,n);if(!p&&!s)return{isBound:f||u,isSnap:d||l,sign:h,offset:[0,0]};var g,v,m,b,x,S,E,y,M,C,D,w,R,z=(g=o,v=T,m=Tt(e,i)/Math.PI*180,b=g.vertical,x=b.isBound,S=b.isSnap,E=b.dist,y=g.horizontal,M=y.isBound,C=y.isSnap,w=(D=m%180)<3||177<D,R=87<D&&D<93,y.dist<E&&(x||S&&!R&&(!v||!w))?"vertical":!M&&(!C||w||v&&R)?"":"horizontal");if(!z)return{sign:h,isBound:!1,isSnap:!1,offset:[0,0]};var P="vertical"==z,O=Gi(e,i,-(P?p:s),P,I).map(function(t,n){return t*(h[n]?2/h[n]:0)});return{sign:h,isBound:P?f:u,isSnap:P?d:l,offset:O}})}function Xi(t,n,r,e,i,o,a,s){for(var u,l,c,p,f,d,h,g,v,m,b,x,S,E,y,M,C,D,w,R,z,P,O,G,B,T,A,I,k,N,F,Y,X,j,q,_,W,L,H,V,U=oe(t.state),Z=t.props.keepRatio,$=0,K=0,J=0;J<2;++J){var Q,tt,nt=n($,K),rt=(u=t,l=nt,f=a,d=s,y=E=S=x=b=m=v=g=h=void 0,g=p=Z,v=[],m=[-(h=c=i)[0],-h[1]],h[0]&&h[1]?(v.push([m,[h[0],-h[1]]],[m,[-h[0],h[1]]]),g&&v.push([m,h])):h[0]?g?v.push([m,[m[0],-1]],[m,[m[0],1]],[m,[h[0],-1]],[m,h],[m,[h[0],1]]):v.push([[m[0],-1],[h[0],-1]],[[m[0],0],[h[0],0]],[[m[0],1],[h[0],1]]):h[1]?g?v.push([m,[-1,m[1]]],[m,[1,m[1]]],[m,[-1,h[1]]],[m,[1,h[1]]],[m,h]):v.push([[-1,m[1]],[-1,h[1]]],[[0,m[1]],[0,h[1]]],[[1,m[1]],[1,h[1]]]):v.push([m,[1,0]],[m,[-1,0]],[m,[0,-1]],[m,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),b=v,x=Ei(l,c,p),S=mr(Yi(u,l,b,p,f,d),xi(u,x,_e(l,[0,0]),d)),E=di(S,0),y=di(S,1),{width:{isBound:E.isBound,offset:E.offset[0]},height:{isBound:y.isBound,offset:y.offset[1]}}),et=rt.width,it=rt.height,ot=et.isBound,at=it.isBound,st=et.offset,ut=it.offset;if(1===J&&(ot||(st=0),at||(ut=0)),0===J&&a&&!ot&&!at)return[0,0];Z&&(Q=Math.abs(st)*(r?1/r:1),tt=Math.abs(ut)*(e?1/e:1),(ot&&at?Q<tt:at||!ot&&Q<tt)?st=r*ut/e:ut=e*st/r),$+=st,K+=ut}return i[0]&&i[1]&&(R=t,z=U,O=o,G=s,j=[-(P=i)[0],-P[1]],q=R.state,_=q.width,W=q.height,L=R.props.bounds,V=H=1/0,L&&(B=[[P[0],-P[1]],[-P[0],P[1]]],T=L.left,A=void 0===T?-1/0:T,I=L.top,k=void 0===I?-1/0:I,N=L.right,F=void 0===N?1/0:N,Y=L.bottom,X=void 0===Y?1/0:Y,B.forEach(function(t){var n,r,e,i=t[0]!==j[0],o=t[1]!==j[1],a=_e(z,t),s=Fi(t[1]-j[1]),u=Fi(t[0]-j[0]),l=360*Tt(O,a)/Math.PI;o&&(r=a.slice(),(Math.abs(l-360)<2||Math.abs(l-180)<2)&&(r[1]=O[1]),n=Gi(O,r,(O[1]<a[1]?X:k)-a[1],!1,G)[1],isNaN(n)||(V=W+s*n)),i&&(r=a.slice(),(Math.abs(l-90)<2||Math.abs(l-270)<2)&&(r[0]=O[0]),e=Gi(O,r,(O[0]<a[0]?F:A)-a[0],!0,G)[0],isNaN(e)||(H=_+u*e))})),C=(M={maxWidth:H,maxHeight:V}).maxWidth,D=M.maxHeight,$+=st=(w=function(t,n,r,e,i,o,a,s,u){var l=ki(t,s,[_e(n,a)]),c=l.horizontal.offset,p=l.vertical.offset;if(p||c){var f=Xe({datas:u,distX:-p,distY:-c}),d=f[0],h=f[1];return[Math.min(i||1/0,r+a[0]*d)-r,Math.min(o||1/0,e+a[1]*h)-e]}return[0,0]}(t,n($,K),r+$,e+K,C,D,i,a,s))[0],K+=ut=w[1]),[$,K]}function ji(t,n,r,e){if(!Oi(t,"rotatable"))return e;var i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,u=e*Math.PI/180,l=[i,o,a,s].map(function(t){return Ut(t,r)}),c=l.map(function(t){return rn(t,u)}),p=mr(Ri(t,l,c,r,e),Mi(t,l,c,r,e));return p.sort(function(t,n){return Math.abs(t-e)-Math.abs(n-e)}),p.length?p[0]:e}function qi(t,s,u,n,l){var c=l.width,p=l.height,f=l.fixedPosition;if(!Oi(t,"scalable"))return[0,0];var d=l.is3d,r=Xi(t,function(t,n){return Bi((r=l,e=Vt(s,[t/c,n/p]),i=r.transformOrigin,o=r.offsetMatrix,a=r.is3d?4:3,We(o,Ht(r.targetMatrix,un(e,a),a),i,a)),c,p,f,u,d);var r,e,i,o,a},c,p,u,f,n,l);return[r[0]/c,r[1]/p]}function _i(t,n,r,e,i,o){if(!Oi(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=ie(o.absolutePoses,[n,r]),s=Lr(a),u=s.left,l=s.right,c=s.top,p=s.bottom,f=[[u,c],[l,c],[u,p],[l,p]];t.props.snapCenter&&f.push([(u+l)/2,(c+p)/2]);var d,h,g,v,m,b,x,S,E,y,M,C,D,w,R,z,P,O,G,B=ki(t,i,f,a),T=B.vertical,A=B.horizontal,I=Si(t,a,o),k=I.vertical,N=I.horizontal,F=T.isSnap,Y=A.isSnap,X=T.isBound||k.isBound,j=A.isBound||N.isBound,q=me(T.offset,k.offset),_=me(A.offset,N.offset),W=(d=e,g=[X,j],v=[F,Y],m=[q,_],y=(h=[n,r])[0],M=h[1],C=g[0],D=g[1],w=v[0],R=v[1],z=m[0],P=m[1],O=-z,G=-P,d&&y&&M?(G=O=0,b=[],C&&D?b.push([0,P],[z,0]):C?b.push([z,0]):D?b.push([0,P]):w&&R?b.push([0,P],[z,0]):w?b.push([z,0]):R&&b.push([0,P]),b.length&&(b.sort(function(t,n){return Ur(Ut([y,M],t))-Ur(Ut([y,M],n))}),(x=b[0])[0]&&Math.abs(y)>Dr?(O=-x[0],G=M*Math.abs(y+O)/Math.abs(y)-M):x[1]&&Math.abs(M)>Dr&&(S=M,G=-x[1],O=y*Math.abs(M+G)/Math.abs(S)-y),d&&D&&C&&(Math.abs(O)>Dr&&Math.abs(O)<Math.abs(z)?(O*=E=Math.abs(z)/Math.abs(O),G*=E):Math.abs(G)>Dr&&Math.abs(G)<Math.abs(P)?(O*=E=Math.abs(P)/Math.abs(G),G*=E):(O=me(-z,O),G=me(-P,G))))):(O=y||C?-z:0,G=M||D?-P:0),[O,G]);return[{isBound:X,isSnap:F,offset:W[0]},{isBound:j,isSnap:Y,offset:W[1]}]}function Wi(t){var r=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var n=t.guideline;-1<r.indexOf(n)||r.push(n)})}),r}function Li(t,n,r,e){var i=t-r,o=i<0?i+n:e;return{size:(i<0?0:i)-o,pos:o}}function Hi(t,l,r,c){var p=[],n=ge(t.filter(function(t){var n=t.element,r=t.gap;return n&&!r}),function(t){var n,r,e,i=t.element,o=t.pos,a=o[c],s=(Math.min(0,a-l)<0?-1:1)+"_"+o[c?0:1],u=-1<(e=wt(n=p,function(t){var n=t[0],r=t[1];return i===n&&a===r}))?n[e]:r;return u?u[2]:(p.push([i,a,s]),s)});return n.forEach(function(t){t.sort(function(t,n){return Li(t.pos[c],t.size,l,r).size-Li(n.pos[c],t.size,l,r).size||t.pos[c?0:1]-n.pos[c?0:1]})}),n}function Vi(t,f,n,d,h,g,v,m,b,x,S,E){var r=t.props,y=r.zoom,e=r.isDisplaySnapDigit,M=void 0===e||e,i=zi[f],C=i[0],D=i[1],w=i[2],R=i[4];return ve(n.map(function(t,c){var p=!0;return t.map(function(t,n){var r,e=t.pos,i=t.size,o=Li(e[x],i,h,g),a=o.pos,s=o.size;if(s<m)return null;var u=p;p=!1;var l=M&&u?parseFloat(s.toFixed(b)):0;return E.createElement("div",{key:f+"LinkGuideline"+c+"-"+n,className:Br("guideline-group",f),style:((r={})[C]=d+a+"px",r[D]=-v+e[x?0:1]+"px",r[w]=s+"px",r)},Re({direction:f,classNames:[Br("dashed")],size:"100%",posValue:[0,0],sizeValue:s,zoom:y},E),E.createElement("div",{className:Br("size-value"),style:{transform:"translate"+R+"(-50%) scale("+y+")"}},0<l?S(l):""))})}))}function Ui(t,o,n,a,s,u,l,c){var p=t.props.zoom;return n.map(function(t,n){var r=t.type,e=t.pos,i=[0,0];return i[l]=a,i[l?0:1]=-s+e,Re({key:o+"TargetGuideline"+n,classNames:[Br("target","bold",r)],posValue:i,sizeValue:u,zoom:p,direction:o},c)})}function Zi(t,a,n,s,u){var l=t.props.zoom;return n.map(function(t,n){var r=t.pos,e=t.size,i=t.element,o=[-s[0]+r[0],-s[1]+r[1]];return Re({key:a+"Guideline"+n,classNames:i?[Br("bold")]:[],direction:a,posValue:o,sizeValue:e,zoom:l},u)})}function $i(t,i,w,R){var n=t.filter(function(t){var n=t.element,r=t.gap,e=t.type;return n&&r&&e===i}),r="vertical"===i?[0,1]:[1,0],z=r[0],P=r[1];return ve(n.map(function(t){var n=t.pos,r=t.gap,e=t.gapGuidelines,i=t.sizes,o=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort(function(t,n){return Math.abs(t)-Math.abs(n)}),t[0]}(n[P]+i[P]-w[P],n[P]-w[P]-R[P]),a=Math.min(i[P],R[P]);0<o&&a<o?o=2*(o-a/2):o<0&&o<-a&&(o=2*(o+a/2));var s,u,l,c,p,f,d,h,g,v,m,b,x,S,E,y,M,C,D=(0<o?0:R[P])+o/2;return mr((v=e,m=z,b=w,x=R,S=n,E=r,y=D,M=Math.abs(E),C=S[m]+(0<E?x[0]:0),v.filter(function(t){return t.pos[m]<=b[m]}).sort(function(t,n){var r=t.pos;return n.pos[m]-r[m]}).filter(function(t){var n=t.pos,r=t.sizes,e=n[m];return ae(e+r[m],1e-4)===ae(C-M,1e-4)&&(C=e,!0)}).map(function(t){var n=-b[m]+t.pos[m]+t.sizes[m];return vr(vr({},t),{gap:E,renderPos:m?[y,n]:[n,y]})})),(s=e,u=z,l=w,c=R,p=n,f=r,d=D,h=Math.abs(f),g=p[u]+(f<0?c[u]:0),s.filter(function(t){return t.pos[u]>l[u]}).sort(function(t,n){var r=t.pos,e=n.pos;return r[u]-e[u]}).filter(function(t){var n=t.pos,r=t.sizes,e=n[u];return ae(e,1e-4)===ae(g+h,1e-4)&&(g=e+r[u],!0)}).map(function(t){var n=-l[u]+t.pos[u]-h;return vr(vr({},t),{gap:f,renderPos:u?[d,n]:[n,d]})})))}))}function Ki(t,u,n,l,c){var r=t.props,e=r.snapDigit,p=void 0===e?0:e,i=r.isDisplaySnapDigit,f=void 0===i||i,d=r.zoom,h="horizontal"===u?"X":"Y",g="horizontal"===u?"width":"height";return n.map(function(t,n){var r,e=t.renderPos,i=t.gap,o=t.className,a=Math.abs(i),s=f?parseFloat(a.toFixed(p)):0;return c.createElement("div",{key:u+"GapGuideline"+n,className:Br("guideline-group",u),style:((r={left:e[0]+"px",top:e[1]+"px"})[g]=a+"px",r)},Re({direction:u,classNames:[Br("gap"),o],size:"100%",posValue:[0,0],sizeValue:a,zoom:d},c),c.createElement("div",{className:Br("size-value","gap"),style:{transform:"translate"+h+"(-50%) scale("+d+")"}},0<s?l(s):""))})}function Ji(t,n,r,i,o,e){var a=Ci(e||t.props.bounds,n,r),s=a.vertical,u=a.horizontal;s.forEach(function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}),u.forEach(function(t){t.isBound&&o.push({type:"bounds",pos:t.pos})});var l=function(t){var n=t.props.innerBounds;if(!n)return{vertical:[],horizontal:[]};var r=t.getRect(),e=r.pos1,i=r.pos2,o=r.pos3,a=r.pos4,u=_e([e,i,o,a],[0,0]),l=n.left,c=n.top,p=n.width,f=n.height,d=[[l,c],[l,c+f]],h=[[l,c],[l+p,c]],g=[[l+p,c],[l+p,c+f]],v=[[l,c+f],[l+p,c+f]],m=[],b=[],x={top:!1,bottom:!1,left:!1,right:!1};return[[e,i],[i,a],[a,o],[o,e]].forEach(function(t){var n=hi(u,t),r=n.horizontal,e=n.vertical,i=bi(t,h,e,1,!0),o=bi(t,v,e,1,!0),a=bi(t,d,r,1,!0),s=bi(t,g,r,1,!0);i.isBound&&!x.top&&(m.push(c),x.top=!0),o.isBound&&!x.bottom&&(m.push(c+f),x.bottom=!0),a.isBound&&!x.left&&(b.push(l),x.left=!0),s.isBound&&!x.right&&(b.push(l+p),x.right=!0)}),{horizontal:m,vertical:b}}(t),c=l.vertical,p=l.horizontal;c.forEach(function(e){0<=wt(i,function(t){var n=t.type,r=t.pos;return"bounds"===n&&r===e})||i.push({type:"bounds",pos:e})}),p.forEach(function(e){0<=wt(o,function(t){var n=t.type,r=t.pos;return"bounds"===n&&r===e})||o.push({type:"bounds",pos:e})})}var Qi={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,n){var r=t.state,e=r.top,i=r.left,o=r.pos1,a=r.pos2,s=r.pos3,u=r.pos4,l=r.snapRenderInfo,c=r.targetClientRect,p=r.containerClientRect,f=r.is3d,d=r.rootMatrix;if(!l||!Oi(t,""))return[];var h,g=f?4:3,v=Math.min(o[0],a[0],s[0],u[0]),m=Math.min(o[1],a[1],s[1],u[1]),b=ni(d,p,g),x=be(d,[c.left-b[0],c.top-b[1]],g),S=x[0],E=x[1],y=t.props,M=y.snapThreshold,C=void 0===M?5:M,D=y.snapDigit,w=void 0===D?0:D,R=y.snapDistFormat,z=void 0===R?function(t){return t}:R,P=l.externalPoses||[],O=oe(t.state),G=[],B=[],T=[],A=[],I=[],k=Lr(O),N=k.width,F=k.height,Y=k.top,X=k.left,j=k.bottom,q=k.right,_=0<P.length,W=_?Lr(P):{};l.request||(l.direction&&I.push(function(t,n,r){var e=[];if(r[0]&&r[1])e=[r,[-r[0],r[1]],[r[0],-r[1]]].map(function(t){return _e(n,t)});else if(r[0]||r[1])t.props.keepRatio?e=[[-1,-1],[-1,1],[1,-1],[1,1],r].map(function(t){return _e(n,t)}):1<(e=qe(n,r)).length&&e.push([(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]);else for(var i=[n[0],n[1],n[3],n[2],n[0]],o=0;o<4;++o)e.push(i[o]),e.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return si(t,e.map(function(t){return t[0]}),e.map(function(t){return t[1]}),!0,1)}(t,O,l.direction)),l.snap&&(h=Lr(O),l.center&&(h.middle=(h.top+h.bottom)/2,h.center=(h.left+h.right)/2),I.push(li(t,h,!0,1))),_&&(l.center&&(W.middle=(W.top+W.bottom)/2,W.center=(W.left+W.right)/2),I.push(li(t,W,!0,1))),I.forEach(function(t){var n=t.vertical.posInfos,r=t.horizontal.posInfos;G.push.apply(G,n.map(function(t){return{type:"snap",pos:t.pos}})),B.push.apply(B,r.map(function(t){return{type:"snap",pos:t.pos}})),T.push.apply(T,Wi(n)),A.push.apply(A,Wi(r))})),Ji(t,[X,q],[Y,j],G,B),_&&Ji(t,[W.left,W.right],[W.top,W.bottom],G,B,l.externalBounds);var L=Hi(A,S,N,0),H=Hi(T,E,F,1),V=$i(T,"vertical",[i,e],[N,F]),U=$i(A,"horizontal",[i,e],[N,F]),Z=mr(T,A);return pe(t,"onSnap",{guidelines:Z.filter(function(t){return!t.element}),elements:ge(Z.filter(function(t){return t.element}),function(t){return t.element}),gaps:mr(U,V)},!0),mr(Ki(t,"vertical",U,z,n),Ki(t,"horizontal",V,z,n),Vi(t,"horizontal",L,v,S,N,e,C,w,0,z,n),Vi(t,"vertical",H,m,E,F,i,C,w,1,z,n),Ui(t,"horizontal",B,v,e,N,0,n),Ui(t,"vertical",G,m,i,F,1,n),Zi(t,"horizontal",A,[i,e],n),Zi(t,"vertical",T,[i,e],n))},dragStart:function(t,n){t.state.snapRenderInfo={request:n.isRequest,snap:!0,center:!0},Pi(t)},drag:function(t){var n=t.state;n.staticGuidelines=oi(t,!1,n.staticGuidelines),n.guidelines=ai(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,n){return!(!Me(t)&&!lo(t,n))||(!t.isRequest&&t.inputEvent?kt(t.inputEvent.target,Br("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,Pi(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,n){this.dragStart(t,n)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Pi(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var n=t.state;n.enableSnap=!1,n.staticGuidelines=[],n.guidelines=[],n.snapRenderInfo=null}},to={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,n){var r=t.props,e=r.throttleDragRotate,i=r.zoom,o=t.state,a=o.dragInfo,s=o.beforeOrigin;if(!e||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var l=Ur(u),c=Tt(u,[0,0]);return[n.createElement("div",{className:Br("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:l+"px",transform:"translate("+s[0]+"px, "+s[1]+"px) rotate("+c+"rad) scaleY("+i+")"}})]},dragStart:function(t,n){var r=n.datas,e=n.parentEvent,i=n.parentGesto,o=t.state,a=o.target;if(o.gesto)return!1;o.gesto=i||t.targetGesto;var s,u=window.getComputedStyle(a);r.datas={},r.left=parseFloat(u.left||"")||0,r.top=parseFloat(u.top||"")||0,r.bottom=parseFloat(u.bottom||"")||0,r.right=parseFloat(u.right||"")||0,r.startValue=[0,0],Ie(t,n),He(n),s=t,r.absolutePoses=oe(s.state),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1;var l=le(t,n,vr({set:function(t){r.startValue=t}},Le(n)));return!1!==(e||pe(t,"onDragStart",l))?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.gesto=null,r.isPinch=!1),!!r.isDrag&&l},drag:function(t,n){ke(n,"translate");var r=n.datas,e=n.parentEvent,i=n.parentFlag,o=n.isPinch,a=n.isRequest,s=n.distX,u=n.distY,l=r.isDrag,c=r.prevDist,p=r.prevBeforeDist,f=r.startValue;if(l){var d,h,g,v,m,b,x,S,E,y,M,C,D=t.props,w=D.parentMoveable,R=!e&&D.throttleDrag||0,z=!e&&D.throttleDragRotate||0,P=!1,O=0;!e&&0<z&&(s||u)&&(h=ae((d=D.startDragRotate||0)+180*Tt([0,0],[s,u])/Math.PI,z)-d,g=u*Math.abs(Math.cos((h-90)/180*Math.PI)),v=Ur([s*Math.abs(Math.cos(h/180*Math.PI)),g]),O=h*Math.PI/180,s=v*Math.cos(O),u=v*Math.sin(O)),o||e||i||z&&!s&&!u||(b=(m=_i(t,s,u,z,a,r))[0],x=m[1],S=b.isSnap,E=b.isBound,y=b.offset,M=x.isSnap,C=x.isBound,P=S||M||E||C,s+=y,u+=x.offset),r.passDeltaX=s-(r.passDistX||0),r.passDeltaY=u-(r.passDistY||0),r.passDistX=s,r.passDistY=u;var G,B,T,A=Vt(Ye({datas:r,distX:s,distY:u}),f),I=Vt((B=(G={datas:r,distX:s,distY:u}).datas,T=Ye({datas:B,distX:G.distX,distY:G.distY}),Kt(Fe(B,qt([T[0],T[1]],4)),_t([0,0,0],4),4)),f);z||P||(se(I,R),se(A,R));var k=Ut(A,f),N=Ut(I,f),F=Ut(N,c),Y=Ut(k,p);r.prevDist=N,r.prevBeforeDist=k;var X=r.left+k[0],j=r.top+k[1],q=r.right-k[0],_=r.bottom-k[1],W=Ne(r,"translate("+I[0]+"px, "+I[1]+"px)","translate("+N[0]+"px, "+N[1]+"px)");if(t.state.dragInfo.dist=e?[0,0]:N,e||w||!F.every(function(t){return!t})||!Y.some(function(t){return!t})){var L=t.state,H=le(t,n,{transform:W,dist:N,delta:F,translate:I,beforeDist:k,beforeDelta:Y,beforeTranslate:A,left:X,top:j,right:q,bottom:_,width:L.width,height:L.height,isPinch:o});return e||pe(t,"onDrag",H),H}}},dragEnd:function(t,n){var r=n.parentEvent,e=n.datas,i=n.isDrag;if(t.state.gesto=null,t.state.dragInfo=null,e.isDrag)return e.isDrag=!1,r||pe(t,"onDragEnd",ce(t,n,{})),i},dragGroupStart:function(t,n){var r=n.datas,e=n.clientX,i=n.clientY,o=this.dragStart(t,n);if(!o)return!1;var a=Be(t,this,"dragStart",[e||0,i||0],n,!1),s=pe(t,"onDragGroupStart",vr(vr({},o),{targets:t.props.targets,events:a}));return r.isDrag=!1!==s,!!r.isDrag&&o},dragGroup:function(t,n){if(n.datas.isDrag){var r=this.drag(t,n),e=n.datas,i=Be(t,this,"drag",[e.passDeltaX,e.passDeltaY],n,!1);if(r){var o=vr({targets:t.props.targets,events:i},r);return pe(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,n){var r=n.isDrag;if(n.datas.isDrag)return this.dragEnd(t,n),Be(t,this,"dragEnd",[0,0],n,!1),pe(t,"onDragGroupEnd",ce(t,n,{targets:t.props.targets})),r},request:function(t){var n={},r=t.getRect(),e=0,i=0;return{isControl:!1,requestStart:function(){return{datas:n}},request:function(t){return"x"in t?e=t.x-r.left:"deltaX"in t&&(e+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY),{datas:n,distX:e,distY:i}},requestEnd:function(){return{datas:n,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function no(t,n,e){var r=t.state,i=r.renderPoses,o=r.rotation,a=r.direction,s=t.props,u=s.renderDirections,l=void 0===u?n:u,c=s.zoom,p={};if(!l)return[];var f=0<a?1:-1,d=!0===l?zr:l,h=o/Math.PI*180;return d.forEach(function(t){p[t]=!0}),d.map(function(t){var n=Pr[t];if(!n||!p[t])return null;var r=(ae(h,15)+f*Or[t]+720)%180;return e.createElement("div",{className:Br("control","direction",t),"data-rotation":r,"data-direction":t,key:"direction-"+t,style:Kr.apply(void 0,mr([o,c],n.map(function(t){return i[t]})))})})}function ro(t,n,r,e,i,o){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=Tt(r,e),l=n?ae(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line"+o,className:Br.apply(void 0,mr(["line","direction",n],a)),"data-rotation":l,"data-line-index":o,"data-direction":n,style:$r(r,e,i,u)})}function eo(t,n){return no(t,zr,n)}function io(t,n){return no(t,["nw","ne","sw","se"],n)}function oo(t,n,r,e,i,o){var a=t.state.is3d?4:3,s=_r(t.state.rootMatrix,i,a),u=Vt([o.left,o.top],s);n.startAbsoluteOrigin=u,n.prevDeg=Tt(u,[r,e])/Math.PI*180,n.prevSnapDeg=n.prevDeg,n.startDeg=n.prevDeg,n.loop=0}function ao(t,n,r,e,i,o){var a=r.prevDeg,s=ji(t,n,r.origin,e);return[(r.prevDeg=s)-a,s,o+s]}function so(t,n,r,e,i,o,a,s){var u=r.prevDeg,l=r.prevSnapDeg,c=r.startDeg,p=r.loop;e<u&&270<u&&e<90?++r.loop:u<e&&u<90&&270<e&&--r.loop;var f=r.loop,d=360*p+l-c+o,h=360*f+e-c+o;r.prevDeg=h-360*f+c-o;var g=i*((h=ae(h,a))-o);return s&&(h=(g=ji(t,n,r.origin,g))/i+o),r.prevSnapDeg=h-360*f+c-o,[i*(h-d),g,o+g]}function uo(t,n,r,e,i,o,a,s){return so(t,n,r,Tt(r.startAbsoluteOrigin,[i,o])/Math.PI*180,e,a,s,!0)}function lo(t,n){if(t.isRequest)return"rotatable"===t.requestAble;var r=t.inputEvent.target;if(kt(r,Br("rotation-control")))return!0;var e=n.props.rotationTarget;return!!e&&(console.log(we(e,!0)),we(e,!0).some(function(t){return!!t&&(r===t||r.contains(t))}))}var co={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(t,n){var r=t.props,e=r.rotatable,i=r.rotationPosition,o=r.zoom,a=r.renderDirections,s=t.state,u=s.renderPoses,l=s.direction;if(!e)return null;var c,p,f=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3];if("none"!==t){var s=(t||"top").split("-"),u=s[0],l=s[1],c=[e,i];"left"===u?c=[o,e]:"right"===u?c=[i,a]:"bottom"===u&&(c=[a,o]);var p,f,d=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],h=Qr(c,r);return l&&(f="bottom"===u||"left"===u,d=c[(p="top"===l||"left"===l)&&!f||!p&&f?0:1]),[d,h]}}(i,u,l),d=[];return f&&(c=f[0],p=f[1],d.push(n.createElement("div",{key:"rotation",className:Br("rotation"),style:{transform:"translate(-50%) translate("+c[0]+"px, "+c[1]+"px) rotate("+p+"rad)"}},n.createElement("div",{className:Br("line rotation-line"),style:{transform:"scaleX("+o+")"}}),n.createElement("div",{className:Br("control rotation-control"),style:{transform:"translate(0.5px) scale("+o+")"}})))),a&&d.push.apply(d,no(t,[],n)),d},dragControlCondition:lo,dragControlStart:function(t,n){var r=n.datas,e=n.clientX,i=n.clientY,o=n.parentRotate,a=n.parentFlag,s=n.isPinch,u=n.isRequest,l=t.state,c=l.target,p=l.left,f=l.top,d=l.origin,h=l.beforeOrigin,g=l.direction,v=l.beforeDirection,m=l.targetTransform,b=l.moveableClientRect;if(!u&&!c)return!1;var x,S=t.getRect();r.rect=S,r.transform=m,r.left=p,r.top=f,r.fixedPosition=Je(t,Ke(t)),r.absoluteInfo={origin:S.origin,startValue:S.rotation},oo(t,r.absoluteInfo,e,i,d,b),u||s||a?(x=o||0,r.beforeInfo={origin:S.beforeOrigin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0},r.afterInfo={origin:S.origin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0}):(r.beforeInfo={origin:S.beforeOrigin},r.afterInfo={origin:S.origin},oo(t,r.beforeInfo,e,i,h,b),oo(t,r.afterInfo,e,i,d,b)),r.direction=g,r.beforeDirection=v,r.startValue=0,r.datas={},He(n);var E=le(t,n,vr(vr({set:function(t){r.startValue=t*Math.PI/180}},Le(n)),{dragStart:to.dragStart(t,(new Oe).dragStart([0,0],n))})),y=pe(t,"onRotateStart",E);return r.isRotate=!1!==y,t.state.snapRenderInfo={request:n.isRequest},!!r.isRotate&&E},dragControl:function(t,n){var r,e,i,o,a,s,u=n.datas,l=n.clientX,c=n.clientY,p=n.parentRotate,f=n.parentFlag,d=n.isPinch,h=n.groupDelta,g=u.beforeDirection,v=u.beforeInfo,m=u.afterInfo,b=u.absoluteInfo,x=u.isRotate,S=u.startValue,E=u.rect;if(x){ke(n,"rotate");var y,M,C,D,w,R,z,P,O,G,B,T,A,I=g*Vr(n.datas.beforeTransform,[50,50],100,100).direction,k=t.props,N=k.throttleRotate,F=void 0===N?0:N,Y=k.parentMoveable,X=180/Math.PI*S,j=b.startValue;if(A=!f&&"parentDist"in n?(C=(M=ao(t,E,m,y=n.parentDist,0,X))[0],D=M[1],w=M[2],z=(R=ao(t,E,v,y,0,X))[0],P=R[1],O=R[2],B=(G=ao(t,E,b,y,0,j))[0],T=G[1],G[2]):d||f?(C=(r=so(t,E,m,p,I,X,F))[0],D=r[1],w=r[2],z=(e=so(t,E,v,p,g,X,F))[0],P=e[1],O=e[2],B=(i=so(t,E,b,p,I,j,F))[0],T=i[1],i[2]):(C=(o=uo(t,E,m,I,l,c,X,F))[0],D=o[1],w=o[2],z=(a=uo(t,E,v,g,l,c,X,F))[0],P=a[1],O=a[2],B=(s=uo(t,E,b,I,l,c,j,F))[0],T=s[1],s[2]),B||C||z||Y){var q,_,W,L,H=Ne(u,"rotate("+w+"deg)","rotate("+D+"deg)"),V=(q=t,_=D,W=u.fixedPosition,L=u,$e(q,"rotate("+_+"deg)",Ke(q),W,L)),U=Ut(Vt(h||[0,0],V),u.prevInverseDist||[0,0]);u.prevInverseDist=V;var Z=le(t,n,vr({delta:C,dist:D,rotate:w,beforeDist:P,beforeDelta:z,beforeRotate:O,absoluteDist:T,absoluteDelta:B,absoluteRotate:A,isPinch:!!d},Ze(t,H,U,d,n)));return pe(t,"onRotate",Z),Z}}},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isRotate&&(r.isRotate=!1,pe(t,"onRotateEnd",ce(t,n,{})),e)},dragGroupControlCondition:lo,dragGroupControlStart:function(t,n){var r=n.datas,e=t.state,s=e.left,u=e.top,l=e.beforeOrigin,i=this.dragControlStart(t,n);if(!i)return!1;i.set(r.beforeDirection*t.rotation);var o=Te(t,this,"dragControlStart",n,function(t,n){var r=t.state,e=r.left,i=r.top,o=r.beforeOrigin,a=Vt(Ut([e,i],[s,u]),Ut(o,l));return n.datas.groupClient=a,vr(vr({},n),{parentRotate:0})}),a=pe(t,"onRotateGroupStart",vr(vr({},i),{targets:t.props.targets,events:o}));return r.isRotate=!1!==a,!!r.isRotate&&i},dragGroupControl:function(n,t){var r=t.datas;if(r.isRotate){var e=this.dragControl(n,t);if(e){var l=r.beforeDirection,c=e.beforeDist,p=e.beforeDelta/180*Math.PI,i=Te(n,this,"dragControl",t,function(t,n){var r=n.datas.groupClient,e=r[0],i=r[1],o=rn([e,i],p*l),a=o[0],s=o[1],u=[a-e,s-i];return n.datas.groupClient=[a,s],vr(vr({},n),{parentRotate:c,groupDelta:u})});n.rotation=l*e.beforeRotate;var o=vr({targets:n.props.targets,events:i,set:function(t){n.rotation=t}},e);return pe(n,"onRotateGroup",o),o}}},dragGroupControlEnd:function(t,n){var r=n.isDrag;if(n.datas.isRotate)return this.dragControlEnd(t,n),Te(t,this,"dragControlEnd",n),pe(t,"onRotateGroupEnd",ce(t,n,{targets:t.props.targets})),r},request:function(t){var n={},r=0,e=t.getRotation();return{isControl:!0,requestStart:function(t){return{datas:n}},request:function(t){return"deltaRotate"in t?r+=t.deltaRotate:"rotate"in t&&(r=t.rotate-e),{datas:n,parentDist:r}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},po={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,n){var r=t.props,e=r.resizable,i=r.edge;if(e)return(i?io:eo)(t,n)},dragControlCondition:Me,dragControlStart:function(n,t){var r,e=t.inputEvent,i=t.isPinch,o=t.parentDirection,a=t.datas,s=t.parentFlag;console.log(t);var u,l,c=o||(i?[0,0]:ee(e.target)),p=n.state,f=p.target,d=p.width,h=p.height;if(!c||!f)return!1;i||Ie(n,t),a.datas={},a.direction=c,a.startOffsetWidth=d,a.startOffsetHeight=h,a.prevWidth=0,a.prevHeight=0,u=f,l=window.getComputedStyle(u),r=[parseFloat(l.width),parseFloat(l.height)],a.startWidth=r[0],a.startHeight=r[1];var g,v,m,b,x,S,E,y,M,C,D,w=[Math.max(0,d-a.startWidth),Math.max(0,h-a.startHeight)];a.minSize=w,a.maxSize=[1/0,1/0],s||(v=(g=window.getComputedStyle(f)).position,m=g.minWidth,b=g.minHeight,x=g.maxWidth,S=g.maxHeight,C=d,D=h,(y=(E="static"===v||"relative"===v)?f.parentElement:f.offsetParent)&&(C=y.clientWidth,D=y.clientHeight,E&&(M=window.getComputedStyle(y),C-=parseFloat(M.paddingLeft)||0,D-=parseFloat(M.paddingTop)||0)),a.minSize=Vt([zt(m,C)||0,zt(b,D)||0],w),a.maxSize=Vt([zt(x,C)||1/0,zt(S,D)||1/0],w));var R=n.props.transformOrigin||"% %";function z(t){a.ratio=t&&isFinite(t)?t:0}function P(t){a.fixedDirection=t,a.fixedPosition=ti(n,t)}a.transformOrigin=R&&bt(R)?R.split(" "):R,a.isWidth=!c[0]&&!c[1]||c[0]||!c[1],z(d/h),P([-c[0],-c[1]]);var O=le(n,t,{direction:c,set:function(t){var n=t[0],r=t[1];a.startWidth=n,a.startHeight=r},setMin:function(t){a.minSize=t},setMax:function(t){a.maxSize=[t[0]||1/0,t[1]||1/0]},setRatio:z,setFixedDirection:P,setOrigin:function(t){a.transformOrigin=t},dragStart:to.dragStart(n,(new Oe).dragStart([0,0],t))});return!1!==pe(n,"onResizeStart",O)&&(a.isResize=!0,n.state.snapRenderInfo={request:t.isRequest,direction:c}),!!a.isResize&&O},dragControl:function(t,n){var r,e=n.datas,i=n.distX,o=n.distY,a=n.parentFlag,s=n.isPinch,u=n.parentDistance,l=n.parentScale,c=n.parentKeepRatio,p=n.dragClient,f=n.parentDist,d=n.isRequest,h=e.isResize,g=e.transformOrigin,v=e.fixedDirection,m=e.startWidth,b=e.startHeight,x=e.prevWidth,S=e.prevHeight,E=e.minSize,y=e.maxSize,M=e.ratio,C=e.isWidth;if(h){var D=t.props,w=D.throttleResize,R=void 0===w?0:w,z=D.parentMoveable,P=D.snapThreshold,O=void 0===P?5:P,G=e.direction,B=G,T=0,A=0;G[0]||G[1]||(B=[1,1]);var I,k,N,F,Y,X,j,q,_,W,L=M&&(t.props.keepRatio||c),H=p,V=e.startOffsetWidth,U=e.startOffsetHeight;p||(H=!a&&s?ti(t,[0,0]):e.fixedPosition),f?(T=f[0],A=f[1],L&&(T?A=A||T/M:T=A*M)):l?(T=(l[0]-1)*V,A=(l[1]-1)*U):s?u&&(A=(T=u)*U/V):(I=Xe({datas:e,distX:i,distY:o}),T=B[0]*I[0],A=B[1]*I[1],L&&V&&U?(k=Tt([0,0],I),N=Tt([0,0],B),F=Ur([T,A]),Y=Math.cos(k-N)*F,B[0]?A=B[1]?(X=2*B[0]*V,j=2*B[1]*U,q=Ur([X+I[0],j+I[1]])-Ur([X,j]),_=Tt([0,0],[M,1]),T=Math.cos(_)*q,Math.sin(_)*q):(T=Y)*M:T=(A=Y)/M):L||(W=mr(G),V||(I[0]<0?W[0]=-1:0<I[0]&&(W[0]=1)),U||(I[1]<0?W[1]=-1:0<I[1]&&(W[1]=1)),T=(B=G=W)[0]*I[0],A=B[1]*I[1]));var Z=B[0]||L?Math.max(V+T,Dr):V,$=B[1]||L?Math.max(U+A,Dr):U;L&&V&&U&&(C?$=Z/M:Z=$*M);var K,J=[0,0];s||(J=function(t,r,e,i,o,n,a){if(!Oi(t,"resizable"))return[0,0];var s=t.state,u=s.allMatrix,l=s.is3d;return Xi(t,function(t,n){return Bi(u,r+t,e+n,o,i,l)},r,e,i,o,n,a)}(t,Z,$,G,H,d,e)),f&&(f[0]||(J[0]=0),f[1]||(J[1]=0)),L?(B[0]&&B[1]&&J[0]&&J[1]&&(Math.abs(J[0])>Math.abs(J[1])?J[1]=0:J[0]=0),(K=!J[0]&&!J[1])&&(C?Z=ae(Z,R):$=ae($,R)),B[0]&&!B[1]||J[0]&&!J[1]||K&&C?$=(Z+=J[0])/M:(!B[0]&&B[1]||!J[0]&&J[1]||K&&!C)&&(Z=($+=J[1])*M)):(V+T<-O&&(J[0]=0),V+A<-O&&(J[1]=0),Z+=J[0],$+=J[1],J[0]||(Z=ae(Z,R)),J[1]||($=ae($,R))),Z=(r=Gt([Z,$],E,y,L))[0],$=r[1];var Q=[(T=(Z=Math.round(Z))-V)-x,(A=($=Math.round($))-U)-S];e.prevWidth=T,e.prevHeight=A;var tt=Qe(t,Z,$,v,H,g);if(z||!Q.every(function(t){return!t})||!tt.every(function(t){return!t})){var nt=le(t,n,{width:m+T,height:b+A,offsetWidth:Z,offsetHeight:$,direction:G,dist:[T,A],delta:Q,isPinch:!!s,drag:to.drag(t,Pe(n,t.state,tt,!!s,!1))});return pe(t,"onResize",nt),nt}}},dragControlAfter:function(t,n){var r=n.datas,e=r.isResize,i=r.startOffsetWidth,o=r.startOffsetHeight,a=r.prevWidth,s=r.prevHeight;if(e){var u=t.state,l=u.width-(i+a),c=u.height-(o+s),p=3<Math.abs(l),f=3<Math.abs(c);return p&&(r.startWidth+=l,r.startOffsetWidth+=l,r.prevWidth+=l),f&&(r.startHeight+=c,r.startOffsetHeight+=c,r.prevHeight+=c),p||f?(this.dragControl(t,n),!0):void 0}},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isResize&&(r.isResize=!1,pe(t,"onResizeEnd",ce(t,n,{})),e)},dragGroupControlCondition:Me,dragGroupControlStart:function(u,t){var l=t.datas,n=this.dragControlStart(u,t);if(!n)return!1;var e=Ge(u,"resizable",t);function i(t,n){var r=l.fixedDirection,e=l.fixedPosition,i=ti(t,r),o=Kt(an(-u.rotation/180*Math.PI,3),[i[0]-e[0],i[1]-e[1],1],3),a=o[0],s=o[1];return n.datas.originalX=a,n.datas.originalY=s,n}var o=Te(u,this,"dragControlStart",t,i),r=vr(vr({},n),{targets:u.props.targets,events:o,setFixedDirection:function(r){n.setFixedDirection(r),o.forEach(function(t,n){t.setFixedDirection(r),i(u.moveables[n],e[n])})}}),a=pe(u,"onResizeGroupStart",r);return l.isResize=!1!==a,!!l.isResize&&n},dragGroupControl:function(o,t){var n=t.datas;if(n.isResize){var r=this.dragControl(o,t);if(r){var e=r.offsetWidth,i=r.offsetHeight,a=r.dist,s=o.props.keepRatio,u=[e/(e-a[0]),i/(i-a[1])],l=n.fixedPosition,c=Te(o,this,"dragControl",t,function(t,n){var r=Kt(an(o.rotation/180*Math.PI,3),[n.datas.originalX*u[0],n.datas.originalY*u[1],1],3),e=r[0],i=r[1];return vr(vr({},n),{parentDist:null,parentScale:u,dragClient:Vt(l,[e,i]),parentKeepRatio:s})}),p=vr({targets:o.props.targets,events:c},r);return pe(o,"onResizeGroup",p),p}}},dragGroupControlEnd:function(t,n){var r=n.isDrag;if(n.datas.isResize)return this.dragControlEnd(t,n),Te(t,this,"dragControlEnd",n),pe(t,"onResizeGroupEnd",ce(t,n,{targets:t.props.targets})),r},request:function(t){var n={},r=0,e=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?r=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(r+=t.deltaWidth),"offsetHeight"in t?e=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(e+=t.deltaHeight),{datas:n,parentDist:[r,e]}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},fo={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,n){var r=t.props,e=r.resizable,i=r.scalable,o=r.edge;if(!e&&i)return(o?io:eo)(t,n)},dragControlCondition:Me,dragControlStart:function(n,t){var r=t.datas,e=t.isPinch,i=t.inputEvent,o=t.parentDirection||(e?[0,0]:ee(i.target)),a=n.state,s=a.width,u=a.height,l=a.targetTransform,c=a.target,p=a.pos1,f=a.pos2,d=a.pos4;if(!o||!c)return!1;e||Ie(n,t),He(t),r.datas={},r.transform=l,r.prevDist=[1,1],r.direction=o,r.width=s,r.height=u,r.startValue=[1,1];var h=!o[0]&&!o[1]||o[0]||!o[1];function g(t){r.ratio=t&&isFinite(t)?t:0}function v(t){r.fixedDirection=t,r.fixedPosition=ti(n,t)}r.isWidth=h,g(It(p,f)/It(f,d)),v([-o[0],-o[1]]);var m=le(n,t,vr(vr({direction:o,set:function(t){r.startValue=t},setRatio:g,setFixedDirection:v},Le(t)),{dragStart:to.dragStart(n,(new Oe).dragStart([0,0],t))}));return!1!==pe(n,"onScaleStart",m)&&(r.isScale=!0,n.state.snapRenderInfo={request:t.isRequest,direction:o}),!!r.isScale&&m},dragControl:function(t,n){ke(n,"scale");var r=n.datas,e=n.distX,i=n.distY,o=n.parentScale,a=n.parentDistance,s=n.parentKeepRatio,u=n.parentFlag,l=n.isPinch,c=n.dragClient,p=n.parentDist,f=n.isRequest,d=r.prevDist,h=r.direction,g=r.width,v=r.height,m=r.isScale,b=r.startValue,x=r.isWidth,S=r.ratio,E=r.fixedDirection;if(!m)return!1;var y=t.props,M=y.throttleScale,C=y.parentMoveable,D=h;h[0]||h[1]||(D=[1,1]);var w,R,z,P,O,G,B,T=S&&(t.props.keepRatio||s),A=t.state,I=1,k=1,N=c;c||(N=!u&&l?ti(t,[0,0]):r.fixedPosition),p?(I=(g+p[0])/g,k=(v+p[1])/v):o?(I=o[0],k=o[1]):l?a&&(I=(g+a)/g,k=(v+a*v/g)/v):(w=Xe({datas:r,distX:e,distY:i}),R=D[0]*w[0],z=D[1]*w[1],T&&g&&v&&(P=Tt([0,0],w),O=Tt([0,0],D),G=Ur([R,z]),B=Math.cos(P-O)*G,D[0]?z=D[1]?R*S:(R=B)*S:R=(z=B)/S),I=(g+R)/g,k=(v+z)/v),I=D[0]||T?I*b[0]:b[0],k=D[1]||T?k*b[1]:b[1],0===I&&(I=1e-9*(0<d[0]?1:-1)),0===k&&(k=1e-9*(0<d[1]?1:-1));var F,Y=[I/b[0],k/b[1]],X=[I,k];l||!t.props.groupable||mt(F=(A.snapRenderInfo||{}).direction)&&(F[0]||F[1])&&(A.snapRenderInfo={direction:h,request:n.isRequest});var j,q,_,W=[0,0];l||(W=qi(t,Y,h,f,r)),T?(D[0]&&D[1]&&W[0]&&W[1]&&(Math.abs(W[0])>Math.abs(W[1])?W[1]=0:W[0]=0),(j=!W[0]&&!W[1])&&(x?Y[0]=ae(Y[0]*b[0],M)/b[0]:Y[1]=ae(Y[1]*b[1],M)/b[1]),D[0]&&!D[1]||W[0]&&!W[1]||j&&x?(Y[0]+=W[0],q=g*Y[0]*b[0]/S,Y[1]=q/v/b[1]):(!D[0]&&D[1]||!W[0]&&W[1]||j&&!x)&&(Y[1]+=W[1],_=v*Y[1]*b[1]*S,Y[0]=_/g/b[0])):(Y[0]+=W[0],Y[1]+=W[1],W[0]||(Y[0]=ae(Y[0]*b[0],M)/b[0]),W[1]||(Y[1]=ae(Y[1]*b[1],M)/b[1])),0===Y[0]&&(Y[0]=1e-9*(0<d[0]?1:-1)),0===Y[1]&&(Y[1]=1e-9*(0<d[1]?1:-1));var L,H,V=[Y[0]/d[0],Y[1]/d[1]];H=b,X=[(L=Y)[0]*H[0],L[1]*H[1]];var U,Z,$,K=(U=E,Z=N,$=r,$e(t,"scale("+Y.join(", ")+")",U,Z,$)),J=Ut(K,r.prevInverseDist||[0,0]);if(r.prevDist=Y,r.prevInverseDist=K,I===d[0]&&k===d[1]&&J.every(function(t){return!t})&&!C)return!1;var Q=Ne(r,"scale("+X.join(", ")+")","scale("+Y.join(", ")+")"),tt=le(t,n,vr({offsetWidth:g,offsetHeight:v,direction:h,scale:X,dist:Y,delta:V,isPinch:!!l},Ze(t,Q,J,l,n)));return pe(t,"onScale",tt),tt},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isScale&&(r.isScale=!1,pe(t,"onScaleEnd",ce(t,n,{})),e)},dragGroupControlCondition:Me,dragGroupControlStart:function(u,t){var l=t.datas,n=this.dragControlStart(u,t);if(!n)return!1;var e=Ge(u,"resizable",t);function i(t,n){var r=l.fixedDirection,e=l.fixedPosition,i=ti(t,r),o=Kt(an(-u.rotation/180*Math.PI,3),[i[0]-e[0],i[1]-e[1],1],3),a=o[0],s=o[1];return n.datas.originalX=a,n.datas.originalY=s,n}l.moveableScale=u.scale;var o=Te(u,this,"dragControlStart",t,i),r=vr(vr({},n),{targets:u.props.targets,events:o,setFixedDirection:function(r){n.setFixedDirection(r),o.forEach(function(t,n){t.setFixedDirection(r),i(u.moveables[n],e[n])})}}),a=pe(u,"onScaleGroupStart",r);return l.isScale=!1!==a,!!l.isScale&&r},dragGroupControl:function(o,t){var n=t.datas;if(n.isScale){var r=this.dragControl(o,t);if(r){var e=n.moveableScale;o.scale=[r.scale[0]*e[0],r.scale[1]*e[1]];var a=o.props.keepRatio,s=r.dist,u=r.scale,l=n.fixedPosition,i=Te(o,this,"dragControl",t,function(t,n){var r=Kt(an(o.rotation/180*Math.PI,3),[n.datas.originalX*s[0],n.datas.originalY*s[1],1],3),e=r[0],i=r[1];return vr(vr({},n),{parentDist:null,parentScale:u,parentKeepRatio:a,dragClient:Vt(l,[e,i])})}),c=vr({targets:o.props.targets,events:i},r);return pe(o,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,n){var r=n.isDrag;if(n.datas.isScale)return this.dragControlEnd(t,n),Te(t,this,"dragControlEnd",n),pe(t,"onScaleGroupEnd",ce(t,n,{targets:t.props.targets})),r},request:function(){var n={},r=0,e=0;return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return r+=t.deltaWidth,e+=t.deltaHeight,{datas:n,parentDist:[r,e]}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function ho(t,a){return t.map(function(t,n){return r=t,e=a[n],(r*(o=2)+e*(i=1))/(i+o);var r,e,i,o})}function go(t,n,r){var e=Tt(t,n),i=Tt(t,r)-e;return 0<=i?i:i+2*Math.PI}var vo={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,n){var r=t.props,e=r.resizable,i=r.scalable,o=r.warpable,a=r.zoom;if(e||i||!o)return[];var s=t.state,u=s.pos1,l=s.pos2,c=s.pos3,p=s.pos4,f=ho(u,l),d=ho(l,u),h=ho(u,c),g=ho(c,u),v=ho(c,p),m=ho(p,c),b=ho(l,p),x=ho(p,l);return mr([n.createElement("div",{className:Br("line"),key:"middeLine1",style:$r(f,v,a)}),n.createElement("div",{className:Br("line"),key:"middeLine2",style:$r(d,m,a)}),n.createElement("div",{className:Br("line"),key:"middeLine3",style:$r(h,b,a)}),n.createElement("div",{className:Br("line"),key:"middeLine4",style:$r(g,x,a)})],eo(t,n))},dragControlCondition:function(t){return!t.isRequest&&kt(t.inputEvent.target,Br("direction"))},dragControlStart:function(t,n){var e=n.datas,r=n.inputEvent,i=t.props.target,o=ee(r.target);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,l=a.targetTransform,c=a.targetMatrix,p=a.width,f=a.height,d=a.left,h=a.top;return e.datas={},e.targetTransform=l,e.warpTargetMatrix=u?c:Wt(c,3,4),e.targetInverseMatrix=Yt(Xt(e.warpTargetMatrix,4),3,4),e.direction=o,e.left=d,e.top=h,Ie(t,n),He(n),e.poses=[[0,0],[p,0],[0,f],[p,f]].map(function(t){return Ut(t,s)}),e.nextPoses=e.poses.map(function(t){var n=t[0],r=t[1];return Kt(e.warpTargetMatrix,[n,r,0,1],4)}),e.startValue=sn(4),e.prevMatrix=sn(4),e.absolutePoses=oe(a),e.posIndexes=je(o),!(a.snapRenderInfo={request:n.isRequest,direction:o})!==pe(t,"onWarpStart",le(t,n,vr({set:function(t){e.startValue=t}},Le(n))))&&(e.isWarp=!0),e.isWarp},dragControl:function(t,n){var r,e,i,o,a=n.datas,s=n.isRequest,u=n.distX,l=n.distY,c=a.targetInverseMatrix,p=a.prevMatrix,f=a.isWarp,d=a.startValue,h=a.poses,g=a.posIndexes,v=a.absolutePoses;if(!f)return!1;ke(n,"matrix3d"),Oi(t,"warpable")&&(1<(r=g.map(function(t){return v[t]})).length&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]),i=(e=ki(t,s,r.map(function(t){return[t[0]+u,t[1]+l]}))).horizontal,o=e.vertical,l-=i.offset,u-=o.offset);var m=Xe({datas:a,distX:u,distY:l},!0),b=a.nextPoses.slice();if(g.forEach(function(t){b[t]=Vt(b[t],m)}),!Cr.every(function(t){return n=t.map(function(t){return h[t]}),r=t.map(function(t){return b[t]}),e=go(n[0],n[1],n[2]),i=go(r[0],r[1],r[2]),!((o=Math.PI)<=e&&i<=o||e<=o&&o<=i);var n,r,e,i,o}))return!1;var x=cn(h[0],h[2],h[1],h[3],b[0],b[2],b[1],b[3]);if(!x.length)return!1;var S=Fe(a,Ht(c,x,4),!0),E=Ht(Xt(p,4),S,4),y=Ht(d,a.prevMatrix=S,4),M=Ne(a,"matrix3d("+y.join(", ")+")","matrix3d("+S.join(", ")+")");return Ue(n,M),pe(t,"onWarp",le(t,n,{delta:E,matrix:y,dist:S,multiply:Ht,transform:M})),!0},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isWarp&&(r.isWarp=!1,pe(t,"onWarpEnd",ce(t,n,{})),e)}},mo=Br("area-pieces"),bo=Br("area-piece"),xo=Br("avoid");function So(t){var n,r,e,i=t.areaElement,o=t.state,a=o.width,s=o.height;r=xo,(n=i).classList?n.classList.remove(r):(e=new RegExp("(\\s|^)"+r+"(\\s|$)"),n.className=n.className.replace(e," ")),i.style.cssText+="left: 0px; top: 0px; width: "+a+"px; height: "+s+"px"}function Eo(t){return t.createElement("div",{key:"area_pieces",className:mo},t.createElement("div",{className:bo}),t.createElement("div",{className:bo}),t.createElement("div",{className:bo}),t.createElement("div",{className:bo}))}var yo={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,n){var r=t.props,e=r.target,i=r.dragArea,o=r.groupable,a=r.passDragArea,s=t.state,u=s.width,l=s.height,c=s.renderPoses,p=a?Br("area","pass"):Br("area");if(o)return[n.createElement("div",{key:"area",ref:at(t,"areaElement"),className:p}),Eo(n)];if(!e||!i)return[];var f=cn([0,0],[u,0],[0,l],[u,l],c[0],c[1],c[2],c[3]),d=f.length?jr(f,!0):"none";return[n.createElement("div",{key:"area",ref:at(t,"areaElement"),className:p,style:{top:"0px",left:"0px",width:u+"px",height:l+"px",transformOrigin:"0 0",transform:d}}),Eo(n)]},dragStart:function(t,n){var r=n.datas,e=n.clientX,i=n.clientY;if(!n.inputEvent)return!1;r.isDragArea=!1;var o,a,s=t.areaElement,u=t.state,l=u.moveableClientRect,c=u.renderPoses,p=u.rootMatrix,f=u.is3d,d=l.left,h=l.top,g=Lr(c),v=g.left,m=g.top,b=g.width,x=g.height,S=be(p,[e-d,i-h],f?4:3),E=S[0],y=S[1],M=[{left:v,top:m,width:b,height:(y-=m)-10},{left:v,top:m,width:(E-=v)-10,height:x},{left:v,top:m+y+10,width:b,height:x-y-10},{left:v+E+10,top:m,width:b-E-10,height:x}],C=[].slice.call(s.nextElementSibling.children);M.forEach(function(t,n){C[n].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),a=xo,(o=s).classList?o.classList.add(a):o.className+=" "+a},drag:function(t,n){var r=n.datas;if(!n.inputEvent)return!1;r.isDragArea||(r.isDragArea=!0,So(t))},dragEnd:function(t,n){var r=n.inputEvent,e=n.datas;if(!r)return!1;e.isDragArea||So(t)},dragGroupStart:function(t,n){return this.dragStart(t,n)},dragGroup:function(t,n){return this.drag(t,n)},dragGroupEnd:function(t,n){return this.dragEnd(t,n)},unset:function(t){So(t)}},Mo={name:"origin",props:{origin:Boolean},events:{},render:function(t,n){var r=t.props.zoom,e=t.state,i=e.beforeOrigin,o=e.rotation;return[n.createElement("div",{className:Br("control","origin"),style:Kr(o,r,i),key:"beforeOrigin"})]}};function Co(t){var n=t.scrollContainer;return[n.scrollLeft,n.scrollTop]}var Do={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(o,a){var t=o.props.scrollContainer,n=void 0===t?o.getContainer():t,r=new qn,e=De(n,!0);a.datas.dragScroll=r;var i=a.isControl?"controlGesto":"targetGesto",s=a.targets;r.on("scroll",function(t){var n=t.container,r=t.direction,e=le(o,a,{scrollContainer:n,direction:r}),i=s?"onScrollGroup":"onScroll";s&&(e.targets=s),pe(o,i,e)}).on("move",function(t){var n=t.offsetX,r=t.offsetY;o[i].scrollBy(n,r,a.inputEvent,!1)}),r.dragStart(a,{container:e})},checkScroll:function(t,n){var r=n.datas.dragScroll;if(r){var e=t.props,i=e.scrollContainer,o=void 0===i?t.getContainer():i,a=e.scrollThreshold,s=void 0===a?0:a,u=e.getScrollPosition,l=void 0===u?Co:u;return r.drag(n,{container:o,threshold:s,getScrollPosition:function(t){return l({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,n){return this.checkScroll(t,n)},dragEnd:function(t,n){n.datas.dragScroll.dragEnd(),n.datas.dragScroll=null},dragControlStart:function(t,n){return this.dragStart(t,vr(vr({},n),{isControl:!0}))},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupStart:function(t,n){return this.dragStart(t,vr(vr({},n),{targets:t.props.targets}))},dragGroup:function(t,n){return this.drag(t,vr(vr({},n),{targets:t.props.targets}))},dragGroupEnd:function(t,n){return this.dragEnd(t,vr(vr({},n),{targets:t.props.targets}))},dragGroupControlStart:function(t,n){return this.dragStart(t,vr(vr({},n),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,n){return this.drag(t,vr(vr({},n),{targets:t.props.targets}))},dragGroupControEnd:function(t,n){return this.dragEnd(t,vr(vr({},n),{targets:t.props.targets}))}},wo={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,props:Object},events:{}},Ro={name:"padding",props:{padding:Object},events:{},render:function(t,o){var n=t.props;if(n.dragArea)return[];var r=n.padding||{},e=r.left,i=void 0===e?0:e,a=r.top,s=void 0===a?0:a,u=r.right,l=void 0===u?0:u,c=r.bottom,p=void 0===c?0:c,f=t.state,d=f.renderPoses,h=[f.pos1,f.pos2,f.pos3,f.pos4],g=[];return 0<i&&g.push([0,2]),0<s&&g.push([0,1]),0<l&&g.push([1,3]),0<p&&g.push([2,3]),g.map(function(t,n){var r=t[0],e=t[1],i=cn([0,0],[100,0],[0,100],[100,100],h[r],h[e],d[r],d[e]);if(i.length)return o.createElement("div",{key:"padding"+n,className:Br("padding"),style:{transform:jr(i,!0)}})})}},zo=["nw","ne","se","sw"];function Po(t,n){var r=t[0]+t[1],e=n<r?n/r:1;return t[0]*=e,t[1]=n-t[1]*e,t}var Oo=[1,2,5,6],Go=[0,3,4,7],Bo=[1,-1,-1,1],To=[1,1,-1,-1];function Ao(t,a,s,u,l,c,p,f,d){void 0===c&&(c=0),void 0===p&&(p=0),void 0===f&&(f=u),void 0===d&&(d=l);var h=[],g=!1,n=t.map(function(t,n){var r=a[n],e=r.horizontal,i=r.vertical;if(i&&!g&&(g=!0,h.push("/")),g){var o=Math.max(0,1===i?t[1]-p:d-t[1]);return h.push(Ee(o,l,s)),o}o=Math.max(0,1===e?t[0]-c:f-t[0]);return h.push(Ee(o,u,s)),o});return{styles:h,raws:n}}function Io(t){for(var n=[0,0],r=[0,0],e=t.length,i=0;i<e;++i){var o=t[i];o.sub&&(o.horizontal&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1,r[0]=i+1),o.vertical&&(0===r[1]&&(r[0]=i),r[1]=i-r[0]+1))}return{horizontalRange:n,verticalRange:r}}function ko(t,e,i,o,a,n){var r,s,u;void 0===n&&(n=[0,0]);var l=t.indexOf("/"),c=(-1<l?t.slice(0,l):t).length,p=t.slice(0,c),f=t.slice(c+1),d=p[0],h=void 0===d?"0px":d,g=p[1],v=void 0===g?h:g,m=p[2],b=void 0===m?h:m,x=p[3],S=void 0===x?v:x,E=f[0],y=void 0===E?h:E,M=f[1],C=void 0===M?y:M,D=f[2],w=void 0===D?y:D,R=f[3],z=void 0===R?C:R,P=[h,v,b,S].map(function(t){return zt(t,e)}),O=[y,C,w,z].map(function(t){return zt(t,i)}),G=P.slice(),B=O.slice(),T=Po([G[0],G[1]],e);G[0]=T[0],G[1]=T[1],r=Po([G[3],G[2]],e),G[3]=r[0],G[2]=r[1],s=Po([B[0],B[3]],i),B[0]=s[0],B[3]=s[1],u=Po([B[1],B[2]],i),B[1]=u[0],B[2]=u[1];var A=G.slice(0,Math.max(n[0],p.length)),I=B.slice(0,Math.max(n[1],f.length));return mr(A.map(function(t,n){var r=zo[n];return{horizontal:Bo[n],vertical:0,pos:[o+t,a+(-1===To[n]?i:0)],sub:!0,raw:P[n],direction:r}}),I.map(function(t,n){var r=zo[n];return{horizontal:0,vertical:To[n],pos:[o+(-1===Bo[n]?e:0),a+t],sub:!0,raw:O[n],direction:r}}))}function No(t,n,r,e,i){void 0===i&&(i=n.length);var o=Io(t.slice(e)),a=o.horizontalRange,s=o.verticalRange,u=r-e,l=0;if(0==u)l=i;else if(0<u&&u<a[1])l=a[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(r,l),n.splice(r,l)}function Fo(t,n,r,e,i,o,a,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var p=Io(t.slice(r)),f=p.horizontalRange,d=p.verticalRange;if(-1<e)for(var h=1===Bo[e]?o-l:s-o,g=f[1];g<=e;++g){var v=1===To[g]?c:u,m=0;if(e===g?m=o:0===g?m=l+h:-1===Bo[g]&&(m=s-(n[r][0]-l)),t.splice(r+g,0,{horizontal:Bo[g],vertical:0,pos:[m,v]}),n.splice(r+g,0,[m,v]),0===g)break}else if(-1<i){var b,x=1===To[i]?a-c:u-a;0===f[1]&&0===d[1]&&(b=[l+x,c],t.push({horizontal:Bo[0],vertical:0,pos:b}),n.push(b));for(var S=d[0],g=d[1];g<=i;++g){m=1===Bo[g]?l:s,v=0;if(i===g?v=a:0===g?v=c+x:1===To[g]?v=n[r+S][1]:-1===To[g]&&(v=u-(n[r+S][1]-c)),t.push({horizontal:0,vertical:To[g],pos:[m,v]}),n.push([m,v]),0===g)break}}}function Yo(t,r){return void 0===r&&(r=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,n){return t.horizontal?r[n]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,n){return t.vertical?r[n]:null}).filter(function(t){return null!=t})}}var Xo=[[0,-1,"n"],[1,0,"e"]],jo=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function qo(t,n,r){var e=t.props.clipRelative,i=t.state,o=i.width,a=i.height,s=n.type,u=n.poses,l="rect"===s,c="circle"===s;if("polygon"===s)return r.map(function(t){return Ee(t[0],o,e)+" "+Ee(t[1],a,e)});if(l||"inset"===s){var p=r[1][1],f=r[3][0],d=r[7][0],h=r[5][1];if(l)return[p,f,h,d].map(function(t){return t+"px"});var g,v,m,b=[p,o-f,a-h,d].map(function(t,n){return Ee(t,n%2?o:a,e)});return 8<r.length&&(v=(g=Ut(r[4],r[0]))[0],m=g[1],b.push.apply(b,mr(["round"],Ao(r.slice(8),u.slice(8),e,v,m,d,p,f,h).styles))),b}if(c||"ellipse"===s){var x=r[0],S=Ee(Math.abs(r[1][1]-x[1]),c?Math.sqrt((o*o+a*a)/2):a,e);return(b=c?[S]:[Ee(Math.abs(r[2][0]-x[0]),o,e),S]).push("at",Ee(x[0],o,e),Ee(x[1],a,e)),b}}function _o(t,n,r,e){var a=[e,(e+n)/2,n],s=[t,(t+r)/2,r];return jo.map(function(t){var n=t[0],r=t[1],e=t[2],i=a[n+1],o=s[r+1];return{vertical:Math.abs(r),horizontal:Math.abs(n),direction:e,pos:[i,o]}})}function Wo(t,i,o,n,r){var e,a,s,u=r;if(u||(u="none"!==(s=(a=getComputedStyle(t)).clipPath)?s:a.clip),u&&"none"!==u&&"auto"!==u||(u=n)){var l=Ct(u),c=l.prefix,p=void 0===c?u:c,f=l.value,d=void 0===f?"":f,h="circle"===p,g=" ";if("polygon"===p){g=",";return{type:p,clipText:u,poses:G=(P=Mt(d||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var n=t.split(" "),r=n[0],e=n[1];return{vertical:1,horizontal:1,pos:[zt(r,i),zt(e,o)]}}),splitter:g}}if(h||"ellipse"===p){var v,m,b,x,S,E,y,M,C,D="",w="",R=0,z=0,P=yt(d);z=h?(m="",m=void 0===(v=P[0])?"50%":v,D=void 0===(b=P[2])?"50%":b,w=void 0===(x=P[3])?"50%":x,R=zt(m,Math.sqrt((i*i+o*o)/2))):(M=E="",E=void 0===(S=P[0])?"50%":S,M=void 0===(y=P[1])?"50%":y,D=void 0===(C=P[3])?"50%":C,w=void 0===(e=P[4])?"50%":e,R=zt(E,i),zt(M,o));var O=[zt(D,i),zt(w,o)],G=mr([{vertical:1,horizontal:1,pos:O,direction:"nesw"}],Xo.slice(0,h?1:2).map(function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[O[0]+t[0]*R,O[1]+t[1]*z]}}));return{type:p,clipText:u,radiusX:R,radiusY:z,left:O[0]-R,top:O[1]-z,poses:G,splitter:g}}if("inset"===p){var B=(P=yt(d||"0 0 0 0")).indexOf("round"),T=(-1<B?P.slice(0,B):P).length,A=P.slice(T+1),I=P.slice(0,T),k=I[0],N=I[1],F=void 0===N?k:N,Y=I[2],X=void 0===Y?k:Y,j=I[3],q=void 0===j?F:j,_=[k,X].map(function(t){return zt(t,o)}),W=_[0],L=_[1],H=[q,F].map(function(t){return zt(t,i)}),V=H[0],U=H[1],Z=i-U,$=o-L,K=ko(A,Z-V,$-W,V,W);return{type:"inset",clipText:u,poses:G=mr(_o(W,Z,$,V),K),top:W,left:V,right:Z,bottom:$,radius:A,splitter:g}}if("rect"===p){g=",";var J=(P=Mt(d||"0px, "+i+"px, "+o+"px, 0px")).map(function(t){return Dt(t).value});return{type:"rect",clipText:u,poses:G=_o(W=J[0],U=J[1],L=J[2],V=J[3]),top:W,right:U,bottom:L,left:V,values:P,splitter:g}}}}var Lo={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,s){var n=t.props,r=n.customClipPath,e=n.defaultClipPath,i=n.clipArea,u=n.zoom,o=t.state,a=o.target,l=o.width,c=o.height,p=o.allMatrix,f=o.is3d,d=o.left,h=o.top,g=o.pos1,v=o.pos2,m=o.pos3,b=o.pos4,x=o.clipPathState,S=o.snapBoundInfos;if(!a)return[];var E=Wo(a,l,c,e||"inset",x||r);if(!E)return[];var y,M,C,D,w,R,z=f?4:3,P=E.type,O=E.poses.map(function(t){var n=_r(p,t.pos,z);return[n[0]-d,n[1]-h]}),G=[],B=[],T="rect"===P,A="inset"===P,I="polygon"===P;if((T||A||I)&&(y=A?O.slice(0,8):O,B=y.map(function(t,n){var r=0===n?y[y.length-1]:y[n-1],e=Tt(r,t),i=Zr(r,t);return s.createElement("div",{key:"clipLine"+n,className:Br("line","clip-line","snap-control"),"data-clip-index":n,style:{width:i+"px",transform:"translate("+r[0]+"px, "+r[1]+"px) rotate("+e+"rad) scaleY("+u+")"}})})),G=O.map(function(t,n){return s.createElement("div",{key:"clipControl"+n,className:Br("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) scale("+u+")"}})}),A&&G.push.apply(G,O.slice(8).map(function(t,n){return s.createElement("div",{key:"clipRadiusControl"+n,className:Br("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) scale("+u+")"}})})),"circle"===P||"ellipse"===P){var k=E.left,N=E.top,F=E.radiusX,Y=E.radiusY,X=Ut(_r(p,[k,N],z),_r(p,[0,0],z)),j=X[0],q=X[1],_="none";if(!i){for(var W=Math.max(10,F/5,Y/5),L=[],H=0;H<=W;++H){var V=2*Math.PI/W*H;L.push([F+(F-u)*Math.cos(V),Y+(Y-u)*Math.sin(V)])}L.push([F,-2]),L.push([-2,-2]),L.push([-2,2*Y+2]),L.push([2*F+2,2*Y+2]),L.push([2*F+2,-2]),L.push([F,-2]),_="polygon("+L.map(function(t){return t[0]+"px "+t[1]+"px"}).join(", ")+")"}G.push(s.createElement("div",{key:"clipEllipse",className:Br("clip-ellipse","snap-control"),style:{width:2*F+"px",height:2*Y+"px",clipPath:_,transform:"translate("+(-d+j)+"px, "+(-h+q)+"px) "+jr(p)}}))}return i&&(C=(M=Lr(mr([g,v,m,b],O))).width,D=M.height,w=M.left,R=M.top,(I||T||A)&&(L=A?O.slice(0,8):O,G.push(s.createElement("div",{key:"clipArea",className:Br("clip-area","snap-control"),style:{width:C+"px",height:D+"px",transform:"translate("+w+"px, "+R+"px)",clipPath:"polygon("+L.map(function(t){return t[0]-w+"px "+(t[1]-R)+"px"}).join(", ")+")"}})))),S&&["vertical","horizontal"].forEach(function(o){var t=S[o],a="horizontal"===o;t.isSnap&&B.push.apply(B,t.snap.posInfos.map(function(t,n){var r=t.pos,e=Ut(_r(p,a?[0,r]:[r,0],z),[d,h]),i=Ut(_r(p,a?[l,r]:[r,c],z),[d,h]);return ro(s,"",e,i,u,"clip"+o+"snap"+n,"guideline")})),t.isBound&&B.push.apply(B,t.bounds.map(function(t,n){var r=t.pos,e=Ut(_r(p,a?[0,r]:[r,0],z),[d,h]),i=Ut(_r(p,a?[l,r]:[r,c],z),[d,h]);return ro(s,"",e,i,u,"clip"+o+"bounds"+n,"guideline","bounds","bold")}))}),mr(G,B)},dragControlCondition:function(t){return t.inputEvent&&-1<(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")},dragStart:function(t,n){var r=t.props.dragWithClip;return void 0!==r&&!r&&this.dragControlStart(t,n)},drag:function(t,n){return this.dragControl(t,n)},dragEnd:function(t,n){return this.dragControlEnd(t,n)},dragControlStart:function(t,n){var r=t.state,e=t.props,i=e.defaultClipPath,o=e.customClipPath,a=r.target,s=r.width,u=r.height,l=n.inputEvent?n.inputEvent.target:null,c=l?l.getAttribute("class"):"",p=n.datas,f=Wo(a,s,u,i||"inset",o);if(!f)return!1;var d=f.clipText;return!1===pe(t,"onClipStart",le(t,n,{clipType:f.type,clipStyle:d,poses:f.poses.map(function(t){return t.pos})}))?p.isClipStart=!1:(p.isControl=-1<c.indexOf("clip-control"),p.isLine=-1<c.indexOf("clip-line"),p.isArea=-1<c.indexOf("clip-area")||-1<c.indexOf("clip-ellipse"),p.index=l?parseInt(l.getAttribute("data-clip-index"),10):-1,p.clipPath=f,p.isClipStart=!0,r.clipPathState=d,Ie(t,n),!0)},dragControl:function(t,n){var r=n.datas,e=n.originalDatas;if(!r.isClipStart)return!1;var i=e&&e.draggable||{},o=r.isControl,a=r.isLine,s=r.isArea,u=r.index,l=r.clipPath;if(!l)return!1;var c=i.isDrag?i.prevDist:Xe(n),p=c[0],f=c[1],d=t.props,h=t.state,g=h.width,v=h.height,m=!s&&!o&&!a,b=l.type,x=l.poses,S=l.splitter,E=x.map(function(t){return t.pos});m&&(p=-p,f=-f);var y,M,C,D,w,R,z,P,O,G,B,T,A,I,k,N=!o||"nesw"===x[u].direction,F="inset"===b||"rect"===b,Y=x.map(function(){return[0,0]});o&&!N?(M=(y=x[u]).horizontal,C=y.vertical,D=[p*Math.abs(M),f*Math.abs(C)],z=D,P=F,B=(w=x)[R=u],T=B.direction,A=B.sub,I=w.map(function(){return[0,0]}),k=T?T.split(""):[],P&&R<8?(O=k.filter(function(t){return"w"===t||"e"===t})[0],G=k.filter(function(t){return"n"===t||"s"===t})[0],I[R]=z,w.forEach(function(t,n){var r=t.direction;r&&(-1<r.indexOf(O)&&(I[n][0]=z[0]),-1<r.indexOf(G)&&(I[n][1]=z[1]))}),O&&(I[1][0]=z[0]/2,I[5][0]=z[0]/2),G&&(I[3][1]=z[1]/2,I[7][1]=z[1]/2)):T&&!A?k.forEach(function(o){var a="n"===o||"s"===o;w.forEach(function(t,n){var r=t.direction,e=t.horizontal,i=t.vertical;r&&-1!==r.indexOf(o)&&(I[n]=[a||!e?0:z[0],a&&i?z[1]:0])})}):I[R]=z,Y=I):N&&(Y=E.map(function(){return[p,f]}));var X=E.map(function(t,n){return Vt(t,Y[n])}),j=mr(X);h.snapBoundInfos=null;var q,_,W,L,H,V,U="circle"===l.type,Z="ellipse"===l.type;(U||Z)&&(q=Lr(X),_=Math.abs(q.bottom-q.top),W=Math.abs(Z?q.right-q.left:_),L=X[0][1]+_,H=X[0][0]-W,V=X[0][0]+W,U&&(j.push([V,q.bottom]),Y.push([1,0])),j.push([q.left,L]),Y.push([0,1]),j.push([H,q.bottom]),Y.push([1,0]));var $,K=ei([],g,v,(d.clipHorizontalGuidelines||[]).map(function(t){return zt(""+t,v)}),(d.clipVerticalGuidelines||[]).map(function(t){return zt(""+t,g)})),J=[],Q=[];Q=U||Z?(J=[j[4][0],j[2][0]],[j[1][1],j[3][1]]):F?(nt=[j[0],j[2],j[4],j[6]],$=[Y[0],Y[2],Y[4],Y[6]],J=nt.filter(function(t,n){return $[n][0]}).map(function(t){return t[0]}),nt.filter(function(t,n){return $[n][1]}).map(function(t){return t[1]})):(J=j.filter(function(t,n){return Y[n][0]}).map(function(t){return t[0]}),j.filter(function(t,n){return Y[n][1]}).map(function(t){return t[1]}));for(var tt=0;tt<2;++tt){if("break"===function(){var t=Ni(K,d.clipTargetBounds&&{left:0,top:0,right:g,bottom:v},J,Q,{snapThreshold:5}),n=t.horizontal,r=t.vertical,e=n.offset,i=r.offset;if(!Z&&!U||0!==Y[0][0]||0!==Y[0][1])return j.forEach(function(t,n){var r=Y[n];r[0]&&(t[0]-=i),r[1]&&(t[1]-=e)}),"break";var o=Lr(X),a=o.bottom-o.top,s=Z?o.right-o.left:a;s-=r.isBound?Math.abs(i):0===r.snapIndex?-i:i,a-=n.isBound?Math.abs(e):0===n.snapIndex?-e:e,U&&(s=a=0<fi(r,n)?a:s);var u=j[0];j[1][1]=u[1]-a,j[2][0]=u[0]+s,j[3][1]=u[1]+a,j[4][0]=u[0]-s}())break}var nt,rt=qo(t,l,X),et=b+"("+rt.join(S)+")";return h.clipPathState=et,Q=U||Z?(J=[j[4][0],j[2][0]],[j[1][1],j[3][1]]):F?(nt=[j[0],j[2],j[4],j[6]],J=nt.map(function(t){return t[0]}),nt.map(function(t){return t[1]})):(J=j.map(function(t){return t[0]}),j.map(function(t){return t[1]})),h.snapBoundInfos=Ni(K,d.clipTargetBounds&&{left:0,top:0,right:g,bottom:v},J,Q,{snapThreshold:1}),pe(t,"onClip",le(t,n,{clipEventType:"changed",clipType:b,poses:X,clipStyle:et,clipStyles:rt,distX:p,distY:f})),!0},dragControlEnd:function(t,n){this.unset(t);var r=n.isDrag,e=n.datas,i=n.isDouble,o=e.isLine,a=e.isClipStart,s=e.isControl;return!!a&&(pe(t,"onClipEnd",ce(t,n,{})),i&&(s?function(t,n){var r=n.datas,e=r.clipPath,i=r.index,o=e.type,a=e.poses,s=e.splitter,u=a.map(function(t){return t.pos}),l=u.length;if("polygon"===o)a.splice(i,1),u.splice(i,1);else{if("inset"!==o)return;if(i<8)return;if(No(a,u,i,8,l),l===a.length)return}var c=qo(t,e,u);pe(t,"onClip",le(t,n,{clipEventType:"removed",clipType:o,poses:u,clipStyles:c,clipStyle:o+"("+c.join(s)+")",distX:0,distY:0}))}(t,n):o&&function(t,n){var r=Ae(t,n),e=r[0],i=r[1],o=n.datas,a=o.clipPath,s=o.index,u=a.type,l=a.poses,c=a.splitter,p=l.map(function(t){return t.pos});if("polygon"===u)p.splice(s,0,[e,i]);else{if("inset"!==u)return;var f=Oo.indexOf(s),d=Go.indexOf(s),h=l.length;if(Fo(l,p,8,f,d,e,i,p[4][0],p[4][1],p[0][0],p[0][1]),h===l.length)return}var g=qo(t,a,p);pe(t,"onClip",le(t,n,{clipEventType:"added",clipType:u,poses:p,clipStyles:g,clipStyle:u+"("+g.join(c)+")",distX:0,distY:0}))}(t,n)),i||r)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Ho={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t){return t.isRequest?"originDraggable"===t.requestAble:kt(t.inputEvent.target,Br("origin"))},dragControlStart:function(t,n){var r=n.datas;Ie(t,n);var e=le(t,n,{dragStart:to.dragStart(t,(new Oe).dragStart([0,0],n))}),i=pe(t,"onDragOriginStart",e);return r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],!(r.isDragOrigin=!0)===i?r.isDragOrigin=!1:e},dragControl:function(t,n){var r=n.datas,e=n.isPinch,i=n.isRequest;if(!r.isDragOrigin)return!1;var o,a=Xe(n),s=a[0],u=a[1],l=t.state,c=l.width,p=l.height,f=l.offsetMatrix,d=l.targetMatrix,h=l.is3d,g=t.props.originRelative,v=void 0===g||g,m=h?4:3,b=[s,u];!i||((o=n.distOrigin)[0]||o[1])&&(b=o);var x=Vt(r.startOrigin,b),S=Vt(r.startTargetOrigin,b),E=Ut(b,r.prevOrigin),y=We(f,d,x,m),M=t.getRect(),C=Lr(Wr(y,c,p,m)),D=[M.left-C.left,M.top-C.top],w=le(t,n,{width:c,height:p,origin:x,dist:r.prevOrigin=b,delta:E,transformOrigin:[Ee(S[0],c,v),Ee(S[1],p,v)].join(" "),drag:to.drag(t,Pe(n,t.state,D,!!e,!1))});return pe(t,"onDragOrigin",w),w},dragControlEnd:function(t,n){return!!n.datas.isDragOrigin&&(pe(t,"onDragOriginEnd",ce(t,n,{})),!0)},dragGroupControlCondition:function(t){return this.dragControlCondition(t)},dragGroupControlStart:function(t,n){return!!this.dragControlStart(t,n)},dragGroupControl:function(t,n){var r=this.dragControl(t,n);return!!r&&(t.transformOrigin=r.transformOrigin,!0)},request:function(t){var n={},r=t.getRect(),e=0,i=0,o=r.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?e=t.x-r.left:"deltaX"in t&&(e+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY)),{datas:n,distX:e,distY:i,distOrigin:a}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function Vo(t,n,r,e,i){void 0===e&&(e=[0,0]);var o,a;return ko(!(a=i||((o=window.getComputedStyle(t))&&o.borderRadius||""))||!i&&"0px"===a?[]:yt(a),n,r,0,0,e)}function Uo(t,n,r,e,i,o){var a=t.state,s=a.width,u=a.height,l=Ao(o,i,t.props.roundRelative,s,u),c=l.raws,p=l.styles,f=Yo(i,c),d=f.horizontals,h=f.verticals,g=p.join(" ");pe(t,"onRound",le(t,n,{horizontals:d,verticals:h,borderRadius:a.borderRadiusState=g,width:s,height:u,delta:e,dist:r}))}var Zo={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,i){var n=t.state,r=n.target,e=n.width,o=n.height,a=n.allMatrix,s=n.is3d,u=n.left,l=n.top,c=n.borderRadiusState,p=t.props,f=p.minRoundControls,d=void 0===f?[0,0]:f,h=p.maxRoundControls,g=void 0===h?[4,4]:h,v=p.zoom;if(!r)return null;var m=s?4:3,b=Vo(r,e,o,d,c);if(!b)return null;var x=0,S=0;return b.map(function(t,n){S+=Math.abs(t.horizontal),x+=Math.abs(t.vertical);var r=Ut(_r(a,t.pos,m),[u,l]),e=t.vertical?x<=g[1]:S<=g[0];return i.createElement("div",{key:"borderRadiusControl"+n,className:Br("control","border-radius"),"data-radius-index":n,style:{display:e?"block":"none",transform:"translate("+r[0]+"px, "+r[1]+"px) scale("+v+")"}})})},dragControlCondition:function(t){if(!t.inputEvent||t.isRequest)return!1;var n=t.inputEvent.target.getAttribute("class")||"";return-1<n.indexOf("border-radius")||-1<n.indexOf("moveable-line")&&-1<n.indexOf("moveable-direction")},dragControlStart:function(t,n){var r=n.inputEvent,e=n.datas,i=r.target,o=i.getAttribute("class")||"",a=-1<o.indexOf("border-radius"),s=-1<o.indexOf("moveable-line")&&-1<o.indexOf("moveable-direction"),u=a?parseInt(i.getAttribute("data-radius-index"),10):-1,l=s?parseInt(i.getAttribute("data-line-index"),10):-1;if(!a&&!s)return!1;if(!1===pe(t,"onRoundStart",le(t,n,{})))return!1;e.lineIndex=l,e.controlIndex=u,e.isControl=a,e.isLine=s,Ie(t,n);var c=t.props,p=c.roundRelative,f=c.minRoundControls,d=void 0===f?[0,0]:f,h=t.state,g=h.target,v=h.width,m=h.height;e.isRound=!0,e.prevDist=[0,0];var b=Vo(g,v,m,d)||[];return e.controlPoses=b,h.borderRadiusState=Ao(b.map(function(t){return t.pos}),b,p,v,m).styles.join(" "),!0},dragControl:function(t,n){var r=n.datas;if(!r.isRound||!r.isControl||!r.controlPoses.length)return!1;var e=r.controlIndex,i=r.controlPoses,o=Xe(n),a=o[0],s=o[1],u=[a,s],l=Ut(u,r.prevDist),c=t.props.maxRoundControls,p=void 0===c?[4,4]:c,f=t.state,d=f.width,h=f.height,g=i[e],v=g.vertical,m=g.horizontal,b=i.map(function(t,n){var r=t.horizontal,e=t.vertical,i=[r*m*u[0],e*v*u[1]];if(r){if(1===p[0])return i;if(p[0]<4&&r!==m)return i}else{if(0===p[1])return i[1]=e*m*u[0]/d*h,i;if(v){if(1===p[1])return i;if(p[1]<4&&e!==v)return i}}return[0,0]});b[e]=u;var x=i.map(function(t,n){return Vt(t.pos,b[n])});return r.prevDist=[a,s],Uo(t,n,u,l,i,x),!0},dragControlEnd:function(t,n){var r=t.state;r.borderRadiusState="";var e=n.datas,i=n.isDouble;if(!e.isRound)return!1;var o,a,s,u,l,c,p,f,d,h,g,v,m,b,x,S,E,y=r.width,M=r.height,C=e.isControl,D=e.controlIndex,w=e.isLine,R=e.lineIndex,z=e.controlPoses,P=z.map(function(t){return t.pos}),O=P.length,G=t.props.roundClickable;return i&&(void 0===G||G)&&(C?No(z,P,D,0):w&&(a=(o=Ae(t,n))[0],s=o[1],l=P,c=R,p=a,f=s,d=y,h=M,g=Yo(u=z),v=g.horizontals,m=g.verticals,b=v.length,x=m.length,E=S=-1,0===c?0===b?S=0:1===b&&(S=1):3===c&&(b<=2?S=2:b<=3&&(S=3)),2===c?0===x?E=0:x<4&&(E=3):1===c&&(x<=1?E=1:x<=2&&(E=2)),Fo(u,l,0,S,E,p,f,d,h)),O!==z.length&&Uo(t,n,[0,0],[0,0],z,P),pe(t,"onRoundEnd",ce(t,n,{}))),!(r.borderRadiusState="")},unset:function(t){t.state.borderRadiusState=""}},$o={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},setTransform:function(t,n){var r=t.state,e=r.is3d,i=r.targetMatrix,o=e?"matrix3d("+i.join(",")+")":"matrix("+$t(i,!0)+")";n.datas.startTransforms=[o]},resetTransform:function(t,n){n.datas.nextTransforms=n.datas.startTransforms,n.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,n){return le(t,n,{setTransform:function(t){n.datas.startTransforms=mt(t)?t:yt(t)},isPinch:!!n.isPinch})},fillDragParams:function(t,n){return le(t,n,{isPinch:!!n.isPinch})},dragStart:function(t,n){this.setTransform(t,n),pe(t,"onBeforeRenderStart",this.fillDragStartParams(t,n))},drag:function(t,n){this.resetTransform(t,n),pe(t,"onBeforeRender",le(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){pe(t,"onBeforeRenderEnd",le(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){var e=this;this.dragStart(t,n);var r=Ge(t,"beforeRenderable",n),i=t.moveables,o=r.map(function(t,n){var r=i[n];return e.setTransform(r,t),e.fillDragStartParams(r,t)});pe(t,"onBeforeRenderGroupStart",le(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,n){var e=this;this.drag(t,n);var r=Ge(t,"beforeRenderable",n),i=t.moveables,o=r.map(function(t,n){var r=i[n];return e.resetTransform(r,t),e.fillDragParams(r,t)});pe(t,"onBeforeRenderGroup",le(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,n){this.dragEnd(t,n),pe(t,"onBeforeRenderGroupEnd",le(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}},Ko={name:"Renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragStart:function(t,n){pe(t,"onRenderStart",le(t,n,{isPinch:!!n.isPinch}))},drag:function(t,n){pe(t,"onRender",le(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){pe(t,"onRenderEnd",le(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){pe(t,"onRenderGroupStart",le(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroup:function(t,n){pe(t,"onRenderGroup",le(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroupEnd:function(t,n){pe(t,"onRenderGroupEnd",le(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}};function Jo(e,t,n,r,i,o,a){var s="Start"===i,u=e.state.target,l=o.isRequest;if(!u||s&&-1<r.indexOf("Control")&&!l&&e.areaElement===o.inputEvent.target)return!1;var c=""+n+r+i,p=""+n+r+"Condition",f="End"===i,d=-1<i.indexOf("After"),h=!(!s||e.targetGesto&&e.controlGesto&&e.targetGesto.isFlag()&&e.controlGesto.isFlag());h&&e.updateRect(i,!0,!1),""!==i||d||l||xe(e.state,o);var g,v=-1<r.indexOf("Group"),m=mr([$o],e[t].slice(),[Ko]);if(l&&(g=o.requestAble,m.some(function(t){return t.name===g})||m.push.apply(m,e.props.ables.filter(function(t){return t.name===g}))),!m.length)return!1;var b=m.filter(function(t){return t[c]}),x=o.datas;h&&b.forEach(function(t){t.unset&&t.unset(e)});var S,E=o.inputEvent;f&&E&&(S=document.elementFromPoint(o.clientX,o.clientY)||E.target);var y=b.filter(function(t){var n=t.name,r=x[n]||(x[n]={});return s&&(r.isEventStart=!t[p]||t[p](o,e)),!!r.isEventStart&&t[c](e,vr(vr({},o),{datas:r,originalDatas:x,inputTarget:S}))}),M=y.length,C=s&&b.length&&!M;return(f||C)&&(e.state.gesto=null,e.moveables&&e.moveables.forEach(function(t){t.state.gesto=null})),h&&C&&b.forEach(function(t){t.unset&&t.unset(e)}),!e.isUnmounted&&!C&&((!s&&M&&!a||f)&&(y.some(function(t){return t.updateRect})&&!v?e.updateRect(i,!1,!1):e.updateRect(i,!0,!1),e.forceUpdate()),s||f||d||!M||a||Jo(e,t,n,r,i+"After",o),!0)}function Qo(r,t,n){var e=r.controlBox.getElement(),i=[];i.push(e),r.props.dragArea&&!r.props.dragTarget||i.push(t);function o(t){var n=t.inputEvent.target;return n===r.areaElement||!r.isMoveableElement(n)||kt(n,"moveable-area")||kt(n,"moveable-padding")}return ta(r,i,"targetAbles",n,{dragStart:o,pinchStart:o})}function ta(i,t,o,a,s){void 0===s&&(s={});var n=i.props,r=n.pinchOutside,e=n.pinchThreshold,u={container:window,pinchThreshold:e,pinchOutside:r},l=new rr(t,u);return["drag","pinch"].forEach(function(e){["Start","","End"].forEach(function(r){l.on(""+e+r,function(t){var n=t.eventType;(!s[n]||s[n](t))&&Jo(i,o,e,a,r,t)||t.stop()})})}),l}var na=function(){function t(t,n,r){var i=this;this.target=t,this.moveable=n,this.eventName=r,this.ables=[],this.onEvent=function(n){var r=i.eventName,e=i.moveable;i.ables.forEach(function(t){t[r]({inputEvent:n},e)})},this.target.addEventListener(this.eventName.toLowerCase(),this.onEvent)}var n=t.prototype;return n.setAbles=function(t){this.ables=t},n.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this.onEvent),this.target=null,this.moveable=null},t}(),ra=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.state=vr({container:null,target:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]]},te(null)),t.enabledAbles=[],t.targetAbles=[],t.controlAbles=[],t.rotation=0,t.scale=[1,1],t.isUnmounted=!1,t.events={mouseEnter:null,mouseLeave:null},t}gr(t,n);var r=t.prototype;return r.render=function(){var t=this.props,n=this.state,r=t.edge,e=t.parentPosition,i=t.className,o=t.target,a=t.zoom,s=t.cspNonce,u=t.translateZ,l=t.cssStyled,c=t.portalContainer;this.checkUpdate(),this.updateRenderPoses();var p=e||{left:0,top:0},f=p.left,d=p.top,h=n.left,g=n.top,v=n.target,m=n.direction,b=n.renderPoses,x=t.targets,S=(x&&x.length||o)&&v,E=this.isDragging(),y={},M={createElement:P};return this.getEnabledAbles().forEach(function(t){y["data-able-"+t.name.toLowerCase()]=!0}),P(l,vr({cspNonce:s,ref:at(this,"controlBox"),className:Br("control-box",-1===m?"reverse":"",E?"dragging":"")+" "+i},y,{portalContainer:c,style:{position:"absolute",display:S?"block":"none",transform:"translate3d("+(h-f)+"px, "+(g-d)+"px, "+u+")","--zoom":a,"--zoompx":a+"px"}}),this.renderAbles(),ro(M,r?"n":"",b[0],b[1],a,0),ro(M,r?"e":"",b[1],b[3],a,1),ro(M,r?"w":"",b[0],b[2],a,2),ro(M,r?"s":"",b[2],b[3],a,3))},r.componentDidMount=function(){this.controlBox.getElement();var t=this.props,n=t.parentMoveable,r=t.container,e=t.wrapperMoveable;this.updateEvent(t),this.updateNativeEvents(t),r||n||e||this.updateRect("",!1,!0),this.updateCheckInput()},r.componentDidUpdate=function(t){this.updateNativeEvents(t),this.updateEvent(t),this.updateCheckInput()},r.componentWillUnmount=function(){this.isUnmounted=!0,ue(this,"targetGesto"),ue(this,"controlGesto");var t=this.events;for(var n in t){var r=t[n];r&&r.destroy()}},r.getContainer=function(){var t=this.props,n=t.parentMoveable,r=t.wrapperMoveable;return t.container||r&&r.getContainer()||n&&n.getContainer()||this.controlBox.getElement().parentElement},r.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(yr)},r.dragStart=function(t){return this.targetGesto&&this.targetGesto.triggerDragStart(t),this},r.hitTest=function(t){var n,r,e=this.state,i=e.target,o=e.pos1,a=e.pos2,s=e.pos3,u=e.pos4,l=e.targetClientRect;if(!i)return 0;var c=(r=t instanceof Element?{left:(n=t.getBoundingClientRect()).left,top:n.top,width:n.width,height:n.height}:vr({width:0,height:0},t)).left,p=r.top,f=r.width,d=r.height,h=Cn([o,a,u,s],l),g=Gn(h,[[c,p],[c+f,p],[c+f,p+d],[c,p+d]]),v=Mn(h);return g&&v?Math.min(100,g/v*100):0},r.isInside=function(t,n){var r=this.state,e=r.target,i=r.pos1,o=r.pos2,a=r.pos3,s=r.pos4,u=r.targetClientRect;return!!e&&wn([t,n],Cn([i,o,s,a],u))},r.updateRect=function(t,n,r){void 0===r&&(r=!0);var e=this.props,i=e.parentMoveable,o=this.state.target||this.props.target,a=this.getContainer(),s=i?i.props.rootContainer:e.rootContainer;this.updateState(te(this.controlBox&&this.controlBox.getElement(),o,a,a,s||a),!i&&r)},r.isTargetChanged=function(t,n){var r=this.props,e=r.dragTarget||r.target,i=t.dragTarget||t.target,o=r.dragArea,a=t.dragArea;return!o&&i!==e||(n||o)&&a!==o},r.updateNativeEvents=function(t){var i,o=this,a=this.props.dragArea?this.areaElement:this.state.target,s=this.events,n=Rt(s);if(this.isTargetChanged(t))for(var r in s){var e=s[r];e&&e.destroy(),s[r]=null}a&&(i=this.enabledAbles,n.forEach(function(t){var n=de(i,[t]),r=0<n.length,e=s[t];r?(e||(e=new na(a,o,t),s[t]=e),e.setAbles(n)):e&&(e.destroy(),s[t]=null)}))},r.updateEvent=function(t){var n=this.controlBox.getElement(),r=this.targetAbles.length,e=this.controlAbles.length,i=this.props,o=i.dragTarget||i.target,a=this.isTargetChanged(t,!0),s=!r&&this.targetGesto||a;s&&(ue(this,"targetGesto"),this.updateState({gesto:null})),e||ue(this,"controlGesto"),o&&r&&!this.targetGesto&&(this.targetGesto=Qo(this,o,"")),!this.controlGesto&&e&&(this.controlGesto=ta(this,n,"controlAbles","Control")),s&&this.unsetAbles()},r.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},r.updateTarget=function(t){this.updateRect(t,!0)},r.getRect=function(){var t=this.state,n=oe(this.state),r=n[0],e=n[1],i=n[2],o=n[3],a=Lr(n),s=t.width,u=t.height,l=a.width,c=a.height,p=a.left,f=a.top,d=[t.left,t.top],h=Vt(d,t.origin);return{width:l,height:c,left:p,top:f,pos1:r,pos2:e,pos3:i,pos4:o,offsetWidth:s,offsetHeight:u,beforeOrigin:Vt(d,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},r.getManager=function(){return this},r.getRotation=function(){var t,n,r=this.state,e=r.pos1,i=r.pos2,o=r.direction;return t=o,n=Tt(e,i)/Math.PI*180,n=0<=(n=0<=t?n:180-n)?n:360+n},r.request=function(n,t,r){void 0===t&&(t={});var e=this.props,i=e.ables,o=e.groupable,a=i.filter(function(t){return t.name===n})[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=a.request(this),l=r||t.isInstant,c=u.isControl?"controlAbles":"targetAbles",p=(o?"Group":"")+(u.isControl?"Control":""),f={request:function(t){return Jo(s,c,"drag",p,"",vr(vr({},u.request(t)),{requestAble:n,isRequest:!0}),l),this},requestEnd:function(){return Jo(s,c,"drag",p,"End",vr(vr({},u.requestEnd()),{requestAble:n,isRequest:!0}),l),this}};return Jo(s,c,"drag",p,"Start",vr(vr({},u.requestStart(t)),{requestAble:n,isRequest:!0}),l),l?f.request(t).requestEnd():f},r.destroy=function(){this.componentWillUnmount()},r.updateRenderPoses=function(){var t=this.state,n=this.props,r=t.originalBeforeOrigin,e=t.transformOrigin,i=t.allMatrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,l=t.pos4,c=t.left,p=t.top,f=n.padding||{},d=f.left,h=void 0===d?0:d,g=f.top,v=void 0===g?0:g,m=f.bottom,b=void 0===m?0:m,x=f.right,S=void 0===x?0:x,E=o?4:3,y=n.groupable?r:Vt(r,[c,p]);t.renderPoses=[Vt(a,Se(i,[-h,-v],e,y,E)),Vt(s,Se(i,[S,-v],e,y,E)),Vt(u,Se(i,[-h,b],e,y,E)),Vt(l,Se(i,[S,b],e,y,E))]},r.checkUpdate=function(){var t=this.props,n=t.target,r=t.container,e=t.parentMoveable,i=this.state,o=i.target,a=i.container;(o||n)&&(this.updateAbles(),he(o,n)&&he(a,r)||(this.updateState({target:n,container:r}),e||!r&&!this.controlBox||this.updateRect("End",!1,!1)))},r.triggerEvent=function(t,n){var r=this.props[t];return r&&r(n)},r.useCSS=function(t,n){var r=this.props.customStyledMap,e=t+n;return r[e]||(r[e]=dr(t,n)),r[e]},r.unsetAbles=function(){var n=this;this.targetAbles.filter(function(t){return!!t.unset&&(t.unset(n),!0)}).length&&this.forceUpdate()},r.updateAbles=function(t,n){void 0===t&&(t=this.props.ables),void 0===n&&(n="");var r=this.props,e=r.triggerAblesSimultaneously,i=t.filter(function(t){return t&&(t.always||r[t.name])}),o="drag"+n+"ControlStart",a=de(i,["drag"+n+"Start","pinch"+n+"Start"],e),s=de(i,[o],e);this.enabledAbles=i,this.targetAbles=a,this.controlAbles=s},r.updateState=function(t,n){if(n)this.setState(t);else{var r=this.state;for(var e in t)r[e]=t[e]}},r.getEnabledAbles=function(){var n=this.props;return n.ables.filter(function(t){return t&&n[t.name]})},r.renderAbles=function(){var i,o,a,s,n=this,t=this.props.triggerAblesSimultaneously,r={createElement:P};return i=ve(de(this.getEnabledAbles(),["render"],t).map(function(t){return(0,t.render)(n,r)||[]})).filter(function(t){return t}),o=function(t){return t.key},a=[],s={},i.forEach(function(t,n){var r=o(t,n,i),e=s[r];e||(e=[],s[r]=e,a.push(e)),e.push(t)}),a.map(function(t){return t[0]})},r.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{}},t}(Y),ea={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(r,e){var t=r.props.targets||[];r.moveables=[];var n=r.state,i={left:n.left,top:n.top};return t.map(function(t,n){return e.createElement(ra,{key:"moveable"+n,ref:st(r,"moveables",n),target:t,origin:!1,cssStyled:r.props.cssStyled,customStyledMap:r.props.customStyledMap,parentMoveable:r,parentPosition:i})})}};function ia(t){var n=t.originalDatas.draggable;return n||(t.originalDatas.draggable={},n=t.originalDatas.draggable),vr(vr({},t),{datas:n})}var oa={name:"edgeDraggable",props:{edgeDraggable:Boolean},events:{},dragControlCondition:function(t,n){if(!n.props.edgeDraggable||!t.inputEvent)return!1;var r=t.inputEvent.target;return kt(r,Br("direction"))&&kt(r,Br("line"))},dragControlStart:function(t,n){return to.dragStart(t,ia(n))},dragControl:function(t,n){return to.drag(t,ia(n))},dragControlEnd:function(t,n){return to.dragEnd(t,ia(n))},dragGroupControlCondition:function(t,n){if(!n.props.edgeDraggable||!t.inputEvent)return!1;var r=t.inputEvent.target;return kt(r,Br("direction"))&&kt(r,Br("line"))},dragGroupControlStart:function(t,n){return to.dragGroupStart(t,ia(n))},dragGroupControl:function(t,n){return to.dragGroup(t,ia(n))},dragGroupControlEnd:function(t,n){return to.dragGroupEnd(t,ia(n))},unset:function(t){t.state.dragInfo=null}},aa={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},sa=[$o,wo,Qi,ze,to,oa,co,po,fo,vo,Do,Ro,Mo,Ho,Lo,Zo,ea,aa,{name:"clickable",props:{},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragStart:function(){},dragGroupStart:function(t,n){n.datas.inputTarget=n.inputEvent&&n.inputEvent.target},dragEnd:function(t,n){var r,e=t.state.target,i=n.inputEvent,o=n.inputTarget;i&&o&&!n.isDrag&&!t.isMoveableElement(o)&&(r=e.contains(o),pe(t,"onClick",le(t,n,{isDouble:n.isDouble,inputTarget:o,isTarget:e===o,containsTarget:r})))},dragGroupEnd:function(t,n){var r,e,i,o,a=n.inputEvent,s=n.inputTarget;a&&s&&!n.isDrag&&!t.isMoveableElement(s)&&n.datas.inputTarget!==s&&(i=-1<(e=(r=t.props.targets).indexOf(s)),o=!1,-1===e&&(o=-1<(e=wt(r,function(t){return t.contains(s)}))),pe(t,"onClickGroup",le(t,n,{isDouble:n.isDouble,targets:r,inputTarget:s,targetIndex:e,isTarget:i,containsTarget:o})))}},yo,Ko],ua=sa.reduce(function(t,n){return vr(vr({},t),n.events)},{}),la=sa.reduce(function(t,n){return vr(vr({},t),n.props)},{}),ca=Ce(ua),pa=Object.keys(ca),fa=Object.keys(la);function da(t,o){return Math.max.apply(Math,t.map(function(t){var n=t[0],r=t[1],e=t[2],i=t[3];return Math.max(n[o],r[o],e[o],i[o])}))}function ha(t,o){return Math.min.apply(Math,t.map(function(t){var n=t[0],r=t[1],e=t[2],i=t[3];return Math.min(n[o],r[o],e[o],i[o])}))}var ga=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.differ=new In,t.moveables=[],t.transformOrigin="50% 50%",t}gr(t,e);var n=t.prototype;return n.updateEvent=function(t){var n=this.state,r=this.props,e=t.dragTarget||n.target,i=r.dragTarget||this.areaElement;e!==i&&(ue(this,"targetGesto"),ue(this,"controlGesto"),n.target=null),n.target||(n.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetGesto=Qo(this,i,"Group"),this.controlGesto=ta(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var o=!he(t.container,r.container);o&&(n.container=r.container);var a=this.differ.update(r.targets),s=a.added,u=a.changed,l=a.removed;(o||s.length||u.length||l.length)&&this.updateRect()},n.checkUpdate=function(){this.updateAbles()},n.updateRect=function(n,t,r){var e,i,o,a,s,u,l,c,p,f,d,h,g,v,m,b,x,S,E,y,M,C,D;void 0===r&&(r=!0),this.controlBox&&(this.moveables.forEach(function(t){t.updateRect(n,!1,!1)}),e=this.state,i=this.props,o=e.target||i.target,(!t||""!==n&&i.updateGroup)&&(this.rotation=i.defaultGroupRotate,this.transformOrigin=i.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),a=this.rotation,s=this.scale,l=(u=function(t,n){if(!t.length)return[0,0,0,0];var o,i,a,e,s,r,u,l=t.map(function(t){return oe(t.state)}),c=wr,p=wr,f=0,d=0,h=ae(n,Dr);return h%90?(o=h/180*Math.PI,i=Math.tan(o),a=-1/i,e=[Rr,wr],s=[Rr,wr],l.forEach(function(t){t.forEach(function(t){var n=t[1]-i*t[0],r=t[1]-a*t[0];e[0]=Math.max(e[0],n),e[1]=Math.min(e[1],n),s[0]=Math.max(s[0],r),s[1]=Math.min(s[1],r)})}),e.forEach(function(e){s.forEach(function(t){var n=(t-e)/(i-a),r=i*n+e;c=Math.min(c,n),p=Math.min(p,r)})}),f=da(r=l.map(function(t){var n=t[0],r=t[1],e=t[2],i=t[3];return[rn(n,-o),rn(r,-o),rn(e,-o),rn(i,-o)]}),0)-ha(r,0),d=da(r,1)-ha(r,1)):(c=ha(l,0),p=ha(l,1),f=da(l,0)-c,d=da(l,1)-p,h%180&&(u=f,f=d,d=u)),[c,p,f,d]}(this.moveables,a))[0],c=u[1],p=u[2],f=u[3],d="rotate("+a+"deg) scale("+(0<=s[0]?1:-1)+", "+(0<=s[1]?1:-1)+")",o.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+p+"px; height:"+f+"px;transform:"+d,e.width=p,e.height=f,h=this.getContainer(),v=[(g=te(this.controlBox.getElement(),o,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||h)).left,g.top],M=[(y=Dn([b=(m=oe(g))[0],x=m[1],S=m[2],E=m[3]])).minX,y.minY],g.pos1=Ut(b,M),g.pos2=Ut(x,M),g.pos3=Ut(S,M),g.pos4=Ut(E,M),g.left=l-g.left+M[0],g.top=c-g.top+M[1],g.origin=Ut(Vt(v,g.origin),M),g.beforeOrigin=Ut(Vt(v,g.beforeOrigin),M),g.originalBeforeOrigin=Vt(v,g.originalBeforeOrigin),C=g.targetClientRect,D=0<s[0]*s[1]?1:-1,C.top+=g.top-e.top,C.left+=g.left-e.left,o.style.transform="translate("+-M[0]+"px, "+-M[1]+"px) "+d,this.updateState(vr(vr({},g),{direction:D,beforeDirection:D}),r))},n.getRect=function(){return vr(vr({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},n.triggerEvent=function(t,n,r){if(r||-1<t.indexOf("Group"))return e.prototype.triggerEvent.call(this,t,n)},n.updateAbles=function(){e.prototype.updateAbles.call(this,mr(this.props.ables,[ea]),"Group")},t.defaultProps=vr(vr({},ra.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(ra),va=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.moveables=[],t}gr(t,n);var r=t.prototype;return r.render=function(){var r=this,t=this.props,n=t.cspNonce,e=t.cssStyled,i=t.targets;return P(e,{cspNonce:n,ref:at(this,"controlBox"),className:Br("control-box")},i.map(function(t,n){return P(ra,vr({key:"moveable"+n,ref:st(r,"moveables",n)},r.props,{target:t,wrapperMoveable:r}))}))},r.componentDidUpdate=function(){},r.updateRect=function(n,r,e){void 0===e&&(e=!0),this.moveables.forEach(function(t){t.updateRect(n,r,e)})},r.getRect=function(){return vr(vr({},n.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},r.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},r.dragStart=function(){return this},r.hitTest=function(){return 0},r.isInside=function(){return!1},r.isDragging=function(){return!1},r.updateRenderPoses=function(){},r.updateEvent=function(){},r.checkUpdate=function(){},r.triggerEvent=function(){},r.updateAbles=function(){},t}(ra),ma=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return gr(n,t),n.defaultAbles=sa,n}(function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.refTargets=[],t.selectorMap={},t}gr(t,n);var r,e,i=t.prototype;return t.makeStyled=function(){var r={};this.getTotalAbles().forEach(function(t){var n=t.css;n&&n.forEach(function(t){r[t]=!0})});var e,t=Rt(r).join("\n");this.defaultStyled=dr("div",(e=yr,(Mr+t).replace(/([^}{]*){/gm,function(t,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")+"{"})))},t.getTotalAbles=function(){return mr([wo,ea,aa,yo],this.defaultAbles)},i.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var n,r,e,i=this.props,o=i.ables,a=i.props,s=function(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++)n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i])&&(r[e[i]]=t[e[i]]);return r}(i,["ables","props"]),u=we(s.target||s.targets),l=(n=u,r=this.selectorMap,e=[],n.forEach(function(t){t&&(bt(t)?r[t]&&e.push.apply(e,r[t]):e.push(t))}),e);this.refTargets=u;var c=1<l.length,p=mr(t.getTotalAbles(),o||[]),f=vr(vr(vr({},s),a||{}),{ables:p,cssStyled:t.defaultStyled,customStyledMap:t.customStyledMap});return c?s.individualGroupable?P(va,vr({key:"individual-group",ref:at(this,"moveable")},f,{target:null,targets:l})):P(ga,vr({key:"group",ref:at(this,"moveable")},f,{target:null,targets:l})):P(ra,vr({key:"single",ref:at(this,"moveable")},f,{target:l[0]}))},i.componentDidMount=function(){this.updateRefs()},i.componentDidUpdate=function(){this.updateRefs()},i.updateRefs=function(t){var e=we(this.props.target||this.props.targets),n=this.refTargets.some(function(t,n){var r=e[n];return!(!t&&!r)&&t!==r}),r=t?{}:this.selectorMap,i={};this.refTargets.forEach(function(t){bt(t)&&(r[t]?i[t]=r[t]:(n=!0,i[t]=[].slice.call(document.querySelectorAll(t))))}),this.selectorMap=i,n&&this.forceUpdate()},i.getManager=function(){return this.moveable},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,function(t,n,r,e){var i,o=arguments.length,a=o<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,r):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,r,e);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(n,r,a):i(n,r))||a);3<o&&a&&Object.defineProperty(n,r,a)}([(r=Gr,void 0===e&&(e={}),function(n,o){r.forEach(function(i){var t=e[i]||i;t in n||(n[t]=function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=(t=this[o])[i].apply(t,n);return e===this[o]?this:e})})})],t.prototype,"moveable",void 0),t}(Y)),ba=function(r){function t(t){var n=r.call(this,t)||this;return n.state={},n.state=n.props,n}return i(t,r),t.prototype.render=function(){return t=P(ma,u({ref:C(this,"moveable")},this.state)),n=this.state.parentElement,P(X,{element:t,container:n});var t,n},t}(F),xa="function",Sa="object",Ea="string",ya="undefined",Ma=['"',"'",'\\"',"\\'"],Ca=1e-7,Da={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,n){return t*n/100},vw:function(t,n){return void 0===n&&(n=window.innerWidth),t/100*n},vh:function(t,n){return void 0===n&&(n=window.innerHeight),t/100*n},vmax:function(t,n){return void 0===n&&(n=Math.max(window.innerWidth,window.innerHeight)),t/100*n},vmin:function(t,n){return void 0===n&&(n=Math.min(window.innerWidth,window.innerHeight)),t/100*n}};function wa(t){return typeof t===ya}function Ra(t){return t&&typeof t===Sa}function za(t){return Array.isArray(t)}function Pa(t){return typeof t===Ea}function Oa(t){return typeof t===xa}function Ga(t,n,r,e){for(var i=r;i<e;++i){var o=n[i].trim();if(o===t)return i;var a=i;if("("===o?a=Ga(")",n,i+1,e):-1<Ma.indexOf(o)&&(a=Ga(o,n,i+1,e)),-1===a)break;i=a}return-1}function Ba(t,n){for(var r=new RegExp("(\\s*"+(n||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),e=t.split(r).filter(Boolean),i=e.length,o=[],a=[],s=0;s<i;++s){var u=e[s].trim(),l=s;if("("===u)l=Ga(")",e,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<Ma.indexOf(u))l=Ga(u,e,s+1,i);else if(u===n){a.length&&(o.push(a.join("")),a=[]);continue}}-1===l&&(l=i-1),a.push(e.slice(s,l+1).join("")),s=l}return a.length&&o.push(a.join("")),o}function Ta(t){return Ba(t,"")}function Aa(t){return Ba(t,",")}function Ia(t){var n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!n||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]}}function ka(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var r=n[1],e=n[2];return{prefix:r,unit:n[3],value:parseFloat(e)}}function Na(t,n,r){void 0===r&&(r=-1);for(var e=t.length,i=0;i<e;++i)if(n(t[i],i,t))return i;return r}function Fa(t,n){var r=ka(t),e=r.value,i=r.unit;if(Ra(n)){var o=n[i];if(o){if(Oa(o))return o(e);if(Da[i])return Da[i](e,o)}}else if("%"===i)return e*n/100;return Da[i]?Da[i](e):e}function Ya(t,n){return n?Math.round(t/n)*n:t}function Xa(t,r,e){return[[Ya(r[0],Ca),Ya(r[0]*t[1]/t[0],Ca)],[Ya(r[1]*t[0]/t[1],Ca),Ya(r[1],Ca)]].filter(function(t){return t.every(function(t,n){return e?t<=r[n]:t>=r[n]})})[0]||t}function ja(t,o,a,n){if(!n)return t.map(function(t,n){return r=t,e=o[n],i=a[n],Math.max(e,Math.min(r,i));var r,e,i});var r=t[0],e=t[1],i=Xa(t,o,!1),s=i[0],u=i[1],l=Xa(t,a,!0),c=l[0],p=l[1];return r<s||e<u?(r=s,e=u):(c<r||p<e)&&(r=c,e=p),[r,e]}function qa(t){for(var n=t.length,r=0,e=n-1;0<=e;--e)r+=t[e];return n?r/n:0}function _a(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=Math.atan2(e,r);return 0<=i?i:i+2*Math.PI}function Wa(t){var r,n=(r=t,[0,1].map(function(n){return qa(r.map(function(t){return t[n]}))})),e=_a(n,t[0]),i=_a(n,t[1]);return e<i&&i-e<Math.PI||i<e&&i-e<-Math.PI?1:-1}function La(t,n){return Math.sqrt(Math.pow((n?n[0]:0)-t[0],2)+Math.pow((n?n[1]:0)-t[1],2))}function Ha(t,n){return t.classList?t.classList.contains(n):!!t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}var Va=function(t,n){return(Va=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function Ua(t,n){function r(){this.constructor=t}Va(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var Za=function(){return(Za=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var $a=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}Ua(t,n);var r=t.prototype;return r.render=function(){var t=this.props,n=t.className,r=void 0===n?"":n,e=(t.cspNonce,t.portalContainer),i=function(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++)n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i])&&(r[e[i]]=t[e[i]]);return r}(t,["className","cspNonce","portalContainer"]),o=this.injector.className,a=this.tag,s={};return-1<L.indexOf("simple")&&e&&(s={portalContainer:e}),P(a,Za({ref:C(this,"element"),"data-styled-id":o,className:r+" "+o},s,i))},r.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},r.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},r.getElement=function(){return this.element},t}(F);var Ka=function(t,n){return(Ka=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};var Ja=function(){return(Ja=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function Qa(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)e[i]=o[a];return e}var ts,ns=ot().browser.webkit,rs=ns&&(!!(ts=/applewebkit\/([^\s]+)/g.exec(navigator.userAgent.toLowerCase()))&&parseFloat(ts[1])<605),es="moveable-",is=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],os=1e-7,as=["n","w","s","e","nw","ne","sw","se"],ss={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},us={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135};function ls(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(t){return t.split(" ").map(function(t){return t?""+n+t:""}).join(" ")}).join(" ")}.apply(void 0,Qa([es],t))}function cs(t,n,r){return Lt(n,ln(r,n),t,ln(r.map(function(t){return-t}),n))}function ps(s){return fs(_s(s,":before")).map(function(t,n){var r,e,i=ka(t),o=i.value,a=i.unit;return o*(r=s,e=0===n,"%"!==a?1:xs(r.ownerSVGElement)[e?"width":"height"]/100)})}function fs(t){var n=t.transformOrigin;return n?n.split(" "):["0","0"]}function ds(t,n,r){for(var e=document.body,i=!t||r?t:t.parentElement,o=t===n||i===n,a="relative";i&&i!==e;){n===i&&(o=!0);var s=_s(i),u=s.transform,a=s.position;if("svg"===i.tagName.toLowerCase()||"static"!==a||u&&"none"!==u)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===e,offsetParent:i||e}}function hs(t,n,r,e){var i,o,a=t.tagName.toLowerCase(),s=t.offsetLeft,u=t.offsetTop;e&&(s-=(o=(n||document.documentElement).getBoundingClientRect()).left,u-=o.top);var l,c,p=wa(s),f=!p;return f||"svg"===a?c=(l=fs(r).map(function(t){return parseFloat(t)})).slice():(c=(l=rs?ps(t):fs(r).map(function(t){return parseFloat(t)})).slice(),f=!0,s=(i=function(t,n){if(!t.getBBox)return[0,0];var r=t.getBBox(),e=xs(t.ownerSVGElement),i=r.x-e.x,o=r.y-e.y;return[i,o,n[0]-i,n[1]-o]}(t,l))[0],u=i[1],l[0]=i[2],l[1]=i[3]),{tagName:a,isSVG:p,hasOffset:f,offset:[s||0,u||0],origin:l,targetOrigin:c}}function gs(t,n,r){void 0===r&&(r=window.getComputedStyle(t));var e=window.getComputedStyle(document.body),i=e.position;if(!(n||i&&"static"!==i))return[0,0];var o=parseInt(e.marginLeft,10),a=parseInt(e.marginTop,10);return"absolute"===r.position&&("auto"===r.top&&"auto"===r.bottom||(a=0),"auto"===r.left&&"auto"===r.right||(o=0)),[o,a]}function vs(t,n){for(var r,e,i,o,a=t,s=[],u=!1,l=!1,c=3,p=ds(n,n,!0).offsetParent;a&&!u;){var f=_s(a),d=f.position,h="fixed"===d,g=Zt((o=f.transform)&&"none"!==o?Ra(o)?o:Ia(o).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0]),v=g.length;if(!l&&16===v){l=!0,c=4;for(var m=s.length,b=0;b<m;++b)s[b]=Wt(s[b],3,4)}l&&9===v&&(g=Wt(g,3,4));var x=hs(a,n,f,h),S=x.tagName,E=x.hasOffset,y=x.isSVG,M=x.origin,C=x.targetOrigin,D=x.offset,w=D[0],R=D[1];"svg"===S&&i?s.push(function(t,n){var r=xs(t),e=r.width,i=r.height,o=r.clientWidth,a=r.clientHeight,s=o/e,u=a/i,l=t.preserveAspectRatio.baseVal,c=l.align,p=l.meetOrSlice,f=[0,0],d=[s,u],h=[0,0];{var g,v,m;1!==c&&(g=(c-2)%3,v=Math.floor((c-2)/3),f[0]=e*g/2,f[1]=i*v/2,m=2===p?Math.max(u,s):Math.min(s,u),d[0]=m,d[1]=m,h[0]=(o-e)/2*g,h[1]=(a-i)/2*v)}var b=un(d,n);return b[n*(n-1)]=h[0],b[n*(n-1)+1]=h[1],cs(b,n,f)}(a,c),sn(c)):"g"===S&&t!==a&&(R=w=0);var z=ds(a,n),P=z.offsetParent,O=z.isEnd,G=z.isStatic;ns&&E&&!y&&G&&("relative"===d||"static"===d)&&(w-=P.offsetLeft,R-=P.offsetTop,u=u||O);var B,T=0,A=0;if(E&&p!==P&&(T=P.clientLeft,A=P.clientTop),E&&P===document.body&&(w+=(B=gs(a,!1,f))[0],R+=B[1]),s.push(cs(g,c,M),ln(E?[w-a.scrollLeft+T,R-a.scrollTop+A]:[a,M],c)),i=i||g,r=r||M,e=e||C,u||h)break;a=P,u=O}return{offsetContainer:p,matrixes:s,targetMatrix:i=i||sn(c),transformOrigin:r=r||[0,0],targetOrigin:e=e||[0,0],is3d:l}}function ms(t,n,r,e){var i;void 0===r&&(r=n);var o,a,s,u,l=0,c=0,p=0,f={};t&&(o=_s(t),l=t.offsetWidth,c=t.offsetHeight,wa(l)&&(l=(i=Ps(t,o,!0))[0],c=i[1])),t&&(s=Cs((a=function(t,n,r,e){void 0===r&&(r=n);var i=vs(t,n),o=i.matrixes,a=i.is3d,s=i.targetMatrix,u=i.transformOrigin,l=i.targetOrigin,c=vs(i.offsetContainer,r),p=c.matrixes,f=c.is3d,d=e||f||a,h=d?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,v=n||document.body,m=s,b=sn(h),x=sn(h),S=sn(h),E=sn(h),y=o.length,M=ds(v,v,!0).offsetParent;p.reverse(),o.reverse(),!a&&d&&(m=Wt(m,3,4),o.forEach(function(t,n){o[n]=Wt(t,3,4)}));!f&&d&&p.forEach(function(t,n){p[n]=Wt(t,3,4)});p.forEach(function(t){x=Ht(x,t,h)}),o.forEach(function(t,n){var r;y-2===n&&(S=b.slice()),y-1===n&&(E=b.slice()),Ra(t[h*(h-1)])&&(r=function(t,n,r,e,i,o){var a,s=Ps(t,void 0,!0),u=s[0],l=s[1],c=n.getBoundingClientRect(),p=[0,0];n===document.body&&(p=gs(t,!0));var f=t.getBoundingClientRect(),d=f.left-c.left+n.scrollLeft-(n.clientLeft||0)+p[0],h=f.top-c.top+n.scrollTop-(n.clientTop||0)+p[1],g=f.width,v=f.height,m=Lt(r,i,o),b=Ms(m,u,l,r),x=b.left,S=b.top,E=b.width,y=b.height,M=Ss(m,e,r),C=Ut(M,[x,S]),D=[d+C[0]*g/E,h+C[1]*v/y],w=[0,0],R=0;for(;++R<10;){var z=Xt(i,r);a=Ut(Ss(z,D,r),Ss(z,M,r)),w[0]=a[0],w[1]=a[1];var P=Ms(Lt(r,i,ln(w,r),o),u,l,r),O=P.left,G=P.top,B=O-d,T=G-h;if(Math.abs(B)<2&&Math.abs(T)<2)break;D[0]-=B,D[1]-=T}return w.map(function(t){return Math.round(t)})}(t[h*(h-1)],M,h,t[h*(h-1)+1],b,o[n+1]),t[h*(h-1)]=r[0],t[h*(h-1)+1]=r[1]),b=Ht(b,t,h)});var C=!g&&a;m=m||sn(C?4:3);var D=bs(g&&16===m.length?Wt(m,4,3):m,C);return{rootMatrix:x=Yt(x,h,h),beforeMatrix:S,offsetMatrix:E,allMatrix:b,targetMatrix:m,targetTransform:D,transformOrigin:u,targetOrigin:l,is3d:d}}(t,n,r,e)).allMatrix,a.transformOrigin,l,c),f=Ja(Ja({},a),s),p=Os([(u=Cs(a.allMatrix,[50,50],100,100)).pos1,u.pos2],u.direction));var d=e?4:3;return Ja({width:l,height:c,rotation:p,rootMatrix:sn(d),beforeMatrix:sn(d),offsetMatrix:sn(d),allMatrix:sn(d),targetMatrix:sn(d),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!e,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},f)}function bs(t,n){return void 0===n&&(n=9<t.length),(n?"matrix3d":"matrix")+"("+$t(t,!n).join(",")+")"}function xs(t){var n=t.clientWidth,r=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:n,clientHeight:r};var e=t.viewBox,i=e&&e.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||n,height:i.height||r,clientWidth:n,clientHeight:r}}function Ss(t,n,r){return Kt(t,_t(n,r),r)}function Es(n,t,r,e){return[[0,0],[t,0],[0,r],[t,r]].map(function(t){return Ss(n,t,e)})}function ys(t){var n=t.map(function(t){return t[0]}),r=t.map(function(t){return t[1]}),e=Math.min.apply(Math,n),i=Math.min.apply(Math,r),o=Math.max.apply(Math,n),a=Math.max.apply(Math,r);return{left:e,top:i,right:o,bottom:a,width:o-e,height:a-i}}function Ms(t,n,r,e){return ys(Es(t,n,r,e))}function Cs(t,n,r,e){var i=16===t.length?4:3,o=Es(t,r,e,i),a=o[0],s=a[0],u=a[1],l=o[1],c=l[0],p=l[1],f=o[2],d=f[0],h=f[1],g=o[3],v=g[0],m=g[1],b=Ss(t,n,i),x=b[0],S=b[1],E=Math.min(s,c,d,v),y=Math.min(u,p,h,m);return{left:E,top:y,right:Math.max(s,c,d,v),bottom:Math.max(u,p,h,m),origin:[x=x-E||0,S=S-y||0],pos1:[s=s-E||0,u=u-y||0],pos2:[c=c-E||0,p=p-y||0],pos3:[d=d-E||0,h=h-y||0],pos4:[v=v-E||0,m=m-y||0],direction:Wa(o)}}function Ds(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ws(t,n){return Ds([n[0]-t[0],n[1]-t[1]])}function Rs(t,n,r,e){void 0===r&&(r=1),void 0===e&&(e=_a(t,n));var i=ws(t,n);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+e+"rad) scaleY("+r+")",width:i+"px"}}function zs(t,n){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];var i=r.length;return{transform:"translateZ(0px) translate("+r.reduce(function(t,n){return t+n[0]},0)/i+"px, "+r.reduce(function(t,n){return t+n[1]},0)/i+"px) rotate("+t+"rad) scale("+n+")"}}function Ps(t,n,r,e){void 0===n&&(n=window.getComputedStyle(t)),void 0===e&&(e=r||"border-box"===n.boxSizing);var i=t.offsetWidth,o=t.offsetHeight,a=!wa(i);if((r||e)&&a)return[i,o];if(a||"svg"===t.tagName.toLowerCase())return i=t.clientWidth,o=t.clientHeight,r||e?[i+(parseFloat(n.borderLeftWidth)||0)+(parseFloat(n.borderRightWidth)||0),o+(parseFloat(n.borderTopWidth)||0)+(parseFloat(n.borderBottomWidth)||0)]:[i-(parseFloat(n.paddingLeft)||0)-(parseFloat(n.paddingRight)||0),o-(parseFloat(n.paddingTop)||0)-(parseFloat(n.paddingBottom)||0)];var s=t.getBBox();return[s.width,s.height]}function Os(t,n){return _a(0<n?t[0]:t[1],0<n?t[1]:t[0])}function Gs(t,n,r,e,i){var o,a,s=1,u=[0,0],l=Bs(),c=Bs(),p=Bs(),f=ms(n,r,i,!1);return n&&(o=f.is3d?4:3,s=(a=Cs(f.offsetMatrix,Vt(f.transformOrigin,jt(f.targetMatrix,o)),f.width,f.height)).direction,u=Vt(a.origin,[a.left-f.left,a.top-f.top]),l=Ts(n),c=Ts(ds(e,e,!0).offsetParent||document.body,!0),t&&(p=Ts(t))),Ja({targetClientRect:l,containerClientRect:c,moveableClientRect:p,beforeDirection:s,beforeOrigin:u,originalBeforeOrigin:u,target:n},f)}function Bs(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Ts(t,n){var r,e=0,i=0,o=0,a=0;t===document.body||t===document.documentElement?(o=window.innerWidth,a=window.innerHeight,e=-(document.documentElement.scrollLeft||document.body.scrollLeft),i=-(document.documentElement.scrollTop||document.body.scrollTop)):(e=(r=t.getBoundingClientRect()).left,i=r.top,o=r.width,a=r.height);var s={left:e,right:e+o,top:i,bottom:i+a,width:o,height:a};return n&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight,s.overflow="visible"!==_s(t).overflow),s}function As(t){if(t){var n=t.getAttribute("data-direction");if(n){var r=[0,0];return-1<n.indexOf("w")&&(r[0]=-1),-1<n.indexOf("e")&&(r[0]=1),-1<n.indexOf("n")&&(r[1]=-1),-1<n.indexOf("s")&&(r[1]=1),r}}}function Is(t,n){return[Vt(n,t[0]),Vt(n,t[1]),Vt(n,t[2]),Vt(n,t[3])]}function ks(t){var n=t.left,r=t.top;return Is([t.pos1,t.pos2,t.pos3,t.pos4],[n,r])}function Ns(t,n){return n?Math.round(t/n)*n:t}function Fs(r,e){return r.forEach(function(t,n){r[n]=Ns(r[n],e)}),r}function Ys(t,n){t[n]&&(t[n].unset(),t[n]=null)}function Xs(t,n,r){var e=n.datas;e.datas||(e.datas={});var i=Ja(Ja({},r),{target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,moveable:t,datas:e.datas});return e.isStartEvent?e.lastEvent=i:e.isStartEvent=!0,i}function js(t,n,r){var e=n.datas,i="isDrag"in r?r.isDrag:n.isDrag;return e.datas||(e.datas={}),Ja(Ja({isDrag:i},r),{moveable:t,target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,lastEvent:e.lastEvent,isDouble:n.isDouble,datas:e.datas})}function qs(t,n,r,e){return t.triggerEvent(n,r,e)}function _s(t,n){return window.getComputedStyle(t,n)}function Ws(t,r,e){var i={},o={};return t.filter(function(n){var t=n.name;if(i[t]||!r.some(function(t){return n[t]}))return!1;if(!e&&n.ableGroup){if(o[n.ableGroup])return!1;o[n.ableGroup]=!0}return i[t]=!0})}function Ls(t,n){return t===n||null==t&&null==n}function Hs(o,a){var s=[],u=[];return o.forEach(function(t,n){var r=a(t,n,o),e=u.indexOf(r),i=s[e]||[];-1===e&&(u.push(r),s.push(i)),i.push(t)}),s}function Vs(t){return t.reduce(function(t,n){return t.concat(n)},[])}function Us(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort(function(t,n){return Math.abs(n)-Math.abs(t)}),t[0]}function Zs(t,n,r){return Kt(Xt(t,r),_t(n,r),r)}function $s(t,n){var r=t.is3d?4:3,e=Zs(t.rootMatrix,[n.distX,n.distY],r);return n.distX=e[0],n.distY=e[1],n}function Ks(t,n,r,e,i){return Ut(Ss(t,Vt(r,n),i),e)}function Js(t,n,r){return r?t/n*100+"%":t+"px"}function Qs(t){return Math.abs(t)<=os?0:t}function tu(t){return t.isRequest?("resizable"===t.requestAble||"scalable"===t.requestAble)&&t.parentDirection:Ha(t.inputEvent.target,ls("direction"))}function nu(t,n){return t?Pa(t)?n?document.querySelector(t):t:Oa(t)?t():"current"in t?t.current:t:null}function ru(t,r){return t?((n=t)&&Ra(n)&&(za(n)||"length"in n)?[].slice.call(t):[t]).reduce(function(t,n){return Pa(n)&&r?Qa(t,[].slice.call(document.querySelectorAll(n))):(t.push(nu(n,r)),t)},[]):[];var n}function eu(t,n){return r=Ja(Ja({},t),{classNames:Qa([ls("line","guideline",t.direction)],t.classNames).filter(function(t){return t}),size:t.size||t.sizeValue+"px",pos:t.pos||t.posValue.map(function(t){return t+"px"})}),e=n,o=r.direction,a=r.classNames,s=r.size,u=r.pos,l=r.zoom,c=r.key,f=(p="horizontal"===o)?"Y":"X",e.createElement("div",{key:c,className:a.join(" "),style:((i={})[p?"width":"height"]=""+s,i.transform="translate("+u[0]+", "+u[1]+") translate"+f+"(-50%) scale"+f+"("+l+")",i)});var r,e,i,o,a,s,u,l,c,p,f}var iu={name:"pinchable",updateRect:!0,props:{pinchable:Boolean},events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(r,e){var t=e.datas,n=e.targets,i=e.angle,o=e.originalDatas,a=r.props,s=a.pinchable,u=a.ables;if(!s)return!1;var l="onPinch"+(n?"Group":"")+"Start",c="drag"+(n?"Group":"")+"ControlStart",p=(!0===s?r.controlAbles:u.filter(function(t){return-1<s.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[c]}),f=Xs(r,e,{});n&&(f.targets=n);var d=qs(r,l,f);t.isPinch=!1!==d,t.ables=p;var h=t.isPinch;return!!h&&(p.forEach(function(t){var n;o[t.name]=o[t.name]||{},t[c]&&(n=Ja(Ja({},e),{datas:o[t.name],parentRotate:i,isPinch:!0}),t[c](r,n))}),r.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},h)},pinch:function(n,r){var t=r.datas,e=r.scale,i=r.distance,o=r.originalDatas,a=r.inputEvent,s=r.targets,u=r.angle;if(t.isPinch){var l=i*(1-1/e),c=Xs(n,r,{});s&&(c.targets=s),qs(n,"onPinch"+(s?"Group":""),c);var p=t.ables,f="drag"+(s?"Group":"")+"Control";return p.forEach(function(t){t[f]&&t[f](n,Ja(Ja({},r),{datas:o[t.name],inputEvent:a,parentDistance:l,parentRotate:u,isPinch:!0}))}),c}},pinchEnd:function(n,r){var t=r.datas,e=r.isPinch,i=r.inputEvent,o=r.targets,a=r.originalDatas;if(t.isPinch){var s="onPinch"+(o?"Group":"")+"End",u=js(n,r,{isDrag:e});o&&(u.targets=o),qs(n,s,u);var l=t.ables,c="drag"+(o?"Group":"")+"ControlEnd";return l.forEach(function(t){t[c]&&t[c](n,Ja(Ja({},r),{isDrag:e,datas:a[t.name],inputEvent:i,isPinch:!0}))}),e}},pinchGroupStart:function(t,n){return this.pinchStart(t,Ja(Ja({},n),{targets:t.props.targets}))},pinchGroup:function(t,n){return this.pinch(t,Ja(Ja({},n),{targets:t.props.targets}))},pinchGroupEnd:function(t,n){return this.pinchEnd(t,Ja(Ja({},n),{targets:t.props.targets}))}};function ou(t,n,r,e,i){var o=n.gesto.move(r,t.inputEvent),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return Ja(Ja({},i?$s(n,o):o),{isDrag:!0,isPinch:!!e,parentEvent:!0,datas:s,originalDatas:t.originalDatas})}var au=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var n=t.prototype;return n.dragStart=function(t,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return(this.datas=r).draggable||(r.draggable={}),Ja(Ja({},this.move(t,n.inputEvent)),{type:"dragstart"})},n.drag=function(t,n){return this.move([t[0]-this.prevX,t[1]-this.prevY],n)},n.move=function(t,n){var r,e;return this.isFlag?(r=this.prevX+t[0],e=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],e=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=r,clientY:this.prevY=e,inputEvent:n,isDrag:this.isDrag,distX:r-this.startX,distY:e-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function su(t,r,e){var n=e.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map(function(t,n){return o[n]=o[n]||{},o[n][r]=o[n][r]||{},Ja(Ja({},e),{datas:o[n][r],originalDatas:o[n]})})}function uu(t,o,a,s,n,u){var l=!!a.match(/Start$/g),c=!!a.match(/End$/g),p=n.isPinch,f=n.datas,r=su(t,o.name,n),d=t.moveables,e=r.map(function(t,n){var r=d[n],e=t,e=l?(new au).dragStart(s,t):(r.state.gesto||(r.state.gesto=f.childGestos[n]),ou(t,r.state,s,p,u)),i=o[a](r,Ja(Ja({},e),{parentFlag:!0}));return c&&(r.state.gesto=null),i});return l&&(f.childGestos=d.map(function(t){return t.state.gesto})),e}function lu(t,o,a,n,s,u){void 0===s&&(s=function(t,n){return n});var l=!!a.match(/End$/g),r=su(t,o.name,n),c=t.moveables;return r.map(function(t,n){var r=c[n],e=s(r,t),i=o[a](r,Ja(Ja({},e),{parentFlag:!0}));return i&&u&&u(r,t,i,n),l&&(r.state.gesto=null),i})}function cu(t,n){var r=n.clientX,e=n.clientY,i=n.datas,o=t.state,a=o.moveableClientRect,s=o.rootMatrix,u=o.is3d,l=o.pos1,c=Ut(Zs(s,[r-a.left,e-a.top],u?4:3),l),p=vu({datas:i,distX:c[0],distY:c[1]});return[p[0],p[1]]}function pu(t,n){var r=n.datas,e=t.state,i=e.allMatrix,o=e.beforeMatrix,a=e.is3d,s=e.left,u=e.top,l=e.origin,c=e.offsetMatrix,p=e.targetMatrix,f=e.transformOrigin,d=a?4:3;r.is3d=a,r.matrix=i,r.targetMatrix=p,r.beforeMatrix=o,r.offsetMatrix=c,r.transformOrigin=f,r.inverseMatrix=Xt(i,d),r.inverseBeforeMatrix=Xt(o,d),r.absoluteOrigin=_t(Vt([s,u],l),d),r.startDragBeforeDist=Kt(r.inverseBeforeMatrix,r.absoluteOrigin,d),r.startDragDist=Kt(r.inverseMatrix,r.absoluteOrigin,d)}function fu(t,n){var r,e,i,o,a,s,u,l,c,p,f,d,h,g,v,m,b,x=t.datas,S=t.originalDatas.beforeRenderable,E=x.transformIndex,y=S.nextTransforms,M=S.nextTransformAppendedIndexes,C=-1===E?y.length:E+M.filter(function(t){return t<E}).length,D=(e=C,i=(r=y).slice(0,e<0?void 0:e),o=r.slice(0,e<0?void 0:e+1),a=r[e]||"",s=e<0?[]:r.slice(e),u=e<0?[]:r.slice(e+1),l=mn(i),c=mn(o),p=mn([a]),f=mn(s),d=mn(u),h=vn(l),g=vn(c),v=vn(f),m=vn(d),b=Ht(h,v,4),{transforms:r,beforeFunctionMatrix:h,beforeFunctionMatrix2:g,targetFunctionMatrix:vn(p),afterFunctionMatrix:v,afterFunctionMatrix2:m,allFunctionMatrix:b,beforeFunctions:l,beforeFunctions2:c,targetFunction:p[0],afterFunctions:f,afterFunctions2:d,beforeFunctionTexts:i,beforeFunctionTexts2:o,targetFunctionText:a,afterFunctionTexts:s,afterFunctionTexts2:u}),w=D.targetFunction,R="rotate"===n?"rotateZ":n;x.beforeFunctionTexts=D.beforeFunctionTexts,x.afterFunctionTexts=D.afterFunctionTexts,x.beforeTransform=D.beforeFunctionMatrix,x.beforeTransform2=D.beforeFunctionMatrix2,x.targetTansform=D.targetFunctionMatrix,x.afterTransform=D.afterFunctionMatrix,x.afterTransform2=D.afterFunctionMatrix2,x.targetAllTransform=D.allFunctionMatrix,w.functionName===R?(x.afterFunctionTexts.splice(0,1),x.isAppendTransform=!1):(x.isAppendTransform=!0,S.nextTransformAppendedIndexes=Qa(M,[C]))}function du(t,n,r){return t.beforeFunctionTexts.join(" ")+" "+(t.isAppendTransform?r:n)+" "+t.afterFunctionTexts.join(" ")}function hu(t,n,r){var e=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,a=t.afterTransform2,s=t.targetAllTransform,u=r?Ht(s,n,4):Ht(n,s,4),l=Ht(Xt(r?o:e,4),u,4);return Ht(l,Xt(r?a:i,4),4)}function gu(t){var n=t.datas,r=t.distX,e=t.distY,i=n.inverseBeforeMatrix,o=n.is3d,a=n.startDragBeforeDist,s=o?4:3;return Ut(Kt(i,Vt(n.absoluteOrigin,[r,e]),s),a)}function vu(t,n){var r=t.datas,e=t.distX,i=t.distY,o=r.inverseBeforeMatrix,a=r.inverseMatrix,s=r.is3d,u=r.startDragBeforeDist,l=r.startDragDist,c=s?4:3;return Ut(Kt(n?o:a,Vt(r.absoluteOrigin,[e,i]),c),n?u:l)}function mu(t){var n=[];return 0<=t[1]&&(0<=t[0]&&n.push(3),t[0]<=0&&n.push(2)),t[1]<=0&&(0<=t[0]&&n.push(1),t[0]<=0&&n.push(0)),n}function bu(n,t){return mu(t).map(function(t){return n[t]})}function xu(t,n){var r=bu(t,n);return[qa(r.map(function(t){return t[0]})),qa(r.map(function(t){return t[1]}))]}function Su(t,n,r,e){return Ht(t,cs(n,e,r),e)}function Eu(r){var e=r.originalDatas.beforeRenderable;return{setTransform:function(t,n){void 0===n&&(n=-1),e.startTransforms=za(t)?t:Ta(t),Mu(r,n)},setTransformIndex:function(t){Mu(r,t)}}}function yu(t){Mu(t,-1)}function Mu(t,n){var r,e,i=t.originalDatas.beforeRenderable,o=t.datas;-1===(o.transformIndex=n)||(r=i.startTransforms[n])&&(e=mn([r]),o.startValue=e[0].functionValue)}function Cu(t,n){t.originalDatas.beforeRenderable.nextTransforms=Ta(n)}function Du(t,n,r,e,i){return Cu(i,n),{transform:n,drag:Ol.drag(t,ou(i,t.state,r,e,!1))}}function wu(t,n,r,e,i){var o,a,s,u,l,c,p,f,d,h=t.state,g=h.left,v=h.top,m=t.props.groupable,b=m?g:0,x=m?v:0,S=Ut(e,zu(t,r,(o=t.state,a=i,s=n,u=o.transformOrigin,l=o.offsetMatrix,c=o.is3d,p=a.beforeTransform,f=a.afterTransform,d=c?4:3,Su(l,Wt(Ht(Ht(p,gn([s]),4),f,4),4,d),u,d))));return Ut(S,[b,x])}function Ru(t){var n=t.state,r=n.width,e=n.height,i=n.transformOrigin;return[i[0]/(r/2)-1,i[1]/(e/2)-1]}function zu(t,n,r){void 0===r&&(r=t.state.allMatrix);var e=t.state,i=e.width,o=e.height,a=e.is3d?4:3;return Ss(r,[i/2*(1+n[0]),o/2*(1+n[1])],a)}function Pu(t,n,r,e,i,o){var a,s,u,l,c,p,f,d,h,g=t.props.groupable,v=t.state,m=v.transformOrigin,b=v.targetMatrix,x=v.offsetMatrix,S=v.is3d,E=v.width,y=v.height,M=v.left,C=v.top,D=S?4:3,w=g?M:0,R=g?C:0,z=Su(x,b,(s=n,u=r,void 0===(l=E)&&(l=s),void 0===(c=y)&&(c=u),void 0===(p=m)&&(p=[0,0]),(a=o)?a.map(function(t,n){var r=ka(t),e=r.value,i=r.unit,o=n?c:l,a=n?u:s;return"%"===t||isNaN(e)?a*(o?p[n]/o:0):"%"!==i?e:a*e/100}):p),D);return Ut((f=i,d=e,h=xu(Es(z,n,r,D),d),[f[0]-h[0],f[1]-h[1]]),[w,R])}function Ou(t,n){return xu(ks(t.state),n)}function Gu(t,n,r){var e=Ss(t,[n.clientLeft,n.clientTop],r);return[n.left+e[0],n.top+e[1]]}function Bu(t,n,d,h,r,e){var g=r[0],v=r[1],i=e[0],o=e[1],m=[],a=h?0:1,b="vertical"===n?"horizontal":"vertical",x=Hs(t.filter(function(t){return t.type===n}),function(t){return t.element}).map(function(t){return t[0]}).filter(function(t){var n=t.pos,r=t.sizes;return n[a]<=o&&i<=n[a]+r[a]});return x.forEach(function(t){var p=t.pos[h],f=p+t.sizes[h];x.forEach(function(t){var n,r=t.pos,e=t.sizes,i=t.element,o=t.className,a=r[h],s=a+e[h],u=0,l=0,c=!0;if(f<=a)g<(u=s-(l=f-a))-d&&(c=!1);else{if(!(s<=p))return;(u=a-(l=p-s))+d<v&&(c=!1)}c&&m.push({pos:"vertical"==b?[u,r[1]]:[r[0],u],element:i,sizes:e,size:0,type:b,gap:l,className:o,gapGuidelines:x}),f<=g&&v<=a&&(0<=Ns(g-((n=(a+f-(v-g))/2)-d),.1)&&m.push({pos:"vertical"==b?[n,r[1]]:[r[0],n],className:o,element:i,sizes:e,size:0,type:b,gap:f-g,gapGuidelines:x}))})}),m}function Tu(n,r,e,t,i,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),t&&t.forEach(function(t){n.push({type:"horizontal",pos:[0,Ns(t-a,.1)],size:r})}),i&&i.forEach(function(t){n.push({type:"vertical",pos:[Ns(t-o,.1),0],size:e})}),n}function Au(t,n){var E=[];if(!n.length)return E;var r=t.state,y=t.props.snapCenter,e=r.containerClientRect,i=r.targetClientRect,o=i.top,a=i.left,M=r.rootMatrix,C=r.is3d?4:3,s=Gu(M,e,C),D=s[0],w=s[1],u=Dn(ks(r)),l=Ut([u.minX,u.minY],Zs(M,[a-D,o-w],C)).map(function(t){return n=t,Math.round(n%1==-.5?n-1:n);var n}),R=l[0],z=l[1];return n.forEach(function(t){var n=t.element,r=t.top,e=t.left,i=t.right,o=t.bottom,a=t.className,s=n.getBoundingClientRect(),u=s.left-D,l=s.top-w,c=l+s.height,p=u+s.width,f=Zs(M,[u,l],C),d=f[0],h=f[1],g=Zs(M,[p,c],C),v=g[0],m=g[1],b=v-d,x=m-h,S=[b,x];!1!==r&&E.push({type:"vertical",element:n,pos:[Ns(d+R,.1),h],size:x,sizes:S,className:a}),!1!==o&&E.push({type:"vertical",element:n,pos:[Ns(v+R,.1),h],size:x,sizes:S,className:a}),!1!==e&&E.push({type:"horizontal",element:n,pos:[d,Ns(h+z,.1)],size:b,sizes:S,className:a}),!1!==i&&E.push({type:"horizontal",element:n,pos:[d,Ns(m+z,.1)],size:b,sizes:S,className:a}),y&&(E.push({type:"vertical",element:n,pos:[Ns((d+v)/2+R,.1),h],size:x,sizes:S,center:!0,className:a}),E.push({type:"horizontal",element:n,pos:[d,Ns((h+m)/2+z,.1)],size:b,sizes:S,center:!0,className:a}))}),E}function Iu(t,n,r){void 0===r&&(r=[]);var e=[],i=t.state;if(n&&i.guidelines&&i.guidelines.length)return e;var o=t.props.elementGuidelines,a=void 0===o?[]:o;if(!a.length)return e;var s=i.elementGuidelineValues||[],u=a.map(function(t){return"parentElement"in t?{element:t}:t});i.elementGuidelineValues=u;var l=kn(s.map(function(t){return t.element}),u.map(function(t){return t.element})),c=l.added,p=l.removed.map(function(t){return s[t].element}),f=Au(t,c.map(function(t){return u[t]}).filter(function(t){return t.refresh&&n||!t.refresh&&!n}));return Qa(r.filter(function(t){return-1===p.indexOf(t.element)}),f)}function ku(t){var n,r,e,i,o,a,s=t.state,u=s.staticGuidelines,l=s.containerClientRect,c=l.scrollHeight,p=l.scrollWidth,f=l.clientHeight,d=l.clientWidth,h=l.overflow,g=l.clientLeft,v=l.clientTop,m=t.props,b=m.snapHorizontal,x=void 0===b||b,S=m.snapVertical,E=void 0===S||S,y=m.snapGap,M=void 0===y||y,C=m.verticalGuidelines,D=m.horizontalGuidelines,w=m.snapThreshold,R=void 0===w?5:w,z=Qa(u,Iu(t,!0));return M&&(r=(n=ys(ks(t.state))).top,e=n.left,i=n.bottom,o=n.right,a=u.filter(function(t){return t.element}),z.push.apply(z,Qa(Bu(a,"horizontal",R,0,[e,o],[r,i]),Bu(a,"vertical",R,1,[r,i],[e,o])))),Tu(z,h?p:d,h?c:f,x&&D,E&&C,g,v),z}function Nu(t,n,r,e,i){var o=t.props,a=o.snapElement,s=void 0===a||a,u=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length-1,e=0;e<r;++e){var i=t[e];if(!wa(i))return i}return t[r]}(i,o.snapThreshold,5);return Fu(t.state.guidelines,n,r,{snapThreshold:u,snapCenter:e,snapElement:s})}function Fu(t,n,r,e){return{vertical:ju(t,"vertical",n,e),horizontal:ju(t,"horizontal",r,e)}}function Yu(t,n,r,e){var i=t.props.snapCenter&&r,o=["left","right"],a=["top","bottom"];return i&&(o.push("center"),a.push("middle")),o=o.filter(function(t){return t in n}),a=a.filter(function(t){return t in n}),Nu(t,o.map(function(t){return n[t]}),a.map(function(t){return n[t]}),i,e)}function Xu(t){var n=t.isSnap;if(!n)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],e=r.guidelineInfos[0],i=e.offset,o=e.dist,a=e.guideline;return{isSnap:n,offset:i,dist:o,pos:r.pos,guideline:a}}function ju(r,a,t,n){var e=void 0===n?{}:n,i=e.snapThreshold,s=void 0===i?5:i,u=e.snapElement,l=e.snapCenter;if(!r||!r.length)return{isSnap:!1,index:-1,posInfos:[]};var o="vertical"===a?0:1,c=t.map(function(e,t){var n=r.map(function(t){var n=t.pos,r=e-n[o];return{offset:r,dist:Math.abs(r),guideline:t}}).filter(function(t){var n=t.guideline,r=t.dist,e=n.type,i=n.center,o=n.element;return!(!u&&o||!l&&i||e!==a||s<r)}).sort(function(t,n){return t.dist-n.dist});return{pos:e,index:t,guidelineInfos:n}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,n){return t.guidelineInfos[0].dist-n.guidelineInfos[0].dist}),p=0<c.length;return{isSnap:p,index:p?c[0].index:-1,posInfos:c}}function qu(t,n){var r=Math.abs(t.offset),e=Math.abs(n.offset);return t.isBound&&n.isBound?e-r:t.isBound?-1:n.isBound?1:t.isSnap&&n.isSnap?e-r:t.isSnap?-1:n.isSnap||r<os?1:e<os?-1:r-e}function _u(t,a){return t.slice().sort(function(t,n){var r=t.sign[a],e=n.sign[a],i=t.offset[a],o=n.offset[a];return r?e?qu({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:n.isBound,isSnap:n.isSnap,offset:o}):-1:1})[0]}function Wu(t,n){var r=qa([n[0][0],n[1][0]]),e=qa([n[0][1],n[1][1]]);return{vertical:r<=t[0],horizontal:e<=t[1]}}function Lu(t,n){var r,e,i=n[0],o=n[1],a=o[0]-i[0],s=o[1]-i[1];return Math.abs(a)<os&&(a=0),Math.abs(s)<os&&(s=0),e=a?(r=s?s/a*(t[0]-i[0])+i[1]:i[1],t[1]):(r=i[0],t[0]),r-e}function Hu(t,r,e){void 0===e&&(e=os);var i=Lu(t[0],r)<=0;return t.slice(1).every(function(t){var n=Lu(t,r);return n<=0==i||Math.abs(n)<=e})}function Vu(t,n,r,e,i){return void 0===i&&(i=0),e&&n-i<=t||!e&&t<=r+i?{isBound:!0,offset:e?n-t:r-t}:{isBound:!1,offset:0}}function Uu(t,n,r,e,i){var o=t[0],a=t[1],s=n[0],u=n[1],l=Qs(a[1]-o[1]),c=Qs(a[0]-o[0]),p=Qs(u[1]-s[1]);if(!Qs(u[0]-s[0])){if(i&&!l)return{isBound:!1,offset:0};if(c)return Vu(l/c*(s[0]-o[0])+o[1],s[1],u[1],r,e);var f=s[0]-o[0];return{isBound:d=Math.abs(f)<=(e||0),offset:d?f:0}}if(p)return{isBound:!1,offset:0};if(i&&!c)return{isBound:!1,offset:0};if(l)return Vu((s[1]-o[1])/(l/c)+o[0],s[0],u[0],r,e);var d,f=s[1]-o[1];return{isBound:d=Math.abs(f)<=(e||0),offset:d?f:0}}function Zu(c,t,p,f){return t.map(function(t){var r=t[0],n=t[1],e=t[2],i=function(t,n,r){var e=t.props.innerBounds;if(!e)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=e.left,o=e.top,a=e.width,s=e.height,u=[[i,o],[i,o+s]],l=[[i,o],[i+a,o]],c=[[i+a,o],[i+a,o+s]],p=[[i,o+s],[i+a,o+s]],f=Wu(r,n),d=f.horizontal,h=f.vertical;if(Hu([r,[i,o],[i+a,o],[i,o+s],[i+a,o+s]],n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Uu(n,l,h),v=Uu(n,p,h),m=Uu(n,u,d),b=Uu(n,c,d),x=g.isBound&&v.isBound,S=g.isBound||v.isBound,E=m.isBound&&b.isBound,y=m.isBound||b.isBound,M=Us(g.offset,v.offset),C=Us(m.offset,b.offset),D=[0,0],w=!1;return{isAllBound:Math.abs(C)<Math.abs(M)?(D=[M,0],w=S,x):(D=[0,C],w=y,E),isVerticalBound:S,isHorizontalBound:y,isBound:w,offset:D}}(c,[n,e],p),o=i.isBound,a=i.offset,s=i.isVerticalBound,u=i.isHorizontalBound,l=vu({datas:f,distX:a[0],distY:a[1]}).map(function(t,n){return t*(r[n]?2/r[n]:0)});return{sign:r,isBound:o,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:l}})}function $u(t,n,r){var e,i,o,a,s,u,l,c,p,f,d,h,g,v=Zu(t,Ku(n,[0,0],!1).map(function(t){var n=t[0],r=t[1],e=t[2];return[n.map(function(t){return 2*Math.abs(t)}),r,e]}),xu(n,[0,0]),r),m=_u(v,0),b=_u(v,1),x=0,S=0,E=m.isVerticalBound||b.isVerticalBound,y=m.isHorizontalBound||b.isHorizontalBound;return(E||y)&&(i={datas:r,distX:-m.offset[0],distY:-b.offset[1]},a=i.datas,s=i.distX,u=i.distY,l=a.beforeMatrix,c=a.matrix,p=a.is3d,f=a.startDragBeforeDist,d=a.startDragDist,h=a.absoluteOrigin,g=p?4:3,x=(e=Ut(Kt(o?l:c,Vt(o?f:d,[s,u]),g),h))[0],S=e[1]),{vertical:{isBound:E,offset:x},horizontal:{isBound:y,offset:S}}}function Ku(i,t,n){return e=n,o=[],a=(r=t)[0],s=r[1],a&&s?o.push([[0,2*s],r,[-a,s]],[[2*a,0],r,[a,-s]]):a?(o.push([[2*a,0],[a,1],[a,-1]]),e&&o.push([[0,-1],[a,-1],[-a,-1]],[[0,1],[a,1],[-a,1]])):s?(o.push([[0,2*s],[1,s],[-1,s]]),e&&o.push([[-1,0],[-1,s],[-1,-s]],[[1,0],[1,s],[1,-s]])):o.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),o.map(function(t){var n=t[0],r=t[1],e=t[2];return[n,xu(i,r),xu(i,e)]});var r,e,o,a,s}function Ju(t,n,r,e){var i=e?t.map(function(t){return rn(t,e)}):t,o=Qa([r],n);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t,n){return!Hu(o,t)})}function Qu(t,n,r,e,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,l=o.width,c=o.height,p=s-e[0],f=s+l-e[0],d=u-e[1],h=u+c-e[1],g=[[p,d],[f,d],[p,h],[f,h]],v=xu(r,[0,0]);if(!Ju(r,g,v,0))return[];var m=[],b=g.map(function(t){return[Ds(t),_a([0,0],t)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(t){var i=_a([0,0],function(t){var n=t[0],r=t[1],e=r[0]-n[0],i=r[1]-n[1];if(!e)return[n[0],0];if(!i)return[0,n[1]];var o=i/e,a=-o*n[0]+n[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),o=function(t){var n=t[0],r=t[1],e=r[0]-n[0],i=r[1]-n[1];if(!e)return Math.abs(n[0]);if(!i)return Math.abs(n[1]);var o=i/e;return Math.abs((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}(t);m.push.apply(m,b.filter(function(t){var n=t[0];return n&&o<=n}).map(function(t){var n=t[0],r=t[1],e=Math.acos(n?o/n:0);return[a+(r+e)-i,a+(r-e)-i]}).reduce(function(t,n){return t.push.apply(t,n),t},[]).filter(function(t){return!Ju(n,g,v,t)}).map(function(t){return Ns(180*t/Math.PI,os)}))}),m}function tl(t,n,r){var e=t||{},i=e.left,o=e.top,a=e.right,s=e.bottom,u={left:void 0===i?-1/0:i,top:void 0===o?-1/0:o,right:void 0===a?1/0:a,bottom:void 0===s?1/0:s};return{vertical:nl(u,n,!0),horizontal:nl(u,r,!1)}}function nl(t,n,r){var e=t[r?"left":"top"],i=t[r?"right":"bottom"],o=Math.min.apply(Math,n),a=Math.max.apply(Math,n),s=[];return o<e+1&&s.push({isBound:!0,offset:o-e,pos:e}),i-1<a&&s.push({isBound:!0,offset:a-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(t,n){return Math.abs(n.offset)-Math.abs(t.offset)})}function rl(t,n,r){return(r?t.map(function(t){return rn(t,r)}):t).some(function(t){return t[0]<n.left&&.1<Math.abs(t[0]-n.left)||t[0]>n.right&&.1<Math.abs(t[0]-n.right)||t[1]<n.top&&.1<Math.abs(t[1]-n.top)||t[1]>n.bottom&&.1<Math.abs(t[1]-n.bottom)})}function el(t,l,r,n,e){var i=t.props.bounds,c=e*Math.PI/180;if(!i)return[];var o=i.left,a=void 0===o?-1/0:o,s=i.top,u=void 0===s?-1/0:s,p=i.right,f=void 0===p?1/0:p,d=i.bottom,h=void 0===d?1/0:d,g=a-n[0],v=f-n[0],m=u-n[1],b=h-n[1],x={left:g,top:m,right:v,bottom:b};if(!rl(r,x,0))return[];var S=[];return[[g,0],[v,0],[m,1],[b,1]].forEach(function(t,n){var s=t[0],u=t[1];r.forEach(function(t){var r,n,e,i,o,a=_a([0,0],t);S.push.apply(S,(n=s,e=u,i=Ds(r=t),[o=Math.sqrt(i*i-n*n)||0,-o].sort(function(t,n){return Math.abs(t-r[e?0:1])-Math.abs(n-r[e?0:1])}).map(function(t){return _a([0,0],e?[t,n]:[n,t])}).map(function(t){return c+t-a}).filter(function(t){return!rl(l,x,t)}).map(function(t){return Ns(180*t/Math.PI,os)})))})}),S}var il={horizontal:["left","top","width","Y","X"],vertical:["top","left","height","X","Y"]};function ol(t){var n=t.state;n.guidelines&&n.guidelines.length||(n.elementGuidelineValues=[],n.staticGuidelines=Iu(t,!1),n.guidelines=ku(t),n.enableSnap=!0)}function al(t,n){var r=t.props,e=r.snappable,i=r.bounds,o=r.innerBounds,a=r.verticalGuidelines,s=r.horizontalGuidelines,u=t.state,l=u.guidelines,c=u.enableSnap;return e&&c&&!(n&&!0!==e&&e.indexOf(n)<0)&&!!(i||o||l&&l.length||a&&a.length||s&&s.length)}function sl(t,n,r,e,i){var o=function(t,n,r,e){var i=n[0]-t[0],o=n[1]-t[1];Math.abs(i)<os&&(i=0);Math.abs(o)<os&&(o=0);if(!i)return e?[0,0]:[0,r];if(!o)return e?[r,0]:[0,0];var a=o/i,s=t[1]-a*t[0];{if(e){var u=a*(n[0]+r)+s;return[r,u-n[1]]}return[(n[1]+r-s)/a-n[0],r]}}(t,n,r,e);if(!o)return[0,0];var a=vu({datas:i,distX:o[0],distY:o[1]});return[a[0],a[1]]}function ul(t,n,r,e,i,o){var a=Es(t,n,r,o?4:3);return Is(a,Ut(e,xu(a,i.map(function(t){return-t}))))}function ll(t,n){return t.isBound?t.offset:n.isSnap?n.offset:0}function cl(t,n){return t.isBound?t.offset:n.isSnap?Xu(n).offset:0}function pl(t,n,r,e){var i=function(t,n,r){var e=t.props.bounds||{},i=e.left,o=void 0===i?-1/0:i,a=e.top,s=void 0===a?-1/0:a,u=e.right,l=void 0===u?1/0:u,c=e.bottom,p=void 0===c?1/0:c,f=r[0],d=r[1],h=Ut(r,n),g=h[0],v=h[1];Math.abs(g)<os&&(g=0),Math.abs(v)<os&&(v=0);var m,b,x,S,E,y=0<v,M=0<g,C={isBound:!1,offset:0,pos:0},D={isBound:!1,offset:0,pos:0};return 0===g&&0===v||(0===g?y?p<d&&(D.pos=p,D.offset=d-p):d<s&&(D.pos=s,D.offset=d-s):0===v?M?l<f&&(C.pos=l,C.offset=f-l):f<o&&(C.pos=o,C.offset=f-o):(m=v/g,b=r[1]-m*f,S=x=0,E=!1,M&&l<=f?(x=m*l+b,S=l,E=!0):!M&&f<=o&&(x=m*o+b,S=o,E=!0),E&&(x<s||p<x)&&(E=!1),E||(y&&p<=d?(S=((x=p)-b)/m,E=!0):!y&&d<=s&&(S=((x=s)-b)/m,E=!0)),E&&(C.isBound=!0,C.pos=S,C.offset=f-S,D.isBound=!0,D.pos=x,D.offset=d-x))),{vertical:C,horizontal:D}}(t,n,r),o=i.horizontal,a=i.vertical,s=e?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,n,r){var e=r[0],i=r[1],o=n[0],a=n[1],s=Ut(r,n),u=s[0],l=0<(p=s[1]),c=0<u,u=Qs(u),p=Qs(p),f={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===u&&0===p)return{vertical:f,horizontal:d};var h=Nu(t,u?[e]:[],p?[i]:[]),g=h.vertical,v=h.horizontal;g.posInfos.filter(function(t){var n=t.pos;return c?o<=n:n<=o}),v.posInfos.filter(function(t){var n=t.pos;return l?a<=n:n<=a}),g.isSnap=0<g.posInfos.length,v.isSnap=0<v.posInfos.length;var m,b,x,S,E,y=Xu(g),M=y.isSnap,C=y.guideline,D=Xu(v),w=D.isSnap,R=D.guideline,z=w?R.pos[1]:0,P=M?C.pos[0]:0;return 0===u?w&&(d.isSnap=!0,d.pos=R.pos[1],d.offset=i-d.pos):0===p?M&&(f.isSnap=!0,f.pos=P,f.offset=e-P):(m=p/u,b=r[1]-m*e,S=x=0,E=!1,M?(x=m*(S=P)+b,E=!0):w&&(S=((x=z)-b)/m,E=!0),E&&(f.isSnap=!0,f.pos=S,f.offset=e-S,d.isSnap=!0,d.pos=x,d.offset=i-x)),{vertical:f,horizontal:d}}(t,n,r),u=s.horizontal,l=s.vertical,c=ll(o,u),p=ll(a,l),f=Math.abs(c),d=Math.abs(p);return{horizontal:{isBound:o.isBound,isSnap:u.isSnap,offset:c,dist:f},vertical:{isBound:a.isBound,isSnap:l.isSnap,offset:p,dist:d}}}function fl(t,n,r,e){void 0===e&&(e=r);var i=tl(t.props.bounds,e.map(function(t){return t[0]}),e.map(function(t){return t[1]})),o=i.horizontal,a=i.vertical,s=n?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Nu(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]}),t.props.snapCenter),u=s.horizontal,l=s.vertical,c=cl(o[0],u),p=cl(a[0],l),f=Math.abs(c),d=Math.abs(p);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:f,bounds:o,snap:u},vertical:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:p,dist:d,bounds:a,snap:l}}}function dl(t,n,r,e,i){void 0===i&&(i={});var o=tl(n,r,e),a=o.horizontal,s=o.vertical,u=i.isRequest?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Fu(t,r,e,i),l=u.horizontal,c=u.vertical,p=cl(a[0],l),f=cl(s[0],c),d=Math.abs(p),h=Math.abs(f);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:p,dist:d,bounds:a,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:h,bounds:s,snap:c}}}function hl(t){return t?t/Math.abs(t):0}function gl(G,B,t,T,A,I){return t.map(function(t){var n=t[0],r=t[1],e=xu(B,n),i=xu(B,r),o=T?pl(G,e,i,A):fl(G,A,[i]),a=o.horizontal,s=a.offset,u=a.isBound,l=a.isSnap,c=o.vertical,p=c.offset,f=c.isBound,d=c.isSnap,h=Ut(r,n);if(!p&&!s)return{isBound:f||u,isSnap:d||l,sign:h,offset:[0,0]};var g,v,m,b,x,S,E,y,M,C,D,w,R,z=(g=o,v=T,m=_a(e,i)/Math.PI*180,b=g.vertical,x=b.isBound,S=b.isSnap,E=b.dist,y=g.horizontal,M=y.isBound,C=y.isSnap,w=(D=m%180)<3||177<D,R=87<D&&D<93,y.dist<E&&(x||S&&!R&&(!v||!w))?"vertical":!M&&(!C||w||v&&R)?"":"horizontal");if(!z)return{sign:h,isBound:!1,isSnap:!1,offset:[0,0]};var P="vertical"==z,O=sl(e,i,-(P?p:s),P,I).map(function(t,n){return t*(h[n]?2/h[n]:0)});return{sign:h,isBound:P?f:u,isSnap:P?d:l,offset:O}})}function vl(t,n,r,e,i,o,a,s){for(var u,l,c,p,f,d,h,g,v,m,b,x,S,E,y,M,C,D,w,R,z,P,O,G,B,T,A,I,k,N,F,Y,X,j,q,_,W,L,H,V,U=ks(t.state),Z=t.props.keepRatio,$=0,K=0,J=0;J<2;++J){var Q,tt,nt=n($,K),rt=(u=t,l=nt,f=a,d=s,y=E=S=x=b=m=v=g=h=void 0,g=p=Z,v=[],m=[-(h=c=i)[0],-h[1]],h[0]&&h[1]?(v.push([m,[h[0],-h[1]]],[m,[-h[0],h[1]]]),g&&v.push([m,h])):h[0]?g?v.push([m,[m[0],-1]],[m,[m[0],1]],[m,[h[0],-1]],[m,h],[m,[h[0],1]]):v.push([[m[0],-1],[h[0],-1]],[[m[0],0],[h[0],0]],[[m[0],1],[h[0],1]]):h[1]?g?v.push([m,[-1,m[1]]],[m,[1,m[1]]],[m,[-1,h[1]]],[m,[1,h[1]]],[m,h]):v.push([[-1,m[1]],[-1,h[1]]],[[0,m[1]],[0,h[1]]],[[1,m[1]],[1,h[1]]]):v.push([m,[1,0]],[m,[-1,0]],[m,[0,-1]],[m,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),b=v,x=Ku(l,c,p),S=Qa(gl(u,l,b,p,f,d),Zu(u,x,xu(l,[0,0]),d)),E=_u(S,0),y=_u(S,1),{width:{isBound:E.isBound,offset:E.offset[0]},height:{isBound:y.isBound,offset:y.offset[1]}}),et=rt.width,it=rt.height,ot=et.isBound,at=it.isBound,st=et.offset,ut=it.offset;if(1===J&&(ot||(st=0),at||(ut=0)),0===J&&a&&!ot&&!at)return[0,0];Z&&(Q=Math.abs(st)*(r?1/r:1),tt=Math.abs(ut)*(e?1/e:1),(ot&&at?Q<tt:at||!ot&&Q<tt)?st=r*ut/e:ut=e*st/r),$+=st,K+=ut}return i[0]&&i[1]&&(R=t,z=U,O=o,G=s,j=[-(P=i)[0],-P[1]],q=R.state,_=q.width,W=q.height,L=R.props.bounds,V=H=1/0,L&&(B=[[P[0],-P[1]],[-P[0],P[1]]],T=L.left,A=void 0===T?-1/0:T,I=L.top,k=void 0===I?-1/0:I,N=L.right,F=void 0===N?1/0:N,Y=L.bottom,X=void 0===Y?1/0:Y,B.forEach(function(t){var n,r,e,i=t[0]!==j[0],o=t[1]!==j[1],a=xu(z,t),s=hl(t[1]-j[1]),u=hl(t[0]-j[0]),l=360*_a(O,a)/Math.PI;o&&(r=a.slice(),(Math.abs(l-360)<2||Math.abs(l-180)<2)&&(r[1]=O[1]),n=sl(O,r,(O[1]<a[1]?X:k)-a[1],!1,G)[1],isNaN(n)||(V=W+s*n)),i&&(r=a.slice(),(Math.abs(l-90)<2||Math.abs(l-270)<2)&&(r[0]=O[0]),e=sl(O,r,(O[0]<a[0]?F:A)-a[0],!0,G)[0],isNaN(e)||(H=_+u*e))})),C=(M={maxWidth:H,maxHeight:V}).maxWidth,D=M.maxHeight,$+=st=(w=function(t,n,r,e,i,o,a,s,u){var l=fl(t,s,[xu(n,a)]),c=l.horizontal.offset,p=l.vertical.offset;if(p||c){var f=vu({datas:u,distX:-p,distY:-c}),d=f[0],h=f[1];return[Math.min(i||1/0,r+a[0]*d)-r,Math.min(o||1/0,e+a[1]*h)-e]}return[0,0]}(t,n($,K),r+$,e+K,C,D,i,a,s))[0],K+=ut=w[1]),[$,K]}function ml(t,n,r,e){if(!al(t,"rotatable"))return e;var i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,u=e*Math.PI/180,l=[i,o,a,s].map(function(t){return Ut(t,r)}),c=l.map(function(t){return rn(t,u)}),p=Qa(el(t,l,c,r,e),Qu(t,l,c,r,e));return p.sort(function(t,n){return Math.abs(t-e)-Math.abs(n-e)}),p.length?p[0]:e}function bl(t,s,u,n,l){var c=l.width,p=l.height,f=l.fixedPosition;if(!al(t,"scalable"))return[0,0];var d=l.is3d,r=vl(t,function(t,n){return ul((r=l,e=Vt(s,[t/c,n/p]),i=r.transformOrigin,o=r.offsetMatrix,a=r.is3d?4:3,Su(o,Ht(r.targetMatrix,un(e,a),a),i,a)),c,p,f,u,d);var r,e,i,o,a},c,p,u,f,n,l);return[r[0]/c,r[1]/p]}function xl(t,n,r,e,i,o){if(!al(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=Is(o.absolutePoses,[n,r]),s=ys(a),u=s.left,l=s.right,c=s.top,p=s.bottom,f=[[u,c],[l,c],[u,p],[l,p]];t.props.snapCenter&&f.push([(u+l)/2,(c+p)/2]);var d,h,g,v,m,b,x,S,E,y,M,C,D,w,R,z,P,O,G,B=fl(t,i,f,a),T=B.vertical,A=B.horizontal,I=$u(t,a,o),k=I.vertical,N=I.horizontal,F=T.isSnap,Y=A.isSnap,X=T.isBound||k.isBound,j=A.isBound||N.isBound,q=Us(T.offset,k.offset),_=Us(A.offset,N.offset),W=(d=e,g=[X,j],v=[F,Y],m=[q,_],y=(h=[n,r])[0],M=h[1],C=g[0],D=g[1],w=v[0],R=v[1],z=m[0],P=m[1],O=-z,G=-P,d&&y&&M?(G=O=0,b=[],C&&D?b.push([0,P],[z,0]):C?b.push([z,0]):D?b.push([0,P]):w&&R?b.push([0,P],[z,0]):w?b.push([z,0]):R&&b.push([0,P]),b.length&&(b.sort(function(t,n){return Ds(Ut([y,M],t))-Ds(Ut([y,M],n))}),(x=b[0])[0]&&Math.abs(y)>os?(O=-x[0],G=M*Math.abs(y+O)/Math.abs(y)-M):x[1]&&Math.abs(M)>os&&(S=M,G=-x[1],O=y*Math.abs(M+G)/Math.abs(S)-y),d&&D&&C&&(Math.abs(O)>os&&Math.abs(O)<Math.abs(z)?(O*=E=Math.abs(z)/Math.abs(O),G*=E):Math.abs(G)>os&&Math.abs(G)<Math.abs(P)?(O*=E=Math.abs(P)/Math.abs(G),G*=E):(O=Us(-z,O),G=Us(-P,G))))):(O=y||C?-z:0,G=M||D?-P:0),[O,G]);return[{isBound:X,isSnap:F,offset:W[0]},{isBound:j,isSnap:Y,offset:W[1]}]}function Sl(t){var r=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var n=t.guideline;-1<r.indexOf(n)||r.push(n)})}),r}function El(t,n,r,e){var i=t-r,o=i<0?i+n:e;return{size:(i<0?0:i)-o,pos:o}}function yl(t,l,r,c){var p=[],n=Hs(t.filter(function(t){var n=t.element,r=t.gap;return n&&!r}),function(t){var n,r,e,i=t.element,o=t.pos,a=o[c],s=(Math.min(0,a-l)<0?-1:1)+"_"+o[c?0:1],u=-1<(e=Na(n=p,function(t){var n=t[0],r=t[1];return i===n&&a===r}))?n[e]:r;return u?u[2]:(p.push([i,a,s]),s)});return n.forEach(function(t){t.sort(function(t,n){return El(t.pos[c],t.size,l,r).size-El(n.pos[c],t.size,l,r).size||t.pos[c?0:1]-n.pos[c?0:1]})}),n}function Ml(t,f,n,d,h,g,v,m,b,x,S,E){var r=t.props,y=r.zoom,e=r.isDisplaySnapDigit,M=void 0===e||e,i=il[f],C=i[0],D=i[1],w=i[2],R=i[4];return Vs(n.map(function(t,c){var p=!0;return t.map(function(t,n){var r,e=t.pos,i=t.size,o=El(e[x],i,h,g),a=o.pos,s=o.size;if(s<m)return null;var u=p;p=!1;var l=M&&u?parseFloat(s.toFixed(b)):0;return E.createElement("div",{key:f+"LinkGuideline"+c+"-"+n,className:ls("guideline-group",f),style:((r={})[C]=d+a+"px",r[D]=-v+e[x?0:1]+"px",r[w]=s+"px",r)},eu({direction:f,classNames:[ls("dashed")],size:"100%",posValue:[0,0],sizeValue:s,zoom:y},E),E.createElement("div",{className:ls("size-value"),style:{transform:"translate"+R+"(-50%) scale("+y+")"}},0<l?S(l):""))})}))}function Cl(t,o,n,a,s,u,l,c){var p=t.props.zoom;return n.map(function(t,n){var r=t.type,e=t.pos,i=[0,0];return i[l]=a,i[l?0:1]=-s+e,eu({key:o+"TargetGuideline"+n,classNames:[ls("target","bold",r)],posValue:i,sizeValue:u,zoom:p,direction:o},c)})}function Dl(t,a,n,s,u){var l=t.props.zoom;return n.map(function(t,n){var r=t.pos,e=t.size,i=t.element,o=[-s[0]+r[0],-s[1]+r[1]];return eu({key:a+"Guideline"+n,classNames:i?[ls("bold")]:[],direction:a,posValue:o,sizeValue:e,zoom:l},u)})}function wl(t,i,w,R){var n=t.filter(function(t){var n=t.element,r=t.gap,e=t.type;return n&&r&&e===i}),r="vertical"===i?[0,1]:[1,0],z=r[0],P=r[1];return Vs(n.map(function(t){var n=t.pos,r=t.gap,e=t.gapGuidelines,i=t.sizes,o=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort(function(t,n){return Math.abs(t)-Math.abs(n)}),t[0]}(n[P]+i[P]-w[P],n[P]-w[P]-R[P]),a=Math.min(i[P],R[P]);0<o&&a<o?o=2*(o-a/2):o<0&&o<-a&&(o=2*(o+a/2));var s,u,l,c,p,f,d,h,g,v,m,b,x,S,E,y,M,C,D=(0<o?0:R[P])+o/2;return Qa((v=e,m=z,b=w,x=R,S=n,E=r,y=D,M=Math.abs(E),C=S[m]+(0<E?x[0]:0),v.filter(function(t){return t.pos[m]<=b[m]}).sort(function(t,n){var r=t.pos;return n.pos[m]-r[m]}).filter(function(t){var n=t.pos,r=t.sizes,e=n[m];return Ns(e+r[m],1e-4)===Ns(C-M,1e-4)&&(C=e,!0)}).map(function(t){var n=-b[m]+t.pos[m]+t.sizes[m];return Ja(Ja({},t),{gap:E,renderPos:m?[y,n]:[n,y]})})),(s=e,u=z,l=w,c=R,p=n,f=r,d=D,h=Math.abs(f),g=p[u]+(f<0?c[u]:0),s.filter(function(t){return t.pos[u]>l[u]}).sort(function(t,n){var r=t.pos,e=n.pos;return r[u]-e[u]}).filter(function(t){var n=t.pos,r=t.sizes,e=n[u];return Ns(e,1e-4)===Ns(g+h,1e-4)&&(g=e+r[u],!0)}).map(function(t){var n=-l[u]+t.pos[u]-h;return Ja(Ja({},t),{gap:f,renderPos:u?[d,n]:[n,d]})})))}))}function Rl(t,u,n,l,c){var r=t.props,e=r.snapDigit,p=void 0===e?0:e,i=r.isDisplaySnapDigit,f=void 0===i||i,d=r.zoom,h="horizontal"===u?"X":"Y",g="horizontal"===u?"width":"height";return n.map(function(t,n){var r,e=t.renderPos,i=t.gap,o=t.className,a=Math.abs(i),s=f?parseFloat(a.toFixed(p)):0;return c.createElement("div",{key:u+"GapGuideline"+n,className:ls("guideline-group",u),style:((r={left:e[0]+"px",top:e[1]+"px"})[g]=a+"px",r)},eu({direction:u,classNames:[ls("gap"),o],size:"100%",posValue:[0,0],sizeValue:a,zoom:d},c),c.createElement("div",{className:ls("size-value","gap"),style:{transform:"translate"+h+"(-50%) scale("+d+")"}},0<s?l(s):""))})}function zl(t,n,r,i,o,e){var a=tl(e||t.props.bounds,n,r),s=a.vertical,u=a.horizontal;s.forEach(function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}),u.forEach(function(t){t.isBound&&o.push({type:"bounds",pos:t.pos})});var l=function(t){var n=t.props.innerBounds;if(!n)return{vertical:[],horizontal:[]};var r=t.getRect(),e=r.pos1,i=r.pos2,o=r.pos3,a=r.pos4,u=xu([e,i,o,a],[0,0]),l=n.left,c=n.top,p=n.width,f=n.height,d=[[l,c],[l,c+f]],h=[[l,c],[l+p,c]],g=[[l+p,c],[l+p,c+f]],v=[[l,c+f],[l+p,c+f]],m=[],b=[],x={top:!1,bottom:!1,left:!1,right:!1};return[[e,i],[i,a],[a,o],[o,e]].forEach(function(t){var n=Wu(u,t),r=n.horizontal,e=n.vertical,i=Uu(t,h,e,1,!0),o=Uu(t,v,e,1,!0),a=Uu(t,d,r,1,!0),s=Uu(t,g,r,1,!0);i.isBound&&!x.top&&(m.push(c),x.top=!0),o.isBound&&!x.bottom&&(m.push(c+f),x.bottom=!0),a.isBound&&!x.left&&(b.push(l),x.left=!0),s.isBound&&!x.right&&(b.push(l+p),x.right=!0)}),{horizontal:m,vertical:b}}(t),c=l.vertical,p=l.horizontal;c.forEach(function(e){0<=Na(i,function(t){var n=t.type,r=t.pos;return"bounds"===n&&r===e})||i.push({type:"bounds",pos:e})}),p.forEach(function(e){0<=Na(o,function(t){var n=t.type,r=t.pos;return"bounds"===n&&r===e})||o.push({type:"bounds",pos:e})})}var Pl={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,n){var r=t.state,e=r.top,i=r.left,o=r.pos1,a=r.pos2,s=r.pos3,u=r.pos4,l=r.snapRenderInfo,c=r.targetClientRect,p=r.containerClientRect,f=r.is3d,d=r.rootMatrix;if(!l||!al(t,""))return[];var h,g=f?4:3,v=Math.min(o[0],a[0],s[0],u[0]),m=Math.min(o[1],a[1],s[1],u[1]),b=Gu(d,p,g),x=Zs(d,[c.left-b[0],c.top-b[1]],g),S=x[0],E=x[1],y=t.props,M=y.snapThreshold,C=void 0===M?5:M,D=y.snapDigit,w=void 0===D?0:D,R=y.snapDistFormat,z=void 0===R?function(t){return t}:R,P=l.externalPoses||[],O=ks(t.state),G=[],B=[],T=[],A=[],I=[],k=ys(O),N=k.width,F=k.height,Y=k.top,X=k.left,j=k.bottom,q=k.right,_=0<P.length,W=_?ys(P):{};l.request||(l.direction&&I.push(function(t,n,r){var e=[];if(r[0]&&r[1])e=[r,[-r[0],r[1]],[r[0],-r[1]]].map(function(t){return xu(n,t)});else if(r[0]||r[1])t.props.keepRatio?e=[[-1,-1],[-1,1],[1,-1],[1,1],r].map(function(t){return xu(n,t)}):1<(e=bu(n,r)).length&&e.push([(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]);else for(var i=[n[0],n[1],n[3],n[2],n[0]],o=0;o<4;++o)e.push(i[o]),e.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return Nu(t,e.map(function(t){return t[0]}),e.map(function(t){return t[1]}),!0,1)}(t,O,l.direction)),l.snap&&(h=ys(O),l.center&&(h.middle=(h.top+h.bottom)/2,h.center=(h.left+h.right)/2),I.push(Yu(t,h,!0,1))),_&&(l.center&&(W.middle=(W.top+W.bottom)/2,W.center=(W.left+W.right)/2),I.push(Yu(t,W,!0,1))),I.forEach(function(t){var n=t.vertical.posInfos,r=t.horizontal.posInfos;G.push.apply(G,n.map(function(t){return{type:"snap",pos:t.pos}})),B.push.apply(B,r.map(function(t){return{type:"snap",pos:t.pos}})),T.push.apply(T,Sl(n)),A.push.apply(A,Sl(r))})),zl(t,[X,q],[Y,j],G,B),_&&zl(t,[W.left,W.right],[W.top,W.bottom],G,B,l.externalBounds);var L=yl(A,S,N,0),H=yl(T,E,F,1),V=wl(T,"vertical",[i,e],[N,F]),U=wl(A,"horizontal",[i,e],[N,F]),Z=Qa(T,A);return qs(t,"onSnap",{guidelines:Z.filter(function(t){return!t.element}),elements:Hs(Z.filter(function(t){return t.element}),function(t){return t.element}),gaps:Qa(U,V)},!0),Qa(Rl(t,"vertical",U,z,n),Rl(t,"horizontal",V,z,n),Ml(t,"horizontal",L,v,S,N,e,C,w,0,z,n),Ml(t,"vertical",H,m,E,F,i,C,w,1,z,n),Cl(t,"horizontal",B,v,e,N,0,n),Cl(t,"vertical",G,m,i,F,1,n),Dl(t,"horizontal",A,[i,e],n),Dl(t,"vertical",T,[i,e],n))},dragStart:function(t,n){t.state.snapRenderInfo={request:n.isRequest,snap:!0,center:!0},ol(t)},drag:function(t){var n=t.state;n.staticGuidelines=Iu(t,!1,n.staticGuidelines),n.guidelines=ku(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,n){return!(!tu(t)&&!Yl(t,n))||(!t.isRequest&&t.inputEvent?Ha(t.inputEvent.target,ls("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,ol(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,n){this.dragStart(t,n)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,ol(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var n=t.state;n.enableSnap=!1,n.staticGuidelines=[],n.guidelines=[],n.snapRenderInfo=null}},Ol={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,n){var r=t.props,e=r.throttleDragRotate,i=r.zoom,o=t.state,a=o.dragInfo,s=o.beforeOrigin;if(!e||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var l=Ds(u),c=_a(u,[0,0]);return[n.createElement("div",{className:ls("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:l+"px",transform:"translate("+s[0]+"px, "+s[1]+"px) rotate("+c+"rad) scaleY("+i+")"}})]},dragStart:function(t,n){var r=n.datas,e=n.parentEvent,i=n.parentGesto,o=t.state,a=o.target;if(o.gesto)return!1;o.gesto=i||t.targetGesto;var s,u=window.getComputedStyle(a);r.datas={},r.left=parseFloat(u.left||"")||0,r.top=parseFloat(u.top||"")||0,r.bottom=parseFloat(u.bottom||"")||0,r.right=parseFloat(u.right||"")||0,r.startValue=[0,0],pu(t,n),yu(n),s=t,r.absolutePoses=ks(s.state),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1;var l=Xs(t,n,Ja({set:function(t){r.startValue=t}},Eu(n)));return!1!==(e||qs(t,"onDragStart",l))?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.gesto=null,r.isPinch=!1),!!r.isDrag&&l},drag:function(t,n){fu(n,"translate");var r=n.datas,e=n.parentEvent,i=n.parentFlag,o=n.isPinch,a=n.isRequest,s=n.distX,u=n.distY,l=r.isDrag,c=r.prevDist,p=r.prevBeforeDist,f=r.startValue;if(l){var d,h,g,v,m,b,x,S,E,y,M,C,D=t.props,w=D.parentMoveable,R=!e&&D.throttleDrag||0,z=!e&&D.throttleDragRotate||0,P=!1,O=0;!e&&0<z&&(s||u)&&(h=Ns((d=D.startDragRotate||0)+180*_a([0,0],[s,u])/Math.PI,z)-d,g=u*Math.abs(Math.cos((h-90)/180*Math.PI)),v=Ds([s*Math.abs(Math.cos(h/180*Math.PI)),g]),O=h*Math.PI/180,s=v*Math.cos(O),u=v*Math.sin(O)),o||e||i||z&&!s&&!u||(b=(m=xl(t,s,u,z,a,r))[0],x=m[1],S=b.isSnap,E=b.isBound,y=b.offset,M=x.isSnap,C=x.isBound,P=S||M||E||C,s+=y,u+=x.offset),r.passDeltaX=s-(r.passDistX||0),r.passDeltaY=u-(r.passDistY||0),r.passDistX=s,r.passDistY=u;var G,B,T,A=Vt(gu({datas:r,distX:s,distY:u}),f),I=Vt((B=(G={datas:r,distX:s,distY:u}).datas,T=gu({datas:B,distX:G.distX,distY:G.distY}),Kt(hu(B,qt([T[0],T[1]],4)),_t([0,0,0],4),4)),f);z||P||(Fs(I,R),Fs(A,R));var k=Ut(A,f),N=Ut(I,f),F=Ut(N,c),Y=Ut(k,p);r.prevDist=N,r.prevBeforeDist=k;var X=r.left+k[0],j=r.top+k[1],q=r.right-k[0],_=r.bottom-k[1],W=du(r,"translate("+I[0]+"px, "+I[1]+"px)","translate("+N[0]+"px, "+N[1]+"px)");if(t.state.dragInfo.dist=e?[0,0]:N,e||w||!F.every(function(t){return!t})||!Y.some(function(t){return!t})){var L=t.state,H=Xs(t,n,{transform:W,dist:N,delta:F,translate:I,beforeDist:k,beforeDelta:Y,beforeTranslate:A,left:X,top:j,right:q,bottom:_,width:L.width,height:L.height,isPinch:o});return e||qs(t,"onDrag",H),H}}},dragEnd:function(t,n){var r=n.parentEvent,e=n.datas,i=n.isDrag;if(t.state.gesto=null,t.state.dragInfo=null,e.isDrag)return e.isDrag=!1,r||qs(t,"onDragEnd",js(t,n,{})),i},dragGroupStart:function(t,n){var r=n.datas,e=n.clientX,i=n.clientY,o=this.dragStart(t,n);if(!o)return!1;var a=uu(t,this,"dragStart",[e||0,i||0],n,!1),s=qs(t,"onDragGroupStart",Ja(Ja({},o),{targets:t.props.targets,events:a}));return r.isDrag=!1!==s,!!r.isDrag&&o},dragGroup:function(t,n){if(n.datas.isDrag){var r=this.drag(t,n),e=n.datas,i=uu(t,this,"drag",[e.passDeltaX,e.passDeltaY],n,!1);if(r){var o=Ja({targets:t.props.targets,events:i},r);return qs(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,n){var r=n.isDrag;if(n.datas.isDrag)return this.dragEnd(t,n),uu(t,this,"dragEnd",[0,0],n,!1),qs(t,"onDragGroupEnd",js(t,n,{targets:t.props.targets})),r},request:function(t){var n={},r=t.getRect(),e=0,i=0;return{isControl:!1,requestStart:function(){return{datas:n}},request:function(t){return"x"in t?e=t.x-r.left:"deltaX"in t&&(e+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY),{datas:n,distX:e,distY:i}},requestEnd:function(){return{datas:n,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function Gl(t,n,e){var r=t.state,i=r.renderPoses,o=r.rotation,a=r.direction,s=t.props,u=s.renderDirections,l=void 0===u?n:u,c=s.zoom,p={};if(!l)return[];var f=0<a?1:-1,d=!0===l?as:l,h=o/Math.PI*180;return d.forEach(function(t){p[t]=!0}),d.map(function(t){var n=ss[t];if(!n||!p[t])return null;var r=(Ns(h,15)+f*us[t]+720)%180;return e.createElement("div",{className:ls("control","direction",t),"data-rotation":r,"data-direction":t,key:"direction-"+t,style:zs.apply(void 0,Qa([o,c],n.map(function(t){return i[t]})))})})}function Bl(t,n,r,e,i,o){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=_a(r,e),l=n?Ns(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line"+o,className:ls.apply(void 0,Qa(["line","direction",n],a)),"data-rotation":l,"data-line-index":o,"data-direction":n,style:Rs(r,e,i,u)})}function Tl(t,n){return Gl(t,as,n)}function Al(t,n){return Gl(t,["nw","ne","sw","se"],n)}function Il(t,n,r,e,i,o){var a=t.state.is3d?4:3,s=Ss(t.state.rootMatrix,i,a),u=Vt([o.left,o.top],s);n.startAbsoluteOrigin=u,n.prevDeg=_a(u,[r,e])/Math.PI*180,n.prevSnapDeg=n.prevDeg,n.startDeg=n.prevDeg,n.loop=0}function kl(t,n,r,e,i,o){var a=r.prevDeg,s=ml(t,n,r.origin,e);return[(r.prevDeg=s)-a,s,o+s]}function Nl(t,n,r,e,i,o,a,s){var u=r.prevDeg,l=r.prevSnapDeg,c=r.startDeg,p=r.loop;e<u&&270<u&&e<90?++r.loop:u<e&&u<90&&270<e&&--r.loop;var f=r.loop,d=360*p+l-c+o,h=360*f+e-c+o;r.prevDeg=h-360*f+c-o;var g=i*((h=Ns(h,a))-o);return s&&(h=(g=ml(t,n,r.origin,g))/i+o),r.prevSnapDeg=h-360*f+c-o,[i*(h-d),g,o+g]}function Fl(t,n,r,e,i,o,a,s){return Nl(t,n,r,_a(r.startAbsoluteOrigin,[i,o])/Math.PI*180,e,a,s,!0)}function Yl(t,n){if(t.isRequest)return"rotatable"===t.requestAble;var r=t.inputEvent.target;if(Ha(r,ls("rotation-control")))return!0;var e=n.props.rotationTarget;return!!e&&(console.log(ru(e,!0)),ru(e,!0).some(function(t){return!!t&&(r===t||r.contains(t))}))}var Xl={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(t,n){var r=t.props,e=r.rotatable,i=r.rotationPosition,o=r.zoom,a=r.renderDirections,s=t.state,u=s.renderPoses,l=s.direction;if(!e)return null;var c,p,f=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3];if("none"!==t){var s=(t||"top").split("-"),u=s[0],l=s[1],c=[e,i];"left"===u?c=[o,e]:"right"===u?c=[i,a]:"bottom"===u&&(c=[a,o]);var p,f,d=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],h=Os(c,r);return l&&(f="bottom"===u||"left"===u,d=c[(p="top"===l||"left"===l)&&!f||!p&&f?0:1]),[d,h]}}(i,u,l),d=[];return f&&(c=f[0],p=f[1],d.push(n.createElement("div",{key:"rotation",className:ls("rotation"),style:{transform:"translate(-50%) translate("+c[0]+"px, "+c[1]+"px) rotate("+p+"rad)"}},n.createElement("div",{className:ls("line rotation-line"),style:{transform:"scaleX("+o+")"}}),n.createElement("div",{className:ls("control rotation-control"),style:{transform:"translate(0.5px) scale("+o+")"}})))),a&&d.push.apply(d,Gl(t,[],n)),d},dragControlCondition:Yl,dragControlStart:function(t,n){var r=n.datas,e=n.clientX,i=n.clientY,o=n.parentRotate,a=n.parentFlag,s=n.isPinch,u=n.isRequest,l=t.state,c=l.target,p=l.left,f=l.top,d=l.origin,h=l.beforeOrigin,g=l.direction,v=l.beforeDirection,m=l.targetTransform,b=l.moveableClientRect;if(!u&&!c)return!1;var x,S=t.getRect();r.rect=S,r.transform=m,r.left=p,r.top=f,r.fixedPosition=zu(t,Ru(t)),r.absoluteInfo={origin:S.origin,startValue:S.rotation},Il(t,r.absoluteInfo,e,i,d,b),u||s||a?(x=o||0,r.beforeInfo={origin:S.beforeOrigin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0},r.afterInfo={origin:S.origin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0}):(r.beforeInfo={origin:S.beforeOrigin},r.afterInfo={origin:S.origin},Il(t,r.beforeInfo,e,i,h,b),Il(t,r.afterInfo,e,i,d,b)),r.direction=g,r.beforeDirection=v,r.startValue=0,r.datas={},yu(n);var E=Xs(t,n,Ja(Ja({set:function(t){r.startValue=t*Math.PI/180}},Eu(n)),{dragStart:Ol.dragStart(t,(new au).dragStart([0,0],n))})),y=qs(t,"onRotateStart",E);return r.isRotate=!1!==y,t.state.snapRenderInfo={request:n.isRequest},!!r.isRotate&&E},dragControl:function(t,n){var r,e,i,o,a,s,u=n.datas,l=n.clientX,c=n.clientY,p=n.parentRotate,f=n.parentFlag,d=n.isPinch,h=n.groupDelta,g=u.beforeDirection,v=u.beforeInfo,m=u.afterInfo,b=u.absoluteInfo,x=u.isRotate,S=u.startValue,E=u.rect;if(x){fu(n,"rotate");var y,M,C,D,w,R,z,P,O,G,B,T,A,I=g*Cs(n.datas.beforeTransform,[50,50],100,100).direction,k=t.props,N=k.throttleRotate,F=void 0===N?0:N,Y=k.parentMoveable,X=180/Math.PI*S,j=b.startValue;if(A=!f&&"parentDist"in n?(C=(M=kl(t,E,m,y=n.parentDist,0,X))[0],D=M[1],w=M[2],z=(R=kl(t,E,v,y,0,X))[0],P=R[1],O=R[2],B=(G=kl(t,E,b,y,0,j))[0],T=G[1],G[2]):d||f?(C=(r=Nl(t,E,m,p,I,X,F))[0],D=r[1],w=r[2],z=(e=Nl(t,E,v,p,g,X,F))[0],P=e[1],O=e[2],B=(i=Nl(t,E,b,p,I,j,F))[0],T=i[1],i[2]):(C=(o=Fl(t,E,m,I,l,c,X,F))[0],D=o[1],w=o[2],z=(a=Fl(t,E,v,g,l,c,X,F))[0],P=a[1],O=a[2],B=(s=Fl(t,E,b,I,l,c,j,F))[0],T=s[1],s[2]),B||C||z||Y){var q,_,W,L,H=du(u,"rotate("+w+"deg)","rotate("+D+"deg)"),V=(q=t,_=D,W=u.fixedPosition,L=u,wu(q,"rotate("+_+"deg)",Ru(q),W,L)),U=Ut(Vt(h||[0,0],V),u.prevInverseDist||[0,0]);u.prevInverseDist=V;var Z=Xs(t,n,Ja({delta:C,dist:D,rotate:w,beforeDist:P,beforeDelta:z,beforeRotate:O,absoluteDist:T,absoluteDelta:B,absoluteRotate:A,isPinch:!!d},Du(t,H,U,d,n)));return qs(t,"onRotate",Z),Z}}},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isRotate&&(r.isRotate=!1,qs(t,"onRotateEnd",js(t,n,{})),e)},dragGroupControlCondition:Yl,dragGroupControlStart:function(t,n){var r=n.datas,e=t.state,s=e.left,u=e.top,l=e.beforeOrigin,i=this.dragControlStart(t,n);if(!i)return!1;i.set(r.beforeDirection*t.rotation);var o=lu(t,this,"dragControlStart",n,function(t,n){var r=t.state,e=r.left,i=r.top,o=r.beforeOrigin,a=Vt(Ut([e,i],[s,u]),Ut(o,l));return n.datas.groupClient=a,Ja(Ja({},n),{parentRotate:0})}),a=qs(t,"onRotateGroupStart",Ja(Ja({},i),{targets:t.props.targets,events:o}));return r.isRotate=!1!==a,!!r.isRotate&&i},dragGroupControl:function(n,t){var r=t.datas;if(r.isRotate){var e=this.dragControl(n,t);if(e){var l=r.beforeDirection,c=e.beforeDist,p=e.beforeDelta/180*Math.PI,i=lu(n,this,"dragControl",t,function(t,n){var r=n.datas.groupClient,e=r[0],i=r[1],o=rn([e,i],p*l),a=o[0],s=o[1],u=[a-e,s-i];return n.datas.groupClient=[a,s],Ja(Ja({},n),{parentRotate:c,groupDelta:u})});n.rotation=l*e.beforeRotate;var o=Ja({targets:n.props.targets,events:i,set:function(t){n.rotation=t}},e);return qs(n,"onRotateGroup",o),o}}},dragGroupControlEnd:function(t,n){var r=n.isDrag;if(n.datas.isRotate)return this.dragControlEnd(t,n),lu(t,this,"dragControlEnd",n),qs(t,"onRotateGroupEnd",js(t,n,{targets:t.props.targets})),r},request:function(t){var n={},r=0,e=t.getRotation();return{isControl:!0,requestStart:function(t){return{datas:n}},request:function(t){return"deltaRotate"in t?r+=t.deltaRotate:"rotate"in t&&(r=t.rotate-e),{datas:n,parentDist:r}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},jl={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,n){var r=t.props,e=r.resizable,i=r.edge;if(e)return(i?Al:Tl)(t,n)},dragControlCondition:tu,dragControlStart:function(n,t){var r,e=t.inputEvent,i=t.isPinch,o=t.parentDirection,a=t.datas,s=t.parentFlag;console.log(t);var u,l,c=o||(i?[0,0]:As(e.target)),p=n.state,f=p.target,d=p.width,h=p.height;if(!c||!f)return!1;i||pu(n,t),a.datas={},a.direction=c,a.startOffsetWidth=d,a.startOffsetHeight=h,a.prevWidth=0,a.prevHeight=0,u=f,l=window.getComputedStyle(u),r=[parseFloat(l.width),parseFloat(l.height)],a.startWidth=r[0],a.startHeight=r[1];var g,v,m,b,x,S,E,y,M,C,D,w=[Math.max(0,d-a.startWidth),Math.max(0,h-a.startHeight)];a.minSize=w,a.maxSize=[1/0,1/0],s||(v=(g=window.getComputedStyle(f)).position,m=g.minWidth,b=g.minHeight,x=g.maxWidth,S=g.maxHeight,C=d,D=h,(y=(E="static"===v||"relative"===v)?f.parentElement:f.offsetParent)&&(C=y.clientWidth,D=y.clientHeight,E&&(M=window.getComputedStyle(y),C-=parseFloat(M.paddingLeft)||0,D-=parseFloat(M.paddingTop)||0)),a.minSize=Vt([Fa(m,C)||0,Fa(b,D)||0],w),a.maxSize=Vt([Fa(x,C)||1/0,Fa(S,D)||1/0],w));var R=n.props.transformOrigin||"% %";function z(t){a.ratio=t&&isFinite(t)?t:0}function P(t){a.fixedDirection=t,a.fixedPosition=Ou(n,t)}a.transformOrigin=R&&Pa(R)?R.split(" "):R,a.isWidth=!c[0]&&!c[1]||c[0]||!c[1],z(d/h),P([-c[0],-c[1]]);var O=Xs(n,t,{direction:c,set:function(t){var n=t[0],r=t[1];a.startWidth=n,a.startHeight=r},setMin:function(t){a.minSize=t},setMax:function(t){a.maxSize=[t[0]||1/0,t[1]||1/0]},setRatio:z,setFixedDirection:P,setOrigin:function(t){a.transformOrigin=t},dragStart:Ol.dragStart(n,(new au).dragStart([0,0],t))});return!1!==qs(n,"onResizeStart",O)&&(a.isResize=!0,n.state.snapRenderInfo={request:t.isRequest,direction:c}),!!a.isResize&&O},dragControl:function(t,n){var r,e=n.datas,i=n.distX,o=n.distY,a=n.parentFlag,s=n.isPinch,u=n.parentDistance,l=n.parentScale,c=n.parentKeepRatio,p=n.dragClient,f=n.parentDist,d=n.isRequest,h=e.isResize,g=e.transformOrigin,v=e.fixedDirection,m=e.startWidth,b=e.startHeight,x=e.prevWidth,S=e.prevHeight,E=e.minSize,y=e.maxSize,M=e.ratio,C=e.isWidth;if(h){var D=t.props,w=D.throttleResize,R=void 0===w?0:w,z=D.parentMoveable,P=D.snapThreshold,O=void 0===P?5:P,G=e.direction,B=G,T=0,A=0;G[0]||G[1]||(B=[1,1]);var I,k,N,F,Y,X,j,q,_,W,L=M&&(t.props.keepRatio||c),H=p,V=e.startOffsetWidth,U=e.startOffsetHeight;p||(H=!a&&s?Ou(t,[0,0]):e.fixedPosition),f?(T=f[0],A=f[1],L&&(T?A=A||T/M:T=A*M)):l?(T=(l[0]-1)*V,A=(l[1]-1)*U):s?u&&(A=(T=u)*U/V):(I=vu({datas:e,distX:i,distY:o}),T=B[0]*I[0],A=B[1]*I[1],L&&V&&U?(k=_a([0,0],I),N=_a([0,0],B),F=Ds([T,A]),Y=Math.cos(k-N)*F,B[0]?A=B[1]?(X=2*B[0]*V,j=2*B[1]*U,q=Ds([X+I[0],j+I[1]])-Ds([X,j]),_=_a([0,0],[M,1]),T=Math.cos(_)*q,Math.sin(_)*q):(T=Y)*M:T=(A=Y)/M):L||(W=Qa(G),V||(I[0]<0?W[0]=-1:0<I[0]&&(W[0]=1)),U||(I[1]<0?W[1]=-1:0<I[1]&&(W[1]=1)),T=(B=G=W)[0]*I[0],A=B[1]*I[1]));var Z=B[0]||L?Math.max(V+T,os):V,$=B[1]||L?Math.max(U+A,os):U;L&&V&&U&&(C?$=Z/M:Z=$*M);var K,J=[0,0];s||(J=function(t,r,e,i,o,n,a){if(!al(t,"resizable"))return[0,0];var s=t.state,u=s.allMatrix,l=s.is3d;return vl(t,function(t,n){return ul(u,r+t,e+n,o,i,l)},r,e,i,o,n,a)}(t,Z,$,G,H,d,e)),f&&(f[0]||(J[0]=0),f[1]||(J[1]=0)),L?(B[0]&&B[1]&&J[0]&&J[1]&&(Math.abs(J[0])>Math.abs(J[1])?J[1]=0:J[0]=0),(K=!J[0]&&!J[1])&&(C?Z=Ns(Z,R):$=Ns($,R)),B[0]&&!B[1]||J[0]&&!J[1]||K&&C?$=(Z+=J[0])/M:(!B[0]&&B[1]||!J[0]&&J[1]||K&&!C)&&(Z=($+=J[1])*M)):(V+T<-O&&(J[0]=0),V+A<-O&&(J[1]=0),Z+=J[0],$+=J[1],J[0]||(Z=Ns(Z,R)),J[1]||($=Ns($,R))),Z=(r=ja([Z,$],E,y,L))[0],$=r[1];var Q=[(T=(Z=Math.round(Z))-V)-x,(A=($=Math.round($))-U)-S];e.prevWidth=T,e.prevHeight=A;var tt=Pu(t,Z,$,v,H,g);if(z||!Q.every(function(t){return!t})||!tt.every(function(t){return!t})){var nt=Xs(t,n,{width:m+T,height:b+A,offsetWidth:Z,offsetHeight:$,direction:G,dist:[T,A],delta:Q,isPinch:!!s,drag:Ol.drag(t,ou(n,t.state,tt,!!s,!1))});return qs(t,"onResize",nt),nt}}},dragControlAfter:function(t,n){var r=n.datas,e=r.isResize,i=r.startOffsetWidth,o=r.startOffsetHeight,a=r.prevWidth,s=r.prevHeight;if(e){var u=t.state,l=u.width-(i+a),c=u.height-(o+s),p=3<Math.abs(l),f=3<Math.abs(c);return p&&(r.startWidth+=l,r.startOffsetWidth+=l,r.prevWidth+=l),f&&(r.startHeight+=c,r.startOffsetHeight+=c,r.prevHeight+=c),p||f?(this.dragControl(t,n),!0):void 0}},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isResize&&(r.isResize=!1,qs(t,"onResizeEnd",js(t,n,{})),e)},dragGroupControlCondition:tu,dragGroupControlStart:function(u,t){var l=t.datas,n=this.dragControlStart(u,t);if(!n)return!1;var e=su(u,"resizable",t);function i(t,n){var r=l.fixedDirection,e=l.fixedPosition,i=Ou(t,r),o=Kt(an(-u.rotation/180*Math.PI,3),[i[0]-e[0],i[1]-e[1],1],3),a=o[0],s=o[1];return n.datas.originalX=a,n.datas.originalY=s,n}var o=lu(u,this,"dragControlStart",t,i),r=Ja(Ja({},n),{targets:u.props.targets,events:o,setFixedDirection:function(r){n.setFixedDirection(r),o.forEach(function(t,n){t.setFixedDirection(r),i(u.moveables[n],e[n])})}}),a=qs(u,"onResizeGroupStart",r);return l.isResize=!1!==a,!!l.isResize&&n},dragGroupControl:function(o,t){var n=t.datas;if(n.isResize){var r=this.dragControl(o,t);if(r){var e=r.offsetWidth,i=r.offsetHeight,a=r.dist,s=o.props.keepRatio,u=[e/(e-a[0]),i/(i-a[1])],l=n.fixedPosition,c=lu(o,this,"dragControl",t,function(t,n){var r=Kt(an(o.rotation/180*Math.PI,3),[n.datas.originalX*u[0],n.datas.originalY*u[1],1],3),e=r[0],i=r[1];return Ja(Ja({},n),{parentDist:null,parentScale:u,dragClient:Vt(l,[e,i]),parentKeepRatio:s})}),p=Ja({targets:o.props.targets,events:c},r);return qs(o,"onResizeGroup",p),p}}},dragGroupControlEnd:function(t,n){var r=n.isDrag;if(n.datas.isResize)return this.dragControlEnd(t,n),lu(t,this,"dragControlEnd",n),qs(t,"onResizeGroupEnd",js(t,n,{targets:t.props.targets})),r},request:function(t){var n={},r=0,e=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?r=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(r+=t.deltaWidth),"offsetHeight"in t?e=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(e+=t.deltaHeight),{datas:n,parentDist:[r,e]}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},ql={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,n){var r=t.props,e=r.resizable,i=r.scalable,o=r.edge;if(!e&&i)return(o?Al:Tl)(t,n)},dragControlCondition:tu,dragControlStart:function(n,t){var r=t.datas,e=t.isPinch,i=t.inputEvent,o=t.parentDirection||(e?[0,0]:As(i.target)),a=n.state,s=a.width,u=a.height,l=a.targetTransform,c=a.target,p=a.pos1,f=a.pos2,d=a.pos4;if(!o||!c)return!1;e||pu(n,t),yu(t),r.datas={},r.transform=l,r.prevDist=[1,1],r.direction=o,r.width=s,r.height=u,r.startValue=[1,1];var h=!o[0]&&!o[1]||o[0]||!o[1];function g(t){r.ratio=t&&isFinite(t)?t:0}function v(t){r.fixedDirection=t,r.fixedPosition=Ou(n,t)}r.isWidth=h,g(La(p,f)/La(f,d)),v([-o[0],-o[1]]);var m=Xs(n,t,Ja(Ja({direction:o,set:function(t){r.startValue=t},setRatio:g,setFixedDirection:v},Eu(t)),{dragStart:Ol.dragStart(n,(new au).dragStart([0,0],t))}));return!1!==qs(n,"onScaleStart",m)&&(r.isScale=!0,n.state.snapRenderInfo={request:t.isRequest,direction:o}),!!r.isScale&&m},dragControl:function(t,n){fu(n,"scale");var r=n.datas,e=n.distX,i=n.distY,o=n.parentScale,a=n.parentDistance,s=n.parentKeepRatio,u=n.parentFlag,l=n.isPinch,c=n.dragClient,p=n.parentDist,f=n.isRequest,d=r.prevDist,h=r.direction,g=r.width,v=r.height,m=r.isScale,b=r.startValue,x=r.isWidth,S=r.ratio,E=r.fixedDirection;if(!m)return!1;var y=t.props,M=y.throttleScale,C=y.parentMoveable,D=h;h[0]||h[1]||(D=[1,1]);var w,R,z,P,O,G,B,T=S&&(t.props.keepRatio||s),A=t.state,I=1,k=1,N=c;c||(N=!u&&l?Ou(t,[0,0]):r.fixedPosition),p?(I=(g+p[0])/g,k=(v+p[1])/v):o?(I=o[0],k=o[1]):l?a&&(I=(g+a)/g,k=(v+a*v/g)/v):(w=vu({datas:r,distX:e,distY:i}),R=D[0]*w[0],z=D[1]*w[1],T&&g&&v&&(P=_a([0,0],w),O=_a([0,0],D),G=Ds([R,z]),B=Math.cos(P-O)*G,D[0]?z=D[1]?R*S:(R=B)*S:R=(z=B)/S),I=(g+R)/g,k=(v+z)/v),I=D[0]||T?I*b[0]:b[0],k=D[1]||T?k*b[1]:b[1],0===I&&(I=1e-9*(0<d[0]?1:-1)),0===k&&(k=1e-9*(0<d[1]?1:-1));var F,Y=[I/b[0],k/b[1]],X=[I,k];l||!t.props.groupable||za(F=(A.snapRenderInfo||{}).direction)&&(F[0]||F[1])&&(A.snapRenderInfo={direction:h,request:n.isRequest});var j,q,_,W=[0,0];l||(W=bl(t,Y,h,f,r)),T?(D[0]&&D[1]&&W[0]&&W[1]&&(Math.abs(W[0])>Math.abs(W[1])?W[1]=0:W[0]=0),(j=!W[0]&&!W[1])&&(x?Y[0]=Ns(Y[0]*b[0],M)/b[0]:Y[1]=Ns(Y[1]*b[1],M)/b[1]),D[0]&&!D[1]||W[0]&&!W[1]||j&&x?(Y[0]+=W[0],q=g*Y[0]*b[0]/S,Y[1]=q/v/b[1]):(!D[0]&&D[1]||!W[0]&&W[1]||j&&!x)&&(Y[1]+=W[1],_=v*Y[1]*b[1]*S,Y[0]=_/g/b[0])):(Y[0]+=W[0],Y[1]+=W[1],W[0]||(Y[0]=Ns(Y[0]*b[0],M)/b[0]),W[1]||(Y[1]=Ns(Y[1]*b[1],M)/b[1])),0===Y[0]&&(Y[0]=1e-9*(0<d[0]?1:-1)),0===Y[1]&&(Y[1]=1e-9*(0<d[1]?1:-1));var L,H,V=[Y[0]/d[0],Y[1]/d[1]];H=b,X=[(L=Y)[0]*H[0],L[1]*H[1]];var U,Z,$,K=(U=E,Z=N,$=r,wu(t,"scale("+Y.join(", ")+")",U,Z,$)),J=Ut(K,r.prevInverseDist||[0,0]);if(r.prevDist=Y,r.prevInverseDist=K,I===d[0]&&k===d[1]&&J.every(function(t){return!t})&&!C)return!1;var Q=du(r,"scale("+X.join(", ")+")","scale("+Y.join(", ")+")"),tt=Xs(t,n,Ja({offsetWidth:g,offsetHeight:v,direction:h,scale:X,dist:Y,delta:V,isPinch:!!l},Du(t,Q,J,l,n)));return qs(t,"onScale",tt),tt},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isScale&&(r.isScale=!1,qs(t,"onScaleEnd",js(t,n,{})),e)},dragGroupControlCondition:tu,dragGroupControlStart:function(u,t){var l=t.datas,n=this.dragControlStart(u,t);if(!n)return!1;var e=su(u,"resizable",t);function i(t,n){var r=l.fixedDirection,e=l.fixedPosition,i=Ou(t,r),o=Kt(an(-u.rotation/180*Math.PI,3),[i[0]-e[0],i[1]-e[1],1],3),a=o[0],s=o[1];return n.datas.originalX=a,n.datas.originalY=s,n}l.moveableScale=u.scale;var o=lu(u,this,"dragControlStart",t,i),r=Ja(Ja({},n),{targets:u.props.targets,events:o,setFixedDirection:function(r){n.setFixedDirection(r),o.forEach(function(t,n){t.setFixedDirection(r),i(u.moveables[n],e[n])})}}),a=qs(u,"onScaleGroupStart",r);return l.isScale=!1!==a,!!l.isScale&&r},dragGroupControl:function(o,t){var n=t.datas;if(n.isScale){var r=this.dragControl(o,t);if(r){var e=n.moveableScale;o.scale=[r.scale[0]*e[0],r.scale[1]*e[1]];var a=o.props.keepRatio,s=r.dist,u=r.scale,l=n.fixedPosition,i=lu(o,this,"dragControl",t,function(t,n){var r=Kt(an(o.rotation/180*Math.PI,3),[n.datas.originalX*s[0],n.datas.originalY*s[1],1],3),e=r[0],i=r[1];return Ja(Ja({},n),{parentDist:null,parentScale:u,parentKeepRatio:a,dragClient:Vt(l,[e,i])})}),c=Ja({targets:o.props.targets,events:i},r);return qs(o,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,n){var r=n.isDrag;if(n.datas.isScale)return this.dragControlEnd(t,n),lu(t,this,"dragControlEnd",n),qs(t,"onScaleGroupEnd",js(t,n,{targets:t.props.targets})),r},request:function(){var n={},r=0,e=0;return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return r+=t.deltaWidth,e+=t.deltaHeight,{datas:n,parentDist:[r,e]}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function _l(t,a){return t.map(function(t,n){return r=t,e=a[n],(r*(o=2)+e*(i=1))/(i+o);var r,e,i,o})}function Wl(t,n,r){var e=_a(t,n),i=_a(t,r)-e;return 0<=i?i:i+2*Math.PI}var Ll={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,n){var r=t.props,e=r.resizable,i=r.scalable,o=r.warpable,a=r.zoom;if(e||i||!o)return[];var s=t.state,u=s.pos1,l=s.pos2,c=s.pos3,p=s.pos4,f=_l(u,l),d=_l(l,u),h=_l(u,c),g=_l(c,u),v=_l(c,p),m=_l(p,c),b=_l(l,p),x=_l(p,l);return Qa([n.createElement("div",{className:ls("line"),key:"middeLine1",style:Rs(f,v,a)}),n.createElement("div",{className:ls("line"),key:"middeLine2",style:Rs(d,m,a)}),n.createElement("div",{className:ls("line"),key:"middeLine3",style:Rs(h,b,a)}),n.createElement("div",{className:ls("line"),key:"middeLine4",style:Rs(g,x,a)})],Tl(t,n))},dragControlCondition:function(t){return!t.isRequest&&Ha(t.inputEvent.target,ls("direction"))},dragControlStart:function(t,n){var e=n.datas,r=n.inputEvent,i=t.props.target,o=As(r.target);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,l=a.targetTransform,c=a.targetMatrix,p=a.width,f=a.height,d=a.left,h=a.top;return e.datas={},e.targetTransform=l,e.warpTargetMatrix=u?c:Wt(c,3,4),e.targetInverseMatrix=Yt(Xt(e.warpTargetMatrix,4),3,4),e.direction=o,e.left=d,e.top=h,pu(t,n),yu(n),e.poses=[[0,0],[p,0],[0,f],[p,f]].map(function(t){return Ut(t,s)}),e.nextPoses=e.poses.map(function(t){var n=t[0],r=t[1];return Kt(e.warpTargetMatrix,[n,r,0,1],4)}),e.startValue=sn(4),e.prevMatrix=sn(4),e.absolutePoses=ks(a),e.posIndexes=mu(o),!(a.snapRenderInfo={request:n.isRequest,direction:o})!==qs(t,"onWarpStart",Xs(t,n,Ja({set:function(t){e.startValue=t}},Eu(n))))&&(e.isWarp=!0),e.isWarp},dragControl:function(t,n){var r,e,i,o,a=n.datas,s=n.isRequest,u=n.distX,l=n.distY,c=a.targetInverseMatrix,p=a.prevMatrix,f=a.isWarp,d=a.startValue,h=a.poses,g=a.posIndexes,v=a.absolutePoses;if(!f)return!1;fu(n,"matrix3d"),al(t,"warpable")&&(1<(r=g.map(function(t){return v[t]})).length&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]),i=(e=fl(t,s,r.map(function(t){return[t[0]+u,t[1]+l]}))).horizontal,o=e.vertical,l-=i.offset,u-=o.offset);var m=vu({datas:a,distX:u,distY:l},!0),b=a.nextPoses.slice();if(g.forEach(function(t){b[t]=Vt(b[t],m)}),!is.every(function(t){return n=t.map(function(t){return h[t]}),r=t.map(function(t){return b[t]}),e=Wl(n[0],n[1],n[2]),i=Wl(r[0],r[1],r[2]),!((o=Math.PI)<=e&&i<=o||e<=o&&o<=i);var n,r,e,i,o}))return!1;var x=cn(h[0],h[2],h[1],h[3],b[0],b[2],b[1],b[3]);if(!x.length)return!1;var S=hu(a,Ht(c,x,4),!0),E=Ht(Xt(p,4),S,4),y=Ht(d,a.prevMatrix=S,4),M=du(a,"matrix3d("+y.join(", ")+")","matrix3d("+S.join(", ")+")");return Cu(n,M),qs(t,"onWarp",Xs(t,n,{delta:E,matrix:y,dist:S,multiply:Ht,transform:M})),!0},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isWarp&&(r.isWarp=!1,qs(t,"onWarpEnd",js(t,n,{})),e)}},Hl=ls("area-pieces"),Vl=ls("area-piece"),Ul=ls("avoid");function Zl(t){var n,r,e,i=t.areaElement,o=t.state,a=o.width,s=o.height;r=Ul,(n=i).classList?n.classList.remove(r):(e=new RegExp("(\\s|^)"+r+"(\\s|$)"),n.className=n.className.replace(e," ")),i.style.cssText+="left: 0px; top: 0px; width: "+a+"px; height: "+s+"px"}function $l(t){return t.createElement("div",{key:"area_pieces",className:Hl},t.createElement("div",{className:Vl}),t.createElement("div",{className:Vl}),t.createElement("div",{className:Vl}),t.createElement("div",{className:Vl}))}var Kl={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,n){var r=t.props,e=r.target,i=r.dragArea,o=r.groupable,a=r.passDragArea,s=t.state,u=s.width,l=s.height,c=s.renderPoses,p=a?ls("area","pass"):ls("area");if(o)return[n.createElement("div",{key:"area",ref:C(t,"areaElement"),className:p}),$l(n)];if(!e||!i)return[];var f=cn([0,0],[u,0],[0,l],[u,l],c[0],c[1],c[2],c[3]),d=f.length?bs(f,!0):"none";return[n.createElement("div",{key:"area",ref:C(t,"areaElement"),className:p,style:{top:"0px",left:"0px",width:u+"px",height:l+"px",transformOrigin:"0 0",transform:d}}),$l(n)]},dragStart:function(t,n){var r=n.datas,e=n.clientX,i=n.clientY;if(!n.inputEvent)return!1;r.isDragArea=!1;var o,a,s=t.areaElement,u=t.state,l=u.moveableClientRect,c=u.renderPoses,p=u.rootMatrix,f=u.is3d,d=l.left,h=l.top,g=ys(c),v=g.left,m=g.top,b=g.width,x=g.height,S=Zs(p,[e-d,i-h],f?4:3),E=S[0],y=S[1],M=[{left:v,top:m,width:b,height:(y-=m)-10},{left:v,top:m,width:(E-=v)-10,height:x},{left:v,top:m+y+10,width:b,height:x-y-10},{left:v+E+10,top:m,width:b-E-10,height:x}],C=[].slice.call(s.nextElementSibling.children);M.forEach(function(t,n){C[n].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),a=Ul,(o=s).classList?o.classList.add(a):o.className+=" "+a},drag:function(t,n){var r=n.datas;if(!n.inputEvent)return!1;r.isDragArea||(r.isDragArea=!0,Zl(t))},dragEnd:function(t,n){var r=n.inputEvent,e=n.datas;if(!r)return!1;e.isDragArea||Zl(t)},dragGroupStart:function(t,n){return this.dragStart(t,n)},dragGroup:function(t,n){return this.drag(t,n)},dragGroupEnd:function(t,n){return this.dragEnd(t,n)},unset:function(t){Zl(t)}},Jl={name:"origin",props:{origin:Boolean},events:{},render:function(t,n){var r=t.props.zoom,e=t.state,i=e.beforeOrigin,o=e.rotation;return[n.createElement("div",{className:ls("control","origin"),style:zs(o,r,i),key:"beforeOrigin"})]}};function Ql(t){var n=t.scrollContainer;return[n.scrollLeft,n.scrollTop]}var tc={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(o,a){var t=o.props.scrollContainer,n=void 0===t?o.getContainer():t,r=new qn,e=nu(n,!0);a.datas.dragScroll=r;var i=a.isControl?"controlGesto":"targetGesto",s=a.targets;r.on("scroll",function(t){var n=t.container,r=t.direction,e=Xs(o,a,{scrollContainer:n,direction:r}),i=s?"onScrollGroup":"onScroll";s&&(e.targets=s),qs(o,i,e)}).on("move",function(t){var n=t.offsetX,r=t.offsetY;o[i].scrollBy(n,r,a.inputEvent,!1)}),r.dragStart(a,{container:e})},checkScroll:function(t,n){var r=n.datas.dragScroll;if(r){var e=t.props,i=e.scrollContainer,o=void 0===i?t.getContainer():i,a=e.scrollThreshold,s=void 0===a?0:a,u=e.getScrollPosition,l=void 0===u?Ql:u;return r.drag(n,{container:o,threshold:s,getScrollPosition:function(t){return l({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,n){return this.checkScroll(t,n)},dragEnd:function(t,n){n.datas.dragScroll.dragEnd(),n.datas.dragScroll=null},dragControlStart:function(t,n){return this.dragStart(t,Ja(Ja({},n),{isControl:!0}))},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupStart:function(t,n){return this.dragStart(t,Ja(Ja({},n),{targets:t.props.targets}))},dragGroup:function(t,n){return this.drag(t,Ja(Ja({},n),{targets:t.props.targets}))},dragGroupEnd:function(t,n){return this.dragEnd(t,Ja(Ja({},n),{targets:t.props.targets}))},dragGroupControlStart:function(t,n){return this.dragStart(t,Ja(Ja({},n),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,n){return this.drag(t,Ja(Ja({},n),{targets:t.props.targets}))},dragGroupControEnd:function(t,n){return this.dragEnd(t,Ja(Ja({},n),{targets:t.props.targets}))}},nc={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,props:Object},events:{}},rc={name:"padding",props:{padding:Object},events:{},render:function(t,o){var n=t.props;if(n.dragArea)return[];var r=n.padding||{},e=r.left,i=void 0===e?0:e,a=r.top,s=void 0===a?0:a,u=r.right,l=void 0===u?0:u,c=r.bottom,p=void 0===c?0:c,f=t.state,d=f.renderPoses,h=[f.pos1,f.pos2,f.pos3,f.pos4],g=[];return 0<i&&g.push([0,2]),0<s&&g.push([0,1]),0<l&&g.push([1,3]),0<p&&g.push([2,3]),g.map(function(t,n){var r=t[0],e=t[1],i=cn([0,0],[100,0],[0,100],[100,100],h[r],h[e],d[r],d[e]);if(i.length)return o.createElement("div",{key:"padding"+n,className:ls("padding"),style:{transform:bs(i,!0)}})})}},ec=["nw","ne","se","sw"];function ic(t,n){var r=t[0]+t[1],e=n<r?n/r:1;return t[0]*=e,t[1]=n-t[1]*e,t}var oc=[1,2,5,6],ac=[0,3,4,7],sc=[1,-1,-1,1],uc=[1,1,-1,-1];function lc(t,a,s,u,l,c,p,f,d){void 0===c&&(c=0),void 0===p&&(p=0),void 0===f&&(f=u),void 0===d&&(d=l);var h=[],g=!1,n=t.map(function(t,n){var r=a[n],e=r.horizontal,i=r.vertical;if(i&&!g&&(g=!0,h.push("/")),g){var o=Math.max(0,1===i?t[1]-p:d-t[1]);return h.push(Js(o,l,s)),o}o=Math.max(0,1===e?t[0]-c:f-t[0]);return h.push(Js(o,u,s)),o});return{styles:h,raws:n}}function cc(t){for(var n=[0,0],r=[0,0],e=t.length,i=0;i<e;++i){var o=t[i];o.sub&&(o.horizontal&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1,r[0]=i+1),o.vertical&&(0===r[1]&&(r[0]=i),r[1]=i-r[0]+1))}return{horizontalRange:n,verticalRange:r}}function pc(t,e,i,o,a,n){var r,s,u;void 0===n&&(n=[0,0]);var l=t.indexOf("/"),c=(-1<l?t.slice(0,l):t).length,p=t.slice(0,c),f=t.slice(c+1),d=p[0],h=void 0===d?"0px":d,g=p[1],v=void 0===g?h:g,m=p[2],b=void 0===m?h:m,x=p[3],S=void 0===x?v:x,E=f[0],y=void 0===E?h:E,M=f[1],C=void 0===M?y:M,D=f[2],w=void 0===D?y:D,R=f[3],z=void 0===R?C:R,P=[h,v,b,S].map(function(t){return Fa(t,e)}),O=[y,C,w,z].map(function(t){return Fa(t,i)}),G=P.slice(),B=O.slice(),T=ic([G[0],G[1]],e);G[0]=T[0],G[1]=T[1],r=ic([G[3],G[2]],e),G[3]=r[0],G[2]=r[1],s=ic([B[0],B[3]],i),B[0]=s[0],B[3]=s[1],u=ic([B[1],B[2]],i),B[1]=u[0],B[2]=u[1];var A=G.slice(0,Math.max(n[0],p.length)),I=B.slice(0,Math.max(n[1],f.length));return Qa(A.map(function(t,n){var r=ec[n];return{horizontal:sc[n],vertical:0,pos:[o+t,a+(-1===uc[n]?i:0)],sub:!0,raw:P[n],direction:r}}),I.map(function(t,n){var r=ec[n];return{horizontal:0,vertical:uc[n],pos:[o+(-1===sc[n]?e:0),a+t],sub:!0,raw:O[n],direction:r}}))}function fc(t,n,r,e,i){void 0===i&&(i=n.length);var o=cc(t.slice(e)),a=o.horizontalRange,s=o.verticalRange,u=r-e,l=0;if(0==u)l=i;else if(0<u&&u<a[1])l=a[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(r,l),n.splice(r,l)}function dc(t,n,r,e,i,o,a,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var p=cc(t.slice(r)),f=p.horizontalRange,d=p.verticalRange;if(-1<e)for(var h=1===sc[e]?o-l:s-o,g=f[1];g<=e;++g){var v=1===uc[g]?c:u,m=0;if(e===g?m=o:0===g?m=l+h:-1===sc[g]&&(m=s-(n[r][0]-l)),t.splice(r+g,0,{horizontal:sc[g],vertical:0,pos:[m,v]}),n.splice(r+g,0,[m,v]),0===g)break}else if(-1<i){var b,x=1===uc[i]?a-c:u-a;0===f[1]&&0===d[1]&&(b=[l+x,c],t.push({horizontal:sc[0],vertical:0,pos:b}),n.push(b));for(var S=d[0],g=d[1];g<=i;++g){m=1===sc[g]?l:s,v=0;if(i===g?v=a:0===g?v=c+x:1===uc[g]?v=n[r+S][1]:-1===uc[g]&&(v=u-(n[r+S][1]-c)),t.push({horizontal:0,vertical:uc[g],pos:[m,v]}),n.push([m,v]),0===g)break}}}function hc(t,r){return void 0===r&&(r=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,n){return t.horizontal?r[n]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,n){return t.vertical?r[n]:null}).filter(function(t){return null!=t})}}var gc=[[0,-1,"n"],[1,0,"e"]],vc=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function mc(t,n,r){var e=t.props.clipRelative,i=t.state,o=i.width,a=i.height,s=n.type,u=n.poses,l="rect"===s,c="circle"===s;if("polygon"===s)return r.map(function(t){return Js(t[0],o,e)+" "+Js(t[1],a,e)});if(l||"inset"===s){var p=r[1][1],f=r[3][0],d=r[7][0],h=r[5][1];if(l)return[p,f,h,d].map(function(t){return t+"px"});var g,v,m,b=[p,o-f,a-h,d].map(function(t,n){return Js(t,n%2?o:a,e)});return 8<r.length&&(v=(g=Ut(r[4],r[0]))[0],m=g[1],b.push.apply(b,Qa(["round"],lc(r.slice(8),u.slice(8),e,v,m,d,p,f,h).styles))),b}if(c||"ellipse"===s){var x=r[0],S=Js(Math.abs(r[1][1]-x[1]),c?Math.sqrt((o*o+a*a)/2):a,e);return(b=c?[S]:[Js(Math.abs(r[2][0]-x[0]),o,e),S]).push("at",Js(x[0],o,e),Js(x[1],a,e)),b}}function bc(t,n,r,e){var a=[e,(e+n)/2,n],s=[t,(t+r)/2,r];return vc.map(function(t){var n=t[0],r=t[1],e=t[2],i=a[n+1],o=s[r+1];return{vertical:Math.abs(r),horizontal:Math.abs(n),direction:e,pos:[i,o]}})}function xc(t,i,o,n,r){var e,a,s,u=r;if(u||(u="none"!==(s=(a=getComputedStyle(t)).clipPath)?s:a.clip),u&&"none"!==u&&"auto"!==u||(u=n)){var l=Ia(u),c=l.prefix,p=void 0===c?u:c,f=l.value,d=void 0===f?"":f,h="circle"===p,g=" ";if("polygon"===p){g=",";return{type:p,clipText:u,poses:G=(P=Aa(d||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var n=t.split(" "),r=n[0],e=n[1];return{vertical:1,horizontal:1,pos:[Fa(r,i),Fa(e,o)]}}),splitter:g}}if(h||"ellipse"===p){var v,m,b,x,S,E,y,M,C,D="",w="",R=0,z=0,P=Ta(d);z=h?(m="",m=void 0===(v=P[0])?"50%":v,D=void 0===(b=P[2])?"50%":b,w=void 0===(x=P[3])?"50%":x,R=Fa(m,Math.sqrt((i*i+o*o)/2))):(M=E="",E=void 0===(S=P[0])?"50%":S,M=void 0===(y=P[1])?"50%":y,D=void 0===(C=P[3])?"50%":C,w=void 0===(e=P[4])?"50%":e,R=Fa(E,i),Fa(M,o));var O=[Fa(D,i),Fa(w,o)],G=Qa([{vertical:1,horizontal:1,pos:O,direction:"nesw"}],gc.slice(0,h?1:2).map(function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[O[0]+t[0]*R,O[1]+t[1]*z]}}));return{type:p,clipText:u,radiusX:R,radiusY:z,left:O[0]-R,top:O[1]-z,poses:G,splitter:g}}if("inset"===p){var B=(P=Ta(d||"0 0 0 0")).indexOf("round"),T=(-1<B?P.slice(0,B):P).length,A=P.slice(T+1),I=P.slice(0,T),k=I[0],N=I[1],F=void 0===N?k:N,Y=I[2],X=void 0===Y?k:Y,j=I[3],q=void 0===j?F:j,_=[k,X].map(function(t){return Fa(t,o)}),W=_[0],L=_[1],H=[q,F].map(function(t){return Fa(t,i)}),V=H[0],U=H[1],Z=i-U,$=o-L,K=pc(A,Z-V,$-W,V,W);return{type:"inset",clipText:u,poses:G=Qa(bc(W,Z,$,V),K),top:W,left:V,right:Z,bottom:$,radius:A,splitter:g}}if("rect"===p){g=",";var J=(P=Aa(d||"0px, "+i+"px, "+o+"px, 0px")).map(function(t){return ka(t).value});return{type:"rect",clipText:u,poses:G=bc(W=J[0],U=J[1],L=J[2],V=J[3]),top:W,right:U,bottom:L,left:V,values:P,splitter:g}}}}var Sc={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,s){var n=t.props,r=n.customClipPath,e=n.defaultClipPath,i=n.clipArea,u=n.zoom,o=t.state,a=o.target,l=o.width,c=o.height,p=o.allMatrix,f=o.is3d,d=o.left,h=o.top,g=o.pos1,v=o.pos2,m=o.pos3,b=o.pos4,x=o.clipPathState,S=o.snapBoundInfos;if(!a)return[];var E=xc(a,l,c,e||"inset",x||r);if(!E)return[];var y,M,C,D,w,R,z=f?4:3,P=E.type,O=E.poses.map(function(t){var n=Ss(p,t.pos,z);return[n[0]-d,n[1]-h]}),G=[],B=[],T="rect"===P,A="inset"===P,I="polygon"===P;if((T||A||I)&&(y=A?O.slice(0,8):O,B=y.map(function(t,n){var r=0===n?y[y.length-1]:y[n-1],e=_a(r,t),i=ws(r,t);return s.createElement("div",{key:"clipLine"+n,className:ls("line","clip-line","snap-control"),"data-clip-index":n,style:{width:i+"px",transform:"translate("+r[0]+"px, "+r[1]+"px) rotate("+e+"rad) scaleY("+u+")"}})})),G=O.map(function(t,n){return s.createElement("div",{key:"clipControl"+n,className:ls("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) scale("+u+")"}})}),A&&G.push.apply(G,O.slice(8).map(function(t,n){return s.createElement("div",{key:"clipRadiusControl"+n,className:ls("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) scale("+u+")"}})})),"circle"===P||"ellipse"===P){var k=E.left,N=E.top,F=E.radiusX,Y=E.radiusY,X=Ut(Ss(p,[k,N],z),Ss(p,[0,0],z)),j=X[0],q=X[1],_="none";if(!i){for(var W=Math.max(10,F/5,Y/5),L=[],H=0;H<=W;++H){var V=2*Math.PI/W*H;L.push([F+(F-u)*Math.cos(V),Y+(Y-u)*Math.sin(V)])}L.push([F,-2]),L.push([-2,-2]),L.push([-2,2*Y+2]),L.push([2*F+2,2*Y+2]),L.push([2*F+2,-2]),L.push([F,-2]),_="polygon("+L.map(function(t){return t[0]+"px "+t[1]+"px"}).join(", ")+")"}G.push(s.createElement("div",{key:"clipEllipse",className:ls("clip-ellipse","snap-control"),style:{width:2*F+"px",height:2*Y+"px",clipPath:_,transform:"translate("+(-d+j)+"px, "+(-h+q)+"px) "+bs(p)}}))}return i&&(C=(M=ys(Qa([g,v,m,b],O))).width,D=M.height,w=M.left,R=M.top,(I||T||A)&&(L=A?O.slice(0,8):O,G.push(s.createElement("div",{key:"clipArea",className:ls("clip-area","snap-control"),style:{width:C+"px",height:D+"px",transform:"translate("+w+"px, "+R+"px)",clipPath:"polygon("+L.map(function(t){return t[0]-w+"px "+(t[1]-R)+"px"}).join(", ")+")"}})))),S&&["vertical","horizontal"].forEach(function(o){var t=S[o],a="horizontal"===o;t.isSnap&&B.push.apply(B,t.snap.posInfos.map(function(t,n){var r=t.pos,e=Ut(Ss(p,a?[0,r]:[r,0],z),[d,h]),i=Ut(Ss(p,a?[l,r]:[r,c],z),[d,h]);return Bl(s,"",e,i,u,"clip"+o+"snap"+n,"guideline")})),t.isBound&&B.push.apply(B,t.bounds.map(function(t,n){var r=t.pos,e=Ut(Ss(p,a?[0,r]:[r,0],z),[d,h]),i=Ut(Ss(p,a?[l,r]:[r,c],z),[d,h]);return Bl(s,"",e,i,u,"clip"+o+"bounds"+n,"guideline","bounds","bold")}))}),Qa(G,B)},dragControlCondition:function(t){return t.inputEvent&&-1<(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")},dragStart:function(t,n){var r=t.props.dragWithClip;return void 0!==r&&!r&&this.dragControlStart(t,n)},drag:function(t,n){return this.dragControl(t,n)},dragEnd:function(t,n){return this.dragControlEnd(t,n)},dragControlStart:function(t,n){var r=t.state,e=t.props,i=e.defaultClipPath,o=e.customClipPath,a=r.target,s=r.width,u=r.height,l=n.inputEvent?n.inputEvent.target:null,c=l?l.getAttribute("class"):"",p=n.datas,f=xc(a,s,u,i||"inset",o);if(!f)return!1;var d=f.clipText;return!1===qs(t,"onClipStart",Xs(t,n,{clipType:f.type,clipStyle:d,poses:f.poses.map(function(t){return t.pos})}))?p.isClipStart=!1:(p.isControl=-1<c.indexOf("clip-control"),p.isLine=-1<c.indexOf("clip-line"),p.isArea=-1<c.indexOf("clip-area")||-1<c.indexOf("clip-ellipse"),p.index=l?parseInt(l.getAttribute("data-clip-index"),10):-1,p.clipPath=f,p.isClipStart=!0,r.clipPathState=d,pu(t,n),!0)},dragControl:function(t,n){var r=n.datas,e=n.originalDatas;if(!r.isClipStart)return!1;var i=e&&e.draggable||{},o=r.isControl,a=r.isLine,s=r.isArea,u=r.index,l=r.clipPath;if(!l)return!1;var c=i.isDrag?i.prevDist:vu(n),p=c[0],f=c[1],d=t.props,h=t.state,g=h.width,v=h.height,m=!s&&!o&&!a,b=l.type,x=l.poses,S=l.splitter,E=x.map(function(t){return t.pos});m&&(p=-p,f=-f);var y,M,C,D,w,R,z,P,O,G,B,T,A,I,k,N=!o||"nesw"===x[u].direction,F="inset"===b||"rect"===b,Y=x.map(function(){return[0,0]});o&&!N?(M=(y=x[u]).horizontal,C=y.vertical,D=[p*Math.abs(M),f*Math.abs(C)],z=D,P=F,B=(w=x)[R=u],T=B.direction,A=B.sub,I=w.map(function(){return[0,0]}),k=T?T.split(""):[],P&&R<8?(O=k.filter(function(t){return"w"===t||"e"===t})[0],G=k.filter(function(t){return"n"===t||"s"===t})[0],I[R]=z,w.forEach(function(t,n){var r=t.direction;r&&(-1<r.indexOf(O)&&(I[n][0]=z[0]),-1<r.indexOf(G)&&(I[n][1]=z[1]))}),O&&(I[1][0]=z[0]/2,I[5][0]=z[0]/2),G&&(I[3][1]=z[1]/2,I[7][1]=z[1]/2)):T&&!A?k.forEach(function(o){var a="n"===o||"s"===o;w.forEach(function(t,n){var r=t.direction,e=t.horizontal,i=t.vertical;r&&-1!==r.indexOf(o)&&(I[n]=[a||!e?0:z[0],a&&i?z[1]:0])})}):I[R]=z,Y=I):N&&(Y=E.map(function(){return[p,f]}));var X=E.map(function(t,n){return Vt(t,Y[n])}),j=Qa(X);h.snapBoundInfos=null;var q,_,W,L,H,V,U="circle"===l.type,Z="ellipse"===l.type;(U||Z)&&(q=ys(X),_=Math.abs(q.bottom-q.top),W=Math.abs(Z?q.right-q.left:_),L=X[0][1]+_,H=X[0][0]-W,V=X[0][0]+W,U&&(j.push([V,q.bottom]),Y.push([1,0])),j.push([q.left,L]),Y.push([0,1]),j.push([H,q.bottom]),Y.push([1,0]));var $,K=Tu([],g,v,(d.clipHorizontalGuidelines||[]).map(function(t){return Fa(""+t,v)}),(d.clipVerticalGuidelines||[]).map(function(t){return Fa(""+t,g)})),J=[],Q=[];Q=U||Z?(J=[j[4][0],j[2][0]],[j[1][1],j[3][1]]):F?(nt=[j[0],j[2],j[4],j[6]],$=[Y[0],Y[2],Y[4],Y[6]],J=nt.filter(function(t,n){return $[n][0]}).map(function(t){return t[0]}),nt.filter(function(t,n){return $[n][1]}).map(function(t){return t[1]})):(J=j.filter(function(t,n){return Y[n][0]}).map(function(t){return t[0]}),j.filter(function(t,n){return Y[n][1]}).map(function(t){return t[1]}));for(var tt=0;tt<2;++tt){if("break"===function(){var t=dl(K,d.clipTargetBounds&&{left:0,top:0,right:g,bottom:v},J,Q,{snapThreshold:5}),n=t.horizontal,r=t.vertical,e=n.offset,i=r.offset;if(!Z&&!U||0!==Y[0][0]||0!==Y[0][1])return j.forEach(function(t,n){var r=Y[n];r[0]&&(t[0]-=i),r[1]&&(t[1]-=e)}),"break";var o=ys(X),a=o.bottom-o.top,s=Z?o.right-o.left:a;s-=r.isBound?Math.abs(i):0===r.snapIndex?-i:i,a-=n.isBound?Math.abs(e):0===n.snapIndex?-e:e,U&&(s=a=0<qu(r,n)?a:s);var u=j[0];j[1][1]=u[1]-a,j[2][0]=u[0]+s,j[3][1]=u[1]+a,j[4][0]=u[0]-s}())break}var nt,rt=mc(t,l,X),et=b+"("+rt.join(S)+")";return h.clipPathState=et,Q=U||Z?(J=[j[4][0],j[2][0]],[j[1][1],j[3][1]]):F?(nt=[j[0],j[2],j[4],j[6]],J=nt.map(function(t){return t[0]}),nt.map(function(t){return t[1]})):(J=j.map(function(t){return t[0]}),j.map(function(t){return t[1]})),h.snapBoundInfos=dl(K,d.clipTargetBounds&&{left:0,top:0,right:g,bottom:v},J,Q,{snapThreshold:1}),qs(t,"onClip",Xs(t,n,{clipEventType:"changed",clipType:b,poses:X,clipStyle:et,clipStyles:rt,distX:p,distY:f})),!0},dragControlEnd:function(t,n){this.unset(t);var r=n.isDrag,e=n.datas,i=n.isDouble,o=e.isLine,a=e.isClipStart,s=e.isControl;return!!a&&(qs(t,"onClipEnd",js(t,n,{})),i&&(s?function(t,n){var r=n.datas,e=r.clipPath,i=r.index,o=e.type,a=e.poses,s=e.splitter,u=a.map(function(t){return t.pos}),l=u.length;if("polygon"===o)a.splice(i,1),u.splice(i,1);else{if("inset"!==o)return;if(i<8)return;if(fc(a,u,i,8,l),l===a.length)return}var c=mc(t,e,u);qs(t,"onClip",Xs(t,n,{clipEventType:"removed",clipType:o,poses:u,clipStyles:c,clipStyle:o+"("+c.join(s)+")",distX:0,distY:0}))}(t,n):o&&function(t,n){var r=cu(t,n),e=r[0],i=r[1],o=n.datas,a=o.clipPath,s=o.index,u=a.type,l=a.poses,c=a.splitter,p=l.map(function(t){return t.pos});if("polygon"===u)p.splice(s,0,[e,i]);else{if("inset"!==u)return;var f=oc.indexOf(s),d=ac.indexOf(s),h=l.length;if(dc(l,p,8,f,d,e,i,p[4][0],p[4][1],p[0][0],p[0][1]),h===l.length)return}var g=mc(t,a,p);qs(t,"onClip",Xs(t,n,{clipEventType:"added",clipType:u,poses:p,clipStyles:g,clipStyle:u+"("+g.join(c)+")",distX:0,distY:0}))}(t,n)),i||r)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Ec={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t){return t.isRequest?"originDraggable"===t.requestAble:Ha(t.inputEvent.target,ls("origin"))},dragControlStart:function(t,n){var r=n.datas;pu(t,n);var e=Xs(t,n,{dragStart:Ol.dragStart(t,(new au).dragStart([0,0],n))}),i=qs(t,"onDragOriginStart",e);return r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],!(r.isDragOrigin=!0)===i?r.isDragOrigin=!1:e},dragControl:function(t,n){var r=n.datas,e=n.isPinch,i=n.isRequest;if(!r.isDragOrigin)return!1;var o,a=vu(n),s=a[0],u=a[1],l=t.state,c=l.width,p=l.height,f=l.offsetMatrix,d=l.targetMatrix,h=l.is3d,g=t.props.originRelative,v=void 0===g||g,m=h?4:3,b=[s,u];!i||((o=n.distOrigin)[0]||o[1])&&(b=o);var x=Vt(r.startOrigin,b),S=Vt(r.startTargetOrigin,b),E=Ut(b,r.prevOrigin),y=Su(f,d,x,m),M=t.getRect(),C=ys(Es(y,c,p,m)),D=[M.left-C.left,M.top-C.top],w=Xs(t,n,{width:c,height:p,origin:x,dist:r.prevOrigin=b,delta:E,transformOrigin:[Js(S[0],c,v),Js(S[1],p,v)].join(" "),drag:Ol.drag(t,ou(n,t.state,D,!!e,!1))});return qs(t,"onDragOrigin",w),w},dragControlEnd:function(t,n){return!!n.datas.isDragOrigin&&(qs(t,"onDragOriginEnd",js(t,n,{})),!0)},dragGroupControlCondition:function(t){return this.dragControlCondition(t)},dragGroupControlStart:function(t,n){return!!this.dragControlStart(t,n)},dragGroupControl:function(t,n){var r=this.dragControl(t,n);return!!r&&(t.transformOrigin=r.transformOrigin,!0)},request:function(t){var n={},r=t.getRect(),e=0,i=0,o=r.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?e=t.x-r.left:"deltaX"in t&&(e+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY)),{datas:n,distX:e,distY:i,distOrigin:a}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function yc(t,n,r,e,i){void 0===e&&(e=[0,0]);var o,a;return pc(!(a=i||((o=window.getComputedStyle(t))&&o.borderRadius||""))||!i&&"0px"===a?[]:Ta(a),n,r,0,0,e)}function Mc(t,n,r,e,i,o){var a=t.state,s=a.width,u=a.height,l=lc(o,i,t.props.roundRelative,s,u),c=l.raws,p=l.styles,f=hc(i,c),d=f.horizontals,h=f.verticals,g=p.join(" ");qs(t,"onRound",Xs(t,n,{horizontals:d,verticals:h,borderRadius:a.borderRadiusState=g,width:s,height:u,delta:e,dist:r}))}var Cc={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,i){var n=t.state,r=n.target,e=n.width,o=n.height,a=n.allMatrix,s=n.is3d,u=n.left,l=n.top,c=n.borderRadiusState,p=t.props,f=p.minRoundControls,d=void 0===f?[0,0]:f,h=p.maxRoundControls,g=void 0===h?[4,4]:h,v=p.zoom;if(!r)return null;var m=s?4:3,b=yc(r,e,o,d,c);if(!b)return null;var x=0,S=0;return b.map(function(t,n){S+=Math.abs(t.horizontal),x+=Math.abs(t.vertical);var r=Ut(Ss(a,t.pos,m),[u,l]),e=t.vertical?x<=g[1]:S<=g[0];return i.createElement("div",{key:"borderRadiusControl"+n,className:ls("control","border-radius"),"data-radius-index":n,style:{display:e?"block":"none",transform:"translate("+r[0]+"px, "+r[1]+"px) scale("+v+")"}})})},dragControlCondition:function(t){if(!t.inputEvent||t.isRequest)return!1;var n=t.inputEvent.target.getAttribute("class")||"";return-1<n.indexOf("border-radius")||-1<n.indexOf("moveable-line")&&-1<n.indexOf("moveable-direction")},dragControlStart:function(t,n){var r=n.inputEvent,e=n.datas,i=r.target,o=i.getAttribute("class")||"",a=-1<o.indexOf("border-radius"),s=-1<o.indexOf("moveable-line")&&-1<o.indexOf("moveable-direction"),u=a?parseInt(i.getAttribute("data-radius-index"),10):-1,l=s?parseInt(i.getAttribute("data-line-index"),10):-1;if(!a&&!s)return!1;if(!1===qs(t,"onRoundStart",Xs(t,n,{})))return!1;e.lineIndex=l,e.controlIndex=u,e.isControl=a,e.isLine=s,pu(t,n);var c=t.props,p=c.roundRelative,f=c.minRoundControls,d=void 0===f?[0,0]:f,h=t.state,g=h.target,v=h.width,m=h.height;e.isRound=!0,e.prevDist=[0,0];var b=yc(g,v,m,d)||[];return e.controlPoses=b,h.borderRadiusState=lc(b.map(function(t){return t.pos}),b,p,v,m).styles.join(" "),!0},dragControl:function(t,n){var r=n.datas;if(!r.isRound||!r.isControl||!r.controlPoses.length)return!1;var e=r.controlIndex,i=r.controlPoses,o=vu(n),a=o[0],s=o[1],u=[a,s],l=Ut(u,r.prevDist),c=t.props.maxRoundControls,p=void 0===c?[4,4]:c,f=t.state,d=f.width,h=f.height,g=i[e],v=g.vertical,m=g.horizontal,b=i.map(function(t,n){var r=t.horizontal,e=t.vertical,i=[r*m*u[0],e*v*u[1]];if(r){if(1===p[0])return i;if(p[0]<4&&r!==m)return i}else{if(0===p[1])return i[1]=e*m*u[0]/d*h,i;if(v){if(1===p[1])return i;if(p[1]<4&&e!==v)return i}}return[0,0]});b[e]=u;var x=i.map(function(t,n){return Vt(t.pos,b[n])});return r.prevDist=[a,s],Mc(t,n,u,l,i,x),!0},dragControlEnd:function(t,n){var r=t.state;r.borderRadiusState="";var e=n.datas,i=n.isDouble;if(!e.isRound)return!1;var o,a,s,u,l,c,p,f,d,h,g,v,m,b,x,S,E,y=r.width,M=r.height,C=e.isControl,D=e.controlIndex,w=e.isLine,R=e.lineIndex,z=e.controlPoses,P=z.map(function(t){return t.pos}),O=P.length,G=t.props.roundClickable;return i&&(void 0===G||G)&&(C?fc(z,P,D,0):w&&(a=(o=cu(t,n))[0],s=o[1],l=P,c=R,p=a,f=s,d=y,h=M,g=hc(u=z),v=g.horizontals,m=g.verticals,b=v.length,x=m.length,E=S=-1,0===c?0===b?S=0:1===b&&(S=1):3===c&&(b<=2?S=2:b<=3&&(S=3)),2===c?0===x?E=0:x<4&&(E=3):1===c&&(x<=1?E=1:x<=2&&(E=2)),dc(u,l,0,S,E,p,f,d,h)),O!==z.length&&Mc(t,n,[0,0],[0,0],z,P),qs(t,"onRoundEnd",js(t,n,{}))),!(r.borderRadiusState="")},unset:function(t){t.state.borderRadiusState=""}},Dc={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},setTransform:function(t,n){var r=t.state,e=r.is3d,i=r.targetMatrix,o=e?"matrix3d("+i.join(",")+")":"matrix("+$t(i,!0)+")";n.datas.startTransforms=[o]},resetTransform:function(t,n){n.datas.nextTransforms=n.datas.startTransforms,n.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,n){return Xs(t,n,{setTransform:function(t){n.datas.startTransforms=za(t)?t:Ta(t)},isPinch:!!n.isPinch})},fillDragParams:function(t,n){return Xs(t,n,{isPinch:!!n.isPinch})},dragStart:function(t,n){this.setTransform(t,n),qs(t,"onBeforeRenderStart",this.fillDragStartParams(t,n))},drag:function(t,n){this.resetTransform(t,n),qs(t,"onBeforeRender",Xs(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){qs(t,"onBeforeRenderEnd",Xs(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){var e=this;this.dragStart(t,n);var r=su(t,"beforeRenderable",n),i=t.moveables,o=r.map(function(t,n){var r=i[n];return e.setTransform(r,t),e.fillDragStartParams(r,t)});qs(t,"onBeforeRenderGroupStart",Xs(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,n){var e=this;this.drag(t,n);var r=su(t,"beforeRenderable",n),i=t.moveables,o=r.map(function(t,n){var r=i[n];return e.resetTransform(r,t),e.fillDragParams(r,t)});qs(t,"onBeforeRenderGroup",Xs(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,n){this.dragEnd(t,n),qs(t,"onBeforeRenderGroupEnd",Xs(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}},wc={name:"Renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragStart:function(t,n){qs(t,"onRenderStart",Xs(t,n,{isPinch:!!n.isPinch}))},drag:function(t,n){qs(t,"onRender",Xs(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){qs(t,"onRenderEnd",Xs(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){qs(t,"onRenderGroupStart",Xs(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroup:function(t,n){qs(t,"onRenderGroup",Xs(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroupEnd:function(t,n){qs(t,"onRenderGroupEnd",Xs(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}};function Rc(e,t,n,r,i,o,a){var s="Start"===i,u=e.state.target,l=o.isRequest;if(!u||s&&-1<r.indexOf("Control")&&!l&&e.areaElement===o.inputEvent.target)return!1;var c=""+n+r+i,p=""+n+r+"Condition",f="End"===i,d=-1<i.indexOf("After"),h=!(!s||e.targetGesto&&e.controlGesto&&e.targetGesto.isFlag()&&e.controlGesto.isFlag());h&&e.updateRect(i,!0,!1),""!==i||d||l||$s(e.state,o);var g,v=-1<r.indexOf("Group"),m=Qa([Dc],e[t].slice(),[wc]);if(l&&(g=o.requestAble,m.some(function(t){return t.name===g})||m.push.apply(m,e.props.ables.filter(function(t){return t.name===g}))),!m.length)return!1;var b=m.filter(function(t){return t[c]}),x=o.datas;h&&b.forEach(function(t){t.unset&&t.unset(e)});var S,E=o.inputEvent;f&&E&&(S=document.elementFromPoint(o.clientX,o.clientY)||E.target);var y=b.filter(function(t){var n=t.name,r=x[n]||(x[n]={});return s&&(r.isEventStart=!t[p]||t[p](o,e)),!!r.isEventStart&&t[c](e,Ja(Ja({},o),{datas:r,originalDatas:x,inputTarget:S}))}),M=y.length,C=s&&b.length&&!M;return(f||C)&&(e.state.gesto=null,e.moveables&&e.moveables.forEach(function(t){t.state.gesto=null})),h&&C&&b.forEach(function(t){t.unset&&t.unset(e)}),!e.isUnmounted&&!C&&((!s&&M&&!a||f)&&(y.some(function(t){return t.updateRect})&&!v?e.updateRect(i,!1,!1):e.updateRect(i,!0,!1),e.forceUpdate()),s||f||d||!M||a||Rc(e,t,n,r,i+"After",o),!0)}function zc(r,t,n){var e=r.controlBox.getElement(),i=[];i.push(e),r.props.dragArea&&!r.props.dragTarget||i.push(t);function o(t){var n=t.inputEvent.target;return n===r.areaElement||!r.isMoveableElement(n)||Ha(n,"moveable-area")||Ha(n,"moveable-padding")}return Pc(r,i,"targetAbles",n,{dragStart:o,pinchStart:o})}function Pc(i,t,o,a,s){void 0===s&&(s={});var n=i.props,r=n.pinchOutside,e=n.pinchThreshold,u={container:window,pinchThreshold:e,pinchOutside:r},l=new rr(t,u);return["drag","pinch"].forEach(function(e){["Start","","End"].forEach(function(r){l.on(""+e+r,function(t){var n=t.eventType;(!s[n]||s[n](t))&&Rc(i,o,e,a,r,t)||t.stop()})})}),l}var Oc=function(){function t(t,n,r){var i=this;this.target=t,this.moveable=n,this.eventName=r,this.ables=[],this.onEvent=function(n){var r=i.eventName,e=i.moveable;i.ables.forEach(function(t){t[r]({inputEvent:n},e)})},this.target.addEventListener(this.eventName.toLowerCase(),this.onEvent)}var n=t.prototype;return n.setAbles=function(t){this.ables=t},n.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this.onEvent),this.target=null,this.moveable=null},t}(),Gc=function(n){function t(){this.constructor=r}var r,e;function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.state=Ja({container:null,target:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]]},Gs(null)),t.enabledAbles=[],t.targetAbles=[],t.controlAbles=[],t.rotation=0,t.scale=[1,1],t.isUnmounted=!1,t.events={mouseEnter:null,mouseLeave:null},t}Ka(r=i,e=n),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t);var o=i.prototype;return o.render=function(){var t=this.props,n=this.state,r=t.edge,e=t.parentPosition,i=t.className,o=t.target,a=t.zoom,s=t.cspNonce,u=t.translateZ,l=t.cssStyled,c=t.portalContainer;this.checkUpdate(),this.updateRenderPoses();var p=e||{left:0,top:0},f=p.left,d=p.top,h=n.left,g=n.top,v=n.target,m=n.direction,b=n.renderPoses,x=t.targets,S=(x&&x.length||o)&&v,E=this.isDragging(),y={},M={createElement:P};return this.getEnabledAbles().forEach(function(t){y["data-able-"+t.name.toLowerCase()]=!0}),P(l,Ja({cspNonce:s,ref:C(this,"controlBox"),className:ls("control-box",-1===m?"reverse":"",E?"dragging":"")+" "+i},y,{portalContainer:c,style:{position:"absolute",display:S?"block":"none",transform:"translate3d("+(h-f)+"px, "+(g-d)+"px, "+u+")","--zoom":a,"--zoompx":a+"px"}}),this.renderAbles(),Bl(M,r?"n":"",b[0],b[1],a,0),Bl(M,r?"e":"",b[1],b[3],a,1),Bl(M,r?"w":"",b[0],b[2],a,2),Bl(M,r?"s":"",b[2],b[3],a,3))},o.componentDidMount=function(){this.controlBox.getElement();var t=this.props,n=t.parentMoveable,r=t.container,e=t.wrapperMoveable;this.updateEvent(t),this.updateNativeEvents(t),r||n||e||this.updateRect("",!1,!0),this.updateCheckInput()},o.componentDidUpdate=function(t){this.updateNativeEvents(t),this.updateEvent(t),this.updateCheckInput()},o.componentWillUnmount=function(){this.isUnmounted=!0,Ys(this,"targetGesto"),Ys(this,"controlGesto");var t=this.events;for(var n in t){var r=t[n];r&&r.destroy()}},o.getContainer=function(){var t=this.props,n=t.parentMoveable,r=t.wrapperMoveable;return t.container||r&&r.getContainer()||n&&n.getContainer()||this.controlBox.getElement().parentElement},o.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(es)},o.dragStart=function(t){return this.targetGesto&&this.targetGesto.triggerDragStart(t),this},o.hitTest=function(t){var n,r,e=this.state,i=e.target,o=e.pos1,a=e.pos2,s=e.pos3,u=e.pos4,l=e.targetClientRect;if(!i)return 0;var c=(r=t instanceof Element?{left:(n=t.getBoundingClientRect()).left,top:n.top,width:n.width,height:n.height}:Ja({width:0,height:0},t)).left,p=r.top,f=r.width,d=r.height,h=Cn([o,a,u,s],l),g=Gn(h,[[c,p],[c+f,p],[c+f,p+d],[c,p+d]]),v=Mn(h);return g&&v?Math.min(100,g/v*100):0},o.isInside=function(t,n){var r=this.state,e=r.target,i=r.pos1,o=r.pos2,a=r.pos3,s=r.pos4,u=r.targetClientRect;return!!e&&wn([t,n],Cn([i,o,s,a],u))},o.updateRect=function(t,n,r){void 0===r&&(r=!0);var e=this.props,i=e.parentMoveable,o=this.state.target||this.props.target,a=this.getContainer(),s=i?i.props.rootContainer:e.rootContainer;this.updateState(Gs(this.controlBox&&this.controlBox.getElement(),o,a,a,s||a),!i&&r)},o.isTargetChanged=function(t,n){var r=this.props,e=r.dragTarget||r.target,i=t.dragTarget||t.target,o=r.dragArea,a=t.dragArea;return!o&&i!==e||(n||o)&&a!==o},o.updateNativeEvents=function(t){var i,o=this,a=this.props.dragArea?this.areaElement:this.state.target,s=this.events,n=function(t){if(Object.keys)return Object.keys(t);var n=[];for(var r in n)n.push(r);return n}(s);if(this.isTargetChanged(t))for(var r in s){var e=s[r];e&&e.destroy(),s[r]=null}a&&(i=this.enabledAbles,n.forEach(function(t){var n=Ws(i,[t]),r=0<n.length,e=s[t];r?(e||(e=new Oc(a,o,t),s[t]=e),e.setAbles(n)):e&&(e.destroy(),s[t]=null)}))},o.updateEvent=function(t){var n=this.controlBox.getElement(),r=this.targetAbles.length,e=this.controlAbles.length,i=this.props,o=i.dragTarget||i.target,a=this.isTargetChanged(t,!0),s=!r&&this.targetGesto||a;s&&(Ys(this,"targetGesto"),this.updateState({gesto:null})),e||Ys(this,"controlGesto"),o&&r&&!this.targetGesto&&(this.targetGesto=zc(this,o,"")),!this.controlGesto&&e&&(this.controlGesto=Pc(this,n,"controlAbles","Control")),s&&this.unsetAbles()},o.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},o.updateTarget=function(t){this.updateRect(t,!0)},o.getRect=function(){var t=this.state,n=ks(this.state),r=n[0],e=n[1],i=n[2],o=n[3],a=ys(n),s=t.width,u=t.height,l=a.width,c=a.height,p=a.left,f=a.top,d=[t.left,t.top],h=Vt(d,t.origin);return{width:l,height:c,left:p,top:f,pos1:r,pos2:e,pos3:i,pos4:o,offsetWidth:s,offsetHeight:u,beforeOrigin:Vt(d,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},o.getManager=function(){return this},o.getRotation=function(){var t,n,r=this.state,e=r.pos1,i=r.pos2,o=r.direction;return t=o,n=_a(e,i)/Math.PI*180,n=0<=(n=0<=t?n:180-n)?n:360+n},o.request=function(n,t,r){void 0===t&&(t={});var e=this.props,i=e.ables,o=e.groupable,a=i.filter(function(t){return t.name===n})[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=a.request(this),l=r||t.isInstant,c=u.isControl?"controlAbles":"targetAbles",p=(o?"Group":"")+(u.isControl?"Control":""),f={request:function(t){return Rc(s,c,"drag",p,"",Ja(Ja({},u.request(t)),{requestAble:n,isRequest:!0}),l),this},requestEnd:function(){return Rc(s,c,"drag",p,"End",Ja(Ja({},u.requestEnd()),{requestAble:n,isRequest:!0}),l),this}};return Rc(s,c,"drag",p,"Start",Ja(Ja({},u.requestStart(t)),{requestAble:n,isRequest:!0}),l),l?f.request(t).requestEnd():f},o.destroy=function(){this.componentWillUnmount()},o.updateRenderPoses=function(){var t=this.state,n=this.props,r=t.originalBeforeOrigin,e=t.transformOrigin,i=t.allMatrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,l=t.pos4,c=t.left,p=t.top,f=n.padding||{},d=f.left,h=void 0===d?0:d,g=f.top,v=void 0===g?0:g,m=f.bottom,b=void 0===m?0:m,x=f.right,S=void 0===x?0:x,E=o?4:3,y=n.groupable?r:Vt(r,[c,p]);t.renderPoses=[Vt(a,Ks(i,[-h,-v],e,y,E)),Vt(s,Ks(i,[S,-v],e,y,E)),Vt(u,Ks(i,[-h,b],e,y,E)),Vt(l,Ks(i,[S,b],e,y,E))]},o.checkUpdate=function(){var t=this.props,n=t.target,r=t.container,e=t.parentMoveable,i=this.state,o=i.target,a=i.container;(o||n)&&(this.updateAbles(),Ls(o,n)&&Ls(a,r)||(this.updateState({target:n,container:r}),e||!r&&!this.controlBox||this.updateRect("End",!1,!1)))},o.triggerEvent=function(t,n){var r=this.props[t];return r&&r(n)},o.useCSS=function(t,n){var r,e,i=this.props.customStyledMap,o=t+n;return i[o]||(i[o]=(r=t,e=ur(n),function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injector=e,t.tag=r,t}return Ua(t,n),t}($a))),i[o]},o.unsetAbles=function(){var n=this;this.targetAbles.filter(function(t){return!!t.unset&&(t.unset(n),!0)}).length&&this.forceUpdate()},o.updateAbles=function(t,n){void 0===t&&(t=this.props.ables),void 0===n&&(n="");var r=this.props,e=r.triggerAblesSimultaneously,i=t.filter(function(t){return t&&(t.always||r[t.name])}),o="drag"+n+"ControlStart",a=Ws(i,["drag"+n+"Start","pinch"+n+"Start"],e),s=Ws(i,[o],e);this.enabledAbles=i,this.targetAbles=a,this.controlAbles=s},o.updateState=function(t,n){if(n)this.setState(t);else{var r=this.state;for(var e in t)r[e]=t[e]}},o.getEnabledAbles=function(){var n=this.props;return n.ables.filter(function(t){return t&&n[t.name]})},o.renderAbles=function(){var i,o,a,s,n=this,t=this.props.triggerAblesSimultaneously,r={createElement:P};return i=Vs(Ws(this.getEnabledAbles(),["render"],t).map(function(t){return(0,t.render)(n,r)||[]})).filter(function(t){return t}),o=function(t){return t.key},a=[],s={},i.forEach(function(t,n){var r=o(t,n,i),e=s[r];e||(e=[],s[r]=e,a.push(e)),e.push(t)}),a.map(function(t){return t[0]})},o.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},i.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{}},i}(Y),Bc={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(o,a){var t=o.props.targets||[];o.moveables=[];var n=o.state,s={left:n.left,top:n.top};return t.map(function(t,n){return a.createElement(Gc,{key:"moveable"+n,ref:(i=n,function(t){t&&(r[e][i]=t)}),target:t,origin:!(e="moveables"),cssStyled:(r=o).props.cssStyled,customStyledMap:o.props.customStyledMap,parentMoveable:o,parentPosition:s});var r,e,i})}};function Tc(t){var n=t.originalDatas.draggable;return n||(t.originalDatas.draggable={},n=t.originalDatas.draggable),Ja(Ja({},t),{datas:n})}var Ac={name:"edgeDraggable",props:{edgeDraggable:Boolean},events:{},dragControlCondition:function(t,n){if(!n.props.edgeDraggable||!t.inputEvent)return!1;var r=t.inputEvent.target;return Ha(r,ls("direction"))&&Ha(r,ls("line"))},dragControlStart:function(t,n){return Ol.dragStart(t,Tc(n))},dragControl:function(t,n){return Ol.drag(t,Tc(n))},dragControlEnd:function(t,n){return Ol.dragEnd(t,Tc(n))},dragGroupControlCondition:function(t,n){if(!n.props.edgeDraggable||!t.inputEvent)return!1;var r=t.inputEvent.target;return Ha(r,ls("direction"))&&Ha(r,ls("line"))},dragGroupControlStart:function(t,n){return Ol.dragGroupStart(t,Tc(n))},dragGroupControl:function(t,n){return Ol.dragGroup(t,Tc(n))},dragGroupControlEnd:function(t,n){return Ol.dragGroupEnd(t,Tc(n))},unset:function(t){t.state.dragInfo=null}},Ic={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},kc=fa,Nc=Gr,Fc=pa,Yc=[Dc,nc,Pl,iu,Ol,Ac,Xl,jl,ql,Ll,tc,rc,Jl,Ec,Sc,Cc,Bc,Ic,{name:"clickable",props:{},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragStart:function(){},dragGroupStart:function(t,n){n.datas.inputTarget=n.inputEvent&&n.inputEvent.target},dragEnd:function(t,n){var r,e=t.state.target,i=n.inputEvent,o=n.inputTarget;i&&o&&!n.isDrag&&!t.isMoveableElement(o)&&(r=e.contains(o),qs(t,"onClick",Xs(t,n,{isDouble:n.isDouble,inputTarget:o,isTarget:e===o,containsTarget:r})))},dragGroupEnd:function(t,n){var r,e,i,o,a=n.inputEvent,s=n.inputTarget;a&&s&&!n.isDrag&&!t.isMoveableElement(s)&&n.datas.inputTarget!==s&&(i=-1<(e=(r=t.props.targets).indexOf(s)),o=!1,-1===e&&(o=-1<(e=Na(r,function(t){return t.contains(s)}))),qs(t,"onClickGroup",Xs(t,n,{isDouble:n.isDouble,targets:r,inputTarget:s,targetIndex:e,isTarget:i,containsTarget:o})))}},Kl,wc].reduce(function(t,n){return Ja(Ja({},t),n.props)},{}),Xc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(function(s){function t(t,n){void 0===n&&(n={});var r=s.call(this)||this;r.tempElement=document.createElement("div");var e=u({container:t||document.body},n),i={};Fc.forEach(function(n){i[("on "+n).replace(/[\s-_]([a-z])/g,function(t,n){return n.toUpperCase()})]=function(t){return r.trigger(n,t)}}),W(P(ba,u({ref:C(r,"innerMoveable"),parentElement:t},e,i)),r.tempElement);var o,a=e.target;return o=a,Array.isArray(o)&&1<a.length&&r.updateRect(),r}i(t,s);var n=t.prototype;return n.setState=function(t,n){this.innerMoveable.setState(t,n)},n.destroy=function(){W(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},function(t,n,r,e){var i,o=arguments.length,a=o<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,r):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,r,e);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(n,r,a):i(n,r))||a);return 3<o&&a&&Object.defineProperty(n,r,a),a}([r(Nc,function(t,e){t[e]||(t[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.getMoveable();if(r&&r[e])return r[e].apply(r,t)})}),r(kc,function(t,r){Object.defineProperty(t,r,{get:function(){return this.getMoveable().props[r]},set:function(t){var n;this.setState(((n={})[r]=t,n))},enumerable:!0,configurable:!0})})],t)}(Yn));var jc={__proto__:null,default:Xc,PROPERTIES:kc,METHODS:Nc,EVENTS:Fc,PROPS_MAP:Yc,getElementInfo:function(t,n,r){return e=n,void 0===(i=r)&&(i=e),Xr(t,e,i,!0);var e,i}};for(var qc in jc)Xc[qc]=jc[qc];return Xc});
//# sourceMappingURL=moveable.min.js.map
