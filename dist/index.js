/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable.git
version: 0.13.5-rc
*/
!function(){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function l(t){return void 0===t}var t=function(){var t=function(){function t(){this._eventHandler={},this.options={}}var e=t.prototype;return e.trigger=function(t,e){void 0===e&&(e={});var n=this._eventHandler[t]||[];if(!(0<n.length))return!0;n=n.concat(),e.eventType=t;var r=!1,i=[e],a=0;e.stop=function(){r=!0},e.currentTarget=this;for(var o=arguments.length,s=new Array(2<o?o-2:0),l=2;l<o;l++)s[l-2]=arguments[l];for(1<=s.length&&(i=i.concat(s)),a=0;n[a];a++)n[a].apply(this,i);return!r},e.once=function(i,a){if("object"==typeof i&&l(a)){var t,e=i;for(t in e)this.once(t,e[t]);return this}if("string"==typeof i&&"function"==typeof a){var o=this;this.on(i,function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];a.apply(o,n),o.off(i,t)})}return this},e.hasOn=function(t){return!!this._eventHandler[t]},e.on=function(t,e){if("object"==typeof t&&l(e)){var n,r=t;for(n in r)this.on(n,r[n]);return this}if("string"==typeof t&&"function"==typeof e){var i=this._eventHandler[t];l(i)&&(this._eventHandler[t]=[],i=this._eventHandler[t]),i.push(e)}return this},e.off=function(t,e){if(l(t))return this._eventHandler={},this;if(l(e)){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var n,r=t;for(n in r)this.off(n,r[n]);return this}var i,a,o=this._eventHandler[t];if(o)for(i=0;void 0!==(a=o[i]);i++)if(a===e){o=o.splice(i,1);break}return this},t}();return t.VERSION="2.1.2",t}();function f(e,n){return function(t){t&&(e[n]=t)}}function a(n,r){return function(t){var e=t.prototype;n.forEach(function(t){r(e,t)})}}var b=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,i=n.indexOf(t),a=-1===i?n.length:i;n[a]=t,r[a]=e},t}(),y=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),_="function"==typeof Map,o=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var x=function(){function t(t,e,n,r,i,a,o,s){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=i,this.maintained=a,this.changedBeforeAdded=o,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,n){var s=[],l=[];return t.forEach(function(t){var e=t[0],n=t[1],r=new o;s[e]=r,l[n]=r}),s.forEach(function(t,e){t.connect(s[e-1])}),t.filter(function(t,e){return!n[e]}).map(function(t,e){var n=t[0],r=t[1];if(n===r)return[0,0];var i=s[n],a=l[r-1],o=i.getIndex();return i.disconnect(),a?i.connect(a,a.next):i.connect(void 0,s[0]),[o,i.getIndex()]})}(this.changedBeforeAdded,this.fixed),s=this.changed,l=[];this.cacheOrdered=t.filter(function(t,e){var n=t[0],r=t[1],i=s[e],a=i[0],o=i[1];if(n!==r)return l.push([a,o]),!0}),this.cachePureChanged=l},t}();function c(t,e,n){var r=_?Map:n?y:b,i=n||function(t){return t},a=[],o=[],s=[],l=t.map(i),u=e.map(i),c=new r,p=new r,f=[],h=[],d={},g=[],v=0,m=0;return l.forEach(function(t,e){c.set(t,e)}),u.forEach(function(t,e){p.set(t,e)}),l.forEach(function(t,e){var n=p.get(t);void 0===n?(++m,o.push(e)):d[n]=m}),u.forEach(function(t,e){var n=c.get(t);void 0===n?(a.push(e),++v):(s.push([n,e]),m=d[e]||0,f.push([n-m,e-v]),h.push(e===n),n!==e&&g.push([n,e]))}),o.reverse(),new x(t,e,a,o,g,s,f,h)}function e(t){if(!P)return"";var e=(P.body||P.documentElement).style,n=O.length;if(typeof e[t]!==D)return t;for(var r=0;r<n;++r){var i="-"+O[r]+"-"+t;if(typeof e[i]!==D)return i}return""}var u=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),n=c(this.list,e,this.findKeyCallback);return this.list=e,n},t}(),p="rgb",h="rgba",d="hsl",g="hsla",v=[p,h,d,g],m="function",w="property",E="array",S="object",C="string",M="number",D="undefined",P=typeof document!==D&&document,O=["webkit","ms","moz","o"],k=e("transform"),R=e("filter"),z=e("animation");function W(t){return typeof t===D}function L(t){return t&&typeof t===S}function V(t){return Array.isArray(t)}function G(t){return typeof t===C}function A(t){var e=t.match(/("[^"]*"|'[^']*'|[^,\s()]*\((?:[^()]*|\([^()]*\))*\)[^,\s()]*|[^,])+/g);return e?e.map(function(t){return t.trim()}):[]}function q(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function N(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}function j(t){var e=function(t){return t.replace("#","")}(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),a=parseInt(e.substring(6,8),16)/255;return isNaN(a)&&(a=1),[n,r,i,a]}function T(t){if("#"===t.charAt(0))return 4===t.length||5===t.length?j(function(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),i=t.charAt(4);return["#",e,e,n,n,r,r,i,i].join("")}(t)):j(t);if(-1!==t.indexOf("(")){var e=q(t),n=e.prefix,r=e.value;if(!n||!r)return;var i=A(r),a=[],o=i.length;switch(n){case p:case h:for(var s=0;s<o;++s)a[s]=parseFloat(i[s]);return a;case d:case g:for(s=0;s<o;++s)-1!==i[s].indexOf("%")?a[s]=parseFloat(i[s])/100:a[s]=parseFloat(i[s]);return function(t){var e=t[0],n=t[1],r=t[2];e<0&&(e+=360*Math.floor((Math.abs(e)+360)/360)),e%=360;var i,a=(1-Math.abs(2*r-1))*n,o=a*(1-Math.abs(e/60%2-1)),s=r-a/2;return e<60?i=[a,o,0]:e<120?i=[o,a,0]:e<180?i=[0,a,o]:e<240?i=[0,o,a]:e<300?i=[o,0,a]:e<360&&(i=[a,0,o]),[Math.round(255*(i[0]+s)),Math.round(255*(i[1]+s)),Math.round(255*(i[2]+s)),3<t.length?t[3]:1]}(a)}}}function Y(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function X(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function F(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function B(t,e,n,r){t.addEventListener(e,n,r)}function I(t,e,n){t.removeEventListener(e,n)}var H=function(t,e){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function U(t,e){function n(){this.constructor=t}H(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var K=function(){return(K=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function $(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Z(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function J(i,a){var o=Object.keys(i),n=Object.keys(a),t=c(o,n,function(t){return t}),r={},s={},l={};return t.added.forEach(function(t){var e=n[t];r[e]=a[e]}),t.removed.forEach(function(t){var e=o[t];s[e]=i[e]}),t.maintained.forEach(function(t){var e=t[0],n=o[e],r=[i[n],a[n]];i[n]!==a[n]&&(l[n]=r)}),{added:r,removed:s,changed:l}}function Q(t){t.forEach(function(t){t()})}function tt(t){var e=0;return t.map(function(t){return null==t?"$compat"+ ++e:""+t})}function et(t,e){return G(t)?new ot("text_"+t,e,null,{}):new("string"==typeof t.type?st:t.type.prototype.render?ct:ut)(t.type,e,t.ref,t.props)}function nt(t){var e=t.className,n=$(t,["className"]);return null!=e&&(n.class=e),delete n.style,delete n.children,n}function rt(t,e){if(!e)return t;for(var n in e)W(t[n])&&(t[n]=e[n]);return t}function it(t,e){void 0===e&&(e={});for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e.key,a=e.ref,o=$(e,["key","ref"]);return{type:t,key:i,ref:a,props:K(K({},o),{children:function e(t){var n=[];return t.forEach(function(t){n=n.concat(V(t)?e(t):t)}),n}(n).filter(function(t){return null!=t})})}}var at=function(){function t(t,e,n,r){void 0===r&&(r={}),this.type=t,this.key=e,this.ref=n,this.props=r,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,r){if(this.base&&!G(e)&&!r&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);var i=this.props;return G(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?i:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();var ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}U(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_"))),t.push(function(){n?e._mounted():e._updated()}),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(at),st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}U(e,t);var n=e.prototype;return n._should=function(t){return Z(this.props,t)},n._render=function(t,e){var n=this,r=!this.base;r&&(this.base=document.createElement(this.type)),dt(this.props.children,this._providers,t,null,this.base);var i=this.base;return function(t,e,n){var r=J(t,e),i=r.added,a=r.removed,o=r.changed;for(var s in i)n.setAttribute(s,i[s]);for(var s in o)n.setAttribute(s,o[s][1]);for(var s in a)n.removeAttribute(s)}(nt(e),nt(this.props),i),function(t,e,n){var r=n.style,i=J(t,e),a=i.added,o=i.removed,s=i.changed;for(var l in a)r[l]=a[l];for(var l in s)r[l]=s[l][1];for(var l in o)r[l]=""}(e.style||{},this.props.style||{},i),t.push(function(){r?n._mounted():n._updated()}),!0},n._unmount=function(){this._providers.forEach(function(t){t._unmount()}),this.base.parentNode.removeChild(this.base)},e}(at);function lt(t){if(!t)return null;if(t instanceof Node)return t;var e=t._provider._providers;return e.length?lt(e[0].base):null}var ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}U(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return dt(e?[e]:[],this._providers,t),!0},n._unmount=function(){this._providers.forEach(function(t){t._unmount()})},e}(at),ct=function(i){function t(t,e,n,r){return void 0===r&&(r={}),i.call(this,t,e,n,rt(r,t.defaultProps))||this}U(t,i);var e=t.prototype;return e._should=function(t,e){return this.base.shouldComponentUpdate(rt(t,this.type.defaultProps),e||this.base.state)},e._render=function(t,e,n){var r=this;this.props=rt(this.props,this.type.defaultProps);var i=!this.base;i?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var a=this.base,o=a.state,s=a.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),dt(s?[s]:[],this._providers,t,n,null),t.push(function(){i?(r._mounted(),a.componentDidMount()):(r._updated(),a.componentDidUpdate(e,o))})},e._setState=function(t){t&&(this.base.state=t)},e._unmount=function(){this._providers.forEach(function(t){t._unmount()}),this.base.componentWillUnmount()},t}(at),pt=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var r=[],i=this._provider;dt([i.original],[i],r,K(K({},this.state),t),null,n)&&(e&&r.push(e),Q(r))},e.forceUpdate=function(t){this.setState(this.state,t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},t}(),ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return U(e,t),e.prototype.shouldComponentUpdate=function(t,e){return Z(this.props,t)||Z(this.state,e)},e}(pt),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}U(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.element,n=t.container;this._portalProvider=gt(e,n)},n.componentDidUpdate=function(){var t=this.props,e=t.element,n=t.container;this._portalProvider=gt(e,n)},n.componentWillUnmount=function(){var t=this.props.container;gt(this._portalProvider=null,t)},e}(ft);function dt(i,o,r,a,s,l){var t=tt(o.map(function(t){return t.key})),u=tt(i.map(function(t){return G(t)?null:t.key})),e=c(t,u,function(t){return t});e.removed.forEach(function(t){o.splice(t,1)[0]._unmount()}),e.ordered.forEach(function(t){var e=t[0],n=t[1],r=o.splice(e,1)[0];o.splice(n,0,r);var i=lt(r.base),a=lt(o[n+1]&&o[n+1].base);i&&i.parentNode.insertBefore(i,a)}),e.added.forEach(function(t){o.splice(t,0,et(i[t],u[t]))}),e.maintained.forEach(function(t){t[0];var e=t[1],n=i[e],r=o[e];(G(n)?"text_"+n:n.type)!==r.type&&(r._unmount(),o.splice(e,1,et(n,u[e])))});var n=o.filter(function(t,e){var n=i[e];return t._update(r,n,a,l)});return s&&e.added.forEach(function(t){var e=lt(o[t].base);if(e){var n=o[t+1];if(s!==e&&!e.parentNode){var r=lt(n&&n.base);s.insertBefore(e,r&&r.parentNode?r:null)}}}),0<n.length}function gt(t,e,n){void 0===n&&(n=e.__REACT_COMPAT__);var r=n?[n]:[];return function(t,e,n,r){var i=[];dt(t,e,i,n,r),Q(i)}(t?[t]:[],r,null,e),n=r[0],e.__REACT_COMPAT__=n}function vt(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),gt(t,e,r),n&&n()}function mt(t,e){return it(ht,{element:t,container:e})}var bt={__proto__:null,Component:pt,ComponentProvider:ct,ElementProvider:st,FunctionProvider:ut,Provider:at,PureComponent:ft,TextProvider:ot,createElement:it,createPortal:mt,findDOMNode:lt,render:vt,renderProvider:gt,renderProviders:dt};function yt(e,n){return function(t){t&&(e[n]=t)}}var _t=("undefined"!=typeof window&&window||{}).navigator,xt={browser:[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Whale/,identity:"Whale",versionSearch:"Whale"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/MiuiBrowser/,identity:"MIUI Browser",versionSearch:"MiuiBrowser"},{criteria:/SamsungBrowser/,identity:"Samsung Internet",versionSearch:"SamsungBrowser"},{criteria:/SAMSUNG /,identity:"Samsung Internet",versionSearch:"Version"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"Android Browser",versionSearch:"Version"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],os:[{criteria:/Windows Phone/,identity:"Windows Phone",versionSearch:"Windows Phone"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/Windows NT/,identity:"Window",versionSearch:"Windows NT"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"},{criteria:/Tizen/,identity:"Tizen"},{criteria:/Web0S/,identity:"WebOS"}],webview:[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],defaultString:{browser:{version:"-1",name:"unknown"},os:{version:"-1",name:"unknown"}}};function wt(t,e){for(var n=[],r=0;r<t.length;r++)e(t[r])&&n.push(t[r]);return n}var Et=void 0;function St(t,e){return e&&e.test?!!e.test(t):-1<t.indexOf(e)}function Ct(t,e){var n=wt(t,function(t){return St(Et,t.criteria)})[0];return n&&n.identity||e.name}function Mt(t,r){return wt(t,function(t){var e=t.criteria,n=new RegExp(t.identity,"i").test(r);return!!(e?n&&St(Et,e):n)})[0]}function Dt(t,e){var n=xt.defaultString.browser.version,r=new RegExp("("+t+")","i").exec(e);if(!r)return n;var i=r.index,a=r[0];if(-1<i){var o=i+a.length+1;n=e.substring(o).split(" ")[0].replace(/_/g,".").replace(/;|\)/g,"")}return n}function Pt(t){if(t)return Dt(function(t){var e=Mt(xt.browser,t);return e=e||{criteria:t,versionSearch:t,identity:t}}(t).versionSearch||t,Et)}function Ot(){var t=xt.webview,e=void 0;return function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(wt(t,function(t){return St(Et,t.criteria)}),function(t){return e=Dt(t.browserVersionSearch,Et),!(!St(Et,t.webviewToken)&&!St(e,t.webviewBrowserVersion))})}function kt(t){var e=function(t){return Mt(xt.os,t)}(t)||{},n=xt.defaultString.os.version,r=void 0;if(t){if(e.versionAlias)return e.versionAlias;var i=e.versionSearch||t,a=new RegExp("("+i+")\\s([\\d_\\.]+|\\d_0)","i");return a.exec(Et)&&(r=a.exec(Et)[2].replace(/_/g,".").replace(/;|\)/g,"")),r||n}}function Rt(){var t=Ct(xt.os,xt.defaultString.os);return{name:t,version:kt(t)}}function zt(){var t=Ct(xt.browser,xt.defaultString.browser);return{name:t,version:Pt(t),webview:Ot()}}function Gt(){!function(t){Et=t}(0<arguments.length&&void 0!==arguments[0]?arguments[0]:_t.userAgent);var t={os:Rt(),browser:zt(),isMobile:-1!==Et.indexOf("Mobi")};return t.browser.name=t.browser.name.toLowerCase(),t.os.name=t.os.name.toLowerCase(),t.os.version=t.os.version.toLowerCase(),"ios"===t.os.name&&t.browser.webview&&(t.browser.version="-1"),t}function At(t,e,n,r,i,a){for(var o=n;o<r;++o)t[o]+=t[i+o-n]*a,e[o]+=e[i+o-n]*a}function Nt(t,e,n,r,i){for(var a=n;a<r;++a){var o=t[a],s=e[a];t[a]=t[i+a-n],t[i+a-n]=o,e[a]=e[i+a-n],e[i+a-n]=s}}function jt(t,e,n,r,i){for(var a=n;a<r;++a)t[a]/=i,e[a]/=i}function Tt(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Jt(e),i=0;i<e;++i){var a=e*i,o=e*(i+1),s=a+i;if(0===n[s])for(var l=i+1;l<e;++l)if(n[e*l+i]){Nt(n,r,a,o,e*l);break}if(!n[s])return[];jt(n,r,a,o,n[s]);for(l=0;l<e;++l){var u=e*l,c=u+e,p=n[u+i];0!==p&&i!==l&&At(n,r,u,c,a,-p)}}return r}function Yt(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function Xt(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return 0<=i?i:i+2*Math.PI}function Ft(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Bt(t,e,n){if(void 0===e&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=Jt(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)r[a*n+o]=t[a*e+o];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function It(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Jt(e);return t.forEach(function(t){r=Wt(r,t,e)}),r}function Wt(t,e,n){var r=[],i=t.length/n,a=e.length/i;if(!i)return e;if(!a)return t;for(var o=0;o<n;++o)for(var s=0;s<a;++s)for(var l=r[o*a+s]=0;l<i;++l)r[o*a+s]+=t[o*i+l]*e[l*a+s];return r}function Lt(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=[],i=t.length/n,a=e.length/i,o=0;o<n;++o)for(var s=0;s<a;++s)for(var l=r[o+s*a]=0;l<i;++l)r[o+s*a]+=t[o+l*i]*e[l+s*a];return r}function qt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length,r=0,i=n-1;0<=i;--i)r+=t[i];return n?r/n:0}function Ht(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function Ut(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function Kt(t,e,n){void 0===n&&(n=e.length);var r=Wt(t,e,n),i=r[n-1];return r.map(function(t){return t/i})}function Vt(t,e){return Kt(Zt(e,3),Ft(t,3))}function $t(t){return 9===t.length?[t[0],t[3],t[1],t[4],t[2],t[5]]:Yt(t)}function Zt(t,e){var n=Math.cos(t),r=Math.sin(t),i=Jt(e);return i[0]=n,i[1]=-r,i[e]=r,i[e+1]=n,i}function Jt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Qt(t,e){for(var n=Jt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function te(t,e){for(var n=Jt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(i+1)-1]=t[i];return n}function ee(t,e,n,r,i,a,o,s){var l=t[0],u=t[1],c=e[0],p=e[1],f=n[0],h=n[1],d=r[0],g=r[1],v=i[0],m=i[1],b=a[0],y=a[1],_=o[0],x=o[1],w=s[0],E=s[1],S=Tt([l,u,1,0,0,0,-v*l,-v*u,0,0,0,l,u,1,-m*l,-m*u,c,p,1,0,0,0,-b*c,-b*p,0,0,0,c,p,1,-y*c,-y*p,f,h,1,0,0,0,-_*f,-_*h,0,0,0,f,h,1,-x*f,-x*h,d,g,1,0,0,0,-w*d,-w*g,0,0,0,d,g,1,-E*d,-E*g],8);if(!S.length)return[];var C=Wt(S,[v,m,b,y,_,x,w,E],8);return C[8]=1,Bt(C,3,4)}Gt.VERSION="2.1.5";var ne=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function re(i){var a,o="rCS"+function(t){return ne(t).toString(36)}(i),s=0;return{className:o,inject:function(t){var e,n=function(t){if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(t),r=0===s;return(n||r)&&(e=function(n,t,e){var r=document.createElement("style");return r.setAttribute("type","text/css"),r.innerHTML=t.replace(/([^}{]*){/gm,function(t,e){return A(e).map(function(t){return-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?""+t.replace(/\:host/g,"."+n):"."+n+" "+t}).join(", ")+"{"}),(e||document.head||document.body).appendChild(r),r}(o,i,n)),r&&(a=e),n||++s,{destroy:function(){n?(t.removeChild(e),e=null):(0<s&&--s,0===s&&a&&(a.parentNode.removeChild(a),a=null))}}}}}var ie=function(t,e){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var ae=function(){return(ae=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var oe=function(){return(oe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function se(t,e,n,r){var i=de(t),a=de(e),o=de(r);return ue(ge(r[0],ve(i,o)),ge(r[0],ve(a,o)),n[0])}function le(t){return t.touches?fe(t.touches):[he(t)]}function ue(t,e,n){var r=t.clientX,i=t.clientY;return{clientX:r,clientY:i,deltaX:r-e.clientX,deltaY:i-e.clientY,distX:r-n.clientX,distY:i-n.clientY}}function ce(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function pe(t,n,r){return t.map(function(t,e){return ue(t,n[e],r[e])})}function fe(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(he(t[r]));return n}function he(t){return{clientX:t.clientX,clientY:t.clientY}}function de(t){return{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function ge(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function ve(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var me=function(){function t(t,e){var s=this;void 0===e&&(e={}),this.el=t,this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.onDragStart=function(t){if(s.flag||!1!==t.cancelable){if(function(t){return t.touches&&2<=t.touches.length}(t)){if(!s.flag&&t.touches.length!==t.changedTouches.length)return;s.pinchFlag||s.onPinchStart(t)}if(!s.flag){var e=s.startClients[0]?s.startClients:le(t);s.customDist=[0,0],s.flag=!0,s.isDrag=!1,s.startClients=e,s.prevClients=e,s.datas={};var n=ue(e[s.movement=0],s.prevClients[0],s.startClients[0]),r=s.options,i=r.dragstart,a=r.preventRightClick,o=r.preventDefault;(a&&3===t.which||!1===(i&&i(oe({datas:s.datas,inputEvent:t},n))))&&(s.startClients=[],s.prevClients=[],s.flag=!1),s.flag&&o&&t.preventDefault()}}},this.onDrag=function(t,e){if(s.flag){var n=le(t);s.pinchFlag&&s.onPinch(t,n);var r=s.move([0,0],t,n);if(r&&(r.deltaX||r.deltaY)){var i=s.options.drag;i&&i(oe({},r,{isScroll:!!e,inputEvent:t}))}}},this.onDragEnd=function(t){if(s.flag){s.pinchFlag&&s.onPinchEnd(t),s.flag=!1;var e=s.options.dragend,n=s.prevClients,r=s.startClients,i=s.pinchFlag?se(n,n,r,s.startPinchClients):ue(n[0],n[0],r[0]);s.startClients=[],s.prevClients=[],e&&e(oe({datas:s.datas,isDrag:s.isDrag,inputEvent:t},i))}},this.options=oe({container:t,preventRightClick:!0,preventDefault:!0,pinchThreshold:0,events:["touch","mouse"]},e);var n=this.options,r=n.container,i=n.events;if(this.isTouch=-1<i.indexOf("touch"),this.isMouse=-1<i.indexOf("mouse"),this.customDist=[0,0],this.isMouse&&(B(t,"mousedown",this.onDragStart),B(r,"mousemove",this.onDrag),B(r,"mouseup",this.onDragEnd)),this.isTouch){var a={passive:!1};B(t,"touchstart",this.onDragStart,a),B(r,"touchmove",this.onDrag,a),B(r,"touchend",this.onDragEnd,a)}}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isFlag=function(){return this.flag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(e,n,t,r){void 0===r&&(r=!0),this.flag&&(this.startClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),this.prevClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),r&&this.onDrag(t,!0))},e.move=function(t,e,n){var r=t[0],i=t[1];void 0===n&&(n=this.prevClients);var a=this.customDist,o=this.prevClients,s=this.startClients,l=this.pinchFlag?se(n,o,s,this.startPinchClients):ue(n[0],o[0],s[0]);a[0]+=r,a[1]+=i,l.deltaX+=r,l.deltaY+=i;var u=l.deltaX,c=l.deltaY;return l.distX+=a[0],l.distY+=a[1],this.movement+=Math.sqrt(u*u+c*c),this.prevClients=n,this.isDrag=!0,oe({datas:this.datas},l,{isScroll:!1,inputEvent:e})},e.onPinchStart=function(t){var e,n,r=this.options,i=r.pinchstart,a=r.pinchThreshold;if(!(this.isDrag&&this.movement>a)){var o=fe(t.changedTouches);if(this.pinchFlag=!0,(e=this.startClients).push.apply(e,o),(n=this.prevClients).push.apply(n,o),this.startDistance=ce(this.prevClients),this.startPinchClients=this.prevClients.slice(),i){var s=this.prevClients,l=de(s),u=ue(l,l,l);i(oe({datas:this.datas,touches:pe(s,s,s)},u,{inputEvent:t}))}}},e.onPinch=function(t,e){if(this.flag&&this.pinchFlag){this.isPinch=!0;var n=this.options.pinch;if(n){var r=this.prevClients,i=this.startClients,a=ue(de(e),de(r),de(i)),o=ce(e);n(oe({datas:this.datas,touches:pe(e,r,i),scale:o/this.startDistance,distance:o},a,{inputEvent:t}))}}},e.onPinchEnd=function(t){if(this.flag&&this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.options.pinchend;if(n){var r=this.prevClients,i=this.startClients,a=ue(de(r),de(r),de(i));n(oe({datas:this.datas,isPinch:e,touches:pe(r,r,i)},a,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}}},e.unset=function(){var t=this.el,e=this.options.container;this.isMouse&&(I(t,"mousedown",this.onDragStart),I(e,"mousemove",this.onDrag),I(e,"mouseup",this.onDragEnd)),this.isTouch&&(I(t,"touchstart",this.onDragStart),I(e,"touchmove",this.onDrag),I(e,"touchend",this.onDragEnd))},t}(),be=function(t,e){return(be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var ye,_e="function"==typeof Map?void 0:(ye=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++ye)}),xe=function(e){function t(t){return void 0===t&&(t=[]),e.call(this,t,_e)||this}return function(t,e){function n(){this.constructor=t}be(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(t,e),t}(u),we=function(t,e){return(we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ee(t,e){function n(){this.constructor=t}we(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Se=function(){return(Se=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ce(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+e+'deg);transform-origin: 16px 16px"></path></svg>'}var Me,De=Gt(),Pe=-1<De.os.name.indexOf("ios")||-1<De.browser.name.indexOf("safari"),Oe="moveable-",ke=(Me=Oe,("\n{\n\tposition: fixed;\n\twidth: 0;\n\theight: 0;\n\tleft: 0;\n\ttop: 0;\n\tz-index: 3000;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n\ttop: 0;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    z-index: 10;\n    will-change: transform;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tbackground: #4af;\n\ttransform-origin: 0px 0.5px;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n}\n.line.rotation-line {\n\theight: 40px;\n\twidth: 1px;\n\ttransform-origin: 0.5px 39.5px;\n}\n.line.rotation-line .control {\n\tborder-color: #4af;\n\tbackground:#fff;\n\tcursor: alias;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n\tmargin-left: -6px;\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+function(t){var e=Ce(1,t),n=Ce(2,t),r=45*Math.round(t/45)%180,i=135==r?"nwse-resize":45==r?"nesw-resize":90==r?"ew-resize":"ns-resize";return"cursor:"+i+";cursor: url('"+e+"') 16 16, "+i+";cursor: -webkit-image-set(url('"+e+"') 1x, url('"+n+"') 2x) 16 16, "+i+";"}(t)+"\n}\n"}).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n"+(Pe?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n").replace(/([^}{]*){/gm,function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,"."+Me+"$1")+"{"})),Re=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],ze=1e-7,Ge=Math.pow(10,10),Ae=-Ge,Ne={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},je={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135};function Te(t,e){return[t[0]*e[0],t[1]*e[1]]}function Ye(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map(function(t){return t.split(" ").map(function(t){return t?""+e+t:""}).join(" ")}).join(" ")}.apply(void 0,[Oe].concat(t))}function Xe(){return Jt(3)}function Fe(t,e,n){return It(e,te(n,e),t,te(n.map(function(t){return-t}),e))}function Be(a){return Ie(gn(a,":before")).map(function(t,e){var n=N(t),r=n.value,i=n.unit;return r*function(t,e,n){return"%"!==e?1:t.ownerSVGElement.viewBox.baseVal[n?"width":"height"]/100}(a,i,0===e)})}function Ie(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function We(t,e,n){for(var r=document.body,i=!t||n?t:t.parentElement,a=!1,o="relative";i&&i!==r;){e===i&&(a=!0);var s=gn(i),l=s.transform;if("static"!==(o=s.position)||l&&"none"!==l)break;i=i.parentElement,o="relative"}return{isStatic:"static"===o,isEnd:a||!i||i===r,offsetParent:i||r}}function Le(t,e,n,r){var i,a,o,s,l,u=t,c=[],p="svg"!==u.tagName.toLowerCase()&&"ownerSVGElement"in u,f=e||document.body,h=!1,d=!1,g=3,v=We(e,e,!0).offsetParent;for(n&&(e=t.parentElement);u&&!h;){var m=gn(u),b=u.tagName.toLowerCase(),y=m.position,_="fixed"===y,x=m.transform,w=6===(s=(l=x)&&"none"!==l?L(l)?l:q(l).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0]).length?[s[0],s[2],s[4],s[1],s[3],s[5],0,0,1]:Yt(s);if(!d&&16===w.length){d=!0,g=4;for(var E=c.length,S=0;S<E;++S)c[S]=Bt(c[S],3,4)}d&&9===w.length&&(w=Bt(w,3,4));var C=u.offsetLeft,M=u.offsetTop;if(_){var D=(e||document.documentElement).getBoundingClientRect();C-=D.left,M-=D.top}var P=W(C),O=P,k=void 0;O&&"svg"!==b?(k=Pe?Be(u):Ie(m).map(function(t){return parseFloat(t)}),O=!1,"g"===b?M=C=0:(C=(i=He(u,k))[0],M=i[1],k[0]=i[2],k[1]=i[3])):k=Ie(m).map(function(t){return parseFloat(t)}),"svg"===b&&o&&c.push(qe(u,g),Jt(g));var R=We(u,e),z=R.offsetParent,G=R.isEnd,A=R.isStatic;Pe&&!O&&!P&&A&&"relative"===y&&(C-=z.offsetLeft,M-=z.offsetTop,h=h||G);var N=0,j=0;if(O||v===z||(N=z.clientLeft,j=z.clientTop),c.push(Fe(w,g,k),te([O?u:C-u.scrollLeft+N,O?k:M-u.scrollTop+j],g)),o=o||w,a=a||k,h||_)break;u=z,h=G}var T=n?Bt(n,r,g):Jt(g),Y=n?Bt(n,r,g):Jt(g),X=Jt(g),F=c.length,B=We(f,f,!0).offsetParent;c.reverse(),c.forEach(function(t,e){var n;F-2===e&&(Y=T.slice()),F-1===e&&(X=T.slice()),L(t[g-1])&&(n=function(t,e,n,r,i,a){var o,s=tn(t),l=s[0],u=s[1],c=e.getBoundingClientRect(),p=t.getBoundingClientRect(),f=p.left-c.left+e.scrollLeft,h=p.top-c.top+e.scrollTop,d=p.width,g=p.height,v=It(n,i,a),m=$e(v,l,u,n),b=m.left,y=m.top,_=m.width,x=m.height,w=Ue(v,r,n),E=Ut(w,[b,y]),S=[f+E[0]*d/_,h+E[1]*g/x],C=[0,0],M=0;for(;++M<10;){var D=Tt(i,n);o=Ut(Ue(D,S,n),Ue(D,w,n)),C[0]=o[0],C[1]=o[1];var P=$e(It(n,i,te(C,n),a),l,u,n),O=P.left,k=P.top,R=O-f,z=k-h;if(Math.abs(R)<2&&Math.abs(z)<2)break;S[0]-=R,S[1]-=z}return C.map(function(t){return Math.round(t)})}(t[g-1],B,g,t[2*g-1],T,c[e+1]),t[g-1]=n[0],t[2*g-1]=n[1]),T=Wt(T,t,g)});var I=(!p&&d?"matrix3d":"matrix")+"("+$t(p&&16===o.length?Bt(o,4,3):o)+")";return[Y,X,T,o,I,a,d]}function qe(t,e){var n=t.clientWidth,r=t.clientHeight,i=t.viewBox.baseVal,a=i.width||n,o=i.height||r,s=n/a,l=r/o,u=t.preserveAspectRatio.baseVal,c=u.align,p=u.meetOrSlice,f=[0,0],h=[s,l],d=[0,0];if(1!==c){var g=(c-2)%3,v=Math.floor((c-2)/3);f[0]=a*g/2,f[1]=o*v/2;var m=2===p?Math.max(l,s):Math.min(s,l);h[0]=m,h[1]=m,d[0]=(n-a)/2*g,d[1]=(r-o)/2*v}var b=Qt(h,e);return b[e-1]=d[0],b[2*e-1]=d[1],Fe(b,e,f)}function He(t,e){if(!t.getBBox)return[0,0];var n=t.getBBox(),r=t.ownerSVGElement.viewBox.baseVal,i=n.x-r.x,a=n.y-r.y;return[i,a,e[0]-i,e[1]-a]}function Ue(t,e,n){return Kt(t,Ft(e,n),n)}function Ke(t,e,n,r){return[Ue(t,[0,0],r),Ue(t,[e,0],r),Ue(t,[0,n],r),Ue(t,[e,n],r)]}function Ve(t){var e=t.map(function(t){return t[0]}),n=t.map(function(t){return t[1]}),r=Math.min.apply(Math,e),i=Math.min.apply(Math,n),a=Math.max.apply(Math,e),o=Math.max.apply(Math,n);return{left:r,top:i,right:a,bottom:o,width:a-r,height:o-i}}function $e(t,e,n,r){return Ve(Ke(t,e,n,r))}function Ze(t,e,n,r){var i=16===t.length?4:3,a=Ke(t,n,r,i),o=a[0],s=o[0],l=o[1],u=a[1],c=u[0],p=u[1],f=a[2],h=f[0],d=f[1],g=a[3],v=g[0],m=g[1],b=Ue(t,e,i),y=b[0],_=b[1],x=Math.min(s,c,h,v),w=Math.min(l,p,d,m),E=Math.max(s,c,h,v),S=Math.max(l,p,d,m);y=y-x||0,_=_-w||0;var C=[((s=s-x||0)+(c=c-x||0)+(h=h-x||0)+(v=v-x||0))/4,((l=l-w||0)+(p=p-w||0)+(d=d-w||0)+(m=m-w||0))/4],M=Xt(C,[s,l]),D=Xt(C,[c,p]);return[[x,w,E,S],[y,_],[s,l],[c,p],[h,d],[v,m],M<D&&D-M<Math.PI||D<M&&D-M<-Math.PI?1:-1]}function Je(t,e,n){void 0===n&&(n=Xt(t,e));var r=e[0]-t[0],i=e[1]-t[1],a=Math.sqrt(r*r+i*i);return{transform:"translate("+t[0]+"px, "+t[1]+"px) rotate("+n+"rad)",width:a+"px"}}function Qe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e.length;return{transform:"translate("+e.reduce(function(t,e){return t+e[0]},0)/r+"px, "+e.reduce(function(t,e){return t+e[1]},0)/r+"px) rotate("+t+"rad)"}}function tn(t,e,n,r){void 0===e&&(e=window.getComputedStyle(t)),void 0===r&&(r=n||"border-box"===e.boxSizing);var i=t.offsetWidth,a=t.offsetHeight,o=!W(i);if((n||r)&&o)return[i,a];if(i=t.clientWidth,a=t.clientHeight,o||i||a)return n||r?[i+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0),a+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)]:[i-(parseFloat(e.paddingLeft)||0)-(parseFloat(e.paddingRight)||0),a-(parseFloat(e.paddingTop)||0)-(parseFloat(e.paddingBottom)||0)];var s=t.getBBox();return[s.width,s.height]}function en(t,e){return Xt(0<e?t[0]:t[1],0<e?t[1]:t[0])}function nn(t,e,n,r){var i,a,o,s,l,u=0,c=0,p=0,f=0,h=[0,0],d=[0,0],g=[0,0],v=[0,0],m=[0,0],b=Xe(),y=Xe(),_=Xe(),x=Xe(),w=0,E=0,S=[0,0],C=1,M=1,D=!1,P="",O=[0,0],k={left:0,right:0,top:0,width:0,height:0,bottom:0},R={left:0,right:0,top:0,width:0,height:0,bottom:0},z=0,G=r?r.beforeMatrix:void 0,A=r?r.is3d?4:3:void 0;if(t){if(r)w=r.width,E=r.height;else{var N=gn(t);w=t.offsetWidth,E=t.offsetHeight,W(w)&&(w=(i=tn(t,N,!0))[0],E=i[1])}y=(a=Le(t,e,G,A))[0],b=a[1],_=a[2],x=a[3],P=a[4],S=a[5],D=a[6],u=(s=(o=Ze(_,S,w,E))[0])[0],c=s[1],p=s[2],f=s[3],h=o[1],d=o[2],g=o[3],v=o[4],m=o[5],C=o[6];var j;j=(l=Ze(b,Ht(S,function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e-1;++r)n[r]=t[(r+1)*e-1];return n[e-1]=0,n}(x,D?4:3)),w,E))[0],O=l[1],M=l[6],O=[O[0]+j[0]-u,O[1]+j[1]-c],k=rn(t),R=rn(We(n,n,!0).offsetParent||document.body),z=en([d,g],C)}return{rotation:z,containerRect:R,beforeDirection:M,direction:C,target:t,left:u,top:c,right:p,bottom:f,pos1:d,pos2:g,pos3:v,pos4:m,width:w,height:E,beforeMatrix:y,matrix:_,targetTransform:P,offsetMatrix:b,targetMatrix:x,is3d:D,beforeOrigin:O,origin:h,transformOrigin:S,clientRect:k}}function rn(t){var e=t.getBoundingClientRect(),n=e.left,r=e.width,i=e.top,a=e.bottom;return{left:n,right:e.right,top:i,bottom:a,width:r,height:e.height}}function an(t){if(t){var e=t.getAttribute("data-direction");if(e){var n=[0,0];return-1<e.indexOf("w")&&(n[0]=-1),-1<e.indexOf("e")&&(n[0]=1),-1<e.indexOf("n")&&(n[1]=-1),-1<e.indexOf("s")&&(n[1]=1),n}}}function on(t,e){return[Ht(e,t[0]),Ht(e,t[1]),Ht(e,t[2]),Ht(e,t[3])]}function sn(t){var e=t.left,n=t.top;return on([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function ln(t){return Math.round(t%1==-.5?t-1:t)}function un(t,e){return e?Math.round(t/e)*e:t}function cn(n,r){return n.forEach(function(t,e){n[e]=un(n[e],r)}),n}function pn(t,e){t[e]&&(t[e].unset(),t[e]=null)}function fn(t,e,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function hn(t,e,n){var r=e.datas;return r.datas||(r.datas={}),Se({},n,{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,datas:r.datas})}function dn(t,e,n){return t.triggerEvent(e,n)}function gn(t,e){return window.getComputedStyle(t,e)}function vn(t,n){var r={},i={};return t.filter(function(e){var t=e.name;if(r[t]||!n.some(function(t){return e[t]}))return!1;if(e.ableGroup){if(i[e.ableGroup])return!1;i[e.ableGroup]=!0}return r[t]=!0})}function mn(t,e,n){return t*(e?n:1/n)}function bn(t,e,n){return t*(e?1/n:n)}function yn(t,e){return t===e||null==t&&null==e}function _n(n,t,e,r,i,a){var o="Start"===i;if(o&&-1<r.indexOf("Control")&&n.areaElement===a.inputEvent.target)return!1;var s=""+e+r+i,l=""+e+r+"Condition",u="End"===i,c=-1<i.indexOf("After");o&&n.updateRect(i,!0,!1);var p=-1<r.indexOf("Group"),f=n[t].filter(function(t){return t[s]}),h=f.filter(function(t){var e=o&&t[l];return!(e&&!e(a.inputEvent.target,n))&&t[s](n,a)}),d=h.length;if(o){if(f.length&&!d)return n.state.dragger=null,n.moveables&&n.moveables.forEach(function(t){t.state.dragger=null}),!1;!function(t,e,n){var r=hn(t,n,{isPinch:!!n.isPinch}),i=e?"Group":"";e&&(r.targets=t.props.targets),dn(t,"onRender"+i+"Start",r)}(n,p,a)}else u?function(t,e,n){var r=hn(t,n,{isPinch:!!n.sPinch,isDrag:n.isDrag}),i=e?"Group":"";e&&(r.targets=t.props.targets),dn(t,"onRender"+i+"End",r)}(n,p,a):d&&function(t,e,n){var r=hn(t,n,{isPinch:!!n.isPinch}),i=e?"Group":"";e&&(r.targets=t.props.targets),dn(t,"onRender"+i,r)}(n,p,a);u&&(n.state.dragger=null),!o&&d&&(h.some(function(t){return t.updateRect})&&!p?n.updateRect(i,!1,!1):n.updateRect(i,!0,!1)),(!o&&d||u&&!d)&&n.forceUpdate(),o||u||c||!d||_n(n,t,e,r,i+"After",a)}function xn(r,t,i,a){var o={container:window,pinchThreshold:r.props.pinchThreshold};return["drag","pinch"].forEach(function(n){["Start","","End"].forEach(function(e){o[""+n+e.toLowerCase()]=function(t){return _n(r,i,n,a,e,t)}})}),new me(t,o)}var wn,En,Sn=(wn="div",En=re(ke),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function n(){this.constructor=t}ie(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["className"]);return it(wn,ae({ref:yt(this,"element"),className:n+" "+En.className},r))},e.prototype.componentDidMount=function(){this.injectResult=En.inject(this.element)},e.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.prototype.getElement=function(){return this.element},e}(pt));function Cn(t,e,n,r){var i=Xt(e,n),a=t?un(i/Math.PI*180,15)%180:-1;return it("div",{key:"line"+r,className:Ye("line","direction",t),"data-rotation":a,"data-direction":t,style:Je(e,n,i)})}var Mn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={conatainer:null,target:null,beforeMatrix:Xe(),matrix:Xe(),targetMatrix:Xe(),targetTransform:"",is3d:!1,left:0,top:0,width:0,height:0,transformOrigin:[0,0],direction:1,beforeDirection:1,beforeOrigin:[0,0],origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],clientRect:{left:0,right:0,top:0,width:0,height:0,bottom:0},containerRect:{left:0,right:0,top:0,width:0,height:0,bottom:0},rotation:0},t.targetAbles=[],t.controlAbles=[],t}Ee(t,e);var n=t.prototype;return n.render=function(){var t=this.props,e=t.edge,n=t.parentPosition,r=t.className,i=t.target;this.checkUpdate();var a=n||{left:0,top:0},o=a.left,s=a.top,l=this.state,u=l.left,c=l.top,p=l.pos1,f=l.pos2,h=l.pos3,d=l.pos4,g=l.target,v=l.direction;return it(Sn,{ref:yt(this,"controlBox"),className:Ye("control-box",-1===v?"reverse":"")+" "+r,style:{position:"absolute",display:i&&g?"block":"none",transform:"translate("+(u-o)+"px, "+(c-s)+"px) translateZ(50px)"}},this.renderAbles(),Cn(e?"n":"",p,f,0),Cn(e?"e":"",f,d,1),Cn(e?"w":"",p,h,2),Cn(e?"s":"",h,d,3))},n.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container;this.updateEvent(t),n||e||this.updateRect("End",!1,!0)},n.componentDidUpdate=function(t){this.updateEvent(t)},n.componentWillUnmount=function(){pn(this,"targetDragger"),pn(this,"controlDragger")},n.getContainer=function(){var t=this.props,e=t.parentMoveable;return t.container||e&&e.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(Oe)},n.dragStart=function(t){this.targetDragger&&this.targetDragger.onDragStart(t)},n.isInside=function(t,e){var n=this.state,r=n.pos1,i=n.pos2,a=n.pos3,o=n.pos4,s=n.target;if(!s)return!1;var l=s.getBoundingClientRect();return function(t,e,n,r,i){var a=[fn(t,e,n),fn(t,n,i),fn(t,i,e)],o=[fn(t,n,i),fn(t,i,r),fn(t,r,n)];return!!(a.every(function(t){return 0<=t})||a.every(function(t){return t<=0})||o.every(function(t){return 0<=t})||o.every(function(t){return t<=0}))}([t-l.left,e-l.top],r,i,o,a)},n.updateRect=function(t,e,n){void 0===n&&(n=!0);var r=this.props.parentMoveable,i=this.state,a=i.target||this.props.target,o=this.getContainer();this.updateState(nn(a,o,o,e?i:void 0),!r&&n)},n.updateEvent=function(t){var e=this.controlBox.getElement(),n=this.targetAbles.length,r=this.controlAbles.length,i=this.props.target,a=t.target,o=this.props.dragArea,s=t.dragArea,l=!o&&a!==i,u=!n&&this.targetDragger||l||s!==o;u&&(pn(this,"targetDragger"),this.updateState({dragger:null})),r||pn(this,"controlDragger"),i&&n&&!this.targetDragger&&(this.targetDragger=xn(this,o?this.areaElement:i,"targetAbles","")),!this.controlDragger&&r&&(this.controlDragger=xn(this,e,"controlAbles","Control")),u&&this.unsetAbles()},n.updateTarget=function(t){this.updateRect(t,!0)},n.getRect=function(){var t=this.state,e=sn(this.state),n=e[0],r=e[1],i=e[2],a=e[3],o=Ve(e),s=t.width,l=t.height;return{width:o.width,height:o.height,left:o.left,top:o.top,pos1:n,pos2:r,pos3:i,pos4:a,offsetWidth:s,offsetHeight:l}},n.checkUpdate=function(){var t=this.props,e=t.target,n=t.container,r=t.parentMoveable,i=this.state,a=i.target,o=i.container;(a||e)&&(this.updateAbles(),yn(a,e)&&yn(o,n)||(this.updateState({target:e,container:n}),r||!n&&!this.controlBox||this.updateRect("End",!1,!1)))},n.triggerEvent=function(t,e){var n=this.props[t];return n&&n(e)},n.unsetAbles=function(){var e=this;this.targetAbles.filter(function(t){return!!t.unset&&(t.unset(e),!0)}).length&&this.forceUpdate()},n.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,r=t.filter(function(t){return t&&n[t.name]}),i="drag"+e+"ControlStart",a=vn(r,["drag"+e+"Start","pinch"+e+"Start"]),o=vn(r,[i]);this.targetAbles=a,this.controlAbles=o},n.updateState=function(t,e){if(e)this.setState(t);else{var n=this.state;for(var r in t)n[r]=t[r]}},n.renderAbles=function(){var e=this,n=this.props;return vn(n.ables.filter(function(t){return t&&n[t.name]}),["render"]).map(function(t){return(0,t.render)(e,bt)})},t.defaultProps={target:null,container:null,origin:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,transformOrigin:"",className:""},t}(ft);function Dn(t){return Xt([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}var Pn={name:"pinchable",updateRect:!0,props:{pinchable:Boolean,pinchThreshold:Number},pinchStart:function(n,t){var r=t.datas,i=t.clientX,a=t.clientY,e=t.touches,o=t.inputEvent,s=t.targets,l=n.props,u=l.pinchable,c=l.ables;if(!u)return!1;var p="onPinch"+(s?"Group":"")+"Start",f="drag"+(s?"Group":"")+"ControlStart",h=(!0===u?n.controlAbles:c.filter(function(t){return-1<u.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[f]}),d=hn(n,t,{});s&&(d.targets=s);var g=dn(n,p,d);r.isPinch=!1!==g,r.ables=h;var v=r.isPinch;if(!v)return!1;var m=Dn(e);return h.forEach(function(t){r[t.name+"Datas"]={};var e={datas:r[t.name+"Datas"],clientX:i,clientY:a,inputEvent:o,parentRotate:m,pinchFlag:!0};t[f](n,e)}),n.state.snapDirection=[0,0],v},pinch:function(e,t){var n=t.datas,r=t.clientX,i=t.clientY,a=t.scale,o=t.distance,s=t.touches,l=t.inputEvent,u=t.targets;if(n.isPinch){var c=Dn(s),p=o*(1-1/a),f=hn(e,t,{});u&&(f.targets=u),dn(e,"onPinch"+(u?"Group":""),f);var h=n.ables,d="drag"+(u?"Group":"")+"Control";return h.forEach(function(t){t[d](e,{clientX:r,clientY:i,datas:n[t.name+"Datas"],inputEvent:l,parentDistance:p,parentRotate:c,pinchFlag:!0})}),f}},pinchEnd:function(e,t){var n=t.datas,r=t.clientX,i=t.clientY,a=t.isPinch,o=t.inputEvent,s=t.targets;if(n.isPinch){var l="onPinch"+(s?"Group":"")+"End",u=hn(e,t,{isDrag:a});s&&(u.targets=s),dn(e,l,u);var c=n.ables,p="drag"+(s?"Group":"")+"ControlEnd";return c.forEach(function(t){t[p](e,{clientX:r,clientY:i,isDrag:a,datas:n[t.name+"Datas"],inputEvent:o,pinchFlag:!0})}),a}},pinchGroupStart:function(t,e){return this.pinchStart(t,Se({},e,{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,Se({},e,{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,Se({},e,{targets:t.props.targets}))}};function On(t,a,o,e,s,l){var n=a.name,u=e[n]||(e[n]=[]),c=!!o.match(/End$/g);return t.moveables.map(function(t,e){var n=u[e]||(u[e]={}),r=function(t){return typeof t===m}(s)?s(t,n):s,i=a[o](t,Se({},r,{datas:n,parentFlag:!0}));return i&&l&&l(t,n,i,e),c&&(t.state.dragger=null),i})}function kn(t){return Y(t,Ye("direction"))}function Rn(t,e){var n=e.datas,r=t.state,i=r.matrix,a=r.beforeMatrix,o=r.is3d,s=r.left,l=r.top,u=r.origin,c=r.offsetMatrix,p=r.targetMatrix,f=r.transformOrigin,h=o?4:3;n.is3d=o,n.matrix=i,n.targetMatrix=p,n.beforeMatrix=a,n.offsetMatrix=c,n.transformOrigin=f,n.inverseMatrix=Tt(i,h),n.inverseBeforeMatrix=Tt(a,h),n.absoluteOrigin=Ft(Ht([s,l],u),h),n.startDragBeforeDist=Kt(n.inverseBeforeMatrix,n.absoluteOrigin,h),n.startDragDist=Kt(n.inverseMatrix,n.absoluteOrigin,h)}function zn(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,o=n.inverseMatrix,s=n.is3d,l=n.startDragBeforeDist,u=n.startDragDist,c=s?4:3;return Ut(Kt(e?a:o,Ht(n.absoluteOrigin,[r,i]),c),e?l:u)}function Gn(t){var e=[];return 0<=t[1]&&(0<=t[0]&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(0<=t[0]&&e.push(1),t[0]<=0&&e.push(0)),e}function An(e,t){return Gn(t).map(function(t){return e[t]})}function Nn(t,e){var n=An(t,e);return[qt.apply(void 0,n.map(function(t){return t[0]})),qt.apply(void 0,n.map(function(t){return t[1]}))]}function jn(t,e){var n=t[0],r=t[1],i=t[2];return Nn([t[3],i,r,n],e)}function Tn(t,e){return jn([t[0],t[1],t[2],t[3]],e)}function Yn(t,e,n,r,i,a){var o=jn(Ke(e,n,r,i),a);return[t[0]-o[0],t[1]-o[1]]}function Xn(t,e,n,r){return Wt(t,Fe(e,r,n),r)}function Fn(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d?4:3;return Xn(r,Wt(t.targetMatrix,Qt(e,i),i),n,i)}function Bn(t,e,n,r,i,a){var o=t.props.groupable,s=t.state,l=s.transformOrigin,u=s.targetMatrix,c=s.offsetMatrix,p=s.is3d,f=s.width,h=s.height,d=s.left,g=s.top,v=p?4:3,m=o?d:0,b=o?g:0;return Ut(Yn(i,Xn(c,u,function(t,s,l,u,c,p){return void 0===u&&(u=s),void 0===c&&(c=l),void 0===p&&(p=[0,0]),t?t.map(function(t,e){var n=N(t),r=n.value,i=n.unit,a=e?c:u,o=e?l:s;return"%"===t||isNaN(r)?o*(a?p[e]/a:0):"%"!==i?r:o*r/100}):p}(a,e,n,f,h,l),v),e,n,v,r),[m,b])}function In(t,e){return Tn(sn(t.state),e)}function Wn(t){var e=t.state;if(!e.guidelines||!e.guidelines.length){var n=t.props,r=n.horizontalGuidelines,i=void 0===r?[]:r,a=n.verticalGuidelines,o=void 0===a?[]:a,s=n.elementGuidelines,l=void 0===s?[]:s,u=n.bounds,c=n.snapCenter;if(u||i.length||o.length||l.length){var p=e.containerRect,f=p.top,h=p.left,d=e.clientRect,g=d.top,v=d.left,m=sn(e),b=Math.min.apply(Math,m.map(function(t){return t[0]})),y=Math.min.apply(Math,m.map(function(t){return t[1]})),_=ln(b-(v-h)),x=ln(y-(g-f)),w=[];l.forEach(function(t){var e=t.getBoundingClientRect(),n=e.top,r=e.left,i=e.width,a=e.height,o=n-f,s=o+a,l=r-h,u=l+i;w.push({type:"vertical",element:t,pos:[un(l+_,.1),o],size:a}),w.push({type:"vertical",element:t,pos:[un(u+_,.1),o],size:a}),w.push({type:"horizontal",element:t,pos:[l,un(o+x,.1)],size:i}),w.push({type:"horizontal",element:t,pos:[l,un(s+x,.1)],size:i}),c&&(w.push({type:"vertical",element:t,pos:[un((l+u)/2+_,.1),o],size:a,center:!0}),w.push({type:"horizontal",element:t,pos:[l,un((o+s)/2+x,.1)],size:i,center:!0}))}),e.guidelines=w,e.enableSnap=!0}}}function Ln(t,e,n,r){return{vertical:qn(t,e,!0,r),horizontal:qn(t,n,!1,r)}}function qn(t,e,n,r){void 0===r&&(r=0);var i=t.props.bounds;if(i){var a=i[n?"left":"top"],o=i[n?"right":"bottom"],s=Math.min.apply(Math,e),l=Math.max.apply(Math,e);if(!W(a)&&s<a+r)return{isBound:!0,offset:s-a,pos:a};if(!W(o)&&o-r<l)return{isBound:!0,offset:l-o,pos:o}}return{isBound:!1,offset:0,pos:0}}function Hn(e,o,t,s,l,u){if(!e||!e.length)return{isSnap:!1,posInfos:[]};var i="vertical"===o?0:1,n=t.map(function(r){var t=e.map(function(t){var e=t.pos,n=r-e[i];return{offset:n,dist:Math.abs(n),guideline:t}}).filter(function(t){var e=t.guideline,n=t.dist,r=e.type,i=e.center,a=e.element;return!(!u&&a||!l&&i||r!==o||s<n)}).sort(function(t,e){return t.dist-e.dist});return{pos:r,guidelineInfos:t}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist});return{isSnap:0<n.length,posInfos:n}}function Un(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.verticalGuidelines,o=n.horizontalGuidelines,s=t.state,l=s.guidelines,u=s.enableSnap;return!(!r||!u||e&&!0!==r&&r.indexOf(e))&&!!(i||l&&l.length||a&&a.length||o&&o.length)}function Kn(t,e,n,r,i){var a=t.state,o=a.guidelines,s=a.containerRect,l=s.height,u=s.width,c=t.props,p=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!W(i))return i}return t[n]}(i,c.snapThreshold,5),f=c.snapElement,h=void 0===f||f,d=c.snapHorizontal,g=void 0===d||d,v=c.snapVertical,m=void 0===v||v,b=c.verticalGuidelines,y=c.horizontalGuidelines,_=o.slice();return g&&y&&y.forEach(function(t){_.push({type:"horizontal",pos:[0,un(t,.1)],size:u})}),m&&b&&b.forEach(function(t){_.push({type:"vertical",pos:[un(t,.1),0],size:l})}),{vertical:Hn(_,"vertical",e,p,r,h),horizontal:Hn(_,"horizontal",n,p,r,h)}}function Vn(t,e,n,r){var i=t.props.snapCenter&&n,a=["left","right"],o=["top","bottom"];return i&&(a.push("center"),o.push("middle")),a=a.filter(function(t){return t in e}),o=o.filter(function(t){return t in e}),Kn(t,a.map(function(t){return e[t]}),o.map(function(t){return e[t]}),i,r)}function $n(t,e){var n=Ln(t,[e[0]],[e[1]]),r=n.horizontal,i=r.isBound,a=r.offset,o=n.vertical,s=o.isBound,l=o.offset;if(i||s){var u=void 0,c=(u=i&&s?Math.abs(a)<Math.abs(l):s)?l:a;return{isVertical:u,offset:c,dist:Math.abs(c)}}}function Zn(t,e,n,r,i,a){var o=function(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];Math.abs(i)<ze&&(i=0);Math.abs(a)<ze&&(a=0);if(!i)return r?void 0:[0,n];if(!a)return r?[n,0]:void 0;var o=a/i,s=t[1]-o*t[0];{if(r){var l=o*(e[0]+n)+s;return[n,l-e[1]]}return[(e[1]+n-s)/o-e[0],n]}}(t,e,-n,r);if(!o)return NaN;var s=zn({datas:a,distX:o[0],distY:o[1]}),l=s[0],u=s[1];return i?u:l}function Jn(t,e,n,r,i,a){var o=Ke(t,e,n,a?4:3);return on(o,Ut(r,jn(o,i)))}function Qn(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,o=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:o}}function tr(r,t,i,a,o){var n,s=0,l=-1;if(t.map(function(t){return $n(r,t)}).forEach(function(t,e){t&&(!n||n.dist<t.dist)&&(n=t,l=e)}),n){var e=Zn(i[l],t[l],n.offset,n.isVertical,a,o);isNaN(e)||(s=e)}else t.some(function(t,e){var n=function(t,e,n,r,i){var a,o=Kn(t,[e[0]],[e[1]]),s=o.horizontal,l=o.vertical,u=Math.abs(n[1]-e[1])<ze,c=Math.abs(n[0]-e[0])<ze,p=Qn(s),f=p.isSnap,h=p.dist,d=p.offset,g=Qn(l),v=g.isSnap,m=g.dist,b=g.offset;return f||v?Zn(n,e,(a=f&&v?0===h&&u||(0!==b||!c)&&m<h:v)?b:d,a,r,i):NaN}(r,t,i[e],a,o);return!isNaN(n)&&(s=n,!0)});return s}function er(t,e,n,r,i,a,o,s){var l=jn(sn(t.state),a),u=Jn(e,n,r,l,i,s);return i[0]&&i[1]?function(t,e,n,r,i,a,o,s,l){var u,c=An(e,n),p=[n[0],-1*n[1]],f=[-1*n[0],n[1]],h=Nn(e,p),d=Nn(e,f),g=Ln(t,[c[0][0]],[c[0][1]]),v=g.horizontal,m=v.isBound,b=v.offset,y=g.vertical,_=y.isBound,x=y.offset,w=0,E=0,S=$n(t,h),C=$n(t,d),M=S&&S.dist>Math.abs(x),D=C&&C.dist>Math.abs(b);if(M||D)if(M){var P=Zn(Nn(e,[-1*p[0],p[1]]),h,S.offset,S.isVertical,!1,r);isNaN(P)||(w=P),E=tr(t,[Nn(O=Jn(i,a+n[0]*w,o+n[1]*E,s,n,l),n)],[Nn(O,p)],!0,r)}else{var O;P=Zn(Nn(e,[-1*f[0],f[1]]),h,C.offset,C.isVertical,!0,r);isNaN(P)||(E=P),w=tr(t,[Nn(O=Jn(i,a+n[0]*w,o+n[1]*E,s,n,l),n)],[Nn(O,f)],!1,r)}else{var k=Kn(t,[c[0][0]],[c[0][1]]),R=k.horizontal,z=k.vertical,G=Qn(R).offset,A=Qn(z).offset;w=(u=zn({datas:r,distX:-(_?x:A),distY:-(m?b:G)}))[0],E=u[1]}return[n[0]*w,n[1]*E]}(t,u,i,o,e,n,r,l,s):function(t,e,n,r){var i,a,o=0!==n[0]?0:1,s=0<o,l=e.slice().reverse();t.props.keepRatio?(i=[Nn(e,n)],a=[Nn(l,n)]):(i=An(e,n),a=An(l,n),i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]),a.reverse(),a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var u=tr(t,i,a,s,r),c=[0,0];return c[o]=n[o]*u,c}(t,u,i,o)}function nr(t){var n=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var e=t.guideline;-1<n.indexOf(e)||n.push(e)})}),n}var rr={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object},render:function(t,o){var e=t.state,s=e.top,l=e.left,n=e.pos1,r=e.pos2,i=e.pos3,a=e.pos4,u=e.snapDirection,c=e.clientRect,p=e.containerRect,f=c.left-p.left,h=c.top-p.top,d=Math.min(n[0],r[0],i[0],a[0]),g=Math.min(n[1],r[1],i[1],a[1]);if(!u||!Un(t,""))return[];var v=sn(t.state),m=Ve(v),b=m.width,y=m.height,_=m.top,x=m.left,w=m.bottom,E=m.right,S=function(t,e,n){if(!0===n){var r=Ve(e);return r.middle=(r.top+r.bottom)/2,r.center=(r.left+r.right)/2,Vn(t,r,!0,1)}if(n[0]||n[1]){a=void 0;return t.props.keepRatio?a=[Nn(e,n)]:1<(a=An(e,n)).length&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]),Kn(t,a.map(function(t){return t[0]}),a.map(function(t){return t[1]}),!0,1)}for(var i=[e[0],e[1],e[3],e[2],e[0]],a=[],o=0;o<4;++o)a.push(i[o]),e.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return Kn(t,a.map(function(t){return t[0]}),a.map(function(t){return t[1]}),!0,1)}(t,v,u),C=S.vertical.posInfos,M=S.horizontal.posInfos,D=Ln(t,[x,E],[_,w],1),P=D.vertical,O=P.isBound,k=P.pos,R=D.horizontal,z=R.isBound,G=R.pos,A=C.map(function(t){return t.pos}),N=M.map(function(t){return t.pos}),j=nr(C),T=nr(M);O&&A.indexOf(k)<0&&A.push(k),z&&N.indexOf(G)<0&&N.push(G);var Y=j.filter(function(t){return t.element});return T.filter(function(t){return t.element}).map(function(t,e){var n=t.pos,r=t.size,i=Math.min(0,n[0]-f),a=Math.max(b,n[0]-f+r);return o.createElement("div",{className:Ye("line","horizontal","guideline","dashed"),key:"horizontalLinkGuidline"+e,style:{left:d+i+"px",top:-s+n[1]+"px",width:a-i+"px"}})}).concat(Y.map(function(t,e){var n=t.pos,r=t.size,i=Math.min(0,n[1]-h),a=Math.max(y,n[1]-h+r);return o.createElement("div",{className:Ye("line","vertical","guideline","dashed"),key:"verticalDashedGuidline"+e,style:{top:g+i+"px",left:-l+n[0]+"px",height:a-i+"px"}})}),A.map(function(t,e){return o.createElement("div",{className:Ye("line","vertical","guideline","target","bold"),key:"verticalTargetGuidline"+e,style:{top:g+"px",left:-l+t+"px",height:y+"px"}})}),N.map(function(t,e){return o.createElement("div",{className:Ye("line","horizontal","guideline","target","bold"),key:"horizontalTargetGuidline"+e,style:{top:-s+t+"px",left:d+"px",width:b+"px"}})}),j.map(function(t,e){var n=t.pos,r=t.size,i=t.element;return o.createElement("div",{className:Ye("line","vertical","guideline",i?"bold":""),key:"verticalGuidline"+e,style:{top:g-h+n[1]+"px",left:-l+n[0]+"px",height:r+"px"}})}),T.map(function(t,e){var n=t.pos,r=t.size,i=t.element;return o.createElement("div",{className:Ye("line","horizontal","guideline",i?"bold":""),key:"horizontalGuidline"+e,style:{top:-s+n[1]+"px",left:d-f+n[0]+"px",width:r+"px"}})}))},dragStart:function(t,e){t.state.snapDirection=!0,Wn(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:kn,dragControlStart:function(t,e){t.state.snapDirection=null,Wn(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){t.state.snapDirection=!0,Wn(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t,e){t.state.snapDirection=null,Wn(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapDirection=null}},ir={name:"draggable",props:{draggable:Boolean,throttleDrag:Number},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentDragger,a=t.state,o=a.targetTransform,s=a.target;if(a.dragger)return!1;a.dragger=i||t.targetDragger;var l=window.getComputedStyle(s);n.datas={},n.left=parseFloat(l.left||"")||0,n.top=parseFloat(l.top||"")||0,n.bottom=parseFloat(l.bottom||"")||0,n.right=parseFloat(l.right||"")||0,n.transform=o,n.startTranslate=[0,0],Rn(t,{datas:n}),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,function(t,e){e.absolutePoses=sn(t.state)}(t,n);var u=hn(t,e,{set:function(t){n.startTranslate=t}});return!1!==(r||dn(t,"onDragStart",u))?n.isDrag=!0:(a.dragger=null,n.isPinch=!1),!!n.isDrag&&u},drag:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.distX,o=e.distY,s=n.isPinch,l=n.isDrag,u=n.prevDist,c=n.prevBeforeDist,p=n.transform,f=n.startTranslate;if(l){var h=t.props,d=h.parentMoveable,g=r?0:h.throttleDrag||0,v=!1;if(!s&&!r&&!i){var m=function(t,e,n,r){var i={isSnap:!1,offset:0},a={isSnap:!1,offset:0};if(!Un(t,"draggable"))return[i,a];var o=Ve(on(r.absolutePoses,[e,n])),s=o.left,l=o.right,u=o.top,c=o.bottom,p=Vn(t,{left:s,right:l,top:u,bottom:c,center:(s+l)/2,middle:(u+c)/2},!0),f=Ln(t,[s,l],[u,c]);return f.vertical.isBound?(i.offset=f.vertical.offset,i.isSnap=!0):p.vertical.isSnap&&(i.offset=p.vertical.posInfos[0].guidelineInfos[0].offset,i.isSnap=!0),f.horizontal.isBound?(a.offset=f.horizontal.offset,a.isSnap=!0):p.horizontal.isSnap&&(a.offset=p.horizontal.posInfos[0].guidelineInfos[0].offset,a.isSnap=!0),[i,a]}(t,a,o,n),b=m[0],y=m[1];v=b.isSnap||y.isSnap,a-=b.offset,o-=y.offset}n.passDistX=a,n.passDistY=o;var _=Ht(zn({datas:n,distX:a,distY:o},!0),f),x=Ht(zn({datas:n,distX:a,distY:o},!1),f);v||(cn(x,g),cn(_,g));var w=Ut(_,f),E=Ut(x,f),S=Ut(E,u),C=Ut(w,c);n.prevDist=E,n.prevBeforeDist=w;var M=n.left+w[0],D=n.top+w[1],P=n.right-w[0],O=n.bottom-w[1],k=p+" translate("+E[0]+"px, "+E[1]+"px)";if(r||d||!S.every(function(t){return!t})||!C.some(function(t){return!t})){var R=hn(t,e,{transform:k,dist:E,delta:S,translate:x,beforeDist:w,beforeDelta:C,beforeTranslate:_,left:M,top:D,right:P,bottom:O,isPinch:s});return r||dn(t,"onDrag",R),R}}},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas,i=e.isDrag;if(t.state.dragger=null,r.isDrag)return r.isDrag=!1,n||dn(t,"onDragEnd",hn(t,e,{isDrag:i})),i},dragGroupStart:function(t,e){var n=e.datas,r=this.dragStart(t,e);if(!r)return!1;var i=On(t,this,"dragStart",n,e),a=dn(t,"onDragGroupStart",Se({},r,{targets:t.props.targets,events:i}));return n.isDrag=!1!==a,!!n.isDrag&&r},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,e),i=e.datas,a=i.passDistX,o=i.passDistY,s=On(t,this,"drag",n,Se({},e,{distX:a,distY:o}));if(r){var l=Se({targets:t.props.targets,events:s},r);return dn(t,"onDragGroup",l),l}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag)return this.dragEnd(t,e),On(t,this,"dragEnd",r,e),dn(t,"onDragGroupEnd",hn(t,e,{targets:t.props.targets,isDrag:n})),n}};function ar(t,e,n){return Se({},t.dragger.move(e,n),{parentEvent:!0})}var or=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={}}var e=t.prototype;return e.dragStart=function(t,e){return this.isDrag=!1,this.isFlag=!1,this.datas={},this.move(t,e)},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,r;return this.isFlag?(n=this.prevX+t[0],r=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],r=t[1],this.isFlag=!0),{clientX:this.prevX=n,clientY:this.prevY=r,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas,parentEvent:!0,parentDragger:this}},t}();function sr(t,e,n,r,i){t.startAbsoluteOrigin=[e-i[0]+r[0],n-i[1]+r[1]],t.prevDeg=Xt(t.startAbsoluteOrigin,[e,n])/Math.PI*180,t.startDeg=t.prevDeg,t.loop=0}function lr(t,e,n,r,i){var a=t.prevDeg,o=t.startDeg,s=t.loop;e<a&&270<a&&e<90?++t.loop:a<e&&a<90&&270<e&&--t.loop;var l=t.loop,u=360*s+a-o+r,c=360*l+e-o+r,p=n*((c=un(c,i))-u),f=n*(c-r);return t.prevDeg=c-360*l+o-r,[p,f,c]}function ur(t,e,n,r,i,a){return lr(t,Xt(t.startAbsoluteOrigin,[n,r])/Math.PI*180,e,i,a)}function cr(t,e,n,r,i){return"left"===t?[r,e]:"right"===t?[n,i]:"bottom"===t?[i,r]:[e,n]}function pr(t){return Y(t,Ye("rotation"))}var fr={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},render:function(t,e){var n=t.props,r=n.rotatable,i=n.rotationPosition;if(!r)return null;var a=t.state,o=a.pos1,s=a.pos2,l=a.pos3,u=a.pos4,c=a.direction,p=cr(i,o,s,l,u),f=en(p,c);return e.createElement("div",{key:"rotation",className:Ye("line rotation-line"),style:{transform:"translate("+(p[0][0]+p[1][0])/2+"px, "+(p[0][1]+p[1][1])/2+"px) translateY(-40px) rotate("+f+"rad)"}},e.createElement("div",{className:Ye("control","rotation")}))},dragControlCondition:pr,dragControlStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.parentRotate,o=e.parentFlag,s=e.pinchFlag,l=t.state,u=l.target,c=l.left,p=l.top,f=l.origin,h=l.beforeOrigin,d=l.direction,g=l.beforeDirection,v=l.targetTransform,m=l.pos1,b=l.pos2,y=l.pos3,_=l.pos4;if(!u)return!1;n.transform=v,n.left=c,n.top=p;var x=cr(t.props.rotationPosition,m,b,y,_),w=function(t,e){var n=t[0],r=t[1],i=Vt([0,-40,1],e);return[(n[0]+r[0])/2+i[0],(n[1]+r[1])/2+i[1]]}(x,en(x,d));s||o?(n.beforeInfo={prevDeg:a,startDeg:a,loop:0},n.afterInfo={prevDeg:a,startDeg:a,loop:0}):(n.afterInfo={},n.beforeInfo={},sr(n.afterInfo,r,i,f,w),sr(n.beforeInfo,r,i,h,w)),n.direction=d,n.beforeDirection=g,n.startRotate=0,n.datas={};var E=hn(t,e,{set:function(t){n.startRotate=t}}),S=dn(t,"onRotateStart",E);return n.isRotate=!1!==S,!!n.isRotate&&E},dragControl:function(t,e){var n,r,i,a,o=e.datas,s=e.clientX,l=e.clientY,u=e.parentRotate,c=e.parentFlag,p=e.pinchFlag,f=o.direction,h=o.beforeDirection,d=o.beforeInfo,g=o.afterInfo,v=o.isRotate,m=o.startRotate;if(v){var b,y,_,x,w,E,S=t.props,C=S.throttleRotate,M=void 0===C?0:C,D=S.parentMoveable;if(E=p||c?(b=(n=lr(g,u,f,m,M))[0],y=n[1],_=n[2],x=(r=lr(d,u,f,m,M))[0],w=r[1],r[2]):(b=(i=ur(g,f,s,l,m,M))[0],y=i[1],_=i[2],x=(a=ur(d,h,s,l,m,M))[0],w=a[1],a[2]),b||x||D){var P=hn(t,e,{delta:b,dist:y,rotate:_,beforeDist:w,beforeDelta:x,beforeRotate:E,transform:o.transform+" rotate("+y+"deg)",isPinch:!!p});return dn(t,"onRotate",P),P}}},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isRotate&&(n.isRotate=!1,dn(t,"onRotateEnd",hn(t,e,{isDrag:r})),r)},dragGroupControlCondition:pr,dragGroupControlStart:function(t,e){var n=e.datas,l=e.inputEvent,r=t.state,u=r.left,c=r.top,p=r.beforeOrigin,i=this.dragControlStart(t,e);if(!i)return!1;i.set(t.rotation);var a=On(t,this,"dragControlStart",n,Se({},e,{parentRotate:0}),function(t,e,n){var r=t.state,i=r.left,a=r.top,o=r.beforeOrigin,s=Ht(Ut([i,a],[u,c]),Ut(o,p));e.prevClient=s,n.dragStart=ir.dragStart(t,(new or).dragStart(s,l))}),o=dn(t,"onRotateGroupStart",Se({},i,{targets:t.props.targets,events:a}));return n.isRotate=!1!==o,!!n.isRotate&&i},dragGroupControl:function(e,t){var f=t.inputEvent,n=t.datas;if(n.isRotate){var r=this.dragControl(e,t);if(r){var i=r.beforeDist,h=r.beforeDelta/180*Math.PI,a=On(e,this,"dragControl",n,Se({},t,{parentRotate:i}),function(t,e,n,r){var i=e.prevClient,a=i[0],o=i[1],s=Vt([a,o],h),l=s[0],u=s[1],c=[l-a,u-o];e.prevClient=[l,u];var p=ir.drag(t,ar(t.state,c,f));n.drag=p});e.rotation=r.beforeRotate;var o=Se({targets:e.props.targets,events:a,set:function(t){e.rotation=t}},r);return dn(e,"onRotateGroup",o),o}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate)return this.dragControlEnd(t,e),On(t,this,"dragControlEnd",r,e),dn(t,"onRotateGroupEnd",hn(t,e,{targets:t.props.targets,isDrag:n})),n}};function hr(t,e,r){var n=t.state,i=n.pos1,a=n.pos2,o=n.pos3,s=n.pos4,l=n.rotation,u=t.props.renderDirections,c=void 0===u?e:u,p=[i,a,o,s],f={};return c.forEach(function(t){f[t]=!0}),c.map(function(t){var e=Ne[t];if(!e||!f[t])return null;var n=(un(l/Math.PI*180,15)+je[t])%180;return r.createElement("div",{className:Ye("control","direction",t),"data-rotation":n,"data-direction":t,key:t,style:Qe.apply(void 0,[l].concat(e.map(function(t){return p[t]})))})})}function dr(t,e){return hr(t,["nw","ne","sw","se","n","w","s","e"],e)}function gr(t,e){return hr(t,["nw","ne","sw","se"],e)}var vr={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,baseDirection:Array,keepRatio:Boolean},render:function(t,e){var n=t.props,r=n.resizable,i=n.edge;if(r)return i?gr(t,e):dr(t,e)},dragControlCondition:kn,dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.pinchFlag,a=e.datas,o=r.target,s=i?[1,1]:an(o),l=t.state,u=l.target,c=l.width,p=l.height;if(!s||!u)return!1;i||Rn(t,{datas:a}),a.datas={},a.direction=s,a.startOffsetWidth=c,a.startOffsetHeight=p,a.prevWidth=0,a.prevHeight=0,n=function(t){var e=window.getComputedStyle(t);return[parseFloat(e.width),parseFloat(e.height)]}(u),a.startWidth=n[0],a.startHeight=n[1],a.transformOrigin=t.props.transformOrigin,a.startDirection=function(t,e){var n=t.props.baseDirection,r=void 0===n?[-1,-1]:n;return[e[0]?e[0]:-1*r[0],e[1]?e[1]:-1*r[1]]}(t,s),a.fixedPosition=In(t,a.startDirection),a.fixedOriginalPosition=In(t,s);var f=hn(t,e,{direction:s,set:function(t){var e=t[0],n=t[1];a.startWidth=e,a.startHeight=n},setOrigin:function(t){a.transformOrigin=t},dragStart:ir.dragStart(t,(new or).dragStart([0,0],r))});return!1!==dn(t,"onResizeStart",f)&&(a.isResize=!0,t.state.snapDirection=s),!!a.isResize&&f},dragControl:function(t,e){var n=e.datas,r=e.distX,i=e.distY,a=e.parentFlag,o=e.pinchFlag,s=e.parentDistance,l=e.parentScale,u=e.inputEvent,c=e.parentKeepRatio,p=e.dragClient,f=n.direction,h=n.isResize,d=n.transformOrigin;if(h){var g=n.startWidth,v=n.startHeight,m=n.startOffsetWidth,b=n.startOffsetHeight,y=n.prevWidth,_=n.prevHeight,x=t.props,w=x.throttleResize,E=void 0===w?0:w,S=x.parentMoveable,C=t.props.keepRatio||c,M=f[0]||!f[1],D=M?b/m:m/b,P=0,O=0;if(l)P=(l[0]-1)*m,O=(l[1]-1)*b;else if(o)s&&(O=(P=s)*b/m);else{var k=zn({datas:n,distX:r,distY:i});if(P=f[0]*k[0],O=f[1]*k[1],C&&m&&b){var R=Xt([0,0],k),z=Xt([0,0],f),G=Xt([0,0],[m,b]),A=Math.sqrt(P*P+O*O),N=Math.cos(R-z)*A;f[0]?O=f[1]?(P=Math.cos(G)*N,Math.sin(G)*N):mn(P=N,M,D):P=bn(O=N,M,D)}}var j=f[0]||C?Math.max(m+P,0):m,T=f[1]||C?Math.max(b+O,0):b,Y=[0,0];if(o||(Y=function(t,e,n,r,i){if(!Un(t,"resizable"))return[0,0];var a=t.state;return er(t,a.matrix,e,n,r,r,i,a.is3d)}(t,j,T,f,n)),C){f[0]&&f[1]&&Y[0]&&Y[1]&&(Math.abs(Y[0])>Math.abs(Y[1])?Y[1]=0:Y[0]=0);var X=!Y[0]&&!Y[1];X&&(M?j=un(j,E):T=un(T,E)),f[0]&&!f[1]||Y[0]&&!Y[1]||X&&M?T=mn(j+=Y[0],M,D):(!f[0]&&f[1]||!Y[0]&&Y[1]||X&&!M)&&(j=bn(T+=Y[1],M,D))}else j+=Y[0],T+=Y[1],Y[0]||(j=un(j,E)),Y[1]||(T=un(T,E));var F=[(P=(j=Math.round(j))-m)-y,(O=(T=Math.round(T))-b)-_];if(n.prevWidth=P,n.prevHeight=O,S||!F.every(function(t){return!t})){var B=C||a?f:n.startDirection,I=p||(C?n.fixedOriginalPosition:n.fixedPosition),W=!a&&o?[0,0]:Bn(t,j,T,B,I,d),L=hn(t,e,{width:g+P,height:v+O,offsetWidth:j,offsetHeight:T,direction:f,dist:[P,O],delta:F,isPinch:!!o,drag:ir.drag(t,ar(t.state,W,u))});return dn(t,"onResize",L),L}}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,o=n.prevWidth,s=n.prevHeight;if(r){var l=t.state,u=l.width-(i+o),c=l.height-(a+s),p=3<Math.abs(u),f=3<Math.abs(c);return p&&(n.startWidth+=u,n.startOffsetWidth+=u,n.prevWidth+=u),f&&(n.startHeight+=c,n.startOffsetHeight+=c,n.prevHeight+=c),p||f?(this.dragControl(t,e),!0):void 0}},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isResize&&(n.isResize=!1,dn(t,"onResizeEnd",hn(t,e,{isDrag:r})),r)},dragGroupControlCondition:kn,dragGroupControlStart:function(o,s){var t=s.datas,e=this.dragControlStart(o,s);if(!e)return!1;var l=e.direction,u=jn(sn(o.state),l),n=On(o,this,"dragControlStart",t,function(t,e){var n=jn(sn(t.state),l),r=Kt(Zt(-o.rotation/180*Math.PI,3),[n[0]-u[0],n[1]-u[1],1],3),i=r[0],a=r[1];return e.originalX=i,e.originalY=a,s}),r=Se({},e,{targets:o.props.targets,events:n}),i=dn(o,"onResizeGroupStart",r);return t.isResize=!1!==i,!!t.isResize&&e},dragGroupControl:function(a,o){var t=o.datas;if(t.isResize){var e=this.dragControl(a,o);if(e){var n=e.offsetWidth,r=e.offsetHeight,i=e.dist,s=a.props.keepRatio,l=[n/(n-i[0]),r/(r-i[1])],u=t.fixedOriginalPosition,c=On(a,this,"dragControl",t,function(t,e){var n=Kt(Zt(a.rotation/180*Math.PI,3),[e.originalX*l[0],e.originalY*l[1],1],3),r=n[0],i=n[1];return Se({},o,{parentScale:l,dragClient:Ht(u,[r,i]),parentKeepRatio:s})}),p=Se({targets:a.props.targets,events:c},e);return dn(a,"onResizeGroup",p),p}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize)return this.dragControlEnd(t,e),On(t,this,"dragControlEnd",r,e),dn(t,"onResizeGroupEnd",hn(t,e,{targets:t.props.targets,isDrag:n})),n}},mr={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.edge;if(!r&&i)return a?gr(t,e):dr(t,e)},dragControlCondition:kn,dragControlStart:function(t,e){var n=e.datas,r=e.pinchFlag,i=e.inputEvent,a=i.target,o=r?[1,1]:an(a),s=t.state,l=s.width,u=s.height,c=s.targetTransform,p=s.target;if(!o||!p)return!1;r||Rn(t,{datas:n}),n.datas={},n.transform=c,n.prevDist=[1,1],n.direction=o,n.width=l,n.height=u,n.startScale=[1,1];var f=hn(t,e,{direction:o,set:function(t){n.startScale=t},dragStart:ir.dragStart(t,(new or).dragStart([0,0],i))});return!1!==dn(t,"onScaleStart",f)&&(n.isScale=!0,t.state.snapDirection=o),!!n.isScale&&f},dragControl:function(t,e){var n=e.datas,r=e.distX,i=e.distY,a=e.parentScale,o=e.parentDistance,s=e.parentKeepRatio,l=e.parentFlag,u=e.pinchFlag,c=e.inputEvent,p=e.dragClient,f=n.prevDist,h=n.direction,d=n.width,g=n.height,v=n.transform,m=n.isScale,b=n.startScale;if(!m)return!1;var y=t.props,_=y.throttleScale,x=y.parentMoveable,w=t.props.keepRatio||s,E=t.state,S=h[0]||!h[1],C=1,M=1,D=d*b[0],P=g*b[1],O=S?P/D:D/P;if(a)C=a[0],M=a[1];else if(u)o&&(C=(d+o)/d,M=(g+o*g/d)/g);else{var k=zn({datas:n,distX:r,distY:i}),R=h[0]*k[0],z=h[1]*k[1];if(w&&d&&g){var G=Xt([0,0],k),A=Xt([0,0],h),N=Xt([0,0],[D,P]),j=Math.sqrt(R*R+z*z),T=Math.cos(G-A)*j;h[0]?z=h[1]?(R=Math.cos(N)*T,Math.sin(N)*T):mn(R=T,S,O):R=bn(z=T,S,O)}C=(d+R)/d,M=(g+z)/g}C=h[0]?C*b[0]:b[0],M=h[1]?M*b[1]:b[1],0===C&&(C=1e-9*(0<f[0]?1:-1)),0===M&&(M=1e-9*(0<f[1]?1:-1));var Y,X=[C/b[0],M/b[1]],F=h;if(t.props.groupable){F=[(0<=X[0]?1:-1)*h[0],(0<=X[1]?1:-1)*h[1]];var B=E.snapDirection;V(B)&&(B[0]||B[1])&&(E.snapDirection=F)}var I=[0,0];if(u||(I=function(t,e,n,r,i){var a=i.width,o=i.height;if(!Un(t,"scalable"))return[0,0];var s=er(t,Fn(i,e),a,o,n,r,i,i.is3d);return[s[0]/a,s[1]/o]}(t,X,h,F,n)),w){h[0]&&h[1]&&I[0]&&I[1]&&(Math.abs(I[0])>Math.abs(I[1])?I[1]=0:I[0]=0);var W=!I[0]&&!I[1];if(W&&(S?X[0]=un(X[0]*b[0],_)/b[0]:X[1]=un(X[1]*b[1],_)/b[1]),h[0]&&!h[1]||I[0]&&!I[1]||W&&S){X[0]+=I[0];var L=mn(d*X[0]*b[0],S,O);X[1]=L/g/b[1]}else if(!h[0]&&h[1]||!I[0]&&I[1]||W&&!S){X[1]+=I[1];var q=bn(g*X[1]*b[1],S,O);X[0]=q/d/b[0]}}else X[0]+=I[0],X[1]+=I[1],I[0]||(X[0]=un(X[0]*b[0],_)/b[0]),I[1]||(X[1]=un(X[1]*b[1],_)/b[1]);0===X[0]&&(X[0]=1e-9*(0<f[0]?1:-1)),0===X[1]&&(X[1]=1e-9*(0<f[1]?1:-1));var H=[X[0]/f[0],X[1]/f[1]];if(Y=Te(X,b),n.prevDist=X,C===f[0]&&M===f[1]&&!x)return!1;var U=!l&&u?[0,0]:function(t,e,n,r){var i=t.state,a=i.is3d,o=i.left,s=i.top,l=i.width,u=i.height,c=a?4:3,p=t.props.groupable,f=Fn(t.state,e),h=p?o:0,d=p?s:0;return Ut(Yn(r||Tn(sn(t.state),n),f,l,u,c,n),[h,d])}(t,H,h,p),K=hn(t,e,{scale:Y,direction:h,dist:X,delta:H,transform:v+" scale("+C+", "+M+")",isPinch:!!u,drag:ir.drag(t,ar(t.state,U,c))});return dn(t,"onScale",K),K},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isScale&&(n.isScale=!1,dn(t,"onScaleEnd",hn(t,e,{isDrag:r})),r)},dragGroupControlCondition:kn,dragGroupControlStart:function(o,s){var t=s.datas,e=this.dragControlStart(o,s);if(!e)return!1;var l=e.direction,u=jn(sn(o.state),l),n=On(o,this,"dragControlStart",t,function(t,e){var n=jn(sn(t.state),l),r=Kt(Zt(-o.rotation/180*Math.PI,3),[n[0]-u[0],n[1]-u[1],1],3),i=r[0],a=r[1];return e.originalX=i,e.originalY=a,s}),r=Se({},e,{targets:o.props.targets,events:n}),i=dn(o,"onScaleGroupStart",r);return t.isScale=!1!==i,!!t.isScale&&r},dragGroupControl:function(a,o){var t=o.datas;if(t.isScale){var e=this.dragControl(a,o);if(e){var s=a.props.keepRatio,l=e.scale,n=e.direction,r=e.dist,u=jn(sn(a.state),Te(n,r)),i=On(a,this,"dragControl",t,function(t,e){var n=Kt(Zt(a.rotation/180*Math.PI,3),[e.originalX*l[0],e.originalY*l[1],1],3),r=n[0],i=n[1];return Se({},o,{parentScale:l,parentKeepRatio:s,dragClient:Ht(u,[r,i])})}),c=Se({targets:a.props.targets,events:i},e);return dn(a,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale)return this.dragControlEnd(t,e),On(t,this,"dragControlEnd",r,e),dn(t,"onScaleGroupEnd",hn(t,e,{targets:t.props.targets,isDrag:n})),n}};function br(t,n){return t.map(function(t,e){return function(t,e,n,r){return(t*r+e*n)/(n+r)}(t,n[e],1,2)})}function yr(t,e,n){var r=Xt(t,e),i=Xt(t,n)-r;return 0<=i?i:i+2*Math.PI}var _r={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable;if(!r&&!i&&a){var o=t.state,s=o.pos1,l=o.pos2,u=o.pos3,c=o.pos4,p=br(s,l),f=br(l,s),h=br(s,u),d=br(u,s),g=br(u,c),v=br(c,u),m=br(l,c),b=br(c,l);return[e.createElement("div",{className:Ye("line"),key:"middeLine1",style:Je(p,g)}),e.createElement("div",{className:Ye("line"),key:"middeLine2",style:Je(f,v)}),e.createElement("div",{className:Ye("line"),key:"middeLine3",style:Je(h,m)}),e.createElement("div",{className:Ye("line"),key:"middeLine4",style:Je(d,b)})].concat(dr(t,e))}},dragControlCondition:function(t){return Y(t,Ye("direction"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,i=t.props.target,a=an(n.target);if(!a||!i)return!1;var o=t.state,s=o.transformOrigin,l=o.is3d,u=o.targetTransform,c=o.targetMatrix,p=o.width,f=o.height,h=o.left,d=o.top;return r.datas={},r.targetTransform=u,r.warpTargetMatrix=l?c:Bt(c,3,4),r.targetInverseMatrix=function(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}(Tt(r.warpTargetMatrix,4),3,4),r.direction=a,r.left=h,r.top=d,Rn(t,{datas:r}),r.poses=[[0,0],[p,0],[0,f],[p,f]].map(function(t,e){return Ut(t,s)}),r.nextPoses=r.poses.map(function(t){var e=t[0],n=t[1];return Kt(r.warpTargetMatrix,[e,n,0,1],4)}),r.startMatrix=Jt(4),r.prevMatrix=Jt(4),r.absolutePoses=sn(o),r.posIndexes=Gn(a),o.snapDirection=a,!1!==dn(t,"onWarpStart",hn(t,e,{set:function(t){r.startMatrix=t}}))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var n=e.datas,r=e.distX,i=e.distY,a=n.targetInverseMatrix,o=n.prevMatrix,s=n.isWarp,l=n.startMatrix,u=n.poses,c=n.posIndexes,p=n.absolutePoses;if(!s)return!1;if(Un(t,"warpable")){var f=c.map(function(t){return p[t]});1<f.length&&f.push([(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2]);var h=Kn(t,f.map(function(t){return t[0]+r}),f.map(function(t){return t[1]+i})),d=h.horizontal,g=h.vertical;i-=Qn(d).offset,r-=Qn(g).offset}var v=zn({datas:n,distX:r,distY:i},!0),m=n.nextPoses.slice();if(c.forEach(function(t){m[t]=Ht(m[t],v)}),!Re.every(function(t){return function(t,e){var n=yr(t[0],t[1],t[2]),r=yr(e[0],e[1],e[2]),i=Math.PI;return!(i<=n&&r<=i||n<=i&&i<=r)}(t.map(function(t){return u[t]}),t.map(function(t){return m[t]}))}))return!1;var b=ee(u[0],u[1],u[2],u[3],m[0],m[1],m[2],m[3]);if(!b.length)return!1;var y=$t(Wt(a,b,4)),_=n.targetTransform+" matrix3d("+y.join(",")+")";return dn(t,"onWarp",hn(t,e,{delta:Lt(Tt(o,4),y,4),matrix:Lt(l,n.prevMatrix=y,4),multiply:Lt,dist:y,transform:_})),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,dn(t,"onWarpEnd",hn(t,e,{isDrag:r})),r)}},xr=Ye("area"),wr=Ye("area-pieces"),Er=Ye("area-piece"),Sr=Ye("avoid");function Cr(t){var e=t.areaElement,n=t.state,r=n.width,i=n.height;F(e,Sr),e.style.cssText+="left: 0px; top: 0px; width: "+r+"px; height: "+i+"px"}function Mr(t){return t.createElement("div",{key:"area_pieces",className:wr},t.createElement("div",{className:Er}),t.createElement("div",{className:Er}),t.createElement("div",{className:Er}),t.createElement("div",{className:Er}))}var Dr={name:"dragArea",props:{dragArea:Boolean},render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,o=t.state,s=o.width,l=o.height,u=o.pos1,c=o.pos2,p=o.pos3,f=o.pos4;if(a)return[e.createElement("div",{key:"area",ref:yt(t,"areaElement"),className:xr}),Mr(e)];if(!r||!i)return[];var h=ee([0,0],[s,0],[0,l],[s,l],u,c,p,f),d=h.length?"matrix3d("+$t(h).join(",")+")":"none";return[e.createElement("div",{key:"area",ref:yt(t,"areaElement"),className:xr,style:{top:"0px",left:"0px",width:s+"px",height:l+"px",transformOrigin:"0 0",transform:d}}),Mr(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;n.isDragArea=!1,n.inputTarget=a.target;var o=t.areaElement,s=t.state,l=s.clientRect,u=s.pos1,c=s.pos2,p=s.pos3,f=s.pos4,h=l.left,d=l.top,g=l.width,v=l.height,m=Ve([u,c,p,f]),b=m.left,y=m.top,_=r-h,x=i-d,w=[{left:b,top:y,width:g,height:x-10},{left:b,top:y,width:_-10,height:v},{left:b,top:y+x+10,width:g,height:v-x-10},{left:b+_+10,top:y,width:g-_-10,height:v}],E=[].slice.call(o.nextElementSibling.children);w.forEach(function(t,e){E[e].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),X(o,Sr)},drag:function(t,e){var n=e.datas;n.isDragArea||(n.isDragArea=!0,Cr(t))},dragEnd:function(t,e){var n=e.inputEvent,r=e.isDragArea;e.datas.isDragArea||Cr(t);var i=t.state.target,a=n.target;if(!r&&!t.isMoveableElement(a)){var o=i.contains(a);dn(t,"onClick",hn(t,e,{inputTarget:a,isTarget:i===a,containsTarget:o}))}},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t,e){this.drag(t,e)},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.isDragArea,i=e.datas;r||Cr(t);var a=i.inputTarget,o=n.target;if(!r&&!t.isMoveableElement(o)&&a!==o){var s=t.props.targets,l=s.indexOf(o),u=-1<l,c=!1;-1===l&&(c=-1<(l=function(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}(s,function(t){return t.contains(o)}))),dn(t,"onClickGroup",hn(t,e,{targets:s,inputTarget:o,targetIndex:l,isTarget:u,containsTarget:c}))}}},Pr={name:"origin",props:{origin:Boolean},render:function(t,e){if(!t.props.origin)return null;var n=t.state,r=n.beforeOrigin,i=n.rotation;return[e.createElement("div",{className:Ye("control","origin"),style:Qe(i,r),key:"beforeOrigin"})]}};function Or(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var kr={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number},dragStart:function(t,e){var n=t.props.scrollContainer,r=void 0===n?t.getContainer():n,i=r.getBoundingClientRect(),a=e.datas;a.scrollContainer=r,a.scrollRect={left:i.left,top:i.top,width:i.width,height:i.height},a.isScroll=!0},drag:function(t,e){return this.checkScroll(t,e)},dragAfter:function(t,e){this.checkScrollAfter(t,e)},dragEnd:function(t,e){e.datas.isScroll=!1},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,Se({},e,{targets:t.props.targets}))},dragGroupAfter:function(t,e){this.checkScrollAfter(t,e)},dragGroupEnd:function(t,e){this.dragEnd(t,e)},checkScroll:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.isScroll,o=e.targets;if(n.direction=null,n.isScroll){a||(n.prevClientX=r,n.prevClientY=i);var s=t.props,l=s.scrollThreshold,u=void 0===l?0:l,c=s.getScrollPosition,p=void 0===c?Or:c,f=n.scrollContainer,h=n.scrollRect,d=[0,0];if(h.top>i-u?d[1]=-1:h.top+h.height<i+u&&(d[1]=1),h.left>r-u?d[0]=-1:h.left+h.width<r+u&&(d[0]=1),d[0]||d[1]){n.direction=d,n.prevPos=p({scrollContainer:f,direction:d});var g=hn(t,e,{scrollContainer:f,direction:d}),v=o?"onScrollGroup":"onScroll";return o&&(g.targets=o),dn(t,v,g),!0}}},checkScrollAfter:function(t,e){var n=e.datas,r=e.inputEvent,i=n.direction,a=n.prevPos;if(n.isScroll&&n.direction){var o=t.props.getScrollPosition,s=(void 0===o?Or:o)({scrollContainer:n.scrollContainer,direction:i}),l=s[0]-a[0],u=s[1]-a[1];(l||u)&&t.targetDragger.scrollBy(i[0]?l:0,i[1]?u:0,r,!1)}}},Rr=[{name:"",props:{target:Object,container:Object,dragArea:Boolean,origin:Boolean,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number}},rr,Pn,ir,fr,vr,mr,_r,kr,Dr,Pr],zr={name:"groupable",props:{defaultGroupRotate:Number,groupable:Boolean},render:function(n,r){var t=n.props.targets||[];n.moveables=[];var e=n.state,i={left:e.left,top:e.top};return t.map(function(t,e){return r.createElement(Mn,{key:e,ref:function(e,n,r){return function(t){t&&(e[n][r]=t)}}(n,"moveables",e),target:t,origin:!1,parentMoveable:n,parentPosition:i})}).slice()}};function Gr(t,a){return Math.max.apply(Math,t.map(function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.max(e[a],n[a],r[a],i[a])}))}function Ar(t,a){return Math.min.apply(Math,t.map(function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.min(e[a],n[a],r[a],i[a])}))}var Nr=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.differ=new xe,t.moveables=[],t.rotation=0,t}Ee(t,n);var e=t.prototype;return e.updateEvent=function(t){var e=this.state,n=this.props;e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetDragger=xn(this,e.target,"targetAbles","Group"),this.controlDragger=xn(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var r=!yn(t.container,n.container);r&&(e.container=n.container);var i=this.differ.update(n.targets),a=i.added,o=i.changed,s=i.removed;(r||a.length||o.length||s.length)&&this.updateRect()},e.checkUpdate=function(){this.updateAbles()},e.updateRect=function(e,t,n){var r;if(void 0===n&&(n=!0),this.controlBox){this.moveables.forEach(function(t){t.updateRect(e,!1,!1)});var i=this.state,a=this.props,o=i.target||a.target;(!t||""!==e&&a.updateGroup)&&(this.rotation=a.defaultGroupRotate);var s=this.rotation,l=function(t,e){if(!t.length)return[0,0,0,0];var n=t.map(function(t){return sn(t.state)}),i=Ge,a=Ge,r=0,o=0,s=un(e,ze);if(s%90){var l=e/180*Math.PI,u=Math.tan(l),c=-1/u,p=[Ae,Ge],f=[Ae,Ge];n.forEach(function(t){t.forEach(function(t){var e=t[1]-u*t[0],n=t[1]-c*t[0];p[0]=Math.max(p[0],e),p[1]=Math.min(p[1],e),f[0]=Math.max(f[0],n),f[1]=Math.min(f[1],n)})}),p.forEach(function(r){f.forEach(function(t){var e=(t-r)/(u-c),n=u*e+r;i=Math.min(i,e),a=Math.min(a,n)})});var h=n.map(function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return[Vt(e,-l),Vt(n,-l),Vt(r,-l),Vt(i,-l)]});r=Gr(h,0)-Ar(h,0),o=Gr(h,1)-Ar(h,1)}else if(i=Ar(n,0),a=Ar(n,1),r=Gr(n,0)-i,o=Gr(n,1)-a,s%180){var d=r;r=o,o=d}return[i,a,r,o]}(this.moveables,s),u=l[0],c=l[1],p=l[2],f=l[3];o.style.cssText+="left:0px;top:0px;width:"+p+"px; height:"+f+"px;transform:rotate("+s+"deg)",i.width=p,i.height=f;var h=nn(o,this.controlBox.getElement(),this.getContainer(),i),d=[h.left,h.top];r=sn(h),h.pos1=r[0],h.pos2=r[1],h.pos3=r[2],h.pos4=r[3],h.origin=Ht(d,h.origin),h.beforeOrigin=Ht(d,h.beforeOrigin);var g=h.clientRect;g.top+=c-h.top-i.top,g.left+=u-h.left-i.left,this.updateState(Se({},h,{left:u-h.left,top:c-h.top}),n)}},e.triggerEvent=function(t,e){if(-1<t.indexOf("Group"))return n.prototype.triggerEvent.call(this,t,e)},e.updateAbles=function(){n.prototype.updateAbles.call(this,this.props.ables.concat([zr]),"Group")},t.defaultProps=Se({},Mn.defaultProps,{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0}),t}(Mn),jr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Ee(e,t);var n=e.prototype;return n.render=function(){var t=this.props.ables||[],e=this.props.target||this.props.targets,n=V(e);if(n&&1<e.length){var r=Se({},this.props,{target:null,targets:e,ables:Rr.concat([zr],t)});return it(Nr,Se({key:"group",ref:yt(this,"moveable")},r))}var i=n?e[0]:e;return it(Mn,Se({key:"single",ref:yt(this,"moveable")},Se({},this.props,{target:i,ables:Rr.concat(t)})))},n.isMoveableElement=function(t){return this.moveable.isMoveableElement(t)},n.dragStart=function(t){this.moveable.dragStart(t)},n.isInside=function(t,e){return this.moveable.isInside(t,e)},n.updateRect=function(){this.moveable.updateRect()},n.updateTarget=function(){this.moveable.updateTarget()},n.getRect=function(){return this.moveable.getRect()},n.destroy=function(){this.moveable.componentWillUnmount()},e}(ft),Tr=function(n){function t(t){var e=n.call(this,t)||this;return e.state={},e.state=e.props,e}return i(t,n),t.prototype.render=function(){return mt(it(jr,s({ref:f(this,"moveable")},this.state)),this.state.parentElement)},t}(pt),Yr=["draggable","resizable","scalable","rotatable","warpable","pinchable","snappable","origin","target","edge","throttleDrag","throttleResize","throttleScale","throttleRotate","keepRatio","dragArea","pinchThreshold","snapCenter","snapThreshold","horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","className","renderDirections","scrollable","getScrollPosition","scrollContainer","scrollThreshold","baseDirection","snapElement","snapVertical","snapHorizontal"],Xr=["dragStart","drag","dragEnd","resizeStart","resize","resizeEnd","scaleStart","scale","scaleEnd","rotateStart","rotate","rotateEnd","warpStart","warp","warpEnd","pinchStart","pinch","pinchEnd","dragGroupStart","dragGroup","dragGroupEnd","resizeGroupStart","resizeGroup","resizeGroupEnd","scaleGroupStart","scaleGroup","scaleGroupEnd","rotateGroupStart","rotateGroup","rotateGroupEnd","pinchGroupStart","pinchGroup","pinchGroupEnd","clickGroup","scroll","scrollGroup","renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],Fr=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","setState"],Br=function(o){function t(t,e){void 0===e&&(e={});var n=o.call(this)||this;n.tempElement=document.createElement("div");var r=s({container:t},e),i={};Xr.forEach(function(e){i[function(t){return t.replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})}("on "+e)]=function(t){return n.trigger(e,t)}}),vt(it(Tr,s({ref:f(n,"innerMoveable"),parentElement:t},r,i)),n.tempElement);var a=r.target;return V(a)&&1<a.length&&n.updateRect(),n}i(t,o);var e=t.prototype;return e.setState=function(t,e){this.innerMoveable.setState(t,e)},e.destroy=function(){vt(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.moveable},t=function(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(o=(a<3?i(o):3<a?i(e,n,o):i(e,n))||o);return 3<a&&o&&Object.defineProperty(e,n,o),o}([a(Fr,function(t,r){t[r]||(t[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.getMoveable();if(n&&n[r])return n[r].apply(n,t)})}),a(Yr,function(t,n){Object.defineProperty(t,n,{get:function(){return this.getMoveable().props[n]},set:function(t){var e;this.setState(((e={})[n]=t,e))},enumerable:!0,configurable:!0})})],t)}(t),Ir={draggable:{vanilla:'\nimport Moveable from "moveable";\n\n/* const translate = [0, 0]; */\nconst draggable = new Moveable(document.body, {\n    target: document.querySelector(".draggable"),\n    draggable: true,\n    throttleDrag: 0,\n}).on("drag", ({ target, left, top, beforeDelta }) => {\n    target.style.left = left + "px";\n    target.style.top = top + "px";\n\n    /* translate[0] += beforeDelta[0]; */\n    /* translate[1] += beforeDelta[1]; */\n    /* target.style.transform\n        = "translateX(" + translate[0] + "px) "\n        + "translateY(" + translate[1] + "px)"; */\n});\n        ',react:'\nimport Moveable from "react-moveable";\nthis.translate = [0, 0];\nreturn (\n    <Moveable\n        target={document.querySelector(".draggable")}\n        draggable={true}\n        throttleDrag={0}\n        onDrag={({ target, left, top, beforeDelta }) => {\n            target.style.left = left + "px";\n            target.style.top = top + "px";\n\n            /* const translate = this.translate */\n            /* translate[0] += beforeDelta[0]; */\n            /* translate[1] += beforeDelta[1]; */\n            /* target.style.transform\n                = "translateX(" + translate[0] + "px) "\n                + "translateY(" + translate[1] + "px)"; */\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [draggable]="true"\n    [throttleDrag]="0"\n    (drag)="onDrag($event)\n    />\n`,\n})\nexport class AppComponent {\n    translate = [0, 0];\n    onDrag({ target, left, top, beforeDelta }) {\n        target.style.left = left + "px";\n        target.style.top = top + "px";\n\n        /* const translate = this.translate */\n        /* translate[0] += beforeDelta[0]; */\n        /* translate[1] += beforeDelta[1]; */\n        /* target.style.transform\n            = "translateX(" + translate[0] + "px) "\n            + "translateY(" + translate[1] + "px)"; */\n    }\n}\n',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let translate = [0, 0];\n    let target;\n<\/script>\n<div class="target draggable" bind:this={target}>Draggable</div>\n<Moveable\n    target={target}\n    draggable={true}\n    throttleDrag={0}\n    on:drag={({ detail }) => {\n        target.style.left = detail.left + "px";\n        target.style.top = detail.top + "px";\n    }}\n/>'},resizable:{vanilla:'\nimport Moveable from "moveable";\n\nconst resizable = new Moveable(document.body, {\n    target: document.querySelector(".resizable"),\n    resizable: true,\n    throttleResize: 0,\n    keepRatio: true,\n}).on("resize", ({ target, width, height, dist }) => {\n    console.log(width, height, dist);\n    target.style.width = width + "px";\n    target.style.height = height + "px";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nreturn (\n    <Moveable\n        target={document.querySelector(".resizable")}\n        resizable={true}\n        throttleResize={0}\n        keepRatio={true}\n        onResize={({ target, width, height, dist }) => {\n            console.log(width, height, dist);\n            target.style.width = width + "px";\n            target.style.height = height + "px";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [resizable]="true"\n    [throttleResize]="0"\n    [keepRatio]="true"\n    (resize)="onResize($event)\n    />\n`,\n})\nexport class AppComponent {\n    onResize({ target, width, height, dist }) {\n        console.log(width, height, dist);\n        target.style.width = width + "px";\n        target.style.height = height + "px";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let translate = [0, 0];\n    let target;\n<\/script>\n<div class="target resizable" bind:this={target}>Resizable</div>\n<Moveable\n    target={target}\n    resizable={true}\n    throttleResize={0}\n    keepRatio={true}\n    on:resize={({ detail }) => {\n        const { target, width, height, dist } = detail;\n        target.style.width = width + "px";\n        target.style.height = height + "px";\n    }}\n/>'},scalable:{vanilla:'\nimport Moveable from "moveable";\n\nconst scale = [1, 1];\nconst scalable = new Moveable(document.body, {\n    target: document.querySelector(".scalable"),\n    scalable: true,\n    throttleScale: 0,\n    keepRatio: true,\n}).on("scale", ({ target, delta }) => {\n    scale[0] *= delta[0];\n    scale[1] *= delta[1];\n    target.style.transform = "scale(" + scale[0] +  "," + scale[1] + ")";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.scale = [1, 1];\nreturn (\n    <Moveable\n        target={document.querySelector(".scalable")}\n        scalable={true}\n        throttleScale={0}\n        keepRatio={true}\n        onScale={({ target, delta }) => {\n            const scale = this.scale;\n            scale[0] *= delta[0];\n            scale[1] *= delta[1];\n            target.style.transform\n                = "scale(" + scale[0] +  "," + scale[1] + ")";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [scalable]="true"\n    [throttleScale]="0"\n    [keepRatio]="true"\n    (scale)="onScale($event)\n    />\n`,\n})\nexport class AppComponent {\n    scale = [1, 1];\n    onScale({ target, delta }) {\n        const scale = this.scale;\n        scale[0] *= delta[0];\n        scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + scale[0] +  "," + scale[1] + ")";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let scale = [1, 1];\n    let target;\n<\/script>\n<div class="target scalable" bind:this={target}>Scalable</div>\n<Moveable\n    target={target}\n    scalable={true}\n    throttleScale={0}\n    keepRatio={true}\n    on:scale={({ detail: { target, delta }}) => {\n        scale[0] *= delta[0];\n        scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + scale[0] +  "," + scale[1] + ")";\n    }}\n/>'},rotatable:{vanilla:'\nimport Moveable from "moveable";\n\nlet rotate = 0;\n\nconst rotatable = new Moveable(document.body, {\n    target: document.querySelector(".rotatable"),\n    rotatable: true,\n    throttleRotate: 0,\n}).on("rotate", ({ target, beforeDelta, delta }) => {\n    rotate += delta;\n    target.style.transform\n        = "rotate(" + rotate +  "deg)";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.rotate = 0;\n\nreturn (\n    <Moveable\n        target={document.querySelector(".rotatable")}\n        rotatable={true}\n        throttleRotate={0}\n        onRotate={({ target, beforeDelta, delta }) => {\n            this.rotate += delta;\n            target.style.transform\n                = "rotate(" + this.rotate +  "deg)";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [rotatable]="true"\n    [throttleRotate]="0"\n    [keepRatio]="true"\n    (rotate)="onRotate($event)\n    />\n`,\n})\nexport class AppComponent {\n    rotate = 0;\n    onRotate({ target, delta }) {\n        this.rotate += delta;\n        target.style.transform\n            = "rotate(" + this.rotate +  "deg)";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let rotate = 0;\n    let target;\n<\/script>\n<div class="target rotatable" bind:this={target}>Rotatable</div>\n<Moveable\n    target={target}\n    rotatable={true}\n    throttleRotate={0}\n    on:rotate={({ detail }) => {\n        const { target, beforeDelta, delta } = detail;\n        rotate += delta;\n        target.style.transform\n            = "rotate(" + rotate +  "deg)";\n    }}\n/>'},warpable:{vanilla:'\nimport Moveable from "moveable";\n\nlet matrix = [\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1,\n];\n\nconst warpable = new Moveable(document.body, {\n    target: document.querySelector(".warpable"),\n    warpable: true,\n    throttleRotate: 0,\n}).on("warp", ({ target, multiply, delta }) => {\n    matrix = multiply(matrix, delta);\n    target.style.transform\n        = "matrix3d(" + matrix.join(",") +  ")";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.matrix = [\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1,\n];\n\nreturn (\n    <Moveable\n        target={document.querySelector(".warpable")}\n        warpable={true}\n        onWarp={({ target, multiply, delta }) => {\n            this.matrix = multiply(this.matrix, delta);\n            target.style.transform\n                = "matrix3d(" + matrix.join(",") +  ")";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [warpable]="true"\n    (warp)="onWarp($event)\n    />\n`,\n})\nexport class AppComponent {\n    matrix = [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n    onWarp({ target, dist }) {\n        this.matrix = multiply(this.matrix, delta);\n        target.style.transform\n            = "matrix3d(" + matrix.join(",") +  ")";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let matrix = [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n    let target;\n<\/script>\n<div class="target scalable" bind:this={target}>Scalable</div>\n<Moveable\n    target={target}\n    warpable={true}\n    on:warp={({ detail }) => {\n        const { target, multiply, delta } = detail;\n        matrix = multiply(matrix, delta);\n        target.style.transform\n            = "matrix3d(" + matrix.join(",") +  ")";\n    }}\n/>'},pinchable:{vanilla:'\nimport Moveable from "moveable";\nconst scale = [1, 1];\nlet rotate = 0;\n\nconst pinchable = new Moveable(document.body, {\n    target: document.querySelector(".pinchable"),\n    pinchable: ["rotatable", "scalable"],\n}).on("rotate", ({ target, beforeDelta }) => {\n    rotate += beforeDelta;\n    target.style.transform = "scale(" + scale.join(", ") + ") rotate(" + rotate + "deg)";\n}).on("scale", ({ target, delta }) => {\n    scale[0] *= delta[0];\n    scale[1] *= delta[1];\n    target.style.transform = "scale(" + scale.join(", ") + ") rotate(" + rotate + "deg)";\n});',react:'\nimport Moveable from "react-moveable";\nthis.scale = [1, 1];\nthis.rotate = 0;\n\nreturn (\n    <Moveable\n        target={document.querySelector(".pinchable")}\n        pinchable={["rotatable", "scalable"]},\n        onRotate={({ target, beforeDelta }) => {\n            this.rotate += beforeDelta;\n            target.style.transform\n                = "scale(" + this.scale.join(", ") + ") "\n                + "rotate(" + this.rotate + "deg)";\n        }}\n        onScale={({ target, beforeDelta }) => {\n            this.scale[0] *= delta[0];\n            this.scale[1] *= delta[1];\n            target.style.transform\n                = "scale(" + this.scale.join(", ") + ") "\n                + "rotate(" + this.rotate + "deg)";\n        }}\n    />\n);',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n    <div #target class="target">target</div>\n    <ngx-moveable\n        [target]="target"\n        [pinchable]="[\'rotatable\', \'scalable\']"\n        [rotate]="onRotate($event)"\n        [scale]="onScale($event)"\n/>\n`,\n})\nexport class AppComponent {\n    scale = [1, 1];\n    rotate = 0;\n    onRotate({ target, beforeDelta }) {\n        this.rotate += beforeDelta;\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }\n    onScale({ target, beforeDelta }) {\n        this.scale[0] *= delta[0];\n        this.scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }\n}\n',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let matrix = [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n    let target;\n<\/script>\n<div class="target pinchable" bind:this={target}>Pinchable</div>\n<Moveable\n    target={target}\n    pinchable={["rotatable", "scalable"]},\n    on:rotate={({ detail: { target, beforeDelta }}) => {\n        this.rotate += beforeDelta;\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }}\n    on:scale={({ detail: { target, beforeDelta }}) => {\n        this.scale[0] *= delta[0];\n        this.scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }}\n/>'},snappable:{vanilla:'\nimport Moveable from "moveable";\n\nconst snappable = new Moveable(document.body, {\n    target: document.querySelector(".snappable"),\n    snappable: true,\n    verticalGuidelines: [0, 150, 200],\n    horizontalGuidelines: [0, 150, 200],\n}).on("drag", ({ target, left, top }) => {\n    target.style.left = left + "px";\n    target.style.top = top + "px";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nreturn (\n    <Moveable\n        target={document.querySelector(".origin")}\n        origin={true}\n        snappable={true}\n        verticalGuidelines={[0, 150, 200]}\n        horizontalGuidelines={[0, 150, 200]}\n        onDrag={({ target, left, top }) => {\n            target.style.left = left + "px";\n            target.style.top = top + "px";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [snappable]="true"\n    [verticalGuidelines]="[0, 150, 200]"\n    [horizontalGuidelines]="[0, 150, 200]"\n    />\n`,\n})\nexport class AppComponent {\n    onDrag({ target, left, top }) {\n        target.style.left = left + "px";\n        target.style.top = top + "px";\n    }\n}\n',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let target;\n<\/script>\n<div class="target pinchable" bind:this={target}>Pinchable</div>\n<Moveable\n    target={target}\n    origin={true}\n    snappable={true}\n    verticalGuidelines={[0, 150, 200]}\n    horizontalGuidelines={[0, 150, 200]}\n    on:drag={({ detail: { target, left, top }}) => {\n        target.style.left = left + "px";\n        target.style.top = top + "px";\n    }}\n/>'},groupable:{vanilla:'\nimport Moveable from "moveable";\nconst poses = [\n    [0, 0],\n    [0, 0],\n    [0, 0],\n];\nconst target = [].slice.call(\n    document.querySelectorAll(".target"),\n);\nconst groupable = new Moveable(document.body, {\n    target,\n    draggable: true,\n}).on("dragGroup", ({ events }) => {\n    events.forEach(({ target, beforeDelta }, i) => {\n        poses[i][0] += beforeDelta[0];\n        poses[i][1] += beforeDelta[1];\n\n        target.style.transform\n            = "translate("\n            + poses[i][0] + "px, "\n            + poses[i][1] + "px)";\n    });\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.poses = [\n    [0, 0],\n    [0, 0],\n    [0, 0],\n];\n\nconst target = [].slice.call(\n    document.querySelectorAll(".target"),\n);\nreturn (\n    <Moveable\n        target={target}\n        draggable={true}\n        onDragGroup={({ events }) => {\n            events.forEach(({ target, beforeDelta }, i) => {\n                this.poses[i][0] += beforeDelta[0];\n                this.poses[i][1] += beforeDelta[1];\n\n                target.style.transform\n                    = "translate("\n                    + this.poses[i][0] + "px, "\n                    + this.poses[i][1] + "px)";\n            });\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target1 class="target">target1</div>\n<div #target2 class="target">target2</div>\n<div #target3 class="target">target3</div>\n<ngx-moveable\n    [target]="[target1, target2, target3]"\n    [draggable]="true"\n    (dragGroup)="onDragGroup($event)\n    />\n`,\n})\nexport class AppComponent {\n    poses = [\n        [0, 0],\n        [0, 0],\n        [0, 0],\n    ];\n    onDragGroup({ events }) {\n        events.forEach(({ target, beforeDelta }, i) => {\n            this.poses[i][0] += beforeDelta[0];\n            this.poses[i][1] += beforeDelta[1];\n\n            target.style.transform\n                = "translate("\n                + this.poses[i][0] + "px, "\n                + this.poses[i][1] + "px)";\n        });\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n    import { onMount } from "svelte";\n    let targets = [];\n    let translates = [];\n\n    onMount(() => {\n        targets = [].slice.call(document.querySelectorAll(".target"));\n        translates = targets.map(() => {\n            return [0, 0];\n        });\n    });\n<\/script>\n<div class="target">Target1</div>\n<div class="target">Target2</div>\n<div class="target">Target3</div>\n<Moveable\n    target={targets}\n    draggable={true}\n    on:dragGroup={({ detail: { events }}) => {\n        events.forEach(({ target, beforeDelta }, i) => {\n            translates[i][0] += beforeDelta[0];\n            translates[i][1] += beforeDelta[1];\n\n            target.style.transform\n                = "translate("\n                + translates[i][0] + "px, "\n                + translates[i][1] + "px)";\n        });\n    }}\n/>'}};function Wr(t,e,n){var r=1-n;return n*n*n+3*n*n*r*e+3*n*r*r*t}function Lr(n,r,i,a){function t(t){var e=function(t,e,n){for(var r=n,i=1;.001<Math.abs(i);){if(i=Wr(t,e,r)-n,Math.abs(i)<.001)return r;r-=i/2}return r}(n,i,Math.max(Math.min(1,t),0));return Wr(r,a,e)}return t.easingName="cubic-bezier("+n+","+r+","+i+","+a+")",t}function qr(n,r){function t(t){var e=1/n;return 1<=t?1:("start"===r?e:0)+Math.floor(t/e)*e}return t.easingName="steps("+n+", "+r+")",t}var Hr,Ur=qr(1,"start"),Kr=qr(1,"end"),Vr=Lr(0,0,1,1),$r=Lr(.25,.1,.25,1),Zr=Lr(.42,0,1,1),Jr=Lr(0,0,.58,1),Qr=Lr(.42,0,.58,1),ti="animation-timing-function",ei={transform:{},filter:{},attribute:{},html:!0},ni={easing:[ti]},ri=((Hr={})[ti]=!0,Hr.contents=!0,Hr.html=!0,Hr),ii={linear:Vr,ease:$r,"ease-in":Zr,"ease-out":Jr,"ease-in-out":Qr,"step-start":Ur,"step-end":Kr},ai=function(){function o(t,e){this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",e&&this.setOptions(e),this.value=G(t)?t.split(this.separator):t}var t=o.prototype;return t.setOptions=function(t){for(var e in t)this[e]=t[e];return this},t.size=function(){return this.value.length},t.get=function(t){return this.value[t]},t.set=function(t,e){return this.value[t]=e,this},t.clone=function(){var t=this,e=t.separator,n=t.prefix,r=t.suffix,i=t.model,a=t.type;return new o(this.value.map(function(t){return t instanceof o?t.clone():t}),{separator:e,prefix:n,suffix:r,model:i,type:a})},t.toValue=function(){return this.prefix+this.join()+this.suffix},t.join=function(){return this.value.map(function(t){return t instanceof o?t.toValue():t}).join(this.separator)},t.forEach=function(t){return this.value.forEach(t),this},o}();function oi(t){var e=h;return 3===t.length&&(t[3]=1),new ai(t,{model:e,separator:",",type:"color",prefix:e+"(",suffix:")"})}function si(t,e){return new ai(t,{type:"array",separator:e})}function li(t){if(!G(t))return V(t)?si(t,","):t;var e=A(t);return 1<e.length?si(e.map(function(t){return li(t)}),","):1<(e=function(t){return t.match(/("[^"]*")|('[^']*')|([^\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^\s()]*)|\S+/g)||[]}(t)).length?si(e.map(function(t){return li(t)})," "):(e=/^(['"])([^'"]*)(['"])$/g.exec(t))&&e[1]===e[3]?new ai([li(e[2])],{prefix:e[1],suffix:e[1]}):-1!==t.indexOf("(")?function(t){var e=q(t),n=e.prefix,r=e.value,i=e.suffix;if(void 0===r)return t;if(-1!==v.indexOf(n))return oi(T(t));var a=li(r),o=[r],s=",",l=n+"(",u=")"+i;return a instanceof ai&&(s=a.separator,o=a.value,l+=a.prefix,u=a.suffix+u),new ai(o,{separator:s,model:n,prefix:l,suffix:u})}(t):"#"===t.charAt(0)?function(t){var e=T(t);return e?oi(e):t}(t):t}function ui(t){return t instanceof ai}function ci(t){var e=typeof t;if(e===S){if(V(t))return E;if(ui(t))return w}else if(e===C||e===M)return"value";return e}function pi(t,e){var n=[];if(function(t){return L(t)&&t.constructor===Object}(t))for(var r in t)e.push(r),n=n.concat(pi(t[r],e)),e.pop();else n.push(e.slice());return n}function fi(t,e,n){void 0===n&&(n=t.length);for(var r=e,i=0;i<n;++i){if(!L(r))return;r=r[t[i]]}return r}function hi(t,e,n){var r=e.length,i=t;if(0===r)return!1;for(var a=0;a<r;++a){if(!0===i)return!1;if(!(i=i[e[a]])||!n&&!0===i)return!1}return!0}function di(t,e){return hi(ei,t,e)}function gi(t){if(!t)return"";var e=[];for(var n in t)e.push(n.replace(/\d$/g,"")+"("+t[n]+")");return e.join(" ")}function vi(t,e){return void 0===e&&(e=!1),mi({},t,e)}function mi(t,e,n){for(var r in void 0===n&&(n=!1),e){var i=e[r],a=ci(i);a===w?t[r]=n?i.toValue():i.clone():a===m?t[r]=n?yi([r],i):i:a===E?t[r]=i.slice():a===S?L(t[r])&&!ui(t[r])?mi(t[r],i,n):t[r]=vi(i,n):t[r]=e[r]}return t}function bi(t){return t[0]in ni?ni[t[0]]:t}function yi(t,e){var n=ci(e);if(n===w)return e.toValue();if(n===m){if(t[0]!==ti)return yi(t,e())}else if(n===S)return vi(e,!0);return e}var _i,xi,wi,Ei,Si,Ci=function(){function f(t){void 0===t&&(t={}),this.properties={},this.set(t)}var t=f.prototype;return t.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.raw.apply(this,t);return yi(bi(t),n)},t.raw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return fi(bi(t),this.properties)},t.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=bi(t),r=n.length;if(!r)return this;var i=fi(n,this.properties,r-1);return L(i)&&delete i[n[r-1]],this},t.set=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this,r=t.length,i=t.slice(0,-1),a=t[r-1],o=i[0];if(1===r&&a instanceof f)n.merge(a);else if(o in ni)n._set(ni[o],a);else if(2===r&&V(o))n._set(o,a);else if(ui(a))di(i)?n.set.apply(n,i.concat([function e(t,n){void 0===n&&(n={});var r=t.model;if(r){t.setOptions({model:"",suffix:"",prefix:""});var i=1<t.size()?t:t.get(0);n[r]=i}else t.forEach(function(t){e(t,n)});return n}(a)])):n._set(i,a);else if(V(a))n._set(i,a);else if(L(a))for(var s in!n.has.apply(n,i)&&di(i)&&n._set(i,{}),a)n.set.apply(n,i.concat([s,a[s]]));else if(G(a)){if(di(i,!0)){if(function(t){return hi(ri,t,!0)}(i)||!di(i))this._set(i,a);else{var l=li(a);L(l)&&n.set.apply(n,i.concat([l]))}return this}var u=function(t){for(var e=t.split(";"),n={},r=e.length,i=0;i<r;++i){var a=/([^:]*):([\S\s]*)/g.exec(e[i]);!a||a.length<3||!a[1]?--r:n[a[1].trim()]=li(a[2].trim())}return{styles:n,length:r}}(a),c=u.styles,p=u.length;for(var s in c)n.set.apply(n,i.concat([s,c[s]]));if(p)return this;n._set(i,a)}else n._set(i,a);return n},t.getNames=function(){return pi(this.properties,[])},t.has=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=bi(t),r=n.length;return!!r&&!W(fi(n,this.properties,r))},t.clone=function(){return(new f).merge(this)},t.merge=function(t){var e=this.properties,n=t.properties;return n&&mi(e,n),this},t.toCSSObject=function(){var t=this.get(),e={};for(var n in t)if(!di([n],!0)){var r=t[n];n===ti?e[ti.replace("animation",z)]=(G(r)?r:r.easingName)||"initial":e[n]=r}var i=gi(t.transform),a=gi(t.filter);return k&&i&&(e[k]=i),R&&a&&(e[R]=a),e},t.toCSS=function(){var t=this.toCSSObject(),e=[];for(var n in t)e.push(n+":"+t[n]+";");return e.join("")},t._set=function(t,e){for(var n=this.properties,r=t.length,i=0;i<r-1;++i){var a=t[i];a in n||(n[a]={}),n=n[a]}r&&(1===t.length&&t[0]===ti?n[ti]=function(t){var e;if(G(t))if(t in ii)e=ii[t];else{var n=li(t);if(G(n))return 0;if("cubic-bezier"===n.model)e=Lr((t=n.value.map(function(t){return parseFloat(t)}))[0],t[1],t[2],t[3]);else{if("steps"!==n.model)return 0;e=qr(parseFloat(n.value[0]),n.value[1])}}else e=V(t)?Lr(t[0],t[1],t[2],t[3]):t;return e}(e):n[t[r-1]]=G(e)?li(e):e)},f}(),Mi={},Di=[],Pi=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function Oi(t,e){for(var n in e)t[n]=e[n];return t}function ki(t){var e=t.parentNode;e&&e.removeChild(t)}function Ri(t,e,n){var r,i,a,o,s=arguments;if(e=Oi({},e),3<arguments.length)for(n=[n],r=3;r<arguments.length;r++)n.push(s[r]);if(null!=n&&(e.children=n),null!=t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===e[i]&&(e[i]=t.defaultProps[i]);return o=e.key,null!=(a=e.ref)&&delete e.ref,null!=o&&delete e.key,zi(t,e,o,a)}function zi(t,e,n,r){var i={type:t,props:e,key:n,ref:r,__k:null,__p:null,__b:0,__e:null,__d:null,__c:null,constructor:void 0};return _i.vnode&&_i.vnode(i),i}function Gi(t){return t.children}function Ai(t,e){this.props=t,this.context=e}function Ni(t,e){if(null==e)return t.__p?Ni(t.__p,t.__p.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?Ni(t):null}function ji(t){var e,n;if(null!=(t=t.__p)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return ji(t)}}function Ti(t){(!t.__d&&(t.__d=!0)&&1===xi.push(t)||Ei!==_i.debounceRendering)&&(Ei=_i.debounceRendering,(_i.debounceRendering||wi)(Yi))}function Yi(){var t,e,n,r,i,a,o;for(xi.sort(function(t,e){return e.__v.__b-t.__v.__b});t=xi.pop();)t.__d&&(r=n=void 0,a=(i=(e=t).__v).__e,(o=e.__P)&&(n=[],r=Li(o,i,Oi({},i),e.__n,void 0!==o.ownerSVGElement,null,n,null==a?Ni(i):a),qi(n,i),r!=a&&ji(i)))}function Xi(e,n,t,r,i,a,o,s,l){var u,c,p,f,h,d,g,v=t&&t.__k||Di,m=v.length;if(s==Mi&&(s=null!=a?a[0]:m?Ni(t,0):null),u=0,n.__k=Fi(n.__k,function(t){if(null!=t){if(t.__p=n,t.__b=n.__b+1,null===(p=v[u])||p&&t.key==p.key&&t.type===p.type)v[u]=void 0;else for(c=0;c<m;c++){if((p=v[c])&&t.key==p.key&&t.type===p.type){v[c]=void 0;break}p=null}if(f=Li(e,t,p=p||Mi,r,i,a,o,s,l),(c=t.ref)&&p.ref!=c&&(g=g||[]).push(c,t.__c||f,t),null!=f){if(null==d&&(d=f),null!=t.__d)f=t.__d,t.__d=null;else if(a==p||f!=s||null==f.parentNode){t:if(null==s||s.parentNode!==e)e.appendChild(f);else{for(h=s,c=0;(h=h.nextSibling)&&c<m;c+=2)if(h==f)break t;e.insertBefore(f,s)}"option"==n.type&&(e.value="")}s=f.nextSibling,"function"==typeof n.type&&(n.__d=f)}}return u++,t}),n.__e=d,null!=a&&"function"!=typeof n.type)for(u=a.length;u--;)null!=a[u]&&ki(a[u]);for(u=m;u--;)null!=v[u]&&Ui(v[u],v[u]);if(g)for(u=0;u<g.length;u++)Hi(g[u],g[++u],g[++u])}function Fi(t,e,n){if(null==n&&(n=[]),null==t||"boolean"==typeof t)e&&n.push(e(null));else if(Array.isArray(t))for(var r=0;r<t.length;r++)Fi(t[r],e,n);else n.push(e?e("string"==typeof t||"number"==typeof t?zi(null,t,null,null):null!=t.__e||null!=t.__c?zi(t.type,t.props,t.key,null):t):t);return n}function Bi(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]="number"==typeof n&&!1===Pi.test(e)?n+"px":null==n?"":n}function Ii(t,e,n,r,i){var a,o,s,l,u;if("key"===(e=i?"className"===e?"class":e:"class"===e?"className":e)||"children"===e);else if("style"===e)if(a=t.style,"string"==typeof n)a.cssText=n;else{if("string"==typeof r&&(a.cssText="",r=null),r)for(o in r)n&&o in n||Bi(a,o,"");if(n)for(s in n)r&&n[s]===r[s]||Bi(a,s,n[s])}else"o"===e[0]&&"n"===e[1]?(l=e!==(e=e.replace(/Capture$/,"")),e=((u=e.toLowerCase())in t?u:e).slice(2),n?(r||t.addEventListener(e,Wi,l),(t.l||(t.l={}))[e]=n):t.removeEventListener(e,Wi,l)):"list"!==e&&"tagName"!==e&&"form"!==e&&!i&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/^xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n?t.removeAttribute(e):t.setAttribute(e,n))}function Wi(t){this.l[t.type](_i.event?_i.event(t):t)}function Li(t,e,n,r,i,a,o,s,l){var u,c,p,f,h,d,g,v,m,b,y=e.type;if(void 0!==e.constructor)return null;(u=_i.__b)&&u(e);try{t:if("function"==typeof y){if(v=e.props,m=(u=y.contextType)&&r[u.__c],b=u?m?m.props.value:u.__p:r,n.__c?g=(c=e.__c=n.__c).__p=c.__E:("prototype"in y&&y.prototype.render?e.__c=c=new y(v,b):(e.__c=c=new Ai(v,b),c.constructor=y,c.render=Ki),m&&m.sub(c),c.props=v,c.state||(c.state={}),c.context=b,c.__n=r,p=c.__d=!0,c.__h=[]),null==c.__s&&(c.__s=c.state),null!=y.getDerivedStateFromProps&&Oi(c.__s==c.state?c.__s=Oi({},c.__s):c.__s,y.getDerivedStateFromProps(v,c.__s)),f=c.props,h=c.state,p)null==y.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==y.getDerivedStateFromProps&&null==c.__e&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(v,b),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(v,c.__s,b)){for(c.props=v,c.state=c.__s,c.__d=!1,(c.__v=e).__e=n.__e,e.__k=n.__k,u=0;u<e.__k.length;u++)e.__k[u]&&(e.__k[u].__p=e);break t}null!=c.componentWillUpdate&&c.componentWillUpdate(v,c.__s,b),null!=c.componentDidUpdate&&c.__h.push(function(){c.componentDidUpdate(f,h,d)})}c.context=b,c.props=v,c.state=c.__s,(u=_i.__r)&&u(e),c.__d=!1,c.__v=e,c.__P=t,u=c.render(c.props,c.state,c.context),e.__k=Fi(null!=u&&u.type==Gi&&null==u.key?u.props.children:u),null!=c.getChildContext&&(r=Oi(Oi({},r),c.getChildContext())),p||null==c.getSnapshotBeforeUpdate||(d=c.getSnapshotBeforeUpdate(f,h)),Xi(t,e,n,r,i,a,o,s,l),c.base=e.__e,c.__h.length&&o.push(c),g&&(c.__E=c.__p=null),c.__e=null}else e.__e=function(t,e,n,r,i,a,o,s){var l,u,c,p,f,h=n.props,d=e.props;if(i="svg"===e.type||i,null==t&&null!=a)for(l=0;l<a.length;l++)if(null!=(u=a[l])&&(null===e.type?3===u.nodeType:u.localName===e.type)){t=u,a[l]=null;break}if(null==t){if(null===e.type)return document.createTextNode(d);t=i?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type),a=null}if(null===e.type)null!=a&&(a[a.indexOf(t)]=null),h!==d&&(t.data=d);else if(e!==n){if(null!=a&&(a=Di.slice.call(t.childNodes)),c=(h=n.props||Mi).dangerouslySetInnerHTML,p=d.dangerouslySetInnerHTML,!s){if(h===Mi)for(h={},f=0;f<t.attributes.length;f++)h[t.attributes[f].name]=t.attributes[f].value;(p||c)&&(p&&c&&p.__html==c.__html||(t.innerHTML=p&&p.__html||""))}(function(t,e,n,r,i){var a;for(a in n)a in e||Ii(t,a,null,n[a],r);for(a in e)i&&"function"!=typeof e[a]||"value"===a||"checked"===a||n[a]===e[a]||Ii(t,a,e[a],n[a],r)})(t,d,h,i,s),e.__k=e.props.children,p||Xi(t,e,n,r,"foreignObject"!==e.type&&i,a,o,Mi,s),s||("value"in d&&void 0!==d.value&&d.value!==t.value&&(t.value=null==d.value?"":d.value),"checked"in d&&void 0!==d.checked&&d.checked!==t.checked&&(t.checked=d.checked))}return t}(n.__e,e,n,r,i,a,o,l);(u=_i.diffed)&&u(e)}catch(t){_i.__e(t,e,n)}return e.__e}function qi(t,e){_i.__c&&_i.__c(e,t),t.some(function(e){try{t=e.__h,e.__h=[],t.some(function(t){t.call(e)})}catch(t){_i.__e(t,e.__v)}})}function Hi(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){_i.__e(t,n)}}function Ui(t,e,n){var r,i,a;if(_i.unmount&&_i.unmount(t),(r=t.ref)&&Hi(r,null,e),n||"function"==typeof t.type||(n=null!=(i=t.__e)),t.__e=t.__d=null,null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){_i.__e(t,e)}r.base=r.__P=null}if(r=t.__k)for(a=0;a<r.length;a++)r[a]&&Ui(r[a],e,n);null!=i&&ki(i)}function Ki(t,e,n){return this.constructor(t,n)}function Vi(t,e,n){var r,i,a;_i.__p&&_i.__p(t,e),i=(r=n===Si)?null:n&&n.__k||e.__k,t=Ri(Gi,null,[t]),a=[],Li(e,(r?e:n||e).__k=t,i||Mi,Mi,void 0!==e.ownerSVGElement,n&&!r?[n]:i?null:Di.slice.call(e.childNodes),a,n||Mi,r),qi(a,t)}_i={},Ai.prototype.setState=function(t,e){var n=this.__s!==this.state&&this.__s||(this.__s=Oi({},this.state));"function"==typeof t&&!(t=t(n,this.props))||Oi(n,t),null!=t&&this.__v&&(this.__e=!1,e&&this.__h.push(e),Ti(this))},Ai.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ti(this))},Ai.prototype.render=Gi,xi=[],wi="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ei=_i.debounceRendering,_i.__e=function(t,e,n){for(var r;e=e.__p;)if((r=e.__c)&&!r.__p)try{if(r.constructor&&null!=r.constructor.getDerivedStateFromError)r.setState(r.constructor.getDerivedStateFromError(t));else{if(null==r.componentDidCatch)continue;r.componentDidCatch(t)}return Ti(r.__E=r)}catch(e){t=e}throw t},Si=Mi;var $i,Zi=[],Ji=_i.__r;_i.__r=function(t){Ji&&Ji(t),($i=t.__c).__H&&($i.__H.t.forEach(aa),$i.__H.t.forEach(oa),$i.__H.t=[])};var Qi=_i.diffed;_i.diffed=function(t){Qi&&Qi(t);var e=t.__c;if(e){var n=e.__H;n&&n.t.length&&na(Zi.push(e))}};var ta=_i.__c;_i.__c=function(t,e){e.some(function(t){t.__h.forEach(aa),t.__h=t.__h.filter(function(t){return!t.u||oa(t)})}),ta&&ta(t,e)};var ea=_i.unmount;_i.unmount=function(t){ea&&ea(t);var e=t.__c;if(e){var n=e.__H;n&&n.i.forEach(function(t){return t.m&&t.m()})}};var na=function(){};function ra(){Zi.some(function(t){t.__P&&(t.__H.t.forEach(aa),t.__H.t.forEach(oa),t.__H.t=[])}),Zi=[]}if("undefined"!=typeof window){var ia=_i.requestAnimationFrame;na=function(t){1!==t&&ia===_i.requestAnimationFrame||((ia=_i.requestAnimationFrame)||function(t){function e(){clearTimeout(n),cancelAnimationFrame(r),setTimeout(t)}var n=setTimeout(e,100),r=requestAnimationFrame(e)})(ra)}}function aa(t){t.m&&t.m()}function oa(t){var e=t.u();"function"==typeof e&&(t.m=e)}var sa=_i.__e;_i.__e=function(t,e,n){if(t.then&&n)for(var r,i=e;i=i.__p;)if((r=i.__c)&&r.o)return n&&(e.__e=n.__e,e.__k=n.__k),void r.o(t);sa(t,e,n)},(new Ai).o=function(t){var e=this;e.__u.push(t);function n(){e.__u[e.__u.indexOf(t)]=e.__u[e.__u.length-1],e.__u.pop(),0==e.__u.length&&(e.__f&&Ui(e.__f),e.__v.__e=null,e.__v.__k=e.state.u,e.setState({u:null}))}null==e.state.u&&(e.__f=e.__f&&function(t,e){return e=Oi(Oi({},t.props),e),2<arguments.length&&(e.children=Di.slice.call(arguments,2)),zi(t.type,e,e.key||t.key,e.ref||t.ref)}(e.__f),e.setState({u:e.__v.__k}),function t(e){for(var n=0;n<e.length;n++){var r=e[n];null!=r&&("function"!=typeof r.type&&r.__e?(i=r.__e,a=void 0,(a=i.parentNode)&&a.removeChild(i)):r.__k&&t(r.__k))}var i,a}(e.__v.__k),e.__v.__k=[]),t.then(n,n)};var la="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,ua=/^(?:accent|alignment|arabic|baseline|cap|clip|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vector|vert|word|writing|x)[A-Z]/,ca=_i.event;_i.event=function(t){return ca&&(t=ca(t)),t.persist=function(){},t.nativeEvent=t};var pa=function(){};function fa(t){var e=this,n=t.container,r=Ri(pa,{context:e.context},t.vnode);return e.i&&e.i!==n&&(e.l.parentNode&&e.i.removeChild(e.l),Ui(e.s),e.v=!1),t.vnode?e.v?(n.__k=e.__k,Vi(r,n),e.__k=n.__k):(e.l=document.createTextNode(""),function(t,e){Vi(t,e,Si)}("",n),n.appendChild(e.l),e.v=!0,Vi(r,e.i=n,e.l),e.__k=this.l.__k):e.v&&(e.l.parentNode&&e.i.removeChild(e.l),Ui(e.s)),e.s=r,e.componentWillUnmount=function(){e.l.parentNode&&e.i.removeChild(e.l),Ui(e.s)},null}function ha(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Ri.apply(void 0,t),r=n.type,i=n.props;return"function"!=typeof r&&(i.defaultValue&&(i.value||0===i.value||(i.value=i.defaultValue),delete i.defaultValue),Array.isArray(i.value)&&i.multiple&&"select"===r&&(Fi(i.children).forEach(function(t){-1!=i.value.indexOf(t.props.value)&&(t.props.selected=!0)}),delete i.value),function(t,e){var n,r,i;for(i in e)if(n=ua.test(i))break;if(n)for(i in r=t.props={},e)r[ua.test(i)?i.replace(/([A-Z0-9])/,"-$1").toLowerCase():i]=e[i]}(n,i)),n.preactCompatNormalized=!1,function(e){return e.preactCompatNormalized=!0,function(){var t=e.props;(t.class||t.className)&&(da.enumerable="className"in t,t.className&&(t.class=t.className),Object.defineProperty(t,"className",da))}(),e}(n)}pa.prototype.getChildContext=function(){return this.props.context},pa.prototype.render=function(t){return t.children};var da={configurable:!0,get:function(){return this.class}};function ga(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var r in e)if("__source"!==r&&t[r]!==e[r])return!0;return!1}var va,ma=((va=Ai)&&(ba.__proto__=va),((ba.prototype=Object.create(va&&va.prototype)).constructor=ba).prototype.shouldComponentUpdate=function(t,e){return ga(this.props,t)||ga(this.state,e)},ba);function ba(t){va.call(this,t),this.isPureReactComponent=!0}function ya(t,e){t["UNSAFE_"+e]&&!t[e]&&Object.defineProperty(t,e,{configurable:!1,get:function(){return this["UNSAFE_"+e]},set:function(t){this["UNSAFE_"+e]=t}})}Ai.prototype.isReactComponent={};var _a=_i.vnode;_i.vnode=function(a){a.$$typeof=la,function(){var t=a.type,e=a.props;if(e&&"string"==typeof t){var n={};for(var r in e)/^on(Ani|Tra)/.test(r)&&(e[r.toLowerCase()]=e[r],delete e[r]),n[r.toLowerCase()]=r;if(n.ondoubleclick&&(e.ondblclick=e[n.ondoubleclick],delete e[n.ondoubleclick]),n.onbeforeinput&&(e.onbeforeinput=e[n.onbeforeinput],delete e[n.onbeforeinput]),n.onchange&&("textarea"===t||"input"===t.toLowerCase()&&!/^fil|che|ra/i.test(e.type))){var i=n.oninput||"oninput";e[i]||(e[i]=e[n.onchange],delete e[n.onchange])}}}();var t=a.type;t&&t.t&&a.ref&&(a.props.ref=a.ref,a.ref=null),"function"==typeof t&&!t.p&&t.prototype&&(ya(t.prototype,"componentWillMount"),ya(t.prototype,"componentWillReceiveProps"),ya(t.prototype,"componentWillUpdate"),t.p=!0),_a&&_a(a)};var xa=function(t,e){return(xa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var wa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={scrollPos:0},t.width=0,t.height=0,t}!function(t,e){function n(){this.constructor=t}xa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(t,e);var n=t.prototype;return n.render=function(){return ha("canvas",{ref:f(this,"canvasElement"),style:this.props.style})},n.componentDidMount=function(){var t=this.canvasElement.getContext("2d");this.canvasContext=t,this.resize()},n.componentDidUpdate=function(){this.resize()},n.scroll=function(t){this.draw(t)},n.resize=function(){var t=this.canvasElement,e=this.props,n=e.width,r=e.height;this.width=n||t.offsetWidth,this.height=r||t.offsetHeight,t.width=2*this.width,t.height=2*this.height,this.draw()},n.draw=function(t){void 0===t&&(t=this.state.scrollPos);var e=this.props,n=e.unit,r=e.zoom,i=e.type,a=e.backgroundColor,o=e.lineColor,s=this.width,l=this.height;this.state.scrollPos=t;var u=this.canvasContext,c="horizontal"===i;u.rect(0,0,2*s,2*l),u.fillStyle=a,u.fill(),u.save(),u.scale(2,2),u.strokeStyle=o,u.lineWidth=1,u.font="10px sans-serif",u.fillStyle="#ffffff",u.translate(.5,0),u.beginPath();for(var p=c?s:l,f=r*n,h=Math.floor(t*r/f),d=Math.ceil((t*r+p)/f)-h,g=0;g<d;++g){var v=((g+h)*n-t)*r;if(-f<=v&&v<p){var m=c?3+v:s-18,b=c?l-18:v-4;c?u.fillText(""+(g+h)*n,m,b):(u.save(),u.translate(m,b),u.rotate(-Math.PI/2),u.fillText(""+(g+h)*n,0,0),u.restore())}for(var y=0;y<10;++y){var _=v+y/10*f;if(!(_<0||p<=_)){var x=0===y?c?l:s:y%2==0?10:7,w=c?_:s-x,E=c?_:s,S=c?l-x:_,C=c?l:_;u.moveTo(w,S),u.lineTo(E,C)}}}u.stroke(),u.restore()},t.defaultProps={type:"horizontal",zoom:1,width:0,height:0,unit:50,style:{width:"100%",height:"100%"},backgroundColor:"#333333",lineColor:"#777777"},t}(ma),Ea=function(){return(Ea=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Sa(t,e,n,r){var i=Ra(t),a=Ra(e),o=Ra(r);return Ma(za(r[0],Ga(i,o)),za(r[0],Ga(a,o)),n[0])}function Ca(t){return t.touches?Oa(t.touches):[ka(t)]}function Ma(t,e,n){var r=t.clientX,i=t.clientY;return{clientX:r,clientY:i,deltaX:r-e.clientX,deltaY:i-e.clientY,distX:r-n.clientX,distY:i-n.clientY}}function Da(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Pa(t,n,r){return t.map(function(t,e){return Ma(t,n[e],r[e])})}function Oa(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(ka(t[r]));return n}function ka(t){return{clientX:t.clientX,clientY:t.clientY}}function Ra(t){return{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function za(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function Ga(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var Aa=function(){function t(t,e){var a=this;void 0===e&&(e={}),this.el=t,this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.onDragStart=function(t){if(a.flag||!1!==t.cancelable){if(function(t){return t.touches&&2<=t.touches.length}(t)){if(!a.flag&&t.touches.length!==t.changedTouches.length)return;a.pinchFlag||a.onPinchStart(t)}if(!a.flag){var e=a.startClients[0]?a.startClients:Ca(t);a.customDist=[0,0],a.flag=!0,a.isDrag=!1,a.startClients=e,a.prevClients=e,a.datas={};var n=Ma(e[a.movement=0],a.prevClients[0],a.startClients[0]),r=a.options,i=r.dragstart;(r.preventRightClick&&3===t.which||!1===(i&&i(Ea({datas:a.datas,inputEvent:t},n))))&&(a.startClients=[],a.prevClients=[],a.flag=!1),a.flag&&t.preventDefault()}}},this.onDrag=function(t,e){if(a.flag){var n=Ca(t);a.pinchFlag&&a.onPinch(t,n);var r=a.move([0,0],t,n);if(r&&(r.deltaX||r.deltaY)){var i=a.options.drag;i&&i(Ea({},r,{isScroll:!!e,inputEvent:t}))}}},this.onDragEnd=function(t){if(a.flag){a.pinchFlag&&a.onPinchEnd(t),a.flag=!1;var e=a.options.dragend,n=a.prevClients,r=a.startClients,i=a.pinchFlag?Sa(n,n,r,a.startPinchClients):Ma(n[0],n[0],r[0]);a.startClients=[],a.prevClients=[],e&&e(Ea({datas:a.datas,isDrag:a.isDrag,inputEvent:t},i))}},this.options=Ea({container:t,preventRightClick:!0,pinchThreshold:0,events:["touch","mouse"]},e);var n=this.options,r=n.container,i=n.events;if(this.isTouch=-1<i.indexOf("touch"),this.isMouse=-1<i.indexOf("mouse"),this.customDist=[0,0],this.isMouse&&(B(t,"mousedown",this.onDragStart),B(r,"mousemove",this.onDrag),B(r,"mouseup",this.onDragEnd)),this.isTouch){var o={passive:!1};B(t,"touchstart",this.onDragStart,o),B(r,"touchmove",this.onDrag,o),B(r,"touchend",this.onDragEnd,o)}}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(e,n,t,r){void 0===r&&(r=!0),this.flag&&(this.startClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),this.prevClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),r&&this.onDrag(t,!0))},e.move=function(t,e,n){var r=t[0],i=t[1];void 0===n&&(n=this.prevClients);var a=this.customDist,o=this.prevClients,s=this.startClients,l=this.pinchFlag?Sa(n,o,s,this.startPinchClients):Ma(n[0],o[0],s[0]);a[0]+=r,a[1]+=i,l.deltaX+=r,l.deltaY+=i;var u=l.deltaX,c=l.deltaY;return l.distX+=a[0],l.distY+=a[1],this.movement+=Math.sqrt(u*u+c*c),this.prevClients=n,this.isDrag=!0,Ea({datas:this.datas},l,{isScroll:!1,inputEvent:e})},e.onPinchStart=function(t){var e,n,r=this.options,i=r.pinchstart,a=r.pinchThreshold;if(!(this.isDrag&&this.movement>a)){var o=Oa(t.changedTouches);if(this.pinchFlag=!0,(e=this.startClients).push.apply(e,o),(n=this.prevClients).push.apply(n,o),this.startDistance=Da(this.prevClients),this.startPinchClients=this.prevClients.slice(),i){var s=this.prevClients,l=Ra(s),u=Ma(l,l,l);i(Ea({datas:this.datas,touches:Pa(s,s,s)},u,{inputEvent:t}))}}},e.onPinch=function(t,e){if(this.flag&&this.pinchFlag){this.isPinch=!0;var n=this.options.pinch;if(n){var r=this.prevClients,i=this.startClients,a=Ma(Ra(e),Ra(r),Ra(i)),o=Da(e);n(Ea({datas:this.datas,touches:Pa(e,r,i),scale:o/this.startDistance,distance:o},a,{inputEvent:t}))}}},e.onPinchEnd=function(t){if(this.flag&&this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.options.pinchend;if(n){var r=this.prevClients,i=this.startClients,a=Ma(Ra(r),Ra(r),Ra(i));n(Ea({datas:this.datas,isPinch:e,touches:Pa(r,r,i)},a,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}}},e.unset=function(){var t=this.el,e=this.options.container;this.isMouse&&(I(t,"mousedown",this.onDragStart),I(e,"mousemove",this.onDrag),I(e,"mouseup",this.onDragEnd)),this.isTouch&&(I(t,"touchstart",this.onDragStart),I(e,"touchmove",this.onDrag),I(e,"touchend",this.onDragEnd))},t}();var Na=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function ja(i){var a,o="rCS"+function(t){return Na(t).toString(36)}(i),s=0;return{className:o,inject:function(t){var e,n=function(t){if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(t),r=0===s;return(n||r)&&(e=function(n,t,e){var r=document.createElement("style");return r.setAttribute("type","text/css"),r.innerHTML=t.replace(/([^}{]*){/gm,function(t,e){return A(e).map(function(t){return-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?""+t.replace(/\:host/g,"."+n):"."+n+" "+t}).join(", ")+"{"}),(e||document.head||document.body).appendChild(r),r}(o,i)),r&&(a=e),n||++s,{destroy:function(){n?(t.removeChild(e),e=null):(0<s&&--s,0===s&&a&&(a.parentNode.removeChild(a),a=null))}}}}}var Ta=function(t,e){return(Ta=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Ya=function(){return(Ya=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var Xa=function(t,e){return(Xa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Fa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map(function(t){return t.split(" ").map(function(t){return t?""+e+t:""}).join(" ")}).join(" ")}.apply(void 0,["scena-"].concat(t))}Fa("ruler");var Ba,Ia,Wa,La=Fa("guide","adder"),qa=Fa("guides"),Ha=Fa("guide"),Ua=Fa("dragging"),Ka=(Ba="div",Ia='\n{\n    position: relative;\n}\ncanvas {\n    position: relative;\n}\n.guides {\n    position: absolute;\n    top: 0;\n    left: 0;\n    will-change: transform;\n    z-index: 2000;\n}\n:host.horizontal .guides {\n    width: 100%;\n    height: 0;\n    top: 30px;\n}\n:host.vertical .guides {\n    height: 100%;\n    width: 0;\n    left: 30px;\n}\n.guide {\n    position: absolute;\n    background: #f33;\n    z-index: 2;\n}\n.guide.dragging:before {\n    position: absolute;\n    content: "";\n    width: 100%;\n    height: 100%;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n:host.horizontal .guide {\n    width: 100%;\n    height: 1px;\n    cursor: row-resize;\n}\n:host.vertical .guide {\n    width: 1px;\n    height: 100%;\n    cursor: col-resize;\n}\n.mobile :host.horizontal .guide {\n    transform: scale(1, 2);\n}\n.mobile :host.vertical .guide {\n    transform: scale(2, 1);\n}\n:host.horizontal .guide:before {\n    height: 20px;\n}\n:host.vertical .guide:before {\n    width: 20px;\n}\n.adder {\n    display: none;\n}\n.adder.dragging {\n    display: block;\n}\n'.replace(/\.([^{,\s\d.]+)/g,"."+"scena-"+"$1"),Wa=ja(Ia),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function n(){this.constructor=t}Ta(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["className"]);return ha(Ba,Ya({ref:function(e,n){return function(t){t&&(e[n]=t)}}(this,"element"),className:n+" "+Wa.className},r))},e.prototype.componentDidMount=function(){this.injectResult=Wa.inject(this.element)},e.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.prototype.getElement=function(){return this.element},e}(Ai)),Va=function(t){function e(){var u=null!==t&&t.apply(this,arguments)||this;return u.state={guides:[]},u.scrollPos=0,u.guideElements=[],u.onDragStart=function(t){var e=t.datas,n=t.clientX,r=t.clientY,i=t.inputEvent,a="horizontal"===u.props.type,o=u.guidesElement.getBoundingClientRect();e.offset=a?o.top:o.left,X(e.target,Ua),u.onDrag({datas:e,clientX:n,clientY:r}),i.stopPropagation(),i.preventDefault()},u.onDrag=function(t){var e=t.datas,n=t.clientX,r=t.clientY,i="horizontal"===u.props.type,a=Math.round((i?r:n)-e.offset);return e.target.style.transform=u.getTranslateName()+"("+a+"px)",a},u.onDragEnd=function(t){var e=t.datas,n=t.clientX,r=t.clientY,i=u.onDrag({datas:e,clientX:n,clientY:r}),a=u.state.guides,o=u.props.setGuides,s=Math.round(i/u.props.zoom);if(F(e.target,Ua),e.fromRuler)i>=u.scrollPos&&a.indexOf(s)<0&&u.setState({guides:a.concat([s])},function(){o(u.state.guides)});else{var l=e.target.getAttribute("data-index");i<u.scrollPos||-1<a.indexOf(s)?a.splice(l,1):a[l]=s,u.setState({guides:a.slice()},function(){o(u.state.guides)})}},u}!function(t,e){function n(){this.constructor=t}Xa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=t.className,n=t.type,r=t.width,i=t.height,a=t.unit,o=t.zoom,s=t.style,l=t.rulerStyle,u=t.backgroundColor,c=t.lineColor,p=t.textColor;return ha(Ka,{ref:f(this,"manager"),className:Fa("manager",n)+" "+e,style:s},ha(wa,{ref:f(this,"ruler"),type:n,width:r,height:i,unit:a,zoom:o,backgroundColor:u,lineColor:c,style:l,textColor:p}),ha("div",{className:qa,ref:f(this,"guidesElement")},ha("div",{className:La,ref:f(this,"adderElement")}),this.renderGuides()))},n.renderGuides=function(){var n=this,t=this.props,r=t.type,i=t.zoom,a="horizontal"===r?"translateY":"translateX",e=this.state.guides;return this.guideElements=[],e.map(function(t,e){return ha("div",{className:Fa("guide",r),ref:function(e,n,r){return function(t){t&&(e[n][r]=t)}}(n,"guideElements",e),key:e,"data-index":e,style:{transform:a+"("+t*i+"px)"}})})},n.componentDidMount=function(){var r=this;this.dragger=new Aa(this.manager.getElement(),{container:document.body,dragstart:function(t){var e=t.inputEvent.target,n=t.datas;if(e===r.ruler.canvasElement)t.datas.fromRuler=!0,n.target=r.adderElement;else{if(!Y(e,Ha))return!1;n.target=e}r.onDragStart(t)},drag:this.onDrag,dragend:this.onDragEnd})},n.componentWillUnmount=function(){this.dragger.unset()},n.getGuides=function(){return this.state.guides},n.scrollGuides=function(n){var t=this.props.zoom,e=this.guidesElement;this.scrollPos=n,e.style.transform=this.getTranslateName()+"("+-n*t+"px)";var r=this.state.guides;this.guideElements.forEach(function(t,e){t&&(t.style.display=-n+r[e]<0?"none":"block")})},n.resize=function(){this.ruler.resize()},n.scroll=function(t){this.ruler.scroll(t)},n.getTranslateName=function(){return"horizontal"===this.props.type?"translateY":"translateX"},e.defaultProps={className:"",type:"horizontal",setGuides:function(){},zoom:1,style:{width:"100%",height:"100%"}},e}(ma),$a=function(t,e){return($a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Za=function(){return(Za=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var Ja=["setGuides","type","width","height","rulerStyle","unit","zoom","style","backgroundColor","lineColor","container","className","textColor"],Qa=function(n){function t(t){var e=n.call(this,t)||this;return e.state={},e.state=e.props,e}return function(t,e){function n(){this.constructor=t}$a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(t,n),t.prototype.render=function(){var t=this.state,e=t.container,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["container"]);return function(t,e){return Ri(fa,{vnode:t,container:e})}(Ri(Va,Za({ref:f(this,"preactGuides")},n)),e)},t}(Ai),to=function(){function t(t,e){void 0===e&&(e={}),this.tempElement=document.createElement("div"),Vi(Ri(Qa,Za({ref:f(this,"innerGuides")},e,{container:t})),this.tempElement)}var e=t.prototype;return e.scroll=function(t){this.getPreactGuides().scroll(t)},e.scrollGuides=function(t){this.getPreactGuides().scrollGuides(t)},e.resize=function(){this.getPreactGuides().resize()},e.getGuides=function(){return this.getPreactGuides().getGuides()},e.setState=function(t,e){this.innerGuides.setState(t,e)},e.destroy=function(){Vi("",this.tempElement),this.tempElement=null,this.innerGuides=null},e.getPreactGuides=function(){return this.innerGuides.preactGuides},t=function(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(o=(a<3?i(o):3<a?i(e,n,o):i(e,n))||o);return 3<a&&o&&Object.defineProperty(e,n,o),o}([a(Ja,function(t,n){Object.defineProperty(t,n,{get:function(){return this.getPreactGuides().props[n]},set:function(t){var e;this.innerGuides.setState(((e={})[n]=t,e))},enumerable:!0,configurable:!0})})],t)}(),eo=function(t,e){return(eo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var no,ro=(function(t,e){function n(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return o[t];var n,r=String(t);return(n=i[r.toLowerCase()])?n:(n=a[r.toLowerCase()])||(1===r.length?r.charCodeAt(0):void 0)}n.isEventKey=function(t,e){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;if(null==n)return!1;if("string"==typeof e){var r;if(r=i[e.toLowerCase()])return r===n;if(r=a[e.toLowerCase()])return r===n}else if("number"==typeof e)return e===n;return!1}};var i=(e=t.exports=n).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=e.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(r=97;r<123;r++)i[String.fromCharCode(r)]=r-32;for(var r=48;r<58;r++)i[r-48]=r;for(r=1;r<13;r++)i["f"+r]=r+111;for(r=0;r<10;r++)i["numpad "+r]=r+96;var o=e.names=e.title={};for(r in i)o[i[r]]=r;for(var s in a)i[s]=a[s]}(no={exports:{}},no.exports),no.exports),io=(ro.code,ro.codes,ro.aliases,ro.names);ro.title;function ao(t){return Array.isArray(t)}function oo(t){return"string"==typeof t}function so(t,e,n,r){t.addEventListener(e,n,r)}var lo,uo={"+":"plus","left command":"meta","right command":"meta"},co={shift:1,ctrl:2,alt:3,meta:4};function po(t){var e=io[t]||"";for(var n in uo)e=e.replace(n,uo[n]);return e.replace(/\s/g,"")}function fo(t){var e=t.slice();return e.sort(function(t,e){return(co[t]||5)-(co[e]||5)}),e}var ho=function(n){function t(t){void 0===t&&(t=window);var e=n.call(this)||this;return e.ctrlKey=!1,e.altKey=!1,e.shiftKey=!1,e.metaKey=!1,e.clear=function(){return e.ctrlKey=!1,e.altKey=!1,e.shiftKey=!1,e.metaKey=!1,e},e.keydownEvent=function(t){e.triggerEvent("keydown",t)},e.keyupEvent=function(t){e.triggerEvent("keyup",t)},so(t,"blur",e.clear),so(t,"keydown",e.keydownEvent),so(t,"keyup",e.keyupEvent),e}!function(t,e){function n(){this.constructor=t}eo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(t,n);var e=t.prototype;return Object.defineProperty(t,"global",{get:function(){return lo=lo||new t},enumerable:!0,configurable:!0}),e.keydown=function(t,e){return this.addEvent("keydown",t,e)},e.offKeydown=function(t,e){return this.removeEvent("keydown",t,e)},e.offKeyup=function(t,e){return this.removeEvent("keyup",t,e)},e.keyup=function(t,e){return this.addEvent("keyup",t,e)},e.addEvent=function(t,e,n){return ao(e)?this.on(t+"."+fo(e).join("."),n):oo(e)?this.on(t+"."+e,n):this.on(t,e),this},e.removeEvent=function(t,e,n){return ao(e)?this.off(t+"."+fo(e).join("."),n):oo(e)?this.off(t+"."+e,n):this.off(t,e),this},e.triggerEvent=function(t,e){this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var n=po(e.keyCode),r={key:n,isToggle:"ctrl"===n||"shift"===n||"meta"===n||"alt"===n,inputEvent:e,keyCode:e.keyCode,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};this.trigger(t,r),this.trigger(t+"."+n,r);var i=function(t,e){void 0===e&&(e=po(t.keyCode));var n=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return-1===n.indexOf(e)&&n.push(e),n.filter(Boolean)}(e,n);1<i.length&&this.trigger(t+"."+i.join("."),r)},t}(t),go=Gt();(go.isMobile||-1<go.os.name.indexOf("ios")||-1<go.browser.name.indexOf("safari"))&&X(document.body,"mobile");var vo=document.querySelector(".editor"),mo=document.querySelector(".label"),bo=document.querySelector(".rulers"),yo=bo.querySelector(".ruler.horizontal"),_o=bo.querySelector(".ruler.vertical"),xo=document.querySelector('.control input[name="x"]'),wo=document.querySelector('.control input[name="y"]'),Eo=document.querySelector('.control input[name="w"]'),So=document.querySelector('.control input[name="h"]'),Co=document.querySelector('.control input[name="r"]'),Mo=document.querySelector(".moveable.target"),Do=new Ci({left:"0px",top:"0px",width:"250px",height:"200px",transform:{translateX:window.innerWidth/2-125+"px",translateY:Math.max(700,window.innerHeight)/2-250+"px",rotate:"0deg",scaleX:1,scaleY:1}});function Po(t,e){function n(){e(t.value),ko(),zo.updateRect()}new ho(t).keyup("enter",n),t.addEventListener("blur",n)}function Oo(t){Do.set("transform","translateX",t[0]+"px"),Do.set("transform","translateY",t[1]+"px"),xo.value=""+t[0],wo.value=""+t[1]}function ko(){Mo.style.cssText+=Do.toCSS()}Po(xo,function(t){Do.set("transform","translateX",parseFloat(t)+"px")}),Po(wo,function(t){Do.set("transform","translateY",parseFloat(t)+"px")}),Po(Eo,function(t){Do.set("width",parseFloat(t)+"px")}),Po(So,function(t){Do.set("height",parseFloat(t)+"px")}),Po(Co,function(t){Do.set("transform","rotate",parseFloat(t)+"deg")}),xo.value=""+parseFloat(Do.get("transform","translateX")),wo.value=""+parseFloat(Do.get("transform","translateY")),ko();var Ro=!1,zo=new Br(vo,{target:Mo,draggable:!0,resizable:!0,rotatable:!0,snappable:!0,pinchable:!0,snapCenter:!0,snapThreshold:10,throttleResize:0,throttleRotate:1,keepRatio:!1,origin:!1,bounds:{left:30,top:30}}).on("dragStart",function(t){(0,t.set)([parseFloat(Do.get("transform","translateX")),parseFloat(Do.get("transform","translateY"))])}).on("drag",function(t){Oo(t.beforeTranslate)}).on("rotateStart",function(t){(0,t.set)(parseFloat(Do.get("transform","rotate")))}).on("rotate",function(t){var e=t.beforeRotate,n=t.clientX,r=t.clientY,i=t.isPinch;Do.set("transform","rotate",e+"deg"),Co.value=e+"",i||jo(n,r,e+"")}).on("resizeStart",function(t){var e=t.setOrigin,n=t.dragStart;e(["%","%"]),n&&n.set([parseFloat(Do.get("transform","translateX")),parseFloat(Do.get("transform","translateY"))])}).on("resize",function(t){var e=t.width,n=t.height,r=t.drag,i=t.clientX,a=t.clientY,o=t.isPinch;Do.set("width",e+"px"),Do.set("height",n+"px"),Oo(r.beforeTranslate),Eo.value=""+e,So.value=""+n,o||jo(i,a,e+" X "+n)}).on("pinchStart",function(){Ro=!0}).on("pinch",function(t){No(t.clientX,t.clientY)}).on("render",function(){Ro&&(mo.innerHTML="W: "+parseFloat(Do.get("width"))+"<br/>H: "+parseFloat(Do.get("height"))+"<br/>R: "+parseFloat(Do.get("transform","rotate"))+""),ko()}).on("renderEnd",function(){Ro=!1,mo.style.display="none"}),Go=new to(yo,{type:"horizontal",setGuides:To,backgroundColor:"#444444"}),Ao=new to(_o,{type:"vertical",setGuides:To,backgroundColor:"#444444"});function No(t,e){mo.style.cssText="display: block; transform: translate("+t+"px, "+(e-10)+"px) translate(-100%, -100%);"}function jo(t,e,n){No(t,e),mo.innerHTML=n}function To(){var t=window.innerWidth/2+15,e=window.innerHeight/2;zo.verticalGuidelines=n(Ao.getGuides().map(function(t){return t+30}),[t]),zo.horizontalGuidelines=n(Go.getGuides().map(function(t){return t+30}),[e])}function Yo(t){t?(zo.throttleRotate=30,zo.keepRatio=!0):(zo.throttleRotate=1,zo.keepRatio=!1)}ho.global.on("keydown",function(t){Yo(t.shiftKey)}).on("keyup",function(t){Yo(t.shiftKey)}),window.addEventListener("resize",function(){To(),zo.updateRect(),Go.resize(),Ao.resize()}),document.body.addEventListener("gesturestart",function(t){t.preventDefault()}),To();var Xo=document.querySelector(".draggable"),Fo=new Br(Xo.parentElement,{target:Xo,origin:!1,draggable:!0}).on("drag",function(t){var e=t.target,n=t.transform;e.style.transform=n}),Bo=document.querySelector(".resizable"),Io=new Br(Bo.parentElement,{target:Bo,origin:!1,resizable:!0}).on("resize",function(t){var e=t.target,n=t.width,r=t.height;e.style.width=n+"px",e.style.height=r+"px"}),Wo=document.querySelector(".scalable"),Lo=new Br(Wo.parentElement,{target:Wo,origin:!1,scalable:!0}).on("scale",function(t){var e=t.target,n=t.transform;e.style.transform=n}),qo=document.querySelector(".rotatable"),Ho=new Br(qo.parentElement,{target:qo,origin:!1,rotatable:!0}).on("rotate",function(t){var e=t.target,n=t.transform;e.style.transform=n}),Uo=document.querySelector(".warpable"),Ko=new Br(Uo.parentElement,{target:Uo,warpable:!0,origin:!1}).on("warp",function(t){var e=t.target,n=t.transform;e.style.transform=n}),Vo=document.querySelector(".snappable"),$o=(new Br(Vo.parentElement,{target:Vo,draggable:!0,snappable:!0,snapCenter:!0,origin:!1,verticalGuidelines:[0,150,200],horizontalGuidelines:[0,150,200]}).on("drag",function(t){var e=t.target,n=t.left,r=t.top;e.style.left=n+"px",e.style.top=r+"px"}),document.querySelector(".pinchable")),Zo=[1,1],Jo=0,Qo=new Br($o.parentElement,{target:$o,pinchable:["rotatable","scalable"],origin:!1}).on("rotate",function(t){var e=t.beforeDelta;Jo+=e,$o.style.transform="scale("+Zo.join(", ")+") rotate("+Jo+"deg)"}).on("scale",function(t){var e=t.delta;Zo[0]*=e[0],Zo[1]*=e[1],$o.style.transform="scale("+Zo.join(", ")+") rotate("+Jo+"deg)"}),ts=document.querySelector(".groupable"),es=[[0,0],[0,0],[0,0]],ns=new Br(ts.parentElement,{target:[].slice.call(ts.querySelectorAll("span")),origin:!1,draggable:!0}).on("dragGroup",function(t){t.events.forEach(function(t,e){var n=t.target,r=t.beforeDelta;es[e][0]+=r[0],es[e][1]+=r[1],n.style.transform="translate("+es[e][0]+"px, "+es[e][1]+"px)"})});window.addEventListener("resize",function(){Fo.updateRect(),Io.updateRect(),Lo.updateRect(),Ho.updateRect(),Ko.updateRect(),Qo.updateRect(),ns.updateRect()}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("pre").forEach(function(t){var e=t.getAttribute("data-group"),n=t.getAttribute("data-panel"),r=t.querySelector("code"),i=Ir[e]["preact"===n?"react":n].trim();"preact"===n&&(i=i.replace(/react/g,"preact")),r.innerText=i,hljs.highlightBlock(r)})});var rs={};[].slice.call(document.querySelectorAll("[data-tab]")).forEach(function(r){var t=r.getAttribute("data-group"),e=r.getAttribute("data-tab"),n=document.querySelector('[data-group="'+t+'"][data-panel="'+e+'"]');rs[t]||(rs[t]=[]),rs[t].push([r,n]),r.addEventListener("click",function(){rs[t].forEach(function(t){var e=t[0],n=t[1];r!==e&&(e.classList.remove("selected"),n.classList.remove("selected"))}),r.classList.add("selected"),n.classList.add("selected")})})}();
