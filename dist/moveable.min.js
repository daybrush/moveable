/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable.git
version: 0.7.1
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Moveable=e()}(this,function(){"use strict";var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var c=function(){return(c=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t){return void 0===t}var t=function(){var t=function(){function t(){this._eventHandler={},this.options={}}var e=t.prototype;return e.trigger=function(t,e){void 0===e&&(e={});var r=this._eventHandler[t]||[];if(!(0<r.length))return!0;r=r.concat(),e.eventType=t;var n=!1,i=[e],o=0;e.stop=function(){n=!0},e.currentTarget=this;for(var a=arguments.length,s=new Array(2<a?a-2:0),c=2;c<a;c++)s[c-2]=arguments[c];for(1<=s.length&&(i=i.concat(s)),o=0;r[o];o++)r[o].apply(this,i);return!n},e.once=function(i,o){if("object"==typeof i&&s(o)){var t,e=i;for(t in e)this.once(t,e[t]);return this}if("string"==typeof i&&"function"==typeof o){var a=this;this.on(i,function t(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];o.apply(a,r),a.off(i,t)})}return this},e.hasOn=function(t){return!!this._eventHandler[t]},e.on=function(t,e){if("object"==typeof t&&s(e)){var r,n=t;for(r in n)this.on(r,n[r]);return this}if("string"==typeof t&&"function"==typeof e){var i=this._eventHandler[t];s(i)&&(this._eventHandler[t]=[],i=this._eventHandler[t]),i.push(e)}return this},e.off=function(t,e){if(s(t))return this._eventHandler={},this;if(s(e)){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var r,n=t;for(r in n)this.off(r,n[r]);return this}var i,o,a=this._eventHandler[t];if(a)for(i=0;void 0!==(o=a[i]);i++)if(o===e){a=a.splice(i,1);break}return this},t}();return t.VERSION="2.1.2",t}();function h(e,r){return function(t){t&&(e[r]=t)}}var u=function(){},l={},p=[],f=[];function d(t,e){var r,n,i,o,a=f;for(o=arguments.length;2<o--;)p.push(arguments[o]);for(e&&null!=e.children&&(p.length||p.push(e.children),delete e.children);p.length;)if((n=p.pop())&&void 0!==n.pop)for(o=n.length;o--;)p.push(n[o]);else"boolean"==typeof n&&(n=null),(i="function"!=typeof t)&&(null==n?n="":"number"==typeof n?n=String(n):"string"!=typeof n&&(i=!1)),i&&r?a[a.length-1]+=n:a===f?a=[n]:a.push(n),r=i;var s=new u;return s.nodeName=t,s.children=a,s.attributes=null==e?void 0:e,s.key=null==e?void 0:e.key,void 0!==l.vnode&&l.vnode(s),s}function E(t,e){for(var r in e)t[r]=e[r];return t}function v(t,e){t&&("function"==typeof t?t(e):t.current=e)}var e="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,g=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,r=[];function o(t){!t._dirty&&(t._dirty=!0)&&1==r.push(t)&&e(a)}function a(){for(var t;t=r.pop();)t._dirty&&T(t)}function D(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function M(t){var e=E({},t.attributes);e.children=t.children;var r=t.nodeName.defaultProps;if(void 0!==r)for(var n in r)void 0===e[n]&&(e[n]=r[n]);return e}function P(t){var e=t.parentNode;e&&e.removeChild(t)}function m(t,e,r,n,i){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)v(r,null),v(n,t);else if("class"!==e||i)if("style"===e){if(n&&"string"!=typeof n&&"string"!=typeof r||(t.style.cssText=n||""),n&&"object"==typeof n){if("string"!=typeof r)for(var o in r)o in n||(t.style[o]="");for(var o in n)t.style[o]="number"==typeof n[o]&&!1===g.test(o)?n[o]+"px":n[o]}}else if("dangerouslySetInnerHTML"===e)n&&(t.innerHTML=n.__html||"");else if("o"==e[0]&&"n"==e[1]){var a=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),n?r||t.addEventListener(e,b,a):t.removeEventListener(e,b,a),(t._listeners||(t._listeners={}))[e]=n}else if("list"!==e&&"type"!==e&&!i&&e in t){try{t[e]=null==n?"":n}catch(t){}null!=n&&!1!==n||"spellcheck"==e||t.removeAttribute(e)}else{var s=i&&e!==(e=e.replace(/^xlink:?/,""));null==n||!1===n?s?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof n&&(s?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):t.setAttribute(e,n))}else t.className=n||""}function b(t){return this._listeners[t.type](l.event&&l.event(t)||t)}var O=[],Y=0,y=!1,w=!1;function X(){for(var t;t=O.shift();)t.componentDidMount&&t.componentDidMount()}function N(t,e,r,n,i,o){Y++||(y=null!=i&&void 0!==i.ownerSVGElement,w=null!=t&&!("__preactattr_"in t));var a=R(t,e,r,n,o);return i&&a.parentNode!==i&&i.appendChild(a),--Y||(w=!1,o||X()),a}function R(t,e,r,n,i){var o=t,a=y;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||i)?t.nodeValue!=e&&(t.nodeValue=e):(o=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(o,t),k(t,!0))),o.__preactattr_=!0,o;var s=e.nodeName;if("function"==typeof s)return function(t,e,r,n){var i=t&&t._component,o=i,a=t,s=i&&t._componentConstructor===e.nodeName,c=s,u=M(e);for(;i&&!c&&(i=i._parentComponent);)c=i.constructor===e.nodeName;i&&c&&(!n||i._component)?(A(i,u,3,r,n),t=i.base):(o&&!s&&(B(o),t=a=null),i=G(e.nodeName,u,r),t&&!i.nextBase&&(i.nextBase=t,a=null),A(i,u,1,r,n),t=i.base,a&&t!==a&&(a._component=null,k(a,!1)));return t}(t,e,r,n);if(y="svg"===s||"foreignObject"!==s&&y,s=String(s),(!t||!D(t,s))&&(o=function(t,e){var r=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return r.normalizedNodeName=t,r}(s,y),t)){for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),k(t,!0)}var c=o.firstChild,u=o.__preactattr_,l=e.children;if(null==u){u=o.__preactattr_={};for(var p=o.attributes,f=p.length;f--;)u[p[f].name]=p[f].value}return!w&&l&&1===l.length&&"string"==typeof l[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=l[0]&&(c.nodeValue=l[0]):(l&&l.length||null!=c)&&function(t,e,r,n,i){var o,a,s,c,u,l=t.childNodes,p=[],f={},d=0,h=0,v=l.length,g=0,m=e?e.length:0;if(0!==v)for(var b=0;b<v;b++){var y=l[b],w=y.__preactattr_;null!=(x=m&&w?y._component?y._component.__key:w.key:null)?(d++,f[x]=y):(w||(void 0!==y.splitText?!i||y.nodeValue.trim():i))&&(p[g++]=y)}if(0!==m)for(b=0;b<m;b++){var x;if(c=e[b],(u=null)!=(x=c.key))d&&void 0!==f[x]&&(u=f[x],f[x]=void 0,d--);else if(h<g)for(o=h;o<g;o++)if(void 0!==p[o]&&(S=a=p[o],_=i,"string"==typeof(C=c)||"number"==typeof C?void 0!==S.splitText:"string"==typeof C.nodeName?!S._componentConstructor&&D(S,C.nodeName):_||S._componentConstructor===C.nodeName)){u=a,p[o]=void 0,o===g-1&&g--,o===h&&h++;break}u=R(u,c,r,n),s=l[b],u&&u!==t&&u!==s&&(null==s?t.appendChild(u):u===s.nextSibling?P(s):t.insertBefore(u,s))}var S,C,_;if(d)for(var b in f)void 0!==f[b]&&k(f[b],!1);for(;h<=g;)void 0!==(u=p[g--])&&k(u,!1)}(o,l,r,n,w||null!=u.dangerouslySetInnerHTML),function(t,e,r){var n;for(n in r)e&&null!=e[n]||null==r[n]||m(t,n,r[n],r[n]=void 0,y);for(n in e)"children"===n||"innerHTML"===n||n in r&&e[n]===("value"===n||"checked"===n?t[n]:r[n])||m(t,n,r[n],r[n]=e[n],y)}(o,e.attributes,u),y=a,o}function k(t,e){var r=t._component;r?B(r):(null!=t.__preactattr_&&v(t.__preactattr_.ref,null),!1!==e&&null!=t.__preactattr_||P(t),x(t))}function x(t){for(t=t.lastChild;t;){var e=t.previousSibling;k(t,!0),t=e}}var S=[];function G(t,e,r){var n,i=S.length;for(t.prototype&&t.prototype.render?(n=new t(e,r),_.call(n,e,r)):((n=new _(e,r)).constructor=t,n.render=C);i--;)if(S[i].constructor===t)return n.nextBase=S[i].nextBase,S.splice(i,1),n;return n}function C(t,e,r){return this.constructor(t,r)}function A(t,e,r,n,i){t._disable||(t._disable=!0,t.__ref=e.ref,t.__key=e.key,delete e.ref,delete e.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,n)),n&&n!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=n),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==r&&(1!==r&&!1===l.syncComponentUpdates&&t.base?o(t):T(t,1,i)),v(t.__ref,t))}function T(t,e,r,n){if(!t._disable){var i,o,a,s=t.props,c=t.state,u=t.context,l=t.prevProps||s,p=t.prevState||c,f=t.prevContext||u,d=t.base,h=t.nextBase,v=d||h,g=t._component,m=!1,b=f;if(t.constructor.getDerivedStateFromProps&&(c=E(E({},c),t.constructor.getDerivedStateFromProps(s,c)),t.state=c),d&&(t.props=l,t.state=p,t.context=f,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(s,c,u)?m=!0:t.componentWillUpdate&&t.componentWillUpdate(s,c,u),t.props=s,t.state=c,t.context=u),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!m){i=t.render(s,c,u),t.getChildContext&&(u=E(E({},u),t.getChildContext())),d&&t.getSnapshotBeforeUpdate&&(b=t.getSnapshotBeforeUpdate(l,p));var y,w,x=i&&i.nodeName;if("function"==typeof x){var S=M(i);(o=g)&&o.constructor===x&&S.key==o.__key?A(o,S,1,u,!1):(y=o,t._component=o=G(x,S,u),o.nextBase=o.nextBase||h,o._parentComponent=t,A(o,S,0,u,!1),T(o,1,r,!0)),w=o.base}else a=v,(y=g)&&(a=t._component=null),!v&&1!==e||(a&&(a._component=null),w=N(a,i,u,r||!d,v&&v.parentNode,!0));if(v&&w!==v&&o!==g){var C=v.parentNode;C&&w!==C&&(C.replaceChild(w,v),y||(v._component=null,k(v,!1)))}if(y&&B(y),(t.base=w)&&!n){for(var _=t,D=t;D=D._parentComponent;)(_=D).base=w;w._component=_,w._componentConstructor=_.constructor}}for(!d||r?O.push(t):m||t.componentDidUpdate&&t.componentDidUpdate(l,p,b);t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);Y||n||X()}}function B(t){var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var r=t._component;r?B(r):e&&(null!=e.__preactattr_&&v(e.__preactattr_.ref,null),P(t.nextBase=e),S.push(t),x(e)),v(t.__ref,null)}function _(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}E(_.prototype,{setState:function(t,e){this.prevState||(this.prevState=this.state),this.state=E(E({},this.state),"function"==typeof t?t(this.state,this.props):t),e&&this._renderCallbacks.push(e),o(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),T(this,2)},render:function(){}});W=function(t,e){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var W,z="a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan".split(" "),j="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,F="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("__preactCompatWrapper"):"__preactCompatWrapper",I={constructor:1,render:1,shouldComponentUpdate:1,componentWillReceiveProps:1,componentWillUpdate:1,componentDidUpdate:1,componentWillMount:1,componentDidMount:1,componentWillUnmount:1,componentDidUnmount:1},L=/^(?:accent|alignment|arabic|baseline|cap|clip|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vector|vert|word|writing|x)[A-Z]/,U={},V=!1;try{V="production"!==process.env.NODE_ENV}catch(t){}var H=d("a",null).constructor;H.prototype.$$typeof=j,H.prototype.preactCompatUpgraded=!1,H.prototype.preactCompatNormalized=!1,Object.defineProperty(H.prototype,"type",{get:function(){return this.nodeName},set:function(t){this.nodeName=t},configurable:!0}),Object.defineProperty(H.prototype,"props",{get:function(){return this.attributes},set:function(t){this.attributes=t},configurable:!0});var q=l.event;l.event=function(t){return q&&(t=q(t)),t.persist=Object,t.nativeEvent=t};var $=l.vnode;l.vnode=function(t){if(!t.preactCompatUpgraded){t.preactCompatUpgraded=!0;var e=t.nodeName,r=t.attributes=null==t.attributes?{}:ot({},t.attributes);"function"==typeof e?(!0===e[F]||e.prototype&&"isReactComponent"in e.prototype)&&(t.children&&""===String(t.children)&&(t.children=void 0),t.children&&(r.children=t.children),t.preactCompatNormalized||nt(t),function(t){var e=t.nodeName,r=t.attributes;t.attributes={},e.defaultProps&&ot(t.attributes,e.defaultProps);r&&ot(t.attributes,r)}(t)):(t.children&&""===String(t.children)&&(t.children=void 0),t.children&&(r.children=t.children),r.defaultValue&&(r.value||0===r.value||(r.value=r.defaultValue),delete r.defaultValue),function(t,e){var r,n,i;if(e){for(i in e)if(r=L.test(i))break;if(r)for(i in n=t.attributes={},e)e.hasOwnProperty(i)&&(n[L.test(i)?i.replace(/([A-Z0-9])/,"-$1").toLowerCase():i]=e[i])}}(t,r))}$&&$(t)};var K,Z=[];for(var J,Q={},tt=z.length;tt--;)Q[z[tt]]=(J=z[tt],rt.bind(null,J));function et(t){return function(t){function e(t,e){!function(t){for(var e in t){var r=t[e];"function"!=typeof r||r.__bound||I.hasOwnProperty(e)||((t[e]=r.bind(t)).__bound=!0)}}(this),ht.call(this,t,e,U),lt.call(this,t,e)}(t=ot({constructor:e},t)).mixins&&function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=ut(e[r].concat(t[r]||Z),"getDefaultProps"===r||"getInitialState"===r||"getChildContext"===r))}(t,function(t){for(var e={},r=0;r<t.length;r++){var n=t[r];for(var i in n)n.hasOwnProperty(i)&&"function"==typeof n[i]&&(e[i]||(e[i]=[])).push(n[i])}return e}(t.mixins));t.statics&&ot(e,t.statics);t.propTypes&&(e.propTypes=t.propTypes);t.defaultProps&&(e.defaultProps=t.defaultProps);t.getDefaultProps&&(e.defaultProps=t.getDefaultProps.call(e));return st.prototype=ht.prototype,e.prototype=ot(new st,t),e.displayName=t.displayName||"Component",e}({displayName:t.displayName||t.name,render:function(){return t(this.props,this.context)}})}function rt(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function t(e,r){for(var n=r||0;n<e.length;n++){var i=e[n];Array.isArray(i)?t(i):!i||"object"!=typeof i||(o=i)&&(o instanceof H||o.$$typeof===j)||!(i.props&&i.type||i.attributes&&i.nodeName||i.children)||(e[n]=rt(i.type||i.nodeName,i.props||i.attributes,i.children))}var o}(t,2),nt(d.apply(void 0,t))}function nt(t){t.preactCompatNormalized=!0,function(t){var e=t.attributes||(t.attributes={});it.enumerable="className"in e,e.className&&(e.class=e.className);Object.defineProperty(e,"className",it)}(t),function(t){return"function"==typeof t&&!(t.prototype&&t.prototype.render)}(t.nodeName)&&(t.nodeName=function(t){var e=t[F];return e?!0===e?t:e:(e=et(t),Object.defineProperty(e,F,{configurable:!0,value:!0}),e.displayName=t.displayName,e.propTypes=t.propTypes,e.defaultProps=t.defaultProps,Object.defineProperty(t,F,{configurable:!0,value:e}),e)}(t.nodeName));var e=t.attributes.ref,r=e&&typeof e;return!K||"string"!==r&&"number"!==r||(t.attributes.ref=function(e,r){return r._refProxies[e]||(r._refProxies[e]=function(t){r&&r.refs&&null===(r.refs[e]=t)&&(delete r._refProxies[e],r=null)})}(e,K)),function(t){var e=t.nodeName,r=t.attributes;if(!r||"string"!=typeof e)return;var n={};for(var i in r)n[i.toLowerCase()]=i;n.ondoubleclick&&(r.ondblclick=r[n.ondoubleclick],delete r[n.ondoubleclick]);if(n.onchange&&("textarea"===e||"input"===e.toLowerCase()&&!/^fil|che|rad/i.test(r.type))){var o=n.oninput||"oninput";r[o]||(r[o]=ut([r[o],r[n.onchange]]),delete r[n.onchange])}}(t),t}var it={configurable:!0,get:function(){return this.class},set:function(t){this.class=t}};function ot(t){for(var e=arguments,r=1,n=void 0;r<arguments.length;r++)if(n=e[r])for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t}function at(t,e){for(var r in t)if(!(r in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function st(){}function ct(t,e,r){if("string"==typeof e&&(e=t.constructor.prototype[e]),"function"==typeof e)return e.apply(t,r)}function ut(o,a){return function(){for(var t,e=arguments,r=0;r<o.length;r++){var n=ct(this,o[r],e);if(a&&null!=n)for(var i in t=t||{},n)n.hasOwnProperty(i)&&(t[i]=n[i]);else void 0!==n&&(t=n)}return t}}function lt(t,e){pt.call(this,t,e),this.componentWillReceiveProps=ut([pt,this.componentWillReceiveProps||"componentWillReceiveProps"]),this.render=ut([pt,ft,this.render||"render",dt])}function pt(t,e){if(t){var r=t.children;if(r&&Array.isArray(r)&&1===r.length&&("string"==typeof r[0]||"function"==typeof r[0]||r[0]instanceof H)&&(t.children=r[0],t.children&&"object"==typeof t.children&&(t.children.length=1,t.children[0]=t.children)),V){var n="function"==typeof this?this:this.constructor;this.propTypes||n.propTypes,this.displayName||n.name}}}function ft(t){K=this}function dt(){K===this&&(K=null)}function ht(t,e,r){_.call(this,t,e),this.state=this.getInitialState?this.getInitialState():{},this.refs={},this._refProxies={},r!==U&&lt.call(this,t,e)}function vt(t,e){ht.call(this,t,e)}ot(ht.prototype=new _,{constructor:ht,isReactComponent:{},replaceState:function(t,e){for(var r in this.setState(t,e),this.state)r in t||delete this.state[r]},getDOMNode:function(){return this.base},isMounted:function(){return!!this.base}}),st.prototype=ht.prototype,(vt.prototype=new st).isPureReactComponent=!0,vt.prototype.shouldComponentUpdate=function(t,e){return at(this.props,t)||at(this.state,e)};var gt="undefined"!=typeof window&&window||{},mt=(gt.RegExp,gt.navigator),bt={browser:[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Whale/,identity:"Whale",versionSearch:"Whale"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/MiuiBrowser/,identity:"MIUI Browser",versionSearch:"MiuiBrowser"},{criteria:/SamsungBrowser/,identity:"Samsung Internet",versionSearch:"SamsungBrowser"},{criteria:/SAMSUNG /,identity:"Samsung Internet",versionSearch:"Version"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"Android Browser",versionSearch:"Version"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],os:[{criteria:/Windows Phone/,identity:"Windows Phone",versionSearch:"Windows Phone"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/Windows NT/,identity:"Window",versionSearch:"Windows NT"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"},{criteria:/Tizen/,identity:"Tizen"},{criteria:/Web0S/,identity:"WebOS"}],webview:[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],defaultString:{browser:{version:"-1",name:"unknown"},os:{version:"-1",name:"unknown"}}};function yt(t,e){for(var r=[],n=0;n<t.length;n++)e(t[n])&&r.push(t[n]);return r}var wt=void 0;function xt(t,e){return e&&e.test?!!e.test(t):-1<t.indexOf(e)}function St(t,e){var r=yt(t,function(t){return xt(wt,t.criteria)})[0];return r&&r.identity||e.name}function Ct(t,n){return yt(t,function(t){var e=t.criteria,r=new RegExp(t.identity,"i").test(n);return!!(e?r&&xt(wt,e):r)})[0]}function _t(t,e){var r=bt.defaultString.browser.version,n=new RegExp("("+t+")","i").exec(e);if(!n)return r;var i=n.index,o=n[0];if(-1<i){var a=i+o.length+1;r=e.substring(a).split(" ")[0].replace(/_/g,".").replace(/;|\)/g,"")}return r}function Dt(t){if(t)return _t(function(t){var e=Ct(bt.browser,t);return e=e||{criteria:t,versionSearch:t,identity:t}}(t).versionSearch||t,wt)}function Et(t){var e=function(t){return Ct(bt.os,t)}(t)||{},r=bt.defaultString.os.version,n=void 0;if(t){if(e.versionAlias)return e.versionAlias;var i=e.versionSearch||t,o=new RegExp("("+i+")\\s([\\d_\\.]+|\\d_0)","i");return o.exec(wt)&&(n=o.exec(wt)[2].replace(/_/g,".").replace(/;|\)/g,"")),n||r}}function Mt(){var t=St(bt.os,bt.defaultString.os);return{name:t,version:Et(t)}}function Pt(){var t=St(bt.browser,bt.defaultString.browser);return{name:t,version:Dt(t),webview:function(){var t=bt.webview,e=void 0;return function(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return!0;return!1}(yt(t,function(t){return xt(wt,t.criteria)}),function(t){return e=_t(t.browserVersionSearch,wt),!(!xt(wt,t.webviewToken)&&!xt(e,t.webviewBrowserVersion))})}()}}function Ot(){!function(t){wt=t}(0<arguments.length&&void 0!==arguments[0]?arguments[0]:mt.userAgent);var t={os:Mt(),browser:Pt(),isMobile:-1!==wt.indexOf("Mobi")};return t.browser.name=t.browser.name.toLowerCase(),t.os.name=t.os.name.toLowerCase(),t.os.version=t.os.version.toLowerCase(),"ios"===t.os.name&&t.browser.webview&&(t.browser.version="-1"),t}Ot.VERSION="2.1.5";var Yt="object",Xt="undefined";function Nt(t){return typeof t===Xt}function Rt(t){return t&&typeof t===Yt}function kt(t){return Array.isArray(t)}function Gt(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function At(t,e,r,n){t.addEventListener(e,r,n)}function Tt(t,e,r){t.removeEventListener(e,r)}var Bt=function(t,e){return(Bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Wt=function(){return(Wt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var zt=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return e>>>0};var jt=function(){return(jt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ft(t,e,r){var n=$t(t),i=$t(e),o=$t(r);return Lt(Kt(r[0],Zt(n,o)),Kt(r[0],Zt(i,o)),r[0])}function It(t){return t.touches?Ht(t.touches):[qt(t)]}function Lt(t,e,r){var n=t.clientX,i=t.clientY;return{clientX:n,clientY:i,deltaX:n-e.clientX,deltaY:i-e.clientY,distX:n-r.clientX,distY:i-r.clientY}}function Ut(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Vt(t,r,n){return t.map(function(t,e){return Lt(t,r[e],n[e])})}function Ht(t){for(var e=Math.min(t.length,2),r=[],n=0;n<e;++n)r.push(qt(t[n]));return r}function qt(t){return{clientX:t.clientX,clientY:t.clientY}}function $t(t){return{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function Kt(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function Zt(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var Jt=function(){function t(t,e){var a=this;void 0===e&&(e={}),this.el=t,this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.onDragStart=function(t){if(a.isDrag||!function(t){return t.touches&&2<=t.touches.length}(t)||a.pinchFlag||a.onPinchStart(t),!a.flag){var e=a.startClients[0]?a.startClients:It(t);a.flag=!0,a.isDrag=!1,a.startClients=e,a.prevClients=e,a.datas={};var r=Lt(e[0],a.prevClients[0],a.startClients[0]),n=a.options,i=n.dragstart;(n.preventRightClick&&3===t.which||!1===(i&&i(jt({datas:a.datas,inputEvent:t},r))))&&(a.flag=!1),a.flag&&t.preventDefault()}},this.onDrag=function(t){if(a.flag){var e=It(t);a.pinchFlag&&a.onPinch(t,e);var r=a.prevClients,n=a.startClients,i=a.pinchFlag?Ft(e,r,n):Lt(e[0],r[0],n[0]);if(i.deltaX||i.deltaY){a.isDrag=!0;var o=a.options.drag;o&&o(jt({datas:a.datas},i,{inputEvent:t})),a.prevClients=e}}},this.onDragEnd=function(t){if(a.flag){a.pinchFlag&&a.onPinchEnd(t),a.flag=!1;var e=a.options.dragend,r=a.prevClients,n=a.startClients,i=a.pinchFlag?Ft(r,r,n):Lt(r[0],r[0],n[0]);a.startClients=[],a.prevClients=[],e&&e(jt({datas:a.datas,isDrag:a.isDrag,inputEvent:t},i))}},this.options=jt({container:t,preventRightClick:!0,events:["touch","mouse"]},e);var r=this.options,n=r.container,i=r.events;this.isTouch=-1<i.indexOf("touch"),this.isMouse=-1<i.indexOf("mouse"),this.isMouse&&(At(t,"mousedown",this.onDragStart),At(n,"mousemove",this.onDrag),At(n,"mouseup",this.onDragEnd)),this.isTouch&&(At(t,"touchstart",this.onDragStart),At(n,"touchmove",this.onDrag),At(n,"touchend",this.onDragEnd))}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isPinching=function(){return this.isPinch},e.onPinchStart=function(t){var e,r;if(this.flag){this.pinchFlag=!0;var n=this.options.pinchstart,i=Ht(t.changedTouches);if((e=this.startClients).push.apply(e,i),(r=this.prevClients).push.apply(r,i),n){var o=this.startClients,a=$t(o),s=Lt(a,a,a);n(jt({datas:this.datas,touches:Vt(o,o,o)},s,{inputEvent:t}))}}},e.onPinch=function(t,e){if(this.flag&&this.pinchFlag){this.isPinch=!0;var r=this.options.pinch;if(r){var n=this.prevClients,i=this.startClients,o=Lt($t(e),$t(n),$t(i)),a=Ut(e),s=Ut(i);r(jt({datas:this.datas,touches:Vt(e,n,i),scale:a/s,distance:a},o,{inputEvent:t}))}}},e.onPinchEnd=function(t){if(this.flag&&this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var r=this.options.pinchend;if(r){var n=this.prevClients,i=this.startClients,o=Lt($t(n),$t(n),$t(i));r(jt({datas:this.datas,isPinch:e,touches:Vt(n,n,i)},o,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}}},e.unset=function(){var t=this.el,e=this.options.container;this.isMouse&&(Tt(t,"mousedown",this.onDragStart),Tt(e,"mousemove",this.onDrag),Tt(e,"mouseup",this.onDragEnd)),this.isTouch&&(Tt(t,"touchstart",this.onDragStart),Tt(e,"touchmove",this.onDrag),Tt(e,"touchend",this.onDragEnd))},t}(),Qt=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var r=this.keys,n=this.values,i=r.indexOf(t),o=-1===i?r.length:i;r[o]=t,n[o]=e},t}(),te=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),ee="function"==typeof Map,re=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var ne=function(){function t(t,e,r,n,i,o,a,s){this.prevList=t,this.list=e,this.added=r,this.removed=n,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,r){var s=[],c=[];return t.forEach(function(t){var e=t[0],r=t[1],n=new re;s[e]=n,c[r]=n}),s.forEach(function(t,e){t.connect(s[e-1])}),t.filter(function(t,e){return!r[e]}).map(function(t,e){var r=t[0],n=t[1];if(r===n)return[0,0];var i=s[r],o=c[n-1],a=i.getIndex();return i.disconnect(),o?i.connect(o,o.next):i.connect(void 0,s[0]),[a,i.getIndex()]})}(this.changedBeforeAdded,this.fixed),s=this.changed,c=[];this.cacheOrdered=t.filter(function(t,e){var r=t[0],n=t[1],i=s[e],o=i[0],a=i[1];if(r!==n)return c.push([o,a]),!0}),this.cachePureChanged=c},t}();var ie=function(t,e){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var oe,ae="function"==typeof Map?void 0:(oe=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++oe)}),se=function(e){function t(t){return void 0===t&&(t=[]),e.call(this,t,ae)||this}return function(t,e){function r(){this.constructor=t}ie(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(t,e),t}(function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),r=function(t,e,r){var n=ee?Map:r?te:Qt,i=r||function(t){return t},o=[],a=[],s=[],c=t.map(i),u=e.map(i),l=new n,p=new n,f=[],d=[],h={},v=[],g=0,m=0;return c.forEach(function(t,e){l.set(t,e)}),u.forEach(function(t,e){p.set(t,e)}),c.forEach(function(t,e){var r=p.get(t);void 0===r?(++m,a.push(e)):h[r]=m}),u.forEach(function(t,e){var r=l.get(t);void 0===r?(o.push(e),++g):(s.push([r,e]),m=h[e]||0,f.push([r-m,e-g]),d.push(e===r),r!==e&&v.push([r,e]))}),a.reverse(),new ne(t,e,o,a,v,s,f,d)}(this.list,e,this.findKeyCallback);return this.list=e,r},t}()),ce=function(t,e){return(ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function ue(t,e){function r(){this.constructor=t}ce(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var le=function(){return(le=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function pe(t,e,r,n,i,o){for(var a=r;a<n;++a)t[a]+=t[i+a-r]*o,e[a]+=e[i+a-r]*o}function fe(t,e,r,n,i){for(var o=r;o<n;++o){var a=t[o],s=e[o];t[o]=t[i+o-r],t[i+o-r]=a,e[o]=e[i+o-r],e[i+o-r]=s}}function de(t,e,r,n,i){for(var o=r;o<n;++o)t[o]/=i,e[o]/=i}function he(t){for(var e=t*t,r=[],n=0;n<e;++n)r[n]=n%(t+1)?0:1;return r}function ve(t,e){for(var r=he(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[e*(i+1)-1]=t[i];return r}function ge(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=t.slice(),n=he(e),i=0;i<e;++i){var o=e*i,a=e*(i+1),s=o+i;if(0===r[s])for(var c=i+1;c<e;++c)if(r[e*c+i]){fe(r,n,o,a,e*c);break}if(!r[s])return[];de(r,n,o,a,r[s]);for(c=0;c<e;++c){var u=e*c,l=u+e,p=r[u+i];0!==p&&i!==c&&pe(r,n,u,l,o,-p)}}return n}function me(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],n=0;n<e;++n)for(var i=0;i<e;++i)r[i*e+n]=t[e*n+i];return r}function be(t,e){for(var r=t.slice(),n=t.length;n<e-1;++n)r[n]=0;return r[e-1]=1,r}function ye(t,e,r){if(void 0===e&&(e=Math.sqrt(t.length)),e===r)return t;for(var n=he(r),i=Math.min(e,r),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)n[o*r+a]=t[o*e+a];n[(o+1)*r-1]=t[(o+1)*e-1],n[(r-1)*r+o]=t[(e-1)*e+o]}return n[r*r-1]=t[e*e-1],n}function we(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=he(e);return t.forEach(function(t){n=xe(n,t,e)}),n}function xe(t,e,r){for(var n=[],i=t.length/r,o=e.length/i,a=0;a<r;++a)for(var s=0;s<o;++s)for(var c=n[a*o+s]=0;c<i;++c)n[a*o+s]+=t[a*i+c]*e[c*o+s];return n}function Se(t,e,r){void 0===r&&(r=Math.sqrt(t.length));for(var n=[],i=t.length/r,o=e.length/i,a=0;a<r;++a)for(var s=0;s<o;++s)for(var c=n[a+s*o]=0;c<i;++c)n[a+s*o]+=t[a+c*i]*e[c+s*o];return n}function Ce(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]+e[i];return n}function _e(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]-e[i];return n}function De(t,e,r){void 0===r&&(r=e.length);var n=xe(t,e,r),i=n[r-1];return n.map(function(t){return t/i})}function Ee(t){return 9===t.length?[t[0],t[3],t[1],t[4],t[2],t[5]]:me(t)}function Me(t){var e=Math.cos(t),r=Math.sin(t);return[e,-r,0,r,e,0,0,0,1]}function Pe(t,e){return De(Me(e*Math.PI/180),be(t,3))}function Oe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(t){return t.split(" ").map(function(t){return""+e+t}).join(" ")}).join(" ")}.apply(void 0,[wr].concat(t))}function Ye(){return he(3)}function Xe(t,e,r){return we(e,ve(r,e),t,ve(r.map(function(t){return-t}),e))}function Ne(o){return Re(window.getComputedStyle(o,":before")).map(function(t,e){var r=function(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var r=e[1],n=e[2];return{prefix:r,unit:e[3],value:parseFloat(n)}}(t),n=r.value,i=r.unit;return n*function(t,e,r){return"%"!==e?1:t.ownerSVGElement.viewBox.baseVal[r?"width":"height"]/100}(o,i,0===e)})}function Re(t){return t.transformOrigin.split(" ")}function ke(t,n,e,r){for(var i,o,a,s,c,u=t,l=[],p=!!e||t===n,f=("svg"!==u.tagName.toLowerCase()||"ownerSVGElement"in u),d=!1,h=3;u&&(p||u!==n);){var v=u.tagName.toLowerCase(),g=window.getComputedStyle(u),m=(c=g.transform,6===(s=c&&"none"!==c?Rt(c)?c:function(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}(c).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0]).length?[s[0],s[2],s[4],s[1],s[3],s[5],0,0,1]:me(s));if(!d&&16===m.length){d=!0,h=4;for(var b=l.length,y=0;y<b;++y)l[y]=ye(l[y],3,4)}d&&9===m.length&&(m=ye(m,3,4));var w=u.offsetLeft,x=u.offsetTop,S=Nt(w),C=void 0;if(S&&"svg"!==v?(C=yr?Ne(u):Re(g).map(function(t){return parseFloat(t)}),S=!1,"g"===v?x=w=0:(w=(i=Ae(u,C))[0],x=i[1],C[0]=i[2],C[1]=i[3])):C=Re(g).map(function(t){return parseFloat(t)}),"svg"===v&&a&&l.push(Ge(u,h),he(h)),l.push(Xe(m,h,C),ve([S?u:w,S?C:x],h)),a=a||m,o=o||C,p)break;u=u.parentElement}var _=e?ye(e,r,h):he(h),D=e?ye(e,r,h):he(h),E=he(h),M=l.length;l.reverse(),l.forEach(function(t,e){var r;M-2===e&&(D=_.slice()),M-1===e&&(E=_.slice()),Rt(t[h-1])&&(r=function(t,e,r,n,i,o){var a,s=Ie(t),c=s[0],u=s[1],l=(e||document.documentElement).getBoundingClientRect(),p=t.getBoundingClientRect(),f=p.left-l.left,d=p.top-l.top,h=p.width,v=p.height,g=we(r,i,o),m=Be(g,c,u,r),b=m.map(function(t){return t[0]}),y=m.map(function(t){return t[1]}),w=Te(g,n,r),x=Math.min.apply(Math,b),S=Math.min.apply(Math,y),C=_e(w,[x,S]),_=Math.max.apply(Math,b)-x,D=Math.max.apply(Math,y)-S,E=[f+C[0]*h/_,d+C[1]*v/D],M=[0,0],P=0;for(;++P<10;){var O=ge(i,r);a=_e(Te(O,E,r),Te(O,w,r)),M[0]=a[0],M[1]=a[1];var Y=Be(we(r,i,ve(M,r),o),c,u,r),X=Math.min.apply(Math,Y.map(function(t){return t[0]})),N=Math.min.apply(Math,Y.map(function(t){return t[1]})),R=X-f,k=N-d;if(Math.abs(R)<2&&Math.abs(k)<2)break;E[0]-=R,E[1]-=k}return M.map(function(t){return Math.round(t)})}(t[h-1],n,h,t[2*h-1],_,l[e+1]),t[h-1]=r[0],t[2*h-1]=r[1]),_=xe(_,t,h)});var P=(!f&&d?"matrix3d":"matrix")+"("+Ee(f&&16===a.length?ye(a,4,3):a)+")";return[D,E,_,a,P,o,d]}function Ge(t,e){var r=t.clientWidth,n=t.clientHeight,i=t.viewBox.baseVal,o=i.width||r,a=i.height||n,s=r/o,c=n/a,u=t.preserveAspectRatio.baseVal,l=u.align,p=u.meetOrSlice,f=[0,0],d=[s,c],h=[0,0];if(1!==l){var v=(l-2)%3,g=Math.floor((l-2)/3);f[0]=o*v/2,f[1]=a*g/2;var m=2===p?Math.max(c,s):Math.min(s,c);d[0]=m,d[1]=m,h[0]=(r-o)/2*v,h[1]=(n-a)/2*g}var b=function(t,e){for(var r=he(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[(e+1)*i]=t[i];return r}(d,e);return b[e-1]=h[0],b[2*e-1]=h[1],Xe(b,e,f)}function Ae(t,e){if(!t.getBBox)return[0,0];var r=t.getBBox(),n=t.ownerSVGElement.viewBox.baseVal,i=r.x-n.x,o=r.y-n.y;return[i,o,e[0]-i,e[1]-o]}function Te(t,e,r){return De(t,be(e,r),r)}function Be(t,e,r,n){return[Te(t,[0,0],n),Te(t,[e,0],n),Te(t,[0,r],n),Te(t,[e,r],n)]}function We(t,e,r,n){var i=16===t.length?4:3,o=Be(t,r,n,i),a=o[0],s=a[0],c=a[1],u=o[1],l=u[0],p=u[1],f=o[2],d=f[0],h=f[1],v=o[3],g=v[0],m=v[1],b=Te(t,e,i),y=b[0],w=b[1],x=Math.min(s,l,d,g),S=Math.min(c,p,h,m);y=y-x||0,w=w-S||0;var C=[((s=s-x||0)+(l=l-x||0)+(d=d-x||0)+(g=g-x||0))/4,((c=c-S||0)+(p=p-S||0)+(h=h-S||0)+(m=m-S||0))/4],_=ze(C,[s,c]),D=ze(C,[l,p]);return[[x,S],[y,w],[s,c],[l,p],[d,h],[g,m],_<D&&D-_<Math.PI||D<_&&D-_<-Math.PI?1:-1]}function ze(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=Math.atan2(n,r);return 0<i?i:i+2*Math.PI}function je(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=Math.sqrt(r*r+n*n),o=ze(t,e);return{transform:"translate("+t[0]+"px, "+t[1]+"px) rotate("+o+"rad)",width:i+"px"}}function Fe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;return{transform:"translate("+t.reduce(function(t,e){return t+e[0]},0)/r+"px, "+t.reduce(function(t,e){return t+e[1]},0)/r+"px)"}}function Ie(t,e,r,n){void 0===e&&(e=window.getComputedStyle(t)),void 0===n&&(n=r||"border-box"===e.boxSizing);var i=t.offsetWidth,o=t.offsetHeight,a=!Nt(i);if((r||n)&&a)return[i,o];if(i=t.clientWidth,o=t.clientHeight,a||i||o)return r||n?[i+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0),o+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)]:[i-(parseFloat(e.paddingLeft)||0)-(parseFloat(e.paddingRight)||0),o-(parseFloat(e.paddingTop)||0)-(parseFloat(e.paddingBottom)||0)];var s=t.getBBox();return[s.width,s.height]}function Le(t,e,r){var n,i,o,a,s,c,u=0,l=0,p=[0,0],f=[0,0],d=[0,0],h=[0,0],v=[0,0],g=Ye(),m=Ye(),b=Ye(),y=0,w=0,x=[0,0],S=1,C=1,_=[0,0],D=0,E=!1,M="",P=[0,0],O=r?r.beforeMatrix:void 0,Y=r?r.is3d?4:3:void 0;if(t){if(r)y=r.width,w=r.height;else{var X=window.getComputedStyle(t);y=t.offsetWidth,w=t.offsetHeight,Nt(y)&&(y=(n=Ie(t,X,!0))[0],w=n[1])}var N;g=(i=ke(t,e,O,Y))[0],N=i[1],m=i[2],b=i[3],M=i[4],x=i[5],E=i[6],u=(a=(o=We(m,x,y,w))[0])[0],l=a[1],p=o[1],f=o[2],d=o[3],h=o[4],v=o[5],S=o[6];var R;R=(s=We(N,Ce(x,function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],n=0;n<e-1;++n)r[n]=t[(n+1)*e-1];return r[e-1]=0,r}(b,E?4:3)),y,w))[0],P=s[1],C=s[6],P=[P[0]+R[0]-u,P[1]+R[1]-l],D=(c=function(t,e,r){var n=ze(0<r?t:e,0<r?e:t),i=xe(Me(n),[0,-40,1],3);return[n,[(t[0]+e[0])/2+i[0],(t[1]+e[1])/2+i[1]]]}(f,d,S))[0],_=c[1]}return{beforeDirection:C,direction:S,rotationRad:D,rotationPos:_,target:t,left:u,top:l,pos1:f,pos2:d,pos3:h,pos4:v,width:y,height:w,beforeMatrix:g,matrix:m,targetTransform:M,targetMatrix:b,is3d:E,beforeOrigin:P,origin:p,transformOrigin:x}}function Ue(t){if(t){var e=t.getAttribute("data-direction");if(e){var r=[0,0];return-1<e.indexOf("w")&&(r[0]=-1),-1<e.indexOf("e")&&(r[0]=1),-1<e.indexOf("n")&&(r[1]=-1),-1<e.indexOf("s")&&(r[1]=1),r}}}function Ve(t,e){return e?Math.round(t/e)*e:t}function He(r,n){r.forEach(function(t,e){r[e]=Ve(r[e],n)})}function qe(t,e){t[e]&&(t[e].unset(),t[e]=null)}function $e(t,e,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}function Ke(t,e,r){return t.triggerEvent(e,r)}function Ze(t){return ze([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}window.b=ye;var Je={name:"pinchable",updateRect:!0,pinchStart:function(r,t){var e,n=t.datas,i=t.clientX,o=t.clientY,a=t.touches,s=t.inputEvent,c=t.targets,u=r.props,l=u.pinchable,p=u.ables;if(!l)return!1;var f=r.state,d="onPinch"+(c?"Group":"")+"Start",h="drag"+(c?"Group":"")+"ControlStart",v=(!0===l?r.controlAbles:p.filter(function(t){return-1<l.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[h]});n.pinchableDatas={};var g=Ke(r,d,((e={})[c?"targets":"target"]=c||f.target,e.clientX=i,e.clientY=o,e.datas=n.pinchableDatas,e));n.isPinch=!1!==g,n.ables=v;var m=n.isPinch;if(!m)return!1;var b=Ze(a);return v.forEach(function(t){n[t.name+"Datas"]={};var e={datas:n[t.name+"Datas"],clientX:i,clientY:o,inputEvent:s,parentRotate:b,pinchFlag:!0};t[h](r,e)}),m},pinch:function(e,t){var r,n=t.datas,i=t.clientX,o=t.clientY,a=t.scale,s=t.distance,c=t.touches,u=t.inputEvent,l=t.targets;if(n.isPinch){var p=Ze(c),f=s*(1-1/a),d=e.state.target;u.preventDefault(),u.stopPropagation();var h=((r={})[l?"targets":"target"]=l||d,r.clientX=i,r.clientY=o,r.datas=n.pinchableDatas,r);Ke(e,"onPinch"+(l?"Group":""),h);var v=n.ables,g="drag"+(l?"Group":"")+"Control";return v.forEach(function(t){t[g](e,{clientX:i,clientY:o,datas:n[t.name+"Datas"],inputEvent:u,parentDistance:f,parentRotate:p,pinchFlag:!0})}),h}},pinchEnd:function(e,t){var r,n=t.datas,i=t.clientX,o=t.clientY,a=t.isPinch,s=t.inputEvent,c=t.targets;if(n.isPinch){var u=e.state.target;Ke(e,"onPinch"+(c?"Group":"")+"End",((r={})[c?"targets":"target"]=c||u,r.isDrag=a,r.clientX=i,r.clientY=o,r.datas=n.pinchableDatas,r));var l=n.ables,p="drag"+(c?"Group":"")+"ControlEnd";return l.forEach(function(t){t[p](e,{clientX:i,clientY:o,isDrag:a,datas:n[t.name+"Datas"],inputEvent:s,pinchFlag:!0})}),a}},pinchGroupStart:function(t,e){return this.pinchStart(t,le({},e,{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,le({},e,{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,le({},e,{targets:t.props.targets}))}};function Qe(t,e){var r=e.datas,n=t.state,i=n.matrix,o=n.beforeMatrix,a=n.is3d,s=n.left,c=n.top,u=n.origin,l=a?4:3;r.is3d=a,r.matrix=i,r.inverseMatrix=ge(i,l),r.beforeMatrix=o,r.inverseBeforeMatrix=ge(o,l),r.absoluteOrigin=be(Ce([s,c],u),l),r.startDragBeforeDist=De(r.inverseBeforeMatrix,r.absoluteOrigin,l),r.startDragDist=De(r.inverseMatrix,r.absoluteOrigin,l)}function tr(t,e){var r=t.datas,n=t.distX,i=t.distY,o=r.inverseBeforeMatrix,a=r.inverseMatrix,s=r.is3d,c=r.startDragBeforeDist,u=r.startDragDist,l=s?4:3;return _e(De(e?o:a,Ce(r.absoluteOrigin,[n,i]),l),e?c:u)}function er(t,i,o,a,s){var e=i.name,r=a.datas,c=r[e]||(r[e]=[]);return t.moveables.map(function(t,e){var r=c[e]||(c[e]={}),n=i[o](t,le({},a,{datas:r,parentFlag:!0}));return n&&s&&s(t,r,n,e),n})}function rr(t){return t.custom}function nr(t,e,r,n){var i=r.custom||(r.custom={startX:t,startY:e,prevX:t,prevY:e,isDrag:!1}),o=i.prevX,a=i.prevY,s=i.startX,c=i.startY;return i.prevX=t,i.prevY=e,t===o&&e===a||(i.isDrag=!0),{clientX:t,clientY:e,distX:t-s,distY:e-c,deltaX:t-o,deltaY:e-a,isDrag:i.isDrag,datas:r,inputEvent:n}}function ir(t){return Gt(t,Oe("direction"))}var or={name:"draggable",dragStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=t.state,a=o.targetTransform,s=o.target,c=window.getComputedStyle(s);return r.datas={},r.left=parseFloat(c.left||"")||0,r.top=parseFloat(c.top||"")||0,r.bottom=parseFloat(c.bottom||"")||0,r.right=parseFloat(c.right||"")||0,r.transform=a,Qe(t,{datas:r}),r.prevDist=[0,0],!(r.prevBeforeDist=[0,0])!==Ke(t,"onDragStart",{datas:r.datas,target:s,clientX:n,clientY:i})?r.isDrag=!0:r.isPinch=!1,r.isDrag},drag:function(t,e){var r=e.datas,n=e.distX,i=e.distY,o=e.clientX,a=e.clientY,s=e.inputEvent,c=r.isPinch,u=r.isDrag,l=r.prevDist,p=r.prevBeforeDist,f=r.transform;if(u){s.preventDefault(),s.stopPropagation();var d=t.props,h=d.throttleDrag,v=void 0===h?0:h,g=d.parentMoveable,m=t.state.target,b=tr({datas:r,distX:n,distY:i},!0),y=tr({datas:r,distX:n,distY:i},!1);He(y,v),He(b,v);var w=_e(y,l),x=_e(b,p);r.prevDist=y,r.prevBeforeDist=b;var S=r.left+b[0],C=r.top+b[1],_=r.right-b[0],D=r.bottom-b[1],E=f+" translate("+y[0]+"px, "+y[1]+"px)";if(g||!w.every(function(t){return!t})||!x.some(function(t){return!t})){var M={datas:r.datas,target:m,transform:E,dist:y,delta:w,beforeDist:b,beforeDelta:x,left:S,top:C,right:_,bottom:D,clientX:o,clientY:a,isPinch:c};return Ke(t,"onDrag",M),M}}},dragEnd:function(t,e){var r=e.datas,n=e.isDrag,i=e.clientX,o=e.clientY;if(r.isDrag)return r.isDrag=!1,Ke(t,"onDragEnd",{target:t.state.target,isDrag:n,clientX:i,clientY:o,datas:r.datas}),n},dragGroupCondition:function(t){return Gt(t,Oe("group"))},dragGroupStart:function(t,e){var r=e.clientX,n=e.clientY,i=e.datas;er(t,this,"dragStart",e),this.dragStart(t,e);var o=Ke(t,"onDragGroupStart",{targets:t.props.targets,clientX:r,clientY:n,datas:i.datas});return i.isDrag=!1!==o,i.isDrag},dragGroup:function(t,e){if(e.datas.isDrag){var r=er(t,this,"drag",e),n=this.drag(t,e);if(n){var i=le({targets:t.props.targets,events:r},n);return Ke(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,e){var r=e.clientX,n=e.clientY,i=e.isDrag,o=e.datas;if(o.isDrag)return er(t,this,"dragEnd",e),Ke(t,"onDragGroupEnd",{targets:t.props.targets,isDrag:i,clientX:r,clientY:n,datas:o.datas}),i}};function ar(t,e,r,n,i){t.startAbsoluteOrigin=[e-i[0]+n[0],r-i[1]+n[1]],t.prevDeg=ze(t.startAbsoluteOrigin,[e,r])/Math.PI*180,t.startDeg=t.prevDeg,t.loop=0}function sr(t,e,r,n){var i=t.prevDeg,o=t.startDeg,a=t.loop;(e=Ve(e,n))<i&&270<i&&e<90?++t.loop:i<e&&i<90&&270<e&&--t.loop;var s=360*a+i,c=360*t.loop+e,u=r*(c-s),l=r*(c-o);return t.prevDeg=e,[u,l]}function cr(t,e,r,n,i){return sr(t,ze(t.startAbsoluteOrigin,[r,n])/Math.PI*180,e,i)}function ur(t){return Gt(t,Oe("rotation"))}var lr={name:"rotatable",canPinch:!0,render:function(t){if(!t.props.rotatable)return null;var e=t.state,r=e.pos1,n=e.pos2,i=e.rotationRad;return rt("div",{className:Oe("line rotation-line"),style:{transform:"translate("+(r[0]+n[0])/2+"px, "+(r[1]+n[1])/2+"px) translateY(-40px) rotate("+i+"rad)"}},rt("div",{className:Oe("control","rotation")}))},dragControlCondition:ur,dragControlStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=e.parentRotate,a=e.parentFlag,s=e.pinchFlag,c=t.state,u=c.target,l=c.left,p=c.top,f=c.origin,d=c.beforeOrigin,h=c.rotationPos,v=c.direction,g=c.beforeDirection,m=c.targetTransform;if(!u)return!1;r.transform=m,r.left=l,r.top=p,s||a?(r.beforeInfo={prevDeg:o,startDeg:o,loop:0},r.afterInfo={prevDeg:o,startDeg:o,loop:0}):(r.afterInfo={},r.beforeInfo={},ar(r.afterInfo,n,i,f,h),ar(r.beforeInfo,n,i,d,h)),r.direction=v,r.beforeDirection=g,r.datas={};var b=Ke(t,"onRotateStart",{datas:r.datas,target:u,clientX:n,clientY:i});return r.isRotate=!1!==b,r.isRotate},dragControl:function(t,e){var r,n,i,o,a=e.datas,s=e.clientX,c=e.clientY,u=e.parentRotate,l=e.parentFlag,p=e.pinchFlag,f=a.direction,d=a.beforeDirection,h=a.beforeInfo,v=a.afterInfo;if(a.isRotate){var g,m,b,y,w=t.props,x=w.throttleRotate,S=void 0===x?0:x,C=w.parentMoveable;if(y=p||l?(g=(r=sr(v,u,f,S))[0],m=r[1],b=(n=sr(h,u,f,S))[0],n[1]):(g=(i=cr(v,f,s,c,S))[0],m=i[1],b=(o=cr(h,d,s,c,S))[0],o[1]),g||b||C){var _={target:t.props.target,datas:a.datas,delta:g,dist:m,clientX:s,clientY:c,beforeDist:y,beforeDelta:b,transform:a.transform+" rotate("+m+"deg)",isPinch:!!p};return Ke(t,"onRotate",_),_}}},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag,i=e.clientX,o=e.clientY;return!!r.isRotate&&(r.isRotate=!1,Ke(t,"onRotateEnd",{datas:r.datas,clientX:i,clientY:o,target:t.state.target,isDrag:n}),n)},dragGroupControlCondition:ur,dragGroupControlStart:function(t,e){var r=e.clientX,n=e.clientY,i=e.datas,c=e.inputEvent,o=t.state,u=o.left,l=o.top,p=o.beforeOrigin;er(t,this,"dragControlStart",le({},e,{parentRotate:0}),function(t,e){var r=t.state,n=r.left,i=r.top,o=r.beforeOrigin,a=Ce(_e([n,i],[u,l]),_e(o,p)),s=e.drag||(e.drag={});or.dragStart(t,nr(a[0],a[1],s,c))}),this.dragControlStart(t,e);var a=Ke(t,"onRotateGroupStart",{targets:t.props.targets,clientX:r,clientY:n,datas:i.datas});return i.isRotate=!1!==a,i.isDrag},dragGroupControl:function(t,e){var l=e.inputEvent;if(e.datas.isRotate){var r=this.dragControl(t,e);if(r){var n=r.beforeDist,p=r.beforeDelta,i=er(t,this,"dragControl",le({},e,{parentRotate:n}),function(t,e,r,n){var i=e.drag||(e.drag={}),o=rr(i),a=Pe([o.prevX,o.prevY],p),s=a[0],c=a[1],u=or.drag(t,nr(s,c,i,l));r.drag=u}),o=le({targets:t.props.targets,events:i},r);return t.rotation+=r.beforeDelta,Ke(t,"onRotateGroup",o),o}}},dragGroupControlEnd:function(t,e){var r=e.clientX,n=e.clientY,i=e.isDrag,o=e.datas;if(o.isRotate)return this.dragControlEnd(t,e),er(t,this,"dragControlEnd",e),Ke(t,"onRotateGroupEnd",{targets:t.props.targets,clientX:r,clientY:n,isDrag:i,datas:o.datas}),i}};function pr(t){return fr(t).concat(function(t){var e=t.props,r=e.resizable,n=e.scalable;if(!r&&!n)return[];var i=t.state,o=i.pos1,a=i.pos2,s=i.pos3,c=i.pos4;return[rt("div",{className:Oe("control","direction","n"),"data-direction":"n",key:"n",style:Fe(o,a)}),rt("div",{className:Oe("control","direction","w"),"data-direction":"w",key:"w",style:Fe(o,s)}),rt("div",{className:Oe("control","direction","e"),"data-direction":"e",key:"e",style:Fe(a,c)}),rt("div",{className:Oe("control","direction","s"),"data-direction":"s",key:"s",style:Fe(s,c)})]}(t))}function fr(t){var e=t.props,r=e.resizable,n=e.scalable,i=e.warpable;if(!r&&!n&&!i)return[];var o=t.state,a=o.pos1,s=o.pos2,c=o.pos3,u=o.pos4;return[rt("div",{className:Oe("control","direction","nw"),"data-direction":"nw",key:"nw",style:Fe(a)}),rt("div",{className:Oe("control","direction","ne"),"data-direction":"ne",key:"ne",style:Fe(s)}),rt("div",{className:Oe("control","direction","sw"),"data-direction":"sw",key:"sw",style:Fe(c)}),rt("div",{className:Oe("control","direction","se"),"data-direction":"se",key:"se",style:Fe(u)})]}var dr={name:"resizable",dragControlOnly:!0,updateRect:!0,canPinch:!0,render:function(t){var e=t.props,r=e.resizable,n=e.edge;if(r)return n?fr(t):pr(t)},dragControlCondition:ir,dragControlStart:function(t,e){var r=e.inputEvent.target,n=e.pinchFlag,i=n?[1,1]:Ue(r),o=t.state,a=o.target,s=o.width,c=o.height,u=e.clientX,l=e.clientY,p=e.datas;return!(!i||!a)&&(n||Qe(t,{datas:p}),p.datas={},p.direction=i,p.width=s,p.height=c,p.prevWidth=0,p.prevHeight=0,!1!==Ke(t,"onResizeStart",{datas:p.datas,target:a,clientX:u,clientY:l})&&(p.isResize=!0),p.isResize)},dragControl:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=e.distX,a=e.distY,s=e.pinchFlag,c=e.parentDistance,u=e.parentScale,l=r.direction,p=r.width,f=r.height,d=r.prevWidth,h=r.prevHeight;if(r.isResize){var v=t.props,g=v.keepRatio,m=v.throttleResize,b=void 0===m?0:m,y=v.parentMoveable,w=t.state.target,x=0,S=0;if(u)x=(u-1)*p,S=(u-1)*f;else if(s)c&&(S=(x=c)*f/p);else{var C=tr({datas:r,distX:o,distY:a});if(x=l[0]*C[0],S=l[1]*C[1],g&&l[0]&&l[1]&&p&&f){var _=Math.sqrt(x*x+S*S),D=ze([0,0],C),E=ze([0,0],l),M=Math.cos(D-E)*_;S=(x=M)*f/p}}var P=p+(x=Ve(x,b)),O=f+(S=Ve(S,b)),Y=[x-d,S-h];if(r.prevWidth=x,r.prevHeight=S,y||!Y.every(function(t){return!t})){var X={target:w,width:P,height:O,direction:l,dist:[x,S],datas:r.datas,delta:Y,clientX:n,clientY:i,isPinch:!!s};return Ke(t,"onResize",X),X}}},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag,i=e.clientX,o=e.clientY;return!!r.isResize&&(r.isResize=!1,Ke(t,"onResizeEnd",{target:t.state.target,datas:r.datas,clientX:i,clientY:o,isDrag:n}),n)},dragGroupControlCondition:ir,dragGroupControlStart:function(t,e){var r=e.clientX,n=e.clientY,i=e.datas,a=e.inputEvent,o=t.state,s=o.left,c=o.top;if(er(t,this,"dragControlStart",le({},e,{parentRotate:0}),function(t,e){var r=t.state,n=r.left,i=r.top,o=e.drag||(e.drag={});or.dragStart(t,nr(n-s,i-c,o,a))}).every(function(t){return!t}))return!1;this.dragControlStart(t,e);var u=Ke(t,"onResizeGroupStart",{targets:t.props.targets,clientX:r,clientY:n,datas:i.datas});return i.isResize=!1!==u,i.isResize},dragGroupControl:function(t,e){var c=e.inputEvent;if(e.datas.isResize){var r=this.dragControl(t,e);if(r){var n=r.width,i=r.height,o=r.dist,u=[n/(n-o[0]),i/(i-o[1])],a=er(t,this,"dragControl",le({},e,{parentScale:u}),function(t,e,r){var n=e.drag||(e.drag={}),i=rr(n),o=i.startX,a=i.startY,s=or.drag(t,nr(u[0]*o,u[1]*a,n,c));r.drag=s}),s=le({targets:t.props.targets,events:a},r);return Ke(t,"onResizeGroup",s),s}}},dragGroupControlEnd:function(t,e){var r=e.clientX,n=e.clientY,i=e.isDrag,o=e.datas;if(o.isResize)return this.dragControlEnd(t,e),er(t,this,"dragControlEnd",e),Ke(t,"onResizeGroupEnd",{targets:t.props.targets,clientX:r,clientY:n,isDrag:i,datas:o.datas}),i}},hr={name:"scalable",dragControlOnly:!0,canPinch:!0,render:function(t){var e=t.props,r=e.resizable,n=e.scalable,i=e.edge;if(!r&&n)return i?fr(t):pr(t)},dragControlCondition:ir,dragControlStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=e.pinchFlag,a=e.inputEvent.target,s=o?[1,1]:Ue(a),c=t.state,u=c.width,l=c.height,p=c.targetTransform,f=c.target;return!(!s||!f)&&(o||Qe(t,{datas:r}),r.datas={},r.transform=p,r.prevDist=[1,1],r.direction=s,r.width=u,r.height=l,!1!==Ke(t,"onScaleStart",{target:f,clientX:n,clientY:i,datas:r.datas})&&(r.isScale=!0),r.isScale)},dragControl:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=e.distX,a=e.distY,s=e.parentScale,c=e.parentDistance,u=e.pinchFlag,l=r.prevDist,p=r.direction,f=r.width,d=r.height,h=r.transform;if(!r.isScale)return!1;var v=t.props,g=v.keepRatio,m=v.throttleScale,b=v.parentMoveable,y=t.state.target,w=1,x=1;if(s)w=s[0],x=s[1];else if(u)c&&(w=(f+c)/f,x=(d+c*d/f)/d);else{var S=tr({datas:r,distX:o,distY:a}),C=p[0]*S[0],_=p[1]*S[1];if(g&&p[0]&&p[1]&&f&&d){var D=Math.sqrt(C*C+_*_),E=ze([0,0],S),M=ze([0,0],p),P=Math.cos(E-M)*D;_=(C=P)*d/f}w=(f+C)/f,x=(d+_)/d}w=Ve(w,m),x=Ve(x,m),0===w&&(w=(0<l[0]?1:-1)*Cr),0===x&&(x=(0<l[1]?1:-1)*Cr);var O=[w,x];if(r.prevDist=O,w===l[0]&&x===l[1]&&!b)return!1;var Y={target:y,scale:O,direction:p,dist:[w-1,x-1],delta:[w/l[0],x/l[1]],transform:h+" scale("+w+", "+x+")",clientX:n,clientY:i,datas:r.datas,isPinch:!!u};return Ke(t,"onScale",Y),Y},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag,i=e.clientX,o=e.clientY;e.pinchFlag;return!!r.isScale&&(r.isScale=!1,Ke(t,"onScaleEnd",{target:t.state.target,isDrag:n,clientX:i,clientY:o,datas:r.datas}),n)},dragGroupControlCondition:ir,dragGroupControlStart:function(t,e){var r=e.clientX,n=e.clientY,i=e.datas,s=e.inputEvent,o=t.state,a=o.left,c=o.top,u=o.origin,l=[a+u[0],c+u[1]];if(i.rotation=t.rotation,er(t,this,"dragControlStart",e,function(t,e){var r=t.state,n=r.left,i=r.top,o=r.origin,a=e.drag||(e.drag={});or.dragStart(t,nr(n+o[0]-l[0],i+o[1]-l[1],a,s))}).every(function(t){return!t}))return!1;this.dragControlStart(t,e);var p=Ke(t,"onScaleGroupStart",{targets:t.props.targets,clientX:r,clientY:n,datas:i.datas});return i.isScale=!1!==p,i.isScale},dragGroupControl:function(l,t){var p=t.inputEvent,f=t.datas;if(f.isScale){var e=this.dragControl(l,t);if(e){var d=e.scale,r=er(l,this,"dragControl",le({},t,{parentScale:d}),function(t,e,r){var n=e.drag||(e.drag={}),i=rr(n),o=Pe([i.startX,i.startY],-f.rotation),a=Pe([o[0]*d[0],o[1]*d[1]],l.rotation),s=a[0],c=a[1],u=or.drag(t,nr(s,c,n,p));r.drag=u}),n=le({targets:l.props.targets,events:r},e);return Ke(l,"onScaleGroup",n),n}}},dragGroupControlEnd:function(t,e){var r=e.clientX,n=e.clientY,i=e.isDrag,o=e.datas;if(o.isScale)return this.dragControlEnd(t,e),er(t,this,"dragControlEnd",e),Ke(t,"onScaleGroupEnd",{targets:t.props.targets,clientX:r,clientY:n,isDrag:i,datas:o.datas}),i}};function vr(t,r){return t.map(function(t,e){return function(t,e,r,n){return(t*n+e*r)/(r+n)}(t,r[e],1,2)})}function gr(t,e,r){var n=ze(t,e),i=ze(t,r)-n;return 0<=i?i:i+2*Math.PI}var mr={name:"warpable",dragControlOnly:!0,render:function(t){var e=t.props,r=e.resizable,n=e.scalable,i=e.warpable;if(!r&&!n&&i){var o=t.state,a=o.pos1,s=o.pos2,c=o.pos3,u=o.pos4,l=vr(a,s),p=vr(s,a),f=vr(a,c),d=vr(c,a),h=vr(c,u),v=vr(u,c),g=vr(s,u),m=vr(u,s);return[rt("div",{className:Oe("line"),key:"middeLine1",style:je(l,h)}),rt("div",{className:Oe("line"),key:"middeLine2",style:je(p,v)}),rt("div",{className:Oe("line"),key:"middeLine3",style:je(f,g)}),rt("div",{className:Oe("line"),key:"middeLine4",style:je(d,m)})].concat(fr(t))}},dragControlCondition:function(t){return Gt(t,Oe("direction"))},dragControlStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=e.inputEvent.target,a=t.props,s=a.target,c=a.onWarpStart,u=Ue(o);if(!u||!s)return!1;var l=t.state,p=l.transformOrigin,f=l.is3d,d=l.targetTransform,h=l.targetMatrix,v=l.width,g=l.height;n.datas={},n.targetTransform=d,n.targetMatrix=f?h:ye(h,3,4),n.targetInverseMatrix=function(t,e,r){void 0===r&&(r=Math.sqrt(t.length));for(var n=t.slice(),i=0;i<r;++i)n[i*r+e-1]=0,n[(e-1)*r+i]=0;return n[(e-1)*(r+1)]=1,n}(ge(n.targetMatrix,4),3,4),n.direction=u,Qe(t,{datas:n}),n.poses=[[0,0],[v,0],[0,g],[v,g]].map(function(t,e){return _e(t,p)}),n.nextPoses=n.poses.map(function(t){var e=t[0],r=t[1];return De(n.targetMatrix,[e,r,0,1],4)}),n.posNum=(-1===u[0]?0:1)+(-1===u[1]?0:2),n.prevMatrix=he(4);var m=c&&c({target:s,clientX:r,clientY:i,datas:n.datas});return!1!==m&&(n.isWarp=!0),m},dragControl:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=e.distX,a=e.distY,s=r.posNum,c=r.poses,u=r.targetInverseMatrix,l=r.prevMatrix;if(!r.isWarp)return!1;var p=t.props,f=p.target,d=p.onWarp,h=tr({datas:r,distX:o,distY:a},!0),v=r.nextPoses.slice();if(v[s]=[v[s][0]+h[0],v[s][1]+h[1]],!Sr.every(function(t){return function(t,e){var r=gr(t[0],t[1],t[2]),n=gr(e[0],e[1],e[2]),i=Math.PI;return!(i<=r&&n<=i||r<=i&&i<=n)}(t.map(function(t){return c[t]}),t.map(function(t){return v[t]}))}))return!1;var g=function(t,e,r,n,i,o,a,s){var c=t[0],u=t[1],l=e[0],p=e[1],f=r[0],d=r[1],h=n[0],v=n[1],g=i[0],m=i[1],b=o[0],y=o[1],w=a[0],x=a[1],S=s[0],C=s[1],_=ge([c,u,1,0,0,0,-g*c,-g*u,0,0,0,c,u,1,-m*c,-m*u,l,p,1,0,0,0,-b*l,-b*p,0,0,0,l,p,1,-y*l,-y*p,f,d,1,0,0,0,-w*f,-w*d,0,0,0,f,d,1,-x*f,-x*d,h,v,1,0,0,0,-S*h,-S*v,0,0,0,h,v,1,-C*h,-C*v],8);if(!_.length)return[];var D=xe(_,[g,m,b,y,w,x,S,C],8);return D[8]=1,ye(D,3,4)}(c[0],c[1],c[2],c[3],v[0],v[1],v[2],v[3]);if(!g.length)return!1;var m=Ee(xe(u,g,4)),b=r.targetTransform+" matrix3d("+m.join(",")+")",y=xe(ge(l,4),m,4);return r.prevMatrix=m,d&&d({target:f,clientX:n,clientY:i,delta:y,multiply:Se,dist:m,transform:b,datas:r.datas}),!0},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag,i=e.clientX,o=e.clientY;if(!r.isWarp)return!1;r.isWarp=!1;var a=t.props,s=a.target,c=a.onWarpEnd;return c&&c({target:s,clientX:i,clientY:o,isDrag:n,datas:r.datas}),n}},br=Ot(),yr=-1<br.os.name.indexOf("ios")||-1<br.browser.name.indexOf("safari"),wr="moveable-",xr=("\n{\n\tposition: fixed;\n\twidth: 0;\n\theight: 0;\n\tleft: 0;\n\ttop: 0;\n\tz-index: 3000;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n\ttop: 0;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    z-index: 10;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tbackground: #4af;\n\ttransform-origin: 0px 0.5px;\n}\n.line.rotation-line {\n\theight: 40px;\n\twidth: 1px;\n\ttransform-origin: 0.5px 39.5px;\n}\n.line.rotation-line .control {\n\tborder-color: #4af;\n\tbackground:#fff;\n\tcursor: alias;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n\tmargin-left: -6px;\n\tpointer-events: none;\n}\n.direction.e, .direction.w {\n\tcursor: ew-resize;\n}\n.direction.s, .direction.n {\n\tcursor: ns-resize;\n}\n.direction.nw, .direction.se, :host.reverse .direction.ne, :host.reverse .direction.sw {\n\tcursor: nwse-resize;\n}\n.direction.ne, .direction.sw, :host.reverse .direction.nw, :host.reverse .direction.se {\n\tcursor: nesw-resize;\n}\n.group {\n    z-index: -1;\n}\n"+(yr?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n").replace(/\.([^{,\s\d.]+)/g,"."+wr+"$1"),Sr=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Cr=1e-9,_r=[Je,or,lr,dr,hr,mr],Dr=Math.pow(10,10),Er=-Dr,Mr={name:"origin",render:function(t){if(!t.props.origin)return null;var e=t.state.beforeOrigin;return[rt("div",{className:Oe("control","origin"),style:Fe(e),key:"beforeOrigin"})]}};function Pr(n,t,i,o){var a={container:window};return["drag","pinch"].forEach(function(r){["Start","","End"].forEach(function(e){a[""+r+e.toLowerCase()]=function(t){return function(r,t,e,n,i,o){var a=""+e+n+i,s=""+e+n+"Condition",c="Start"===i,u=-1<n.indexOf("Group"),l=r[t].filter(function(t){var e=c&&t[s];return!(!t[a]||e&&!e(o.inputEvent.target))&&t[a](r,o)});!c&&l.length&&(l.some(function(t){return t.updateRect})&&!u?r.updateRect(i):r.updateTarget(i))}(n,i,r,o,e,t)}})}),new Jt(t,a)}var Or,Yr,Xr,Nr,Rr,kr=(Or="div",Nr="rCS"+function(t){return zt(t).toString(36)}(Yr=xr),Rr=0,function(e){function t(t){return e.call(this,t)||this}return function(t,e){function r(){this.constructor=t}Bt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(t,e),t.prototype.render=function(){var t=this.props,e=t.className,r=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}(t,["className"]);return rt(Or,Wt({className:e+" "+Nr},r))},t.prototype.componentDidMount=function(){0===Rr&&(Xr=function(r,t){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t.replace(/([^}{]*){/gm,function(t,e){return function(t){var e=t.match(/("[^"]*"|'[^']*'|[^,\s()]*\((?:[^()]*|\([^()]*\))*\)[^,\s()]*|[^,])+/g);return e?e.map(function(t){return t.trim()}):[]}(e).map(function(t){return-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?""+t.replace(/\:host/g,"."+r):"."+r+" "+t}).join(", ")+"{"}),(document.head||document.body).appendChild(e),e}(Nr,Yr)),++Rr},t.prototype.componentWillUnmount=function(){0==--Rr&&Xr&&Xr.parentNode.removeChild(Xr)},t.prototype.getElement=function(){return this.element||(this.element=function(t){return t&&(t.base||1===t.nodeType&&t)||null}(this))},t}(ht));function Gr(t,e,r){return rt("div",{className:Oe("line","direction",t),"data-direction":t,style:je(e,r)})}var Ar=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={target:null,beforeMatrix:Ye(),matrix:Ye(),targetMatrix:Ye(),targetTransform:"",is3d:!1,left:0,top:0,width:0,height:0,transformOrigin:[0,0],direction:1,beforeDirection:1,rotationRad:0,rotationPos:[0,0],beforeOrigin:[0,0],origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0]},t.targetAbles=[],t.controlAbles=[],t}ue(t,e);var r=t.prototype;return r.render=function(){this.update(!1);var t=this.props,e=t.edge,r=t.parentPosition||{left:0,top:0},n=r.left,i=r.top,o=this.state,a=o.left,s=o.top,c=o.pos1,u=o.pos2,l=o.pos3,p=o.pos4,f=o.target,d=o.direction;return rt(kr,{ref:h(this,"controlBox"),className:Oe("control-box",-1===d?"reverse":""),style:{position:"absolute",display:f?"block":"none",transform:"translate("+(a-n)+"px, "+(s-i)+"px) translateZ(50px)"}},this.renderAbles(),Gr(e?"n":"",c,u),Gr(e?"e":"",u,p),Gr(e?"w":"",c,l),Gr(e?"s":"",l,p))},r.componentDidMount=function(){this.controlBox.getElement(),this.update(!0)},r.componentWillUnmount=function(){qe(this,"targetDragger"),qe(this,"controlDragger")},r.getContainer=function(){var t=this.props,e=t.parentMoveable;return t.container||e&&e.getContainer()||this.controlBox.getElement().offsetParent},r.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(wr)},r.dragStart=function(t){this.targetDragger.onDragStart(t)},r.isInside=function(t,e){var r=this.state,n=r.pos1,i=r.pos2,o=r.pos3,a=r.pos4,s=r.target;if(!s)return!1;var c=s.getBoundingClientRect();return function(t,e,r,n,i){var o=[$e(t,e,r),$e(t,r,i),$e(t,i,e)],a=[$e(t,r,i),$e(t,i,n),$e(t,n,r)];return!!(o.every(function(t){return 0<=t})||o.every(function(t){return t<=0})||a.every(function(t){return 0<=t})||a.every(function(t){return t<=0}))}([t-c.left,e-c.top],n,i,o,a)},r.updateRect=function(t,e,r){void 0===r&&(r=!0);var n=this.props.parentMoveable,i=this.state,o=i.target||this.props.target;this.updateState(Le(o,this.getContainer(),e?i:void 0),!n&&r)},r.updateTarget=function(t){this.updateRect(t,!0)},r.update=function(t){var e=this.props,r=e.target,n=e.parentMoveable,i=this.state.target,o=this.controlBox;if(o&&(i||r)){this.updateAbles();var a=o.getElement(),s=this.targetAbles.length,c=this.controlAbles.length,u=i!==r;return u&&this.updateState({target:r}),s&&!u||qe(this,"targetDragger"),c||qe(this,"controlDragger"),r&&(!this.targetDragger&&s||u)&&(this.targetDragger=Pr(this,r,"targetAbles","")),!this.controlDragger&&c&&(this.controlDragger=Pr(this,a,"controlAbles","Control")),u&&!n&&this.updateRect("End",!1,t),u}},r.triggerEvent=function(t,e){var r=this.props[t];return r&&r(e)},r.updateAbles=function(){var e=this.props,t=e.ables.filter(function(t){return e[t.name]}),n=!1,r=t.filter(function(t){return t.dragStart||t.pinchStart}),i=t.filter(function(t){var e=t.dragControlStart,r=t.dragControlOnly;return!(!e||r&&n)&&(r&&(n=!0),!0)});this.targetAbles=r,this.controlAbles=i},r.updateState=function(t,e){if(e)this.setState(t);else{var r=this.state;for(var n in t)r[n]=t[n]}},r.renderAbles=function(){var r=this;return this.props.ables.concat([Mr]).map(function(t){var e=t.render;return e&&e(r)})},t.defaultProps={target:null,container:null,origin:!0,keepRatio:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[]},t}(vt),Tr={name:"groupable",render:function(r){var t=r.props.targets||[];r.moveables=[];var e=r.state,n={left:e.left,top:e.top};return t.map(function(t,e){return rt(Ar,{key:e,ref:function(e,r,n){return function(t){t&&(e[r][n]=t)}}(r,"moveables",e),target:t,origin:!1,parentMoveable:r,parentPosition:n})}).concat([rt("div",{key:"groupTarget",ref:h(r,"groupTargetElement"),className:Oe("group")})])}};function Br(t,o){return Math.max.apply(Math,t.map(function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.max(e[o],r[o],n[o],i[o])}))}function Wr(t,o){return Math.min.apply(Math,t.map(function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.min(e[o],r[o],n[o],i[o])}))}var zr=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.differ=new se,t.moveables=[],t.rotation=0,t}ue(t,r);var e=t.prototype;return e.componentDidMount=function(){r.prototype.componentDidMount.call(this)},e.componentDidUpdate=function(){this.update(!0)},e.update=function(t){if(t){var e=this.state;e.target||(e.target=this.groupTargetElement,this.controlBox.getElement().style.display="block",this.targetDragger=Pr(this,e.target,"targetAbles","Group"),this.controlDragger=Pr(this,this.controlBox.getElement(),"controlAbles","GroupControl")),this.updateAbles(),this.moveables.forEach(function(t){return t.update(!1)});var r=this.differ.update(this.props.targets),n=r.added,i=r.changed;return(n.length||i.length)&&this.updateRect(),!0}},e.updateRect=function(e,t,r){if(this.controlBox){this.moveables.forEach(function(t){t.updateRect(e,!1,!1)});var n=this.state,i=n.target||this.props.target;(!t||""!==e&&this.props.updateGroup)&&(this.rotation=0);var o=this.rotation,a=function(t,o){if(!t.length)return[0,0,0,0];var e=t.map(function(t){var e=t.state,r=e.left,n=e.top,i=e.pos1,o=e.pos2,a=e.pos3,s=e.pos4,c=[r,n];return[Ce(c,i),Ce(c,o),Ce(c,a),Ce(c,s)]}),i=Dr,a=Dr,r=0,n=0;if(o%90){var s=o/180*Math.PI,c=Math.tan(s),u=-1/c,l=[Er,Dr],p=[Er,Dr];e.forEach(function(t){t.forEach(function(t){var e=t[1]-c*t[0],r=t[1]-u*t[0];l[0]=Math.max(l[0],e),l[1]=Math.min(l[1],e),p[0]=Math.max(p[0],r),p[1]=Math.min(p[1],r)})}),l.forEach(function(n){p.forEach(function(t){var e=(t-n)/(c-u),r=c*e+n;i=Math.min(i,e),a=Math.min(a,r)})});var f=e.map(function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return[Pe(e,-o),Pe(r,-o),Pe(n,-o),Pe(i,-o)]});r=Br(f,0)-Wr(f,0),n=Br(f,1)-Wr(f,1)}else i=Wr(e,0),a=Wr(e,1),r=Br(e,0)-i,n=Br(e,1)-a;return[i,a,r,n]}(this.moveables,o),s=a[0],c=a[1],u=a[2],l=a[3];i.style.cssText+="width:"+u+"px; height:"+l+"px;transform:rotate("+o+"deg)",n.width=u,n.height=l;var p=Le(i,this.controlBox.getElement(),n);i.style.cssText+="transform: translate("+-p.left+"px, "+-p.top+"px) rotate("+o+"deg)",this.updateState(le({},p,{left:s,top:c}),!0)}},e.triggerEvent=function(t,e){if(-1<t.indexOf("Group"))return r.prototype.triggerEvent.call(this,t,e)},e.renderAbles=function(){var r=this;return this.props.ables.concat([Tr,Mr]).map(function(t){var e=t.render;return e&&e(r)})},t.defaultProps=le({},Ar.defaultProps,{groupable:!0,ables:_r,targets:[]}),t}(Ar),jr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ue(e,t);var r=e.prototype;return r.render=function(){var t=this.props.target||this.props.targets,e=kt(t);if(e&&1<t.length)return rt(zr,le({key:"group",ref:h(this,"moveable")},le({},this.props,{target:null,targets:t})));var r=e?t[0]:t;return rt(Ar,le({key:"single",ref:h(this,"moveable")},le({},this.props,{target:r})))},r.isMoveableElement=function(t){return this.moveable.isMoveableElement(t)},r.dragStart=function(t){this.moveable.dragStart(t)},r.isInside=function(t,e){return this.moveable.isInside(t,e)},r.updateRect=function(){this.moveable.updateRect()},r.updateTarget=function(){this.moveable.updateTarget()},e.defaultProps=le({},Ar.defaultProps,{ables:_r}),e}(vt),Fr=function(r){function t(t){var e=r.call(this,t)||this;return e.state={},e.state=e.props,e}return i(t,r),t.prototype.render=function(){return d(jr,c({ref:h(this,"preactMoveable")},this.state))},t}(_),Ir=["draggable","resizable","scalable","rotatable","warpable","pinchable","origin","target","edge","throttleDrag","throttleResize","throttleScale","throttleRotate","keepRatio"],Lr=["dragStart","drag","dragEnd","resizeStart","resize","resizeEnd","scaleStart","scale","scaleEnd","rotateStart","rotate","rotateEnd","warpStart","warp","warpEnd","pinchStart","pinch","pinchEnd","dragGroupStart","dragGroup","dragGroupEnd","resizeGroupStart","resizeGroup","resizeGroupEnd","scaleGroupStart","scaleGroup","scaleGroupEnd","rotateGroupStart","rotateGroup","rotateGroupEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],Ur=function(s){function t(t,e){void 0===e&&(e={});var r=s.call(this)||this,n=document.createElement("div"),i=c({container:t},e),o={};Lr.forEach(function(e){o[function(t){return t.replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})}("on "+e)]=function(t){return r.trigger(e,t)}}),function(t,e,r){N(r,t,{},!1,e,!1)}(d(Fr,c({ref:h(r,"innerMoveable")},i,o)),n),t.appendChild(n.children[0]);var a=i.target;return kt(a)&&1<a.length&&r.updateRect(),r}i(t,s);var e=t.prototype;return e.isMoveableElement=function(t){return this.getMoveable().isMoveableElement(t)},e.updateRect=function(){this.getMoveable().updateRect()},e.updateTarget=function(){this.getMoveable().updateTarget()},e.destroy=function(){var t=this.getMoveable().base;t.remove?t.remove():t.parentElement.removeChild(t),this.off(),this.getMoveable().componentWillUnmount(),this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.preactMoveable},t=function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,r,a):i(e,r))||a);return 3<o&&a&&Object.defineProperty(e,r,a),a}([function(r,n){return function(t){var e=t.prototype;r.forEach(function(t){n(e,t)})}}(Ir,function(t,r){Object.defineProperty(t,r,{get:function(){return this.getMoveable().props[r]},set:function(t){var e;this.innerMoveable.setState(((e={})[r]=t,e))},enumerable:!0,configurable:!0})})],t)}(t);return Ur.PROPERTIES=Ir,Ur.EVENTS=Lr,Ur});
//# sourceMappingURL=moveable.min.js.map
